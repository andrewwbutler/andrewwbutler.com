import{S as de,i as me,s as ge,F as Ye,k as I,q as W,a as U,l as D,m as z,r as H,h as k,c as Q,n as E,L as Ae,b as L,J as T,M as pe,u as Ne,G as Ze,H as Je,I as Xe,f as O,t as G,N as wr,O as Hr,g as qe,d as Pe,P as Ce,B as ce,w as j,x as ee,y as ne,z as te,Q as et,R as Al,E as Il,T as kr,K as V,U as Dl,V as Ll,W as Cl,X as nt,Y as Ol,Z as Vl,_ as Wl,$ as xn,D as jt,e as _e,a0 as Ie,a1 as Er,o as Hl,a2 as X,a3 as Bl,p as ae,a4 as Gl,a5 as Zt,a6 as ye,a7 as be,a8 as er,a9 as el,aa as Fl,ab as Jt}from"../../chunks/index-47ab0e14.js";import{w as Y,d as oe}from"../../chunks/index-3e9cde21.js";function Ul(i){let t,o,e,l,a,d,g,m;const u=i[4].default,n=Ye(u,i,i[3],null);return{c(){t=I("div"),o=I("div"),e=W(i[2]),l=U(),a=I("button"),n&&n.c(),this.h()},l(r){t=D(r,"DIV",{class:!0});var f=z(t);o=D(f,"DIV",{class:!0});var s=z(o);e=H(s,i[2]),s.forEach(k),l=Q(f),a=D(f,"BUTTON",{class:!0});var c=z(a);n&&n.l(c),c.forEach(k),f.forEach(k),this.h()},h(){E(o,"class","letter-label svelte-180z40v"),E(a,"class","svelte-180z40v"),Ae(a,"selected",i[0]),Ae(a,"added",i[1]),E(t,"class","button-row")},m(r,f){L(r,t,f),T(t,o),T(o,e),T(t,l),T(t,a),n&&n.m(a,null),d=!0,g||(m=pe(a,"click",i[5]),g=!0)},p(r,[f]){(!d||f&4)&&Ne(e,r[2]),n&&n.p&&(!d||f&8)&&Ze(n,u,r,r[3],d?Xe(u,r[3],f,null):Je(r[3]),null),(!d||f&1)&&Ae(a,"selected",r[0]),(!d||f&2)&&Ae(a,"added",r[1])},i(r){d||(O(n,r),d=!0)},o(r){G(n,r),d=!1},d(r){r&&k(t),n&&n.d(r),g=!1,m()}}}function Ql(i,t,o){let{$$slots:e={},$$scope:l}=t,{selected:a=!1}=t,{added:d=!1}=t,{rowLetter:g=""}=t;function m(u){wr.call(this,i,u)}return i.$$set=u=>{"selected"in u&&o(0,a=u.selected),"added"in u&&o(1,d=u.added),"rowLetter"in u&&o(2,g=u.rowLetter),"$$scope"in u&&o(3,l=u.$$scope)},[a,d,g,l,e,m]}class Kl extends de{constructor(t){super(),me(this,t,Ql,Ul,ge,{selected:0,added:1,rowLetter:2})}}function Yl(i){let t,o,e,l,a;const d=i[2].default,g=Ye(d,i,i[1],null);return{c(){t=I("div"),o=I("div"),e=W(i[0]),l=U(),g&&g.c(),this.h()},l(m){t=D(m,"DIV",{class:!0});var u=z(t);o=D(u,"DIV",{class:!0});var n=z(o);e=H(n,i[0]),n.forEach(k),l=Q(u),g&&g.l(u),u.forEach(k),this.h()},h(){E(o,"class","title text-xl text-center"),E(t,"class","card shadow-lg min-w-min svelte-qzs6n9")},m(m,u){L(m,t,u),T(t,o),T(o,e),T(t,l),g&&g.m(t,null),a=!0},p(m,[u]){(!a||u&1)&&Ne(e,m[0]),g&&g.p&&(!a||u&2)&&Ze(g,d,m,m[1],a?Xe(d,m[1],u,null):Je(m[1]),null)},i(m){a||(O(g,m),a=!0)},o(m){G(g,m),a=!1},d(m){m&&k(t),g&&g.d(m)}}}function Zl(i,t,o){let{$$slots:e={},$$scope:l}=t,{cardTitle:a}=t;return i.$$set=d=>{"cardTitle"in d&&o(0,a=d.cardTitle),"$$scope"in d&&o(1,l=d.$$scope)},[a,l,e]}class Jl extends de{constructor(t){super(),me(this,t,Zl,Yl,ge,{cardTitle:0})}}function Xl(i){let t,o,e,l,a;const d=i[3].default,g=Ye(d,i,i[2],null);return{c(){t=I("button"),g&&g.c(),this.h()},l(m){t=D(m,"BUTTON",{class:!0});var u=z(t);g&&g.l(u),u.forEach(k),this.h()},h(){E(t,"class",o=Hr(i[0])+" svelte-1x31uai"),Ae(t,"flat",i[1])},m(m,u){L(m,t,u),g&&g.m(t,null),e=!0,l||(a=pe(t,"click",i[4]),l=!0)},p(m,[u]){g&&g.p&&(!e||u&4)&&Ze(g,d,m,m[2],e?Xe(d,m[2],u,null):Je(m[2]),null),(!e||u&1&&o!==(o=Hr(m[0])+" svelte-1x31uai"))&&E(t,"class",o),(!e||u&3)&&Ae(t,"flat",m[1])},i(m){e||(O(g,m),e=!0)},o(m){G(g,m),e=!1},d(m){m&&k(t),g&&g.d(m),l=!1,a()}}}function Ml(i,t,o){let{$$slots:e={},$$scope:l}=t,{type:a="primary"}=t,{flat:d=!0}=t;function g(m){wr.call(this,i,m)}return i.$$set=m=>{"type"in m&&o(0,a=m.type),"flat"in m&&o(1,d=m.flat),"$$scope"in m&&o(2,l=m.$$scope)},[a,d,l,e,g]}class Rn extends de{constructor(t){super(),me(this,t,Ml,Xl,ge,{type:0,flat:1})}}const Xn=i=>{let t=Array(12).fill(-1),o=Array.from({length:12},(e,l)=>l+1);return{id:i,name:"Plate "+i,maxWell:t,colNames:o,added:!1}},Oe=Y([Xn(1)]),dr=Y(1),en=Y(-1),tn=[Xn(3),Xn(2),Xn(1)];tn[1].maxWell=[-1,4,4,3,4,3,5,6,5,5,6,-1];tn[1].colNames=["Neg"].concat(Array(5).fill("A"),Array(5).fill("B"),["Neg"]);tn[1].added=!0;tn[2].maxWell=[-1,2,2,2,3,2,4,4,4,5,4,-1];tn[2].colNames=["Neg"].concat(Array(5).fill("C"),Array(5).fill("D"),["Neg"]);tn[2].added=!0;function Br(i,t,o){const e=i.slice();return e[6]=t[o],e[8]=o,e}function Gr(i,t,o){const e=i.slice();return e[9]=t[o],e[11]=o,e}function Fr(i,t,o){const e=i.slice();return e[12]=t[o],e}function Ur(i){let t,o=i[12]+"",e;return{c(){t=I("td"),e=W(o),this.h()},l(l){t=D(l,"TD",{class:!0});var a=z(t);e=H(a,o),a.forEach(k),this.h()},h(){E(t,"class","svelte-1oiezpb")},m(l,a){L(l,t,a),T(t,e)},p:ce,d(l){l&&k(t)}}}function Qr(i){let t,o,e;function l(){return i[4](i[11],i[8])}return o=new Kl({props:{selected:i[8]<=i[9],added:i[0].added}}),o.$on("click",l),{c(){t=I("td"),j(o.$$.fragment),this.h()},l(a){t=D(a,"TD",{class:!0});var d=z(t);ee(o.$$.fragment,d),d.forEach(k),this.h()},h(){E(t,"class","svelte-1oiezpb")},m(a,d){L(a,t,d),ne(o,t,null),e=!0},p(a,d){i=a;const g={};d&1&&(g.selected=i[8]<=i[9]),d&1&&(g.added=i[0].added),o.$set(g)},i(a){e||(O(o.$$.fragment,a),e=!0)},o(a){G(o.$$.fragment,a),e=!1},d(a){a&&k(t),te(o)}}}function Kr(i){let t,o,e=i[6]+"",l,a,d,g,m=i[0].maxWell,u=[];for(let r=0;r<m.length;r+=1)u[r]=Qr(Gr(i,m,r));const n=r=>G(u[r],1,1,()=>{u[r]=null});return{c(){t=I("tr"),o=I("td"),l=W(e),a=U();for(let r=0;r<u.length;r+=1)u[r].c();d=U(),this.h()},l(r){t=D(r,"TR",{});var f=z(t);o=D(f,"TD",{class:!0});var s=z(o);l=H(s,e),s.forEach(k),a=Q(f);for(let c=0;c<u.length;c+=1)u[c].l(f);d=Q(f),f.forEach(k),this.h()},h(){E(o,"class","svelte-1oiezpb")},m(r,f){L(r,t,f),T(t,o),T(o,l),T(t,a);for(let s=0;s<u.length;s+=1)u[s].m(t,null);T(t,d),g=!0},p(r,f){if(f&9){m=r[0].maxWell;let s;for(s=0;s<m.length;s+=1){const c=Gr(r,m,s);u[s]?(u[s].p(c,f),O(u[s],1)):(u[s]=Qr(c),u[s].c(),O(u[s],1),u[s].m(t,d))}for(qe(),s=m.length;s<u.length;s+=1)n(s);Pe()}},i(r){if(!g){for(let f=0;f<m.length;f+=1)O(u[f]);g=!0}},o(r){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)G(u[f]);g=!1},d(r){r&&k(t),Ce(u,r)}}}function Sl(i){let t,o,e,l,a,d,g=i[2],m=[];for(let f=0;f<g.length;f+=1)m[f]=Ur(Fr(i,g,f));let u=i[1],n=[];for(let f=0;f<u.length;f+=1)n[f]=Kr(Br(i,u,f));const r=f=>G(n[f],1,1,()=>{n[f]=null});return{c(){t=I("table"),o=I("tr"),e=I("td"),l=U();for(let f=0;f<m.length;f+=1)m[f].c();a=U();for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){t=D(f,"TABLE",{class:!0});var s=z(t);o=D(s,"TR",{});var c=z(o);e=D(c,"TD",{class:!0}),z(e).forEach(k),l=Q(c);for(let h=0;h<m.length;h+=1)m[h].l(c);c.forEach(k),a=Q(s);for(let h=0;h<n.length;h+=1)n[h].l(s);s.forEach(k),this.h()},h(){E(e,"class","svelte-1oiezpb"),E(t,"class","svelte-1oiezpb")},m(f,s){L(f,t,s),T(t,o),T(o,e),T(o,l);for(let c=0;c<m.length;c+=1)m[c].m(o,null);T(t,a);for(let c=0;c<n.length;c+=1)n[c].m(t,null);d=!0},p(f,[s]){if(s&4){g=f[2];let c;for(c=0;c<g.length;c+=1){const h=Fr(f,g,c);m[c]?m[c].p(h,s):(m[c]=Ur(h),m[c].c(),m[c].m(o,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=g.length}if(s&11){u=f[1];let c;for(c=0;c<u.length;c+=1){const h=Br(f,u,c);n[c]?(n[c].p(h,s),O(n[c],1)):(n[c]=Kr(h),n[c].c(),O(n[c],1),n[c].m(t,null))}for(qe(),c=u.length;c<n.length;c+=1)r(c);Pe()}},i(f){if(!d){for(let s=0;s<u.length;s+=1)O(n[s]);d=!0}},o(f){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)G(n[s]);d=!1},d(f){f&&k(t),Ce(m,f),Ce(n,f)}}}function $l(i,t,o){let{plate:e}=t;e.maxWell.length;let l=["A","B","C","D","E","F","G","H"],a=Array.from({length:12},(m,u)=>u+1);const d=(m,u,n)=>{e.added||(e.maxWell[u]==n?o(0,e.maxWell[u]=-1,e):o(0,e.maxWell[u]=n,e),Oe.update(r=>{let f=[...r];return f.find(s=>s.id===m),f}))},g=(m,u)=>d(e.id,m,u);return i.$$set=m=>{"plate"in m&&o(0,e=m.plate)},[e,l,a,d,g]}class xr extends de{constructor(t){super(),me(this,t,$l,Sl,ge,{plate:0})}}function jl(i){let t;return{c(){t=W("Delete")},l(o){t=H(o,"Delete")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function eo(i){let t;return{c(){t=W("Edit")},l(o){t=H(o,"Edit")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function no(i){let t,o,e,l,a,d,g,m,u;return t=new xr({props:{plate:i[0]}}),a=new Rn({props:{type:"primary",$$slots:{default:[jl]},$$scope:{ctx:i}}}),a.$on("click",i[3]),m=new Rn({props:{type:"secondary",$$slots:{default:[eo]},$$scope:{ctx:i}}}),m.$on("click",i[4]),{c(){j(t.$$.fragment),o=U(),e=I("div"),l=I("div"),j(a.$$.fragment),d=U(),g=I("div"),j(m.$$.fragment),this.h()},l(n){ee(t.$$.fragment,n),o=Q(n),e=D(n,"DIV",{class:!0});var r=z(e);l=D(r,"DIV",{class:!0});var f=z(l);ee(a.$$.fragment,f),f.forEach(k),d=Q(r),g=D(r,"DIV",{class:!0});var s=z(g);ee(m.$$.fragment,s),s.forEach(k),r.forEach(k),this.h()},h(){E(l,"class","absolute bottom-0 right-0"),E(g,"class","absolute bottom-0 left-0"),E(e,"class","button-footer relative svelte-x2uown")},m(n,r){ne(t,n,r),L(n,o,r),L(n,e,r),T(e,l),ne(a,l,null),T(e,d),T(e,g),ne(m,g,null),u=!0},p(n,r){const f={};r&1&&(f.plate=n[0]),t.$set(f);const s={};r&64&&(s.$$scope={dirty:r,ctx:n}),a.$set(s);const c={};r&64&&(c.$$scope={dirty:r,ctx:n}),m.$set(c)},i(n){u||(O(t.$$.fragment,n),O(a.$$.fragment,n),O(m.$$.fragment,n),u=!0)},o(n){G(t.$$.fragment,n),G(a.$$.fragment,n),G(m.$$.fragment,n),u=!1},d(n){te(t,n),n&&k(o),n&&k(e),te(a),te(m)}}}function to(i){let t,o;return t=new Jl({props:{cardTitle:i[0].name,$$slots:{default:[no]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p(e,[l]){const a={};l&1&&(a.cardTitle=e[0].name),l&65&&(a.$$scope={dirty:l,ctx:e}),t.$set(a)},i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function ro(i,t,o){let{plate:e}=t,l=et();const a=u=>{Oe.update(n=>n.filter(r=>r.id!=u))},d=u=>{en.set(u.id),l("edit",{plate:u})},g=()=>a(e.id),m=()=>d(e);return i.$$set=u=>{"plate"in u&&o(0,e=u.plate)},[e,a,d,g,m]}class io extends de{constructor(t){super(),me(this,t,ro,to,ge,{plate:0})}}function nl(i){const t=i-1;return t*t*t+1}function lo(i,{delay:t=0,duration:o=400,easing:e=Al}={}){const l=+getComputedStyle(i).opacity;return{delay:t,duration:o,easing:e,css:a=>`opacity: ${a*l}`}}function oo(i,{delay:t=0,duration:o=400,easing:e=nl,start:l=0,opacity:a=0}={}){const d=getComputedStyle(i),g=+d.opacity,m=d.transform==="none"?"":d.transform,u=1-l,n=g*(1-a);return{delay:t,duration:o,easing:e,css:(r,f)=>`
			transform: ${m} scale(${1-u*f});
			opacity: ${g-n*f}
		`}}function fo(i,{from:t,to:o},e={}){const l=getComputedStyle(i),a=l.transform==="none"?"":l.transform,[d,g]=l.transformOrigin.split(" ").map(parseFloat),m=t.left+t.width*d/o.width-(o.left+d),u=t.top+t.height*g/o.height-(o.top+g),{delay:n=0,duration:r=s=>Math.sqrt(s)*120,easing:f=nl}=e;return{delay:n,duration:Il(r)?r(Math.sqrt(m*m+u*u)):r,easing:f,css:(s,c)=>{const h=c*m,v=c*u,p=s+c*t.width/o.width,y=s+c*t.height/o.height;return`transform: ${a} translate(${h}px, ${v}px) scale(${p}, ${y});`}}}function Yr(i,t,o){const e=i.slice();return e[6]=t[o],e}function Zr(i){let t,o;return t=new io({props:{plate:i[6]}}),t.$on("edit",i[4]),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p(e,l){const a={};l&1&&(a.plate=e[6]),t.$set(a)},i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Jr(i,t){let o,e,l,a,d,g=ce,m,u=t[6].added&&Zr(t);return{key:i,first:null,c(){o=I("div"),u&&u.c(),e=U(),this.h()},l(n){o=D(n,"DIV",{});var r=z(o);u&&u.l(r),e=Q(r),r.forEach(k),this.h()},h(){this.first=o},m(n,r){L(n,o,r),u&&u.m(o,null),T(o,e),m=!0},p(n,r){t=n,t[6].added?u?(u.p(t,r),r&1&&O(u,1)):(u=Zr(t),u.c(),O(u,1),u.m(o,e)):u&&(qe(),G(u,1,1,()=>{u=null}),Pe())},r(){d=o.getBoundingClientRect()},f(){Dl(o),g(),Ll(o,d)},a(){g(),g=Cl(o,d,fo,{duration:500})},i(n){m||(O(u),nt(()=>{a&&a.end(1),l=Ol(o,lo,{}),l.start()}),m=!0)},o(n){G(u),l&&l.invalidate(),n&&(a=Vl(o,oo,{})),m=!1},d(n){n&&k(o),u&&u.d(),n&&a&&a.end()}}}function Xr(i){let t,o,e,l,a,d,g;return d=new Rn({props:{type:"secondary",$$slots:{default:[uo]},$$scope:{ctx:i}}}),d.$on("click",i[5]),{c(){t=I("p"),o=W("Please add a plate to continue"),e=U(),l=I("br"),a=U(),j(d.$$.fragment)},l(m){t=D(m,"P",{});var u=z(t);o=H(u,"Please add a plate to continue"),u.forEach(k),e=Q(m),l=D(m,"BR",{}),a=Q(m),ee(d.$$.fragment,m)},m(m,u){L(m,t,u),T(t,o),L(m,e,u),L(m,l,u),L(m,a,u),ne(d,m,u),g=!0},p(m,u){const n={};u&512&&(n.$$scope={dirty:u,ctx:m}),d.$set(n)},i(m){g||(O(d.$$.fragment,m),g=!0)},o(m){G(d.$$.fragment,m),g=!1},d(m){m&&k(t),m&&k(e),m&&k(l),m&&k(a),te(d,m)}}}function uo(i){let t;return{c(){t=W("Load Demo data")},l(o){t=H(o,"Load Demo data")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function so(i){let t,o,e=[],l=new Map,a,d,g,m=i[0];const u=r=>r[6].id;for(let r=0;r<m.length;r+=1){let f=Yr(i,m,r),s=u(f);l.set(s,e[r]=Jr(s,f))}let n=i[1]&&Xr(i);return{c(){t=I("div"),o=I("div");for(let r=0;r<e.length;r+=1)e[r].c();a=U(),d=I("div"),n&&n.c(),this.h()},l(r){t=D(r,"DIV",{class:!0});var f=z(t);o=D(f,"DIV",{class:!0});var s=z(o);for(let h=0;h<e.length;h+=1)e[h].l(s);s.forEach(k),a=Q(f),d=D(f,"DIV",{class:!0});var c=z(d);n&&n.l(c),c.forEach(k),f.forEach(k),this.h()},h(){E(o,"class","grid 1plate:grid-cols-1 2plate:grid-cols-2 3plate:grid-cols-3 gap-2"),E(d,"class","emptyMessage svelte-1gvfhfz"),E(t,"class","container svelte-1gvfhfz")},m(r,f){L(r,t,f),T(t,o);for(let s=0;s<e.length;s+=1)e[s].m(o,null);T(t,a),T(t,d),n&&n.m(d,null),g=!0},p(r,[f]){if(f&1){m=r[0],qe();for(let s=0;s<e.length;s+=1)e[s].r();e=kr(e,f,u,1,r,m,l,o,Wl,Jr,null,Yr);for(let s=0;s<e.length;s+=1)e[s].a();Pe()}r[1]?n?(n.p(r,f),f&2&&O(n,1)):(n=Xr(r),n.c(),O(n,1),n.m(d,null)):n&&(qe(),G(n,1,1,()=>{n=null}),Pe())},i(r){if(!g){for(let f=0;f<m.length;f+=1)O(e[f]);O(n),g=!0}},o(r){for(let f=0;f<e.length;f+=1)G(e[f]);G(n),g=!1},d(r){r&&k(t);for(let f=0;f<e.length;f+=1)e[f].d();n&&n.d()}}}function ao(i,t,o){let e,l,a;V(i,Oe,u=>o(3,a=u));const d=()=>{Oe.set(tn),dr.set(3)};function g(u){wr.call(this,i,u)}const m=()=>d();return i.$$.update=()=>{i.$$.dirty&8&&o(1,e=a.length==1),i.$$.dirty&8&&o(0,l=a.slice(1).reverse())},[l,e,d,a,g,m]}class co extends de{constructor(t){super(),me(this,t,ao,so,ge,{})}}function Mr(i,t,o){const e=i.slice();return e[4]=t[o],e}function Sr(i){let t,o,e=i[4]+"",l,a,d,g;function m(){return i[3](i[4])}return{c(){t=I("li"),o=I("div"),l=W(e),a=U(),this.h()},l(u){t=D(u,"LI",{class:!0});var n=z(t);o=D(n,"DIV",{class:!0});var r=z(o);l=H(r,e),r.forEach(k),a=Q(n),n.forEach(k),this.h()},h(){E(o,"class","svelte-aio21l"),Ae(o,"active",i[4]===i[1]),E(t,"class","svelte-aio21l")},m(u,n){L(u,t,n),T(t,o),T(o,l),T(t,a),d||(g=pe(t,"click",m),d=!0)},p(u,n){i=u,n&1&&e!==(e=i[4]+"")&&Ne(l,e),n&3&&Ae(o,"active",i[4]===i[1])},d(u){u&&k(t),d=!1,g()}}}function mo(i){let t,o,e=i[0],l=[];for(let a=0;a<e.length;a+=1)l[a]=Sr(Mr(i,e,a));return{c(){t=I("div"),o=I("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){t=D(a,"DIV",{class:!0});var d=z(t);o=D(d,"UL",{class:!0});var g=z(o);for(let m=0;m<l.length;m+=1)l[m].l(g);g.forEach(k),d.forEach(k),this.h()},h(){E(o,"class","svelte-aio21l"),E(t,"class","tabs svelte-aio21l")},m(a,d){L(a,t,d),T(t,o);for(let g=0;g<l.length;g+=1)l[g].m(o,null)},p(a,[d]){if(d&7){e=a[0];let g;for(g=0;g<e.length;g+=1){const m=Mr(a,e,g);l[g]?l[g].p(m,d):(l[g]=Sr(m),l[g].c(),l[g].m(o,null))}for(;g<l.length;g+=1)l[g].d(1);l.length=e.length}},i:ce,o:ce,d(a){a&&k(t),Ce(l,a)}}}function go(i,t,o){let{items:e}=t,{activeItem:l}=t;const a=et(),d=g=>a("tabChange",{currentTab:l,newTab:g});return i.$$set=g=>{"items"in g&&o(0,e=g.items),"activeItem"in g&&o(1,l=g.activeItem)},[e,l,a,d]}class ho extends de{constructor(t){super(),me(this,t,go,mo,ge,{items:0,activeItem:1})}}function $r(i,t,o){const e=i.slice();return e[7]=t[o],e[8]=t,e[9]=o,e}function jr(i,t,o){const e=i.slice();return e[0]=t[o],e}function ei(i){let t,o=i[0].name+"",e,l;return{c(){t=I("option"),e=W(o),this.h()},l(a){t=D(a,"OPTION",{});var d=z(t);e=H(d,o),d.forEach(k),this.h()},h(){t.__value=l=i[0].name,t.value=t.__value},m(a,d){L(a,t,d),T(t,e)},p(a,d){d&4&&o!==(o=a[0].name+"")&&Ne(e,o),d&4&&l!==(l=a[0].name)&&(t.__value=l,t.value=t.__value)},d(a){a&&k(t)}}}function ni(i){let t,o=i[0].added===!0&&ei(i);return{c(){o&&o.c(),t=_e()},l(e){o&&o.l(e),t=_e()},m(e,l){o&&o.m(e,l),L(e,t,l)},p(e,l){e[0].added===!0?o?o.p(e,l):(o=ei(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&k(t)}}}function ti(i){let t,o,e,l=i[9]+1+"",a,d,g,m,u,n,r;function f(){i[6].call(m,i[8],i[9])}return{c(){t=I("form"),o=I("label"),e=W("Column "),a=W(l),d=W(" Sample Name:"),g=U(),m=I("input"),u=U(),this.h()},l(s){t=D(s,"FORM",{});var c=z(t);o=D(c,"LABEL",{for:!0});var h=z(o);e=H(h,"Column "),a=H(h,l),d=H(h," Sample Name:"),h.forEach(k),g=Q(c),m=D(c,"INPUT",{class:!0,id:!0,type:!0}),u=Q(c),c.forEach(k),this.h()},h(){E(o,"for","question"),E(m,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white colinput svelte-5rwbji"),E(m,"id","question"),E(m,"type","text")},m(s,c){L(s,t,c),T(t,o),T(o,e),T(o,a),T(o,d),T(t,g),T(t,m),Ie(m,i[7]),T(t,u),n||(r=pe(m,"input",f),n=!0)},p(s,c){i=s,c&1&&m.value!==i[7]&&Ie(m,i[7])},d(s){s&&k(t),n=!1,r()}}}function vo(i){let t,o,e,l,a,d,g,m,u=i[2],n=[];for(let s=0;s<u.length;s+=1)n[s]=ni(jr(i,u,s));let r=i[0].colNames,f=[];for(let s=0;s<r.length;s+=1)f[s]=ti($r(i,r,s));return{c(){t=I("div"),o=W(`Copy column labels of exiting plate:
	`),e=I("select"),l=I("option");for(let s=0;s<n.length;s+=1)n[s].c();a=U(),d=I("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){t=D(s,"DIV",{class:!0});var c=z(t);o=H(c,`Copy column labels of exiting plate:
	`),e=D(c,"SELECT",{class:!0,name:!0,id:!0});var h=z(e);l=D(h,"OPTION",{});var v=z(l);v.forEach(k);for(let y=0;y<n.length;y+=1)n[y].l(h);h.forEach(k),c.forEach(k),a=Q(s),d=D(s,"DIV",{class:!0});var p=z(d);for(let y=0;y<f.length;y+=1)f[y].l(p);p.forEach(k),this.h()},h(){l.__value="none",l.value=l.__value,l.selected=!0,l.disabled=!0,l.hidden=!0,E(e,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"name","plates"),E(e,"id","plates"),i[1]===void 0&&nt(()=>i[4].call(e)),E(t,"class","CopySelect svelte-5rwbji"),E(d,"class","grid 1form:grid-cols-1 2form:grid-cols-2 3form:grid-cols-3 gap-x-8 gap-y-4")},m(s,c){L(s,t,c),T(t,o),T(t,e),T(e,l);for(let h=0;h<n.length;h+=1)n[h].m(e,null);xn(e,i[1]),L(s,a,c),L(s,d,c);for(let h=0;h<f.length;h+=1)f[h].m(d,null);g||(m=[pe(e,"change",i[4]),pe(e,"change",i[5])],g=!0)},p(s,[c]){if(c&4){u=s[2];let h;for(h=0;h<u.length;h+=1){const v=jr(s,u,h);n[h]?n[h].p(v,c):(n[h]=ni(v),n[h].c(),n[h].m(e,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=u.length}if(c&6&&xn(e,s[1]),c&1){r=s[0].colNames;let h;for(h=0;h<r.length;h+=1){const v=$r(s,r,h);f[h]?f[h].p(v,c):(f[h]=ti(v),f[h].c(),f[h].m(d,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=r.length}},i:ce,o:ce,d(s){s&&k(t),Ce(n,s),s&&k(a),s&&k(d),Ce(f,s),g=!1,jt(m)}}}function _o(i,t,o){let e;V(i,Oe,n=>o(2,e=n));let{plate:l}=t,a;const d=n=>{const r=e.find(f=>f.name==n).colNames;o(0,l.colNames=[...r],l)};function g(){a=Er(this),o(1,a)}const m=()=>d(a);function u(n,r){n[r]=this.value,o(0,l)}return i.$$set=n=>{"plate"in n&&o(0,l=n.plate)},[l,a,e,d,g,m,u]}class tl extends de{constructor(t){super(),me(this,t,_o,vo,ge,{plate:0})}}function po(i){let t;return{c(){t=W("Add Plate")},l(o){t=H(o,"Add Plate")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function yo(i){let t,o,e,l,a,d,g,m,u,n,r,f,s;return a=new xr({props:{plate:i[0]}}),m=new Rn({props:{type:"secondary",$$slots:{default:[po]},$$scope:{ctx:i}}}),m.$on("click",i[5]),n=new tl({props:{plate:i[0]}}),{c(){t=I("form"),o=W("Plate Name: "),e=I("input"),l=U(),j(a.$$.fragment),d=U(),g=I("div"),j(m.$$.fragment),u=U(),j(n.$$.fragment),this.h()},l(c){t=D(c,"FORM",{class:!0});var h=z(t);o=H(h,"Plate Name: "),e=D(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),l=Q(c),ee(a.$$.fragment,c),d=Q(c),g=D(c,"DIV",{class:!0});var v=z(g);ee(m.$$.fragment,v),v.forEach(k),u=Q(c),ee(n.$$.fragment,c),this.h()},h(){E(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"id","question"),E(e,"type","text"),E(t,"class","NameForm svelte-1vsm84v"),E(g,"class","ButtonContainer svelte-1vsm84v")},m(c,h){L(c,t,h),T(t,o),T(t,e),Ie(e,i[0].name),L(c,l,h),ne(a,c,h),L(c,d,h),L(c,g,h),ne(m,g,null),L(c,u,h),ne(n,c,h),r=!0,f||(s=pe(e,"input",i[4]),f=!0)},p(c,[h]){h&1&&e.value!==c[0].name&&Ie(e,c[0].name);const v={};h&1&&(v.plate=c[0]),a.$set(v);const p={};h&128&&(p.$$scope={dirty:h,ctx:c}),m.$set(p);const y={};h&1&&(y.plate=c[0]),n.$set(y)},i(c){r||(O(a.$$.fragment,c),O(m.$$.fragment,c),O(n.$$.fragment,c),r=!0)},o(c){G(a.$$.fragment,c),G(m.$$.fragment,c),G(n.$$.fragment,c),r=!1},d(c){c&&k(t),c&&k(l),te(a,c),c&&k(d),c&&k(g),te(m),c&&k(u),te(n,c),f=!1,s()}}}function bo(i,t,o){let e,l,a;V(i,dr,n=>o(2,l=n)),V(i,Oe,n=>o(3,a=n));let d=et();const g=n=>{Oe.update(r=>{let f=[...r],s=f.find(h=>h.id==n);return s.added=!0,f=[Xn(l+1),...f],f}),dr.update(r=>r+1),d("add")};function m(){e.name=this.value,o(0,e),o(3,a),o(2,l)}const u=()=>g(e.id);return i.$$.update=()=>{i.$$.dirty&12&&o(0,e=a.find(n=>n.id==l))},[e,g,l,a,m,u]}class wo extends de{constructor(t){super(),me(this,t,bo,yo,ge,{})}}function ri(i,t,o){const e=i.slice();return e[11]=t[o],e}function ko(i){let t,o,e,l,a,d=i[2],g=[];for(let m=0;m<d.length;m+=1)g[m]=li(ri(i,d,m));return{c(){t=W(`Plate to edit:
	`),o=I("select"),e=I("option");for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){t=H(m,`Plate to edit:
	`),o=D(m,"SELECT",{class:!0,name:!0,id:!0});var u=z(o);e=D(u,"OPTION",{});var n=z(e);n.forEach(k);for(let r=0;r<g.length;r+=1)g[r].l(u);u.forEach(k),this.h()},h(){e.__value="none",e.value=e.__value,e.selected=!0,e.disabled=!0,e.hidden=!0,E(o,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(o,"name","plates"),E(o,"id","plates"),i[1]===void 0&&nt(()=>i[7].call(o))},m(m,u){L(m,t,u),L(m,o,u),T(o,e);for(let n=0;n<g.length;n+=1)g[n].m(o,null);xn(o,i[1]),l||(a=[pe(o,"change",i[7]),pe(o,"change",i[8])],l=!0)},p(m,u){if(u&4){d=m[2];let n;for(n=0;n<d.length;n+=1){const r=ri(m,d,n);g[n]?g[n].p(r,u):(g[n]=li(r),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}u&6&&xn(o,m[1])},i:ce,o:ce,d(m){m&&k(t),m&&k(o),Ce(g,m),l=!1,jt(a)}}}function Eo(i){let t,o,e,l,a,d,g,m,u,n,r,f,s;return a=new xr({props:{plate:i[0]}}),m=new Rn({props:{type:"secondary",$$slots:{default:[xo]},$$scope:{ctx:i}}}),m.$on("click",i[6]),n=new tl({props:{plate:i[0]}}),{c(){t=I("form"),o=W("Plate Name: "),e=I("input"),l=U(),j(a.$$.fragment),d=U(),g=I("div"),j(m.$$.fragment),u=U(),j(n.$$.fragment),this.h()},l(c){t=D(c,"FORM",{class:!0});var h=z(t);o=H(h,"Plate Name: "),e=D(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),l=Q(c),ee(a.$$.fragment,c),d=Q(c),g=D(c,"DIV",{class:!0});var v=z(g);ee(m.$$.fragment,v),v.forEach(k),u=Q(c),ee(n.$$.fragment,c),this.h()},h(){E(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"id","question"),E(e,"type","text"),E(t,"class","NameForm svelte-1hrsnk0"),E(g,"class","ButtonContainer svelte-1hrsnk0")},m(c,h){L(c,t,h),T(t,o),T(t,e),Ie(e,i[0].name),L(c,l,h),ne(a,c,h),L(c,d,h),L(c,g,h),ne(m,g,null),L(c,u,h),ne(n,c,h),r=!0,f||(s=pe(e,"input",i[5]),f=!0)},p(c,h){h&1&&e.value!==c[0].name&&Ie(e,c[0].name);const v={};h&1&&(v.plate=c[0]),a.$set(v);const p={};h&16384&&(p.$$scope={dirty:h,ctx:c}),m.$set(p);const y={};h&1&&(y.plate=c[0]),n.$set(y)},i(c){r||(O(a.$$.fragment,c),O(m.$$.fragment,c),O(n.$$.fragment,c),r=!0)},o(c){G(a.$$.fragment,c),G(m.$$.fragment,c),G(n.$$.fragment,c),r=!1},d(c){c&&k(t),c&&k(l),te(a,c),c&&k(d),c&&k(g),te(m),c&&k(u),te(n,c),f=!1,s()}}}function ii(i){let t,o=i[11].name+"",e,l;return{c(){t=I("option"),e=W(o),this.h()},l(a){t=D(a,"OPTION",{});var d=z(t);e=H(d,o),d.forEach(k),this.h()},h(){t.__value=l=i[11].name,t.value=t.__value},m(a,d){L(a,t,d),T(t,e)},p(a,d){d&4&&o!==(o=a[11].name+"")&&Ne(e,o),d&4&&l!==(l=a[11].name)&&(t.__value=l,t.value=t.__value)},d(a){a&&k(t)}}}function li(i){let t,o=i[11].added===!0&&ii(i);return{c(){o&&o.c(),t=_e()},l(e){o&&o.l(e),t=_e()},m(e,l){o&&o.m(e,l),L(e,t,l)},p(e,l){e[11].added===!0?o?o.p(e,l):(o=ii(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&k(t)}}}function xo(i){let t;return{c(){t=W("Update Plate")},l(o){t=H(o,"Update Plate")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function Ro(i){let t,o,e,l;const a=[Eo,ko],d=[];function g(m,u){return m[0]!=null?0:1}return t=g(i),o=d[t]=a[t](i),{c(){o.c(),e=_e()},l(m){o.l(m),e=_e()},m(m,u){d[t].m(m,u),L(m,e,u),l=!0},p(m,[u]){let n=t;t=g(m),t===n?d[t].p(m,u):(qe(),G(d[n],1,1,()=>{d[n]=null}),Pe(),o=d[t],o?o.p(m,u):(o=d[t]=a[t](m),o.c()),O(o,1),o.m(e.parentNode,e))},i(m){l||(O(o),l=!0)},o(m){G(o),l=!1},d(m){d[t].d(m),m&&k(e)}}}function No(i,t,o){let e,l;V(i,Oe,c=>o(2,e=c)),V(i,en,c=>o(9,l=c));let a=et(),{plate:d=e.find(c=>c.id==l)}=t,g;d!=null&&(d.added=!1);const m=c=>{o(0,d=e.find(h=>h.name==c)),o(0,d.added=!1,d),en.set(d.id)},u=c=>{o(0,d.added=!0,d),en.set(-1),a("add")};function n(){d.name=this.value,o(0,d)}const r=()=>u(d.name);function f(){g=Er(this),o(1,g)}const s=()=>m(g);return i.$$set=c=>{"plate"in c&&o(0,d=c.plate)},[d,g,e,m,u,n,r,f,s]}class To extends de{constructor(t){super(),me(this,t,No,Ro,ge,{plate:0})}}const qo=(i,t,o)=>{let e=8,l=[];return i.forEach(a=>{let d=Array(e).fill(0),g=0;for(var m=0;m<d.length;m++)d[m]=g+a.maxWell.filter(v=>v<m).length,g=d[m];let u=Array(e).fill(0);g=0;for(var m=u.length-1;m>=0;m--)u[m]=g+a.maxWell.filter(p=>p>=m).length,g=u[m];let n=Array(e).fill(0);for(var m=0;m<n.length;m++)n[m]=100*u[m]/(u[m]+d[m]);let r,f,s;for(var m=0;m<n.length;m++)if(n[m]<50){r=n[m-1],f=n[m],s=m-1;break}let c=(r-50)/(r-f),h=o**(s+c)/t;isNaN(h)&&(h=0),l=[{sample:a.name,nrep:a.maxWell.length,titer:h},...l]}),l};var Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function*rl(i,t,o=0,e=2*Number.EPSILON){const l=(3-Math.sqrt(5))/2;let a=i+l*(t-i),d=a,g=d,m=0,u=yield a,n=u,r=n,f,s;for(;;){const c=.5*(i+t),h=e*Math.abs(a)+o,v=2*h;if(Math.abs(a-c)<=v-.5*(t-i))return{x:a,fx:u};let p=0,y=p,_=y;Math.abs(m)>h&&(p=(a-d)*(u-r),y=(a-g)*(u-n),_=(a-g)*y-(a-d)*p,y=2*(y-p),y>0?_=-_:y=-y,p=m,m=f),Math.abs(_)<Math.abs(.5*y*p)&&_>y*(i-a)&&_<y*(t-a)?(f=_/y,s=a+f,(s-i<v||t-s<v)&&(f=a<c?h:-h)):(m=(a<c?t:i)-a,f=l*m),s=a+(Math.abs(f)>=h?f:f>0?h:-h);const b=yield s;b<=u?(s<a?t=a:i=a,g=d,r=n,d=a,n=u,a=s,u=b):(s<a?i=s:t=s,b<=n||d==a?(g=d,r=n,d=s,n=b):(b<=r||g==a||g==d)&&(g=s,r=b))}}function zo(i,t,o,e=0,l=Number.EPSILON){const a=rl(t,o,e,l);let d=a.next();for(;!d.done;){const g=d.value,m=i(g);d=a.next(m)}return d.value}var Ao={local_min_generator:rl,local_min:zo},mr={},Io={get exports(){return mr},set exports(i){mr=i}};(function(i,t){(function(o,e){i.exports=e()})(Po,function(){var o=function(e,l){var a=Array.prototype.concat,d=Array.prototype.slice,g=Object.prototype.toString;function m(y,_){var b=y>_?y:_;return e.pow(10,17-~~(e.log(b>0?b:-b)*e.LOG10E))}var u=Array.isArray||function(_){return g.call(_)==="[object Array]"};function n(y){return g.call(y)==="[object Function]"}function r(y){return typeof y=="number"?y-y===0:!1}function f(y){return a.apply([],y)}function s(){return new s._init(arguments)}s.fn=s.prototype,s._init=function(_){if(u(_[0]))if(u(_[0][0])){n(_[1])&&(_[0]=s.map(_[0],_[1]));for(var b=0;b<_[0].length;b++)this[b]=_[0][b];this.length=_[0].length}else this[0]=n(_[1])?s.map(_[0],_[1]):_[0],this.length=1;else if(r(_[0]))this[0]=s.seq.apply(null,_),this.length=1;else{if(_[0]instanceof s)return s(_[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:m,isArray:u,isFunction:n,isNumber:r,toVector:f},s._random_fn=e.random,s.setRandom=function(_){if(typeof _!="function")throw new TypeError("fn is not a function");s._random_fn=_},s.extend=function(_){var b,w;if(arguments.length===1){for(w in _)s[w]=_[w];return this}for(b=1;b<arguments.length;b++)for(w in arguments[b])_[w]=arguments[b][w];return _},s.rows=function(_){return _.length||1},s.cols=function(_){return _[0].length||1},s.dimensions=function(_){return{rows:s.rows(_),cols:s.cols(_)}},s.row=function(_,b){return u(b)?b.map(function(w){return s.row(_,w)}):_[b]},s.rowa=function(_,b){return s.row(_,b)},s.col=function(_,b){if(u(b)){var w=s.arange(_.length).map(function(){return new Array(b.length)});return b.forEach(function(q,C){s.arange(_.length).forEach(function(A){w[A][C]=_[A][q]})}),w}for(var R=new Array(_.length),N=0;N<_.length;N++)R[N]=[_[N][b]];return R},s.cola=function(_,b){return s.col(_,b).map(function(w){return w[0]})},s.diag=function(_){for(var b=s.rows(_),w=new Array(b),R=0;R<b;R++)w[R]=[_[R][R]];return w},s.antidiag=function(_){for(var b=s.rows(_)-1,w=new Array(b),R=0;b>=0;b--,R++)w[R]=[_[R][b]];return w},s.transpose=function(_){var b=[],w,R,N,q,C;for(u(_[0])||(_=[_]),R=_.length,N=_[0].length,C=0;C<N;C++){for(w=new Array(R),q=0;q<R;q++)w[q]=_[q][C];b.push(w)}return b.length===1?b[0]:b},s.map=function(_,b,w){var R,N,q,C,A;for(u(_[0])||(_=[_]),N=_.length,q=_[0].length,C=w?_:new Array(N),R=0;R<N;R++)for(C[R]||(C[R]=new Array(q)),A=0;A<q;A++)C[R][A]=b(_[R][A],R,A);return C.length===1?C[0]:C},s.cumreduce=function(_,b,w){var R,N,q,C,A;for(u(_[0])||(_=[_]),N=_.length,q=_[0].length,C=w?_:new Array(N),R=0;R<N;R++)for(C[R]||(C[R]=new Array(q)),q>0&&(C[R][0]=_[R][0]),A=1;A<q;A++)C[R][A]=b(C[R][A-1],_[R][A]);return C.length===1?C[0]:C},s.alter=function(_,b){return s.map(_,b,!0)},s.create=function(_,b,w){var R=new Array(_),N,q;for(n(b)&&(w=b,b=_),N=0;N<_;N++)for(R[N]=new Array(b),q=0;q<b;q++)R[N][q]=w(N,q);return R};function c(){return 0}s.zeros=function(_,b){return r(b)||(b=_),s.create(_,b,c)};function h(){return 1}s.ones=function(_,b){return r(b)||(b=_),s.create(_,b,h)},s.rand=function(_,b){return r(b)||(b=_),s.create(_,b,s._random_fn)};function v(y,_){return y===_?1:0}s.identity=function(_,b){return r(b)||(b=_),s.create(_,b,v)},s.symmetric=function(_){var b=_.length,w,R;if(_.length!==_[0].length)return!1;for(w=0;w<b;w++)for(R=0;R<b;R++)if(_[R][w]!==_[w][R])return!1;return!0},s.clear=function(_){return s.alter(_,c)},s.seq=function(_,b,w,R){n(R)||(R=!1);var N=[],q=m(_,b),C=(b*q-_*q)/((w-1)*q),A=_,P;for(P=0;A<=b&&P<w;P++,A=(_*q+C*q*P)/q)N.push(R?R(A,P):A);return N},s.arange=function(_,b,w){var R=[],N;if(w=w||1,b===l&&(b=_,_=0),_===b||w===0)return[];if(_<b&&w<0)return[];if(_>b&&w>0)return[];if(w>0)for(N=_;N<b;N+=w)R.push(N);else for(N=_;N>b;N+=w)R.push(N);return R},s.slice=function(){function y(b,w,R,N){var q,C=[],A=b.length;if(w===l&&R===l&&N===l)return s.copy(b);if(w=w||0,R=R||b.length,w=w>=0?w:A+w,R=R>=0?R:A+R,N=N||1,w===R||N===0)return[];if(w<R&&N<0)return[];if(w>R&&N>0)return[];if(N>0)for(q=w;q<R;q+=N)C.push(b[q]);else for(q=w;q>R;q+=N)C.push(b[q]);return C}function _(b,w){var R,N;if(w=w||{},r(w.row)){if(r(w.col))return b[w.row][w.col];var q=s.rowa(b,w.row);return R=w.col||{},y(q,R.start,R.end,R.step)}if(r(w.col)){var C=s.cola(b,w.col);return N=w.row||{},y(C,N.start,N.end,N.step)}N=w.row||{},R=w.col||{};var A=y(b,N.start,N.end,N.step);return A.map(function(P){return y(P,R.start,R.end,R.step)})}return _}(),s.sliceAssign=function(_,b,w){var R,N;if(r(b.row)){if(r(b.col))return _[b.row][b.col]=w;b.col=b.col||{},b.col.start=b.col.start||0,b.col.end=b.col.end||_[0].length,b.col.step=b.col.step||1,R=s.arange(b.col.start,e.min(_.length,b.col.end),b.col.step);var q=b.row;return R.forEach(function(A,P){_[q][A]=w[P]}),_}if(r(b.col)){b.row=b.row||{},b.row.start=b.row.start||0,b.row.end=b.row.end||_.length,b.row.step=b.row.step||1,N=s.arange(b.row.start,e.min(_[0].length,b.row.end),b.row.step);var C=b.col;return N.forEach(function(A,P){_[A][C]=w[P]}),_}return w[0].length===l&&(w=[w]),b.row.start=b.row.start||0,b.row.end=b.row.end||_.length,b.row.step=b.row.step||1,b.col.start=b.col.start||0,b.col.end=b.col.end||_[0].length,b.col.step=b.col.step||1,N=s.arange(b.row.start,e.min(_.length,b.row.end),b.row.step),R=s.arange(b.col.start,e.min(_[0].length,b.col.end),b.col.step),N.forEach(function(A,P){R.forEach(function(F,B){_[A][F]=w[P][B]})}),_},s.diagonal=function(_){var b=s.zeros(_.length,_.length);return _.forEach(function(w,R){b[R][R]=w}),b},s.copy=function(_){return _.map(function(b){return r(b)?b:b.map(function(w){return w})})};var p=s.prototype;return p.length=0,p.push=Array.prototype.push,p.sort=Array.prototype.sort,p.splice=Array.prototype.splice,p.slice=Array.prototype.slice,p.toArray=function(){return this.length>1?d.call(this):d.call(this)[0]},p.map=function(_,b){return s(s.map(this,_,b))},p.cumreduce=function(_,b){return s(s.cumreduce(this,_,b))},p.alter=function(_){return s.alter(this,_),this},function(y){for(var _=0;_<y.length;_++)(function(b){p[b]=function(w){var R=this,N;return w?(setTimeout(function(){w.call(R,p[b].call(R))}),this):(N=s[b](this),u(N)?s(N):N)}})(y[_])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(y){for(var _=0;_<y.length;_++)(function(b){p[b]=function(w,R){var N=this;return R?(setTimeout(function(){R.call(N,p[b].call(N,w))}),this):s(s[b](this,w))}})(y[_])}("row col".split(" ")),function(y){for(var _=0;_<y.length;_++)(function(b){p[b]=function(){return s(s[b].apply(null,arguments))}})(y[_])}("create zeros ones rand identity".split(" ")),s}(Math);return function(e,l){var a=e.utils.isFunction;function d(u,n){return u-n}function g(u,n,r){return l.max(n,l.min(u,r))}e.sum=function(n){for(var r=0,f=n.length;--f>=0;)r+=n[f];return r},e.sumsqrd=function(n){for(var r=0,f=n.length;--f>=0;)r+=n[f]*n[f];return r},e.sumsqerr=function(n){for(var r=e.mean(n),f=0,s=n.length,c;--s>=0;)c=n[s]-r,f+=c*c;return f},e.sumrow=function(n){for(var r=0,f=n.length;--f>=0;)r+=n[f];return r},e.product=function(n){for(var r=1,f=n.length;--f>=0;)r*=n[f];return r},e.min=function(n){for(var r=n[0],f=0;++f<n.length;)n[f]<r&&(r=n[f]);return r},e.max=function(n){for(var r=n[0],f=0;++f<n.length;)n[f]>r&&(r=n[f]);return r},e.unique=function(n){for(var r={},f=[],s=0;s<n.length;s++)r[n[s]]||(r[n[s]]=!0,f.push(n[s]));return f},e.mean=function(n){return e.sum(n)/n.length},e.meansqerr=function(n){return e.sumsqerr(n)/n.length},e.geomean=function(n){var r=n.map(l.log),f=e.mean(r);return l.exp(f)},e.median=function(n){var r=n.length,f=n.slice().sort(d);return r&1?f[r/2|0]:(f[r/2-1]+f[r/2])/2},e.cumsum=function(n){return e.cumreduce(n,function(r,f){return r+f})},e.cumprod=function(n){return e.cumreduce(n,function(r,f){return r*f})},e.diff=function(n){var r=[],f=n.length,s;for(s=1;s<f;s++)r.push(n[s]-n[s-1]);return r},e.rank=function(u){var n,r=[],f={};for(n=0;n<u.length;n++){var s=u[n];f[s]?f[s]++:(f[s]=1,r.push(s))}var c=r.sort(d),h={},v=1;for(n=0;n<c.length;n++){var s=c[n],p=f[s],y=v,_=v+p-1,b=(y+_)/2;h[s]=b,v+=p}return u.map(function(w){return h[w]})},e.mode=function(n){var r=n.length,f=n.slice().sort(d),s=1,c=0,h=0,v=[],p;for(p=0;p<r;p++)f[p]===f[p+1]?s++:(s>c?(v=[f[p]],c=s,h=0):s===c&&(v.push(f[p]),h++),s=1);return h===0?v[0]:v},e.range=function(n){return e.max(n)-e.min(n)},e.variance=function(n,r){return e.sumsqerr(n)/(n.length-(r?1:0))},e.pooledvariance=function(n){var r=n.reduce(function(s,c){return s+e.sumsqerr(c)},0),f=n.reduce(function(s,c){return s+c.length},0);return r/(f-n.length)},e.deviation=function(u){for(var n=e.mean(u),r=u.length,f=new Array(r),s=0;s<r;s++)f[s]=u[s]-n;return f},e.stdev=function(n,r){return l.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return l.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),f=[],s=n.length-1;s>=0;s--)f.push(l.abs(n[s]-r));return e.mean(f)},e.meddev=function(n){for(var r=e.median(n),f=[],s=n.length-1;s>=0;s--)f.push(l.abs(n[s]-r));return e.median(f)},e.coeffvar=function(n){return e.stdev(n)/e.mean(n)},e.quartiles=function(n){var r=n.length,f=n.slice().sort(d);return[f[l.round(r/4)-1],f[l.round(r/2)-1],f[l.round(r*3/4)-1]]},e.quantiles=function(n,r,f,s){var c=n.slice().sort(d),h=[r.length],v=n.length,p,y,_,b,w,R;for(typeof f>"u"&&(f=3/8),typeof s>"u"&&(s=3/8),p=0;p<r.length;p++)y=r[p],_=f+y*(1-f-s),b=v*y+_,w=l.floor(g(b,1,v-1)),R=g(b-w,0,1),h[p]=(1-R)*c[w-1]+R*c[w];return h},e.percentile=function(n,r,f){var s=n.slice().sort(d),c=r*(s.length+(f?1:-1))+(f?0:1),h=parseInt(c),v=c-h;return h+1<s.length?s[h-1]+v*(s[h]-s[h-1]):s[h-1]},e.percentileOfScore=function(n,r,f){var s=0,c=n.length,h=!1,v,p;for(f==="strict"&&(h=!0),p=0;p<c;p++)v=n[p],(h&&v<r||!h&&v<=r)&&s++;return s/c},e.histogram=function(n,r){r=r||4;var f=e.min(n),s=(e.max(n)-f)/r,c=n.length,h=[],v;for(v=0;v<r;v++)h[v]=0;for(v=0;v<c;v++)h[l.min(l.floor((n[v]-f)/s),r-1)]+=1;return h},e.covariance=function(n,r){var f=e.mean(n),s=e.mean(r),c=n.length,h=new Array(c),v;for(v=0;v<c;v++)h[v]=(n[v]-f)*(r[v]-s);return e.sum(h)/(c-1)},e.corrcoeff=function(n,r){return e.covariance(n,r)/e.stdev(n,1)/e.stdev(r,1)},e.spearmancoeff=function(u,n){return u=e.rank(u),n=e.rank(n),e.corrcoeff(u,n)},e.stanMoment=function(n,r){for(var f=e.mean(n),s=e.stdev(n),c=n.length,h=0,v=0;v<c;v++)h+=l.pow((n[v]-f)/s,r);return h/n.length},e.skewness=function(n){return e.stanMoment(n,3)},e.kurtosis=function(n){return e.stanMoment(n,4)-3};var m=e.prototype;(function(u){for(var n=0;n<u.length;n++)(function(r){m[r]=function(f,s){var c=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[r].call(v,f))}),this;if(this.length>1){for(v=f===!0?this:this.transpose();h<v.length;h++)c[h]=e[r](v[h]);return c}return e[r](this[0],f)}})(u[n])})("cumsum cumprod".split(" ")),function(u){for(var n=0;n<u.length;n++)(function(r){m[r]=function(f,s){var c=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[r].call(v,f))}),this;if(this.length>1){for(r!=="sumrow"&&(v=f===!0?this:this.transpose());h<v.length;h++)c[h]=e[r](v[h]);return f===!0?e[r](e.utils.toVector(c)):c}return e[r](this[0],f)}})(u[n])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(u){for(var n=0;n<u.length;n++)(function(r){m[r]=function(){var f=[],s=0,c=this,h=Array.prototype.slice.call(arguments),v;if(a(h[h.length-1])){v=h[h.length-1];var p=h.slice(0,h.length-1);return setTimeout(function(){v.call(c,m[r].apply(c,p))}),this}else{v=void 0;var y=function(b){return e[r].apply(c,[b].concat(h))}}if(this.length>1){for(c=c.transpose();s<c.length;s++)f[s]=y(c[s]);return f}return y(this[0])}})(u[n])}("quantiles percentileOfScore".split(" "))}(o,Math),function(e,l){e.gammaln=function(d){var g=0,m=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,n,r,f;for(f=(r=n=d)+5.5,f-=(n+.5)*l.log(f);g<6;g++)u+=m[g]/++r;return l.log(2.5066282746310007*u/n)-f},e.loggam=function(d){var g,m,u,n,r,f,s,c=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(g=d,s=0,d==1||d==2)return 0;for(d<=7&&(s=l.floor(7-d),g=d+s),m=1/(g*g),u=2*l.PI,r=c[9],f=8;f>=0;f--)r*=m,r+=c[f];if(n=r/g+.5*l.log(u)+(g-.5)*l.log(g)-g,d<=7)for(f=1;f<=s;f++)n-=l.log(g-1),g-=1;return n},e.gammafn=function(d){var g=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],m=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,n=0,r=0,f=0,s=d,c,h,v,p;if(d>171.6243769536076)return 1/0;if(s<=0)if(p=s%1+36e-17,p)u=(s&1?-1:1)*l.PI/l.sin(l.PI*p),s=1-s;else return 1/0;for(v=s,s<1?h=s++:h=(s-=n=(s|0)-1)-1,c=0;c<8;++c)f=(f+g[c])*h,r=r*h+m[c];if(p=f/r+1,v<s)p/=v;else if(v>s)for(c=0;c<n;++c)p*=s,s++;return u&&(p=u/p),p},e.gammap=function(d,g){return e.lowRegGamma(d,g)*e.gammafn(d)},e.lowRegGamma=function(d,g){var m=e.gammaln(d),u=d,n=1/d,r=n,f=g+1-d,s=1/1e-30,c=1/f,h=c,v=1,p=-~(l.log(d>=1?d:1/d)*8.5+d*.4+17),y;if(g<0||d<=0)return NaN;if(g<d+1){for(;v<=p;v++)n+=r*=g/++u;return n*l.exp(-g+d*l.log(g)-m)}for(;v<=p;v++)y=-v*(v-d),f+=2,c=y*c+f,s=f+y/s,c=1/c,h*=c*s;return 1-h*l.exp(-g+d*l.log(g)-m)},e.factorialln=function(d){return d<0?NaN:e.gammaln(d+1)},e.factorial=function(d){return d<0?NaN:e.gammafn(d+1)},e.combination=function(d,g){return d>170||g>170?l.exp(e.combinationln(d,g)):e.factorial(d)/e.factorial(g)/e.factorial(d-g)},e.combinationln=function(d,g){return e.factorialln(d)-e.factorialln(g)-e.factorialln(d-g)},e.permutation=function(d,g){return e.factorial(d)/e.factorial(d-g)},e.betafn=function(d,g){if(!(d<=0||g<=0))return d+g>170?l.exp(e.betaln(d,g)):e.gammafn(d)*e.gammafn(g)/e.gammafn(d+g)},e.betaln=function(d,g){return e.gammaln(d)+e.gammaln(g)-e.gammaln(d+g)},e.betacf=function(d,g,m){var u=1e-30,n=1,r=g+m,f=g+1,s=g-1,c=1,h=1-r*d/f,v,p,y,_;for(l.abs(h)<u&&(h=u),h=1/h,_=h;n<=100&&(v=2*n,p=n*(m-n)*d/((s+v)*(g+v)),h=1+p*h,l.abs(h)<u&&(h=u),c=1+p/c,l.abs(c)<u&&(c=u),h=1/h,_*=h*c,p=-(g+n)*(r+n)*d/((g+v)*(f+v)),h=1+p*h,l.abs(h)<u&&(h=u),c=1+p/c,l.abs(c)<u&&(c=u),h=1/h,y=h*c,_*=y,!(l.abs(y-1)<3e-7));n++);return _},e.gammapinv=function(d,g){var m=0,u=g-1,n=1e-8,r=e.gammaln(g),f,s,c,h,v,p,y;if(d>=1)return l.max(100,g+100*l.sqrt(g));if(d<=0)return 0;for(g>1?(p=l.log(u),y=l.exp(u*(p-1)-r),v=d<.5?d:1-d,c=l.sqrt(-2*l.log(v)),f=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,d<.5&&(f=-f),f=l.max(.001,g*l.pow(1-1/(9*g)-f/(3*l.sqrt(g)),3))):(c=1-g*(.253+g*.12),d<c?f=l.pow(d/c,1/g):f=1-l.log(1-(d-c)/(1-c)));m<12;m++){if(f<=0)return 0;if(s=e.lowRegGamma(g,f)-d,g>1?c=y*l.exp(-(f-u)+u*(l.log(f)-p)):c=l.exp(-f+u*l.log(f)-r),h=s/c,f-=c=h/(1-.5*l.min(1,h*((g-1)/f-1))),f<=0&&(f=.5*(f+c)),l.abs(c)<n*f)break}return f},e.erf=function(d){var g=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],m=g.length-1,u=!1,n=0,r=0,f,s,c,h;for(d<0&&(d=-d,u=!0),f=2/(2+d),s=4*f-2;m>0;m--)c=n,n=s*n-r+g[m],r=c;return h=f*l.exp(-d*d+.5*(g[0]+s*n)-r),u?h-1:1-h},e.erfc=function(d){return 1-e.erf(d)},e.erfcinv=function(d){var g=0,m,u,n,r;if(d>=2)return-100;if(d<=0)return 100;for(r=d<1?d:2-d,n=l.sqrt(-2*l.log(r/2)),m=-.70711*((2.30753+n*.27061)/(1+n*(.99229+n*.04481))-n);g<2;g++)u=e.erfc(m)-r,m+=u/(1.1283791670955126*l.exp(-m*m)-m*u);return d<1?m:-m},e.ibetainv=function(d,g,m){var u=1e-8,n=g-1,r=m-1,f=0,s,c,h,v,p,y,_,b,w,R,N;if(d<=0)return 0;if(d>=1)return 1;for(g>=1&&m>=1?(h=d<.5?d:1-d,v=l.sqrt(-2*l.log(h)),_=(2.30753+v*.27061)/(1+v*(.99229+v*.04481))-v,d<.5&&(_=-_),b=(_*_-3)/6,w=2/(1/(2*g-1)+1/(2*m-1)),R=_*l.sqrt(b+w)/w-(1/(2*m-1)-1/(2*g-1))*(b+5/6-2/(3*w)),_=g/(g+m*l.exp(2*R))):(s=l.log(g/(g+m)),c=l.log(m/(g+m)),v=l.exp(g*s)/g,p=l.exp(m*c)/m,R=v+p,d<v/R?_=l.pow(g*R*d,1/g):_=1-l.pow(m*R*(1-d),1/m)),N=-e.gammaln(g)-e.gammaln(m)+e.gammaln(g+m);f<10;f++){if(_===0||_===1)return _;if(y=e.ibeta(_,g,m)-d,v=l.exp(n*l.log(_)+r*l.log(1-_)+N),p=y/v,_-=v=p/(1-.5*l.min(1,p*(n/_-r/(1-_)))),_<=0&&(_=.5*(_+v)),_>=1&&(_=.5*(_+v+1)),l.abs(v)<u*_&&f>0)break}return _},e.ibeta=function(d,g,m){var u=d===0||d===1?0:l.exp(e.gammaln(g+m)-e.gammaln(g)-e.gammaln(m)+g*l.log(d)+m*l.log(1-d));return d<0||d>1?!1:d<(g+1)/(g+m+2)?u*e.betacf(d,g,m)/g:1-u*e.betacf(1-d,m,g)/m},e.randn=function(d,g){var m,u,n,r,f;if(g||(g=d),d)return e.create(d,g,function(){return e.randn()});do m=e._random_fn(),u=1.7156*(e._random_fn()-.5),n=m-.449871,r=l.abs(u)+.386595,f=n*n+r*(.196*r-.25472*n);while(f>.27597&&(f>.27846||u*u>-4*l.log(m)*m*m));return u/m},e.randg=function(d,g,m){var u=d,n,r,f,s,c,h;if(m||(m=g),d||(d=1),g)return h=e.zeros(g,m),h.alter(function(){return e.randg(d)}),h;d<1&&(d+=1),n=d-1/3,r=1/l.sqrt(9*n);do{do c=e.randn(),s=1+r*c;while(s<=0);s=s*s*s,f=e._random_fn()}while(f>1-.331*l.pow(c,4)&&l.log(f)>.5*c*c+n*(1-s+l.log(s)));if(d==u)return n*s;do f=e._random_fn();while(f===0);return l.pow(f,1/u)*n*s},function(a){for(var d=0;d<a.length;d++)(function(g){e.fn[g]=function(){return e(e.map(this,function(m){return e[g](m)}))}})(a[d])}("gammaln gammafn factorial factorialln".split(" ")),function(a){for(var d=0;d<a.length;d++)(function(g){e.fn[g]=function(){return e(e[g].apply(null,arguments))}})(a[d])}("randn".split(" "))}(o,Math),function(e,l){(function(u){for(var n=0;n<u.length;n++)(function(r){e[r]=function f(s,c,h){return this instanceof f?(this._a=s,this._b=c,this._c=h,this):new f(s,c,h)},e.fn[r]=function(f,s,c){var h=e[r](f,s,c);return h.data=this,h},e[r].prototype.sample=function(f){var s=this._a,c=this._b,h=this._c;return f?e.alter(f,function(){return e[r].sample(s,c,h)}):e[r].sample(s,c,h)},function(f){for(var s=0;s<f.length;s++)(function(c){e[r].prototype[c]=function(h){var v=this._a,p=this._b,y=this._c;return!h&&h!==0&&(h=this.data),typeof h!="number"?e.fn.map.call(h,function(_){return e[r][c](_,v,p,y)}):e[r][c](h,v,p,y)}})(f[s])}("pdf cdf inv".split(" ")),function(f){for(var s=0;s<f.length;s++)(function(c){e[r].prototype[c]=function(){return e[r][c](this._a,this._b,this._c)}})(f[s])}("mean median mode variance".split(" "))})(u[n])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,f){return n>1||n<0?0:r==1&&f==1?1:r<512&&f<512?l.pow(n,r-1)*l.pow(1-n,f-1)/e.betafn(r,f):l.exp((r-1)*l.log(n)+(f-1)*l.log(1-n)-e.betaln(r,f))},cdf:function(n,r,f){return n>1||n<0?(n>1)*1:e.ibeta(n,r,f)},inv:function(n,r,f){return e.ibetainv(n,r,f)},mean:function(n,r){return n/(n+r)},median:function(n,r){return e.ibetainv(.5,n,r)},mode:function(n,r){return(n-1)/(n+r-2)},sample:function(n,r){var f=e.randg(n);return f/(f+e.randg(r))},variance:function(n,r){return n*r/(l.pow(n+r,2)*(n+r+1))}}),e.extend(e.centralF,{pdf:function(n,r,f){var s,c,h;return n<0?0:r<=2?n===0&&r<2?1/0:n===0&&r===2?1:1/e.betafn(r/2,f/2)*l.pow(r/f,r/2)*l.pow(n,r/2-1)*l.pow(1+r/f*n,-(r+f)/2):(s=r*n/(f+n*r),c=f/(f+n*r),h=r*c/2,h*e.binomial.pdf((r-2)/2,(r+f-2)/2,s))},cdf:function(n,r,f){return n<0?0:e.ibeta(r*n/(r*n+f),r/2,f/2)},inv:function(n,r,f){return f/(r*(1/e.ibetainv(n,r/2,f/2)-1))},mean:function(n,r){return r>2?r/(r-2):void 0},mode:function(n,r){return n>2?r*(n-2)/(n*(r+2)):void 0},sample:function(n,r){var f=e.randg(n/2)*2,s=e.randg(r/2)*2;return f/n/(s/r)},variance:function(n,r){if(!(r<=4))return 2*r*r*(n+r-2)/(n*(r-2)*(r-2)*(r-4))}}),e.extend(e.cauchy,{pdf:function(n,r,f){return f<0?0:f/(l.pow(n-r,2)+l.pow(f,2))/l.PI},cdf:function(n,r,f){return l.atan((n-r)/f)/l.PI+.5},inv:function(u,n,r){return n+r*l.tan(l.PI*(u-.5))},median:function(n){return n},mode:function(n){return n},sample:function(n,r){return e.randn()*l.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:n===0&&r===2?.5:l.exp((r/2-1)*l.log(n)-n/2-r/2*l.log(2)-e.gammaln(r/2))},cdf:function(n,r){return n<0?0:e.lowRegGamma(r/2,n/2)},inv:function(u,n){return 2*e.gammapinv(u,.5*n)},mean:function(u){return u},median:function(n){return n*l.pow(1-2/(9*n),3)},mode:function(n){return n-2>0?n-2:0},sample:function(n){return e.randg(n/2)*2},variance:function(n){return 2*n}}),e.extend(e.exponential,{pdf:function(n,r){return n<0?0:r*l.exp(-r*n)},cdf:function(n,r){return n<0?0:1-l.exp(-r*n)},inv:function(u,n){return-l.log(1-u)/n},mean:function(u){return 1/u},median:function(u){return 1/u*l.log(2)},mode:function(){return 0},sample:function(n){return-1/n*l.log(e._random_fn())},variance:function(u){return l.pow(u,-2)}}),e.extend(e.gamma,{pdf:function(n,r,f){return n<0?0:n===0&&r===1?1/f:l.exp((r-1)*l.log(n)-n/f-e.gammaln(r)-r*l.log(f))},cdf:function(n,r,f){return n<0?0:e.lowRegGamma(r,n/f)},inv:function(u,n,r){return e.gammapinv(u,n)*r},mean:function(u,n){return u*n},mode:function(n,r){if(n>1)return(n-1)*r},sample:function(n,r){return e.randg(n)*r},variance:function(n,r){return n*r*r}}),e.extend(e.invgamma,{pdf:function(n,r,f){return n<=0?0:l.exp(-(r+1)*l.log(n)-f/n-e.gammaln(r)+r*l.log(f))},cdf:function(n,r,f){return n<=0?0:1-e.lowRegGamma(r,f/n)},inv:function(u,n,r){return r/e.gammapinv(1-u,n)},mean:function(u,n){return u>1?n/(u-1):void 0},mode:function(n,r){return r/(n+1)},sample:function(n,r){return r/e.randg(n)},variance:function(n,r){if(!(n<=2))return r*r/((n-1)*(n-1)*(n-2))}}),e.extend(e.kumaraswamy,{pdf:function(n,r,f){return n===0&&r===1?f:n===1&&f===1?r:l.exp(l.log(r)+l.log(f)+(r-1)*l.log(n)+(f-1)*l.log(1-l.pow(n,r)))},cdf:function(n,r,f){return n<0?0:n>1?1:1-l.pow(1-l.pow(n,r),f)},inv:function(n,r,f){return l.pow(1-l.pow(1-n,1/f),1/r)},mean:function(u,n){return n*e.gammafn(1+1/u)*e.gammafn(n)/e.gammafn(1+1/u+n)},median:function(n,r){return l.pow(1-l.pow(2,-1/r),1/n)},mode:function(n,r){if(n>=1&&r>=1&&n!==1&&r!==1)return l.pow((n-1)/(n*r-1),1/n)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(n,r,f){return n<=0?0:l.exp(-l.log(n)-.5*l.log(2*l.PI)-l.log(f)-l.pow(l.log(n)-r,2)/(2*f*f))},cdf:function(n,r,f){return n<0?0:.5+.5*e.erf((l.log(n)-r)/l.sqrt(2*f*f))},inv:function(u,n,r){return l.exp(-1.4142135623730951*r*e.erfcinv(2*u)+n)},mean:function(n,r){return l.exp(n+r*r/2)},median:function(n){return l.exp(n)},mode:function(n,r){return l.exp(n-r*r)},sample:function(n,r){return l.exp(e.randn()*r+n)},variance:function(n,r){return(l.exp(r*r)-1)*l.exp(2*n+r*r)}}),e.extend(e.noncentralt,{pdf:function(n,r,f){var s=1e-14;return l.abs(f)<s?e.studentt.pdf(n,r):l.abs(n)<s?l.exp(e.gammaln((r+1)/2)-f*f/2-.5*l.log(l.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*l.sqrt(1+2/r),r+2,f)-e.noncentralt.cdf(n,r,f))},cdf:function(n,r,f){var s=1e-14,c=200;if(l.abs(f)<s)return e.studentt.cdf(n,r);var h=!1;n<0&&(h=!0,f=-f);for(var v=e.normal.cdf(-f,0,1),p=s+1,y=p,_=n*n/(n*n+r),b=0,w=l.exp(-f*f/2),R=l.exp(-f*f/2-.5*l.log(2)-e.gammaln(3/2))*f;b<c||y>s||p>s;)y=p,b>0&&(w*=f*f/(2*b),R*=f*f/(2*(b+1/2))),p=w*e.beta.cdf(_,b+.5,r/2)+R*e.beta.cdf(_,b+1,r/2),v+=.5*p,b++;return h?1-v:v}}),e.extend(e.normal,{pdf:function(n,r,f){return l.exp(-.5*l.log(2*l.PI)-l.log(f)-l.pow(n-r,2)/(2*f*f))},cdf:function(n,r,f){return .5*(1+e.erf((n-r)/l.sqrt(2*f*f)))},inv:function(u,n,r){return-1.4142135623730951*r*e.erfcinv(2*u)+n},mean:function(u){return u},median:function(n){return n},mode:function(u){return u},sample:function(n,r){return e.randn()*r+n},variance:function(u,n){return n*n}}),e.extend(e.pareto,{pdf:function(n,r,f){return n<r?0:f*l.pow(r,f)/l.pow(n,f+1)},cdf:function(n,r,f){return n<r?0:1-l.pow(r/n,f)},inv:function(n,r,f){return r/l.pow(1-n,1/f)},mean:function(n,r){if(!(r<=1))return r*l.pow(n,r)/(r-1)},median:function(n,r){return n*(r*l.SQRT2)},mode:function(n){return n},variance:function(u,n){if(!(n<=2))return u*u*n/(l.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(l.sqrt(r)*e.betafn(.5,r/2))*l.pow(1+n*n/r,-((r+1)/2))},cdf:function(n,r){var f=r/2;return e.ibeta((n+l.sqrt(n*n+r))/(2*l.sqrt(n*n+r)),f,f)},inv:function(u,n){var r=e.ibetainv(2*l.min(u,1-u),.5*n,.5);return r=l.sqrt(n*(1-r)/r),u>.5?r:-r},mean:function(n){return n>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*l.sqrt(n/(2*e.randg(n/2)))},variance:function(n){return n>2?n/(n-2):n>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(n,r,f){return n<0||r<0||f<0?0:f/r*l.pow(n/r,f-1)*l.exp(-l.pow(n/r,f))},cdf:function(n,r,f){return n<0?0:1-l.exp(-l.pow(n/r,f))},inv:function(u,n,r){return n*l.pow(-l.log(1-u),1/r)},mean:function(u,n){return u*e.gammafn(1+1/n)},median:function(n,r){return n*l.pow(l.log(2),1/r)},mode:function(n,r){return r<=1?0:n*l.pow((r-1)/r,1/r)},sample:function(n,r){return n*l.pow(-l.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-l.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(n,r,f){return n<r||n>f?0:1/(f-r)},cdf:function(n,r,f){return n<r?0:n<f?(n-r)/(f-r):1},inv:function(u,n,r){return n+u*(r-n)},mean:function(n,r){return .5*(n+r)},median:function(n,r){return e.mean(n,r)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return n/2+r/2+(r/2-n/2)*(2*e._random_fn()-1)},variance:function(n,r){return l.pow(r-n,2)/12}});function a(u,n,r,f){for(var s=0,c=1,h=1,v=1,p=0,y=0,_;l.abs((h-y)/h)>f;)y=h,_=-(n+p)*(n+r+p)*u/(n+2*p)/(n+2*p+1),s=h+_*s,c=v+_*c,p=p+1,_=p*(r-p)*u/(n+2*p-1)/(n+2*p),h=s+_*h,v=c+_*v,s=s/v,c=c/v,h=h/v,v=1;return h/n}e.extend(e.binomial,{pdf:function(n,r,f){return f===0||f===1?r*f===n?1:0:e.combination(r,n)*l.pow(f,n)*l.pow(1-f,r-n)},cdf:function(n,r,f){var s,c=1e-10;if(n<0)return 0;if(n>=r)return 1;if(f<0||f>1||r<=0)return NaN;n=l.floor(n);var h=f,v=n+1,p=r-n,y=v+p,_=l.exp(e.gammaln(y)-e.gammaln(p)-e.gammaln(v)+v*l.log(h)+p*l.log(1-h));return h<(v+1)/(y+2)?s=_*a(h,v,p,c):s=1-_*a(1-h,p,v,c),l.round((1-s)*(1/c))/(1/c)}}),e.extend(e.negbin,{pdf:function(n,r,f){return n!==n>>>0?!1:n<0?0:e.combination(n+r-1,r-1)*l.pow(1-f,n)*l.pow(f,r)},cdf:function(n,r,f){var s=0,c=0;if(n<0)return 0;for(;c<=n;c++)s+=e.negbin.pdf(c,r,f);return s}}),e.extend(e.hypgeom,{pdf:function(n,r,f,s){if(n!==n|0)return!1;if(n<0||n<f-(r-s))return 0;if(n>s||n>f)return 0;if(f*2>r)return s*2>r?e.hypgeom.pdf(r-f-s+n,r,r-f,r-s):e.hypgeom.pdf(s-n,r,r-f,s);if(s*2>r)return e.hypgeom.pdf(f-n,r,f,r-s);if(f<s)return e.hypgeom.pdf(n,r,s,f);for(var c=1,h=0,v=0;v<n;v++){for(;c>1&&h<s;)c*=1-f/(r-h),h++;c*=(s-v)*(f-v)/((v+1)*(r-f-s+v+1))}for(;h<s;h++)c*=1-f/(r-h);return l.min(1,l.max(0,c))},cdf:function(n,r,f,s){if(n<0||n<f-(r-s))return 0;if(n>=s||n>=f)return 1;if(f*2>r)return s*2>r?e.hypgeom.cdf(r-f-s+n,r,r-f,r-s):1-e.hypgeom.cdf(s-n-1,r,r-f,s);if(s*2>r)return 1-e.hypgeom.cdf(f-n-1,r,f,r-s);if(f<s)return e.hypgeom.cdf(n,r,s,f);for(var c=1,h=1,v=0,p=0;p<n;p++){for(;c>1&&v<s;){var y=1-f/(r-v);h*=y,c*=y,v++}h*=(s-p)*(f-p)/((p+1)*(r-f-s+p+1)),c+=h}for(;v<s;v++)c*=1-f/(r-v);return l.min(1,l.max(0,c))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!==0||n<0?0:l.pow(r,n)*l.exp(-r)/e.factorial(n)},cdf:function(n,r){var f=[],s=0;if(n<0)return 0;for(;s<=n;s++)f.push(e.poisson.pdf(s,r));return e.sum(f)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(n){var r=1,f=0,s=l.exp(-n);do f++,r*=e._random_fn();while(r>s);return f-1},sampleLarge:function(n){var r=n,f,s,c,h,v,p,y,_,b,w;for(h=l.sqrt(r),v=l.log(r),y=.931+2.53*h,p=-.059+.02483*y,_=1.1239+1.1328/(y-3.4),b=.9277-3.6224/(y-2);;){if(s=l.random()-.5,c=l.random(),w=.5-l.abs(s),f=l.floor((2*p/w+y)*s+r+.43),w>=.07&&c<=b)return f;if(!(f<0||w<.013&&c>w)&&l.log(c)+l.log(_)-l.log(p/(w*w)+y)<=-r+f*v-e.loggam(f+1))return f}},sample:function(n){return n<10?this.sampleSmall(n):this.sampleLarge(n)}}),e.extend(e.triangular,{pdf:function(n,r,f,s){return f<=r||s<r||s>f?NaN:n<r||n>f?0:n<s?2*(n-r)/((f-r)*(s-r)):n===s?2/(f-r):2*(f-n)/((f-r)*(f-s))},cdf:function(n,r,f,s){return f<=r||s<r||s>f?NaN:n<=r?0:n>=f?1:n<=s?l.pow(n-r,2)/((f-r)*(s-r)):1-l.pow(f-n,2)/((f-r)*(f-s))},inv:function(n,r,f,s){return f<=r||s<r||s>f?NaN:n<=(s-r)/(f-r)?r+(f-r)*l.sqrt(n*((s-r)/(f-r))):r+(f-r)*(1-l.sqrt((1-n)*(1-(s-r)/(f-r))))},mean:function(n,r,f){return(n+r+f)/3},median:function(n,r,f){if(f<=(n+r)/2)return r-l.sqrt((r-n)*(r-f))/l.sqrt(2);if(f>(n+r)/2)return n+l.sqrt((r-n)*(f-n))/l.sqrt(2)},mode:function(n,r,f){return f},sample:function(n,r,f){var s=e._random_fn();return s<(f-n)/(r-n)?n+l.sqrt(s*(r-n)*(f-n)):r-l.sqrt((1-s)*(r-n)*(r-f))},variance:function(n,r,f){return(n*n+r*r+f*f-n*r-n*f-r*f)/18}}),e.extend(e.arcsine,{pdf:function(n,r,f){return f<=r?NaN:n<=r||n>=f?0:2/l.PI*l.pow(l.pow(f-r,2)-l.pow(2*n-r-f,2),-.5)},cdf:function(n,r,f){return n<r?0:n<f?2/l.PI*l.asin(l.sqrt((n-r)/(f-r))):1},inv:function(u,n,r){return n+(.5-.5*l.cos(l.PI*u))*(r-n)},mean:function(n,r){return r<=n?NaN:(n+r)/2},median:function(n,r){return r<=n?NaN:(n+r)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*l.sin(2*l.PI*e.uniform.sample(0,1))},variance:function(n,r){return r<=n?NaN:l.pow(r-n,2)/8}});function d(u){return u/l.abs(u)}e.extend(e.laplace,{pdf:function(n,r,f){return f<=0?0:l.exp(-l.abs(n-r)/f)/(2*f)},cdf:function(n,r,f){return f<=0?0:n<r?.5*l.exp((n-r)/f):1-.5*l.exp(-(n-r)/f)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,n){return 2*n*n},sample:function(n,r){var f=e._random_fn()-.5;return n-r*d(f)*l.log(1-2*l.abs(f))}});function g(u,n,r){var f=12,s=6,c=-30,h=-50,v=60,p=8,y=3,_=2,b=3,w=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],R=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],N=u*.5;if(N>=p)return 1;var q=2*e.normal.cdf(N,0,1,1,0)-1;q>=l.exp(h/r)?q=l.pow(q,r):q=0;var C;u>y?C=_:C=b;for(var A=N,P=(p-N)/C,F=A+P,B=0,K=r-1,S=1;S<=C;S++){for(var $=0,Z=.5*(F+A),ie=.5*(F-A),M=1;M<=f;M++){var fe,ue;s<M?(fe=f-M+1,ue=w[fe-1]):(fe=M,ue=-w[fe-1]);var se=ie*ue,le=Z+se,ke=le*le;if(ke>v)break;var J=2*e.normal.cdf(le,0,1,1,0),he=2*e.normal.cdf(le,u,1,1,0),we=J*.5-he*.5;we>=l.exp(c/K)&&(we=R[fe-1]*l.exp(-(.5*ke))*l.pow(we,K),$+=we)}$*=2*ie*r/l.sqrt(2*l.PI),B+=$,A=F,F+=P}return q+=B,q<=l.exp(c/n)?0:(q=l.pow(q,n),q>=1?1:q)}function m(u,n,r){var f=.322232421088,s=.099348462606,c=-1,h=.588581570495,v=-.342242088547,p=.531103462366,y=-.204231210125,_=.10353775285,b=-453642210148e-16,w=.0038560700634,R=.8832,N=.2368,q=1.214,C=1.208,A=1.4142,P=120,F=.5-.5*u,B=l.sqrt(l.log(1/(F*F))),K=B+((((B*b+y)*B+v)*B+c)*B+f)/((((B*w+_)*B+p)*B+h)*B+s);r<P&&(K+=(K*K*K+K)/r/4);var S=R-N*K;return r<P&&(S+=-q/r+C*K/r),K*(S*l.log(n-1)+A)}e.extend(e.tukey,{cdf:function(n,r,f){var s=1,c=r,h=16,v=8,p=-30,y=1e-14,_=100,b=800,w=5e3,R=25e3,N=1,q=.5,C=.25,A=.125,P=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],F=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(f<2||s<1||c<2)return NaN;if(!Number.isFinite(n))return 1;if(f>R)return g(n,s,c);var B=f*.5,K=B*l.log(f)-f*l.log(2)-e.gammaln(B),S=B-1,$=f*.25,Z;f<=_?Z=N:f<=b?Z=q:f<=w?Z=C:Z=A,K+=l.log(Z);for(var ie=0,M=1;M<=50;M++){for(var fe=0,ue=(2*M-1)*Z,se=1;se<=h;se++){var le,ke;v<se?(le=se-v-1,ke=K+S*l.log(ue+P[le]*Z)-(P[le]*Z+ue)*$):(le=se-1,ke=K+S*l.log(ue-P[le]*Z)+(P[le]*Z-ue)*$);var J;if(ke>=p){v<se?J=n*l.sqrt((P[le]*Z+ue)*.5):J=n*l.sqrt((-(P[le]*Z)+ue)*.5);var he=g(J,s,c),we=he*F[le]*l.exp(ke);fe+=we}}if(M*Z>=1&&fe<=y)break;ie+=fe}if(fe>y)throw new Error("tukey.cdf failed to converge");return ie>1&&(ie=1),ie},inv:function(u,n,r){var f=1,s=n,c=1e-4,h=50;if(r<2||f<1||s<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var v=m(u,s,r),p=e.tukey.cdf(v,n,r)-u,y;p>0?y=l.max(0,v-1):y=v+1;for(var _=e.tukey.cdf(y,n,r)-u,b,w=1;w<h;w++){b=y-_*(y-v)/(_-p),p=_,v=y,b<0&&(b=0,_=-u),_=e.tukey.cdf(b,n,r)-u,y=b;var R=l.abs(y-v);if(R<c)return b}throw new Error("tukey.inv failed to converge")}})}(o,Math),function(e,l){var a=Array.prototype.push,d=e.utils.isArray;function g(m){return d(m)||m instanceof e}e.extend({add:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.map(u,function(r,f,s){return r+n[f][s]})):e.map(u,function(r){return r+n})},subtract:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.map(u,function(r,f,s){return r-n[f][s]||0})):e.map(u,function(r){return r-n})},divide:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.multiply(u,e.inv(n))):e.map(u,function(r){return r/n})},multiply:function(u,n){var r,f,s,c,h,v,p,y;if(u.length===void 0&&n.length===void 0)return u*n;if(h=u.length,v=u[0].length,p=e.zeros(h,s=g(n)?n[0].length:v),y=0,g(n)){for(;y<s;y++)for(r=0;r<h;r++){for(c=0,f=0;f<v;f++)c+=u[r][f]*n[f][y];p[r][y]=c}return h===1&&y===1?p[0][0]:p}return e.map(u,function(_){return _*n})},outer:function(u,n){return e.multiply(u.map(function(r){return[r]}),[n])},dot:function(u,n){g(u[0])||(u=[u]),g(n[0])||(n=[n]);for(var r=u[0].length===1&&u.length!==1?e.transpose(u):u,f=n[0].length===1&&n.length!==1?e.transpose(n):n,s=[],c=0,h=r.length,v=r[0].length,p,y;c<h;c++){for(s[c]=[],p=0,y=0;y<v;y++)p+=r[c][y]*f[c][y];s[c]=p}return s.length===1?s[0]:s},pow:function(u,n){return e.map(u,function(r){return l.pow(r,n)})},exp:function(u){return e.map(u,function(n){return l.exp(n)})},log:function(u){return e.map(u,function(n){return l.log(n)})},abs:function(u){return e.map(u,function(n){return l.abs(n)})},norm:function(u,n){var r=0,f=0;for(isNaN(n)&&(n=2),g(u[0])&&(u=u[0]);f<u.length;f++)r+=l.pow(l.abs(u[f]),n);return l.pow(r,1/n)},angle:function(u,n){return l.acos(e.dot(u,n)/(e.norm(u)*e.norm(n)))},aug:function(u,n){var r=[],f;for(f=0;f<u.length;f++)r.push(u[f].slice());for(f=0;f<r.length;f++)a.apply(r[f],n[f]);return r},inv:function(u){for(var n=u.length,r=u[0].length,f=e.identity(n,r),s=e.gauss_jordan(u,f),c=[],h=0,v;h<n;h++)for(c[h]=[],v=r;v<s[0].length;v++)c[h][v-r]=s[h][v];return c},det:function m(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var n=0,r=0;r<u.length;r++){for(var f=[],s=1;s<u.length;s++){f[s-1]=[];for(var c=0;c<u.length;c++)c<r?f[s-1][c]=u[s][c]:c>r&&(f[s-1][c-1]=u[s][c])}var h=r%2?-1:1;n+=m(f)*u[0][r]*h}return n},gauss_elimination:function(u,n){var r=0,f=0,s=u.length,c=u[0].length,h=1,v=0,p=[],y,_,b,w;for(u=e.aug(u,n),y=u[0].length,r=0;r<s;r++){for(_=u[r][r],f=r,w=r+1;w<c;w++)_<l.abs(u[w][r])&&(_=u[w][r],f=w);if(f!=r)for(w=0;w<y;w++)b=u[r][w],u[r][w]=u[f][w],u[f][w]=b;for(f=r+1;f<s;f++)for(h=u[f][r]/u[r][r],w=r;w<y;w++)u[f][w]=u[f][w]-h*u[r][w]}for(r=s-1;r>=0;r--){for(v=0,f=r+1;f<=s-1;f++)v=v+p[f]*u[r][f];p[r]=(u[r][y-1]-v)/u[r][r]}return p},gauss_jordan:function(u,n){var r=e.aug(u,n),f=r.length,s=r[0].length,c=0,h,v,p;for(v=0;v<f;v++){var y=v;for(p=v+1;p<f;p++)l.abs(r[p][v])>l.abs(r[y][v])&&(y=p);var _=r[v];for(r[v]=r[y],r[y]=_,p=v+1;p<f;p++)for(c=r[p][v]/r[v][v],h=v;h<s;h++)r[p][h]-=r[v][h]*c}for(v=f-1;v>=0;v--){for(c=r[v][v],p=0;p<v;p++)for(h=s-1;h>v-1;h--)r[p][h]-=r[v][h]*r[p][v]/c;for(r[v][v]/=c,h=f;h<s;h++)r[v][h]/=c}return r},triaUpSolve:function(u,n){var r=u[0].length,f=e.zeros(1,r)[0],s,c=!1;return n[0].length!=null&&(n=n.map(function(h){return h[0]}),c=!0),e.arange(r-1,-1,-1).forEach(function(h){s=e.arange(h+1,r).map(function(v){return f[v]*u[h][v]}),f[h]=(n[h]-e.sum(s))/u[h][h]}),c?f.map(function(h){return[h]}):f},triaLowSolve:function(u,n){var r=u[0].length,f=e.zeros(1,r)[0],s,c=!1;return n[0].length!=null&&(n=n.map(function(h){return h[0]}),c=!0),e.arange(r).forEach(function(h){s=e.arange(h).map(function(v){return u[h][v]*f[v]}),f[h]=(n[h]-e.sum(s))/u[h][h]}),c?f.map(function(h){return[h]}):f},lu:function(u){var n=u.length,r=e.identity(n),f=e.zeros(u.length,u[0].length),s;return e.arange(n).forEach(function(c){f[0][c]=u[0][c]}),e.arange(1,n).forEach(function(c){e.arange(c).forEach(function(h){s=e.arange(h).map(function(v){return r[c][v]*f[v][h]}),r[c][h]=(u[c][h]-e.sum(s))/f[h][h]}),e.arange(c,n).forEach(function(h){s=e.arange(c).map(function(v){return r[c][v]*f[v][h]}),f[c][h]=u[s.length][h]-e.sum(s)})}),[r,f]},cholesky:function(u){var n=u.length,r=e.zeros(u.length,u[0].length),f;return e.arange(n).forEach(function(s){f=e.arange(s).map(function(c){return l.pow(r[s][c],2)}),r[s][s]=l.sqrt(u[s][s]-e.sum(f)),e.arange(s+1,n).forEach(function(c){f=e.arange(s).map(function(h){return r[s][h]*r[c][h]}),r[c][s]=(u[s][c]-e.sum(f))/r[s][s]})}),r},gauss_jacobi:function(u,n,r,f){for(var s=0,c=0,h=u.length,v=[],p=[],y=[],_,b,w,R;s<h;s++)for(v[s]=[],p[s]=[],y[s]=[],c=0;c<h;c++)s>c?(v[s][c]=u[s][c],p[s][c]=y[s][c]=0):s<c?(p[s][c]=u[s][c],v[s][c]=y[s][c]=0):(y[s][c]=u[s][c],v[s][c]=p[s][c]=0);for(w=e.multiply(e.multiply(e.inv(y),e.add(v,p)),-1),b=e.multiply(e.inv(y),n),_=r,R=e.add(e.multiply(w,r),b),s=2;l.abs(e.norm(e.subtract(R,_)))>f;)_=R,R=e.add(e.multiply(w,_),b),s++;return R},gauss_seidel:function(u,n,r,f){for(var s=0,c=u.length,h=[],v=[],p=[],y,_,b,w,R;s<c;s++)for(h[s]=[],v[s]=[],p[s]=[],y=0;y<c;y++)s>y?(h[s][y]=u[s][y],v[s][y]=p[s][y]=0):s<y?(v[s][y]=u[s][y],h[s][y]=p[s][y]=0):(p[s][y]=u[s][y],h[s][y]=v[s][y]=0);for(w=e.multiply(e.multiply(e.inv(e.add(p,h)),v),-1),b=e.multiply(e.inv(e.add(p,h)),n),_=r,R=e.add(e.multiply(w,r),b),s=2;l.abs(e.norm(e.subtract(R,_)))>f;)_=R,R=e.add(e.multiply(w,_),b),s=s+1;return R},SOR:function(u,n,r,f,s){for(var c=0,h=u.length,v=[],p=[],y=[],_,b,w,R,N;c<h;c++)for(v[c]=[],p[c]=[],y[c]=[],_=0;_<h;_++)c>_?(v[c][_]=u[c][_],p[c][_]=y[c][_]=0):c<_?(p[c][_]=u[c][_],v[c][_]=y[c][_]=0):(y[c][_]=u[c][_],v[c][_]=p[c][_]=0);for(R=e.multiply(e.inv(e.add(y,e.multiply(v,s))),e.subtract(e.multiply(y,1-s),e.multiply(p,s))),w=e.multiply(e.multiply(e.inv(e.add(y,e.multiply(v,s))),n),s),b=r,N=e.add(e.multiply(R,r),w),c=2;l.abs(e.norm(e.subtract(N,b)))>f;)b=N,N=e.add(e.multiply(R,b),w),c++;return N},householder:function(u){for(var n=u.length,r=u[0].length,f=0,s=[],c=[],h,v,p,y,_;f<n-1;f++){for(h=0,y=f+1;y<r;y++)h+=u[y][f]*u[y][f];for(_=u[f+1][f]>0?-1:1,h=_*l.sqrt(h),v=l.sqrt((h*h-u[f+1][f]*h)/2),s=e.zeros(n,1),s[f+1][0]=(u[f+1][f]-h)/(2*v),p=f+2;p<n;p++)s[p][0]=u[p][f]/(2*v);c=e.subtract(e.identity(n,r),e.multiply(e.multiply(s,e.transpose(s)),2)),u=e.multiply(c,e.multiply(u,c))}return u},QR:function(){var m=e.sum,u=e.arange;function n(r){var f=r.length,s=r[0].length,c=e.zeros(s,s);r=e.copy(r);var h,v,p;for(v=0;v<s;v++){for(c[v][v]=l.sqrt(m(u(f).map(function(y){return r[y][v]*r[y][v]}))),h=0;h<f;h++)r[h][v]=r[h][v]/c[v][v];for(p=v+1;p<s;p++)for(c[v][p]=m(u(f).map(function(y){return r[y][v]*r[y][p]})),h=0;h<f;h++)r[h][p]=r[h][p]-r[h][v]*c[v][p]}return[r,c]}return n}(),lstsq:function(){function m(n){n=e.copy(n);var r=n.length,f=e.identity(r);return e.arange(r-1,-1,-1).forEach(function(s){e.sliceAssign(f,{row:s},e.divide(e.slice(f,{row:s}),n[s][s])),e.sliceAssign(n,{row:s},e.divide(e.slice(n,{row:s}),n[s][s])),e.arange(s).forEach(function(c){var h=e.multiply(n[c][s],-1),v=e.slice(n,{row:c}),p=e.multiply(e.slice(n,{row:s}),h);e.sliceAssign(n,{row:c},e.add(v,p));var y=e.slice(f,{row:c}),_=e.multiply(e.slice(f,{row:s}),h);e.sliceAssign(f,{row:c},e.add(y,_))})}),f}function u(n,r){var f=!1;r[0].length===void 0&&(r=r.map(function(R){return[R]}),f=!0);var s=e.QR(n),c=s[0],h=s[1],v=n[0].length,p=e.slice(c,{col:{end:v}}),y=e.slice(h,{row:{end:v}}),_=m(y),b=e.transpose(p);b[0].length===void 0&&(b=[b]);var w=e.multiply(e.multiply(_,b),r);return w.length===void 0&&(w=[[w]]),f?w.map(function(R){return R[0]}):w}return u}(),jacobi:function(u){for(var n=1,r=u.length,f=e.identity(r,r),s=[],c,h,v,p,y,_,b,w;n===1;){for(_=u[0][1],p=0,y=1,h=0;h<r;h++)for(v=0;v<r;v++)h!=v&&_<l.abs(u[h][v])&&(_=l.abs(u[h][v]),p=h,y=v);for(u[p][p]===u[y][y]?b=u[p][y]>0?l.PI/4:-l.PI/4:b=l.atan(2*u[p][y]/(u[p][p]-u[y][y]))/2,w=e.identity(r,r),w[p][p]=l.cos(b),w[p][y]=-l.sin(b),w[y][p]=l.sin(b),w[y][y]=l.cos(b),f=e.multiply(f,w),c=e.multiply(e.multiply(e.inv(w),u),w),u=c,n=0,h=1;h<r;h++)for(v=1;v<r;v++)h!=v&&l.abs(u[h][v])>.001&&(n=1)}for(h=0;h<r;h++)s.push(u[h][h]);return[f,s]},rungekutta:function(u,n,r,f,s,c){var h,v,p,y,_;if(c===2)for(;f<=r;)h=n*u(f,s),v=n*u(f+n,s+h),p=s+(h+v)/2,s=p,f=f+n;if(c===4)for(;f<=r;)h=n*u(f,s),v=n*u(f+n/2,s+h/2),y=n*u(f+n/2,s+v/2),_=n*u(f+n,s+y),p=s+(h+2*v+2*y+_)/6,s=p,f=f+n;return s},romberg:function(u,n,r,f){for(var s=0,c=(r-n)/2,h=[],v=[],p=[],y,_,b,w,R;s<f/2;){for(R=u(n),b=n,w=0;b<=r;b=b+c,w++)h[w]=b;for(y=h.length,b=1;b<y-1;b++)R+=(b%2!==0?4:2)*u(h[b]);R=c/3*(R+u(r)),p[s]=R,c/=2,s++}for(_=p.length,y=1;_!==1;){for(b=0;b<_-1;b++)v[b]=(l.pow(4,y)*p[b+1]-p[b])/(l.pow(4,y)-1);_=v.length,p=v,v=[],y++}return p},richardson:function(u,n,r,f){function s(N,q){for(var C=0,A=N.length,P;C<A;C++)N[C]===q&&(P=C);return P}for(var c=l.abs(r-u[s(u,r)+1]),h=0,v=[],p=[],y,_,b,w,R;f>=c;)y=s(u,r+f),_=s(u,r),v[h]=(n[y]-2*n[_]+n[2*_-y])/(f*f),f/=2,h++;for(w=v.length,b=1;w!=1;){for(R=0;R<w-1;R++)p[R]=(l.pow(4,b)*v[R+1]-v[R])/(l.pow(4,b)-1);w=p.length,v=p,p=[],b++}return v},simpson:function(u,n,r,f){for(var s=(r-n)/f,c=u(n),h=[],v=n,p=0,y=1,_;v<=r;v=v+s,p++)h[p]=v;for(_=h.length;y<_-1;y++)c+=(y%2!==0?4:2)*u(h[y]);return s/3*(c+u(r))},hermite:function(u,n,r,f){for(var s=u.length,c=0,h=0,v=[],p=[],y=[],_=[],b;h<s;h++){for(v[h]=1,b=0;b<s;b++)h!=b&&(v[h]*=(f-u[b])/(u[h]-u[b]));for(p[h]=0,b=0;b<s;b++)h!=b&&(p[h]+=1/(u[h]-u[b]));y[h]=(1-2*(f-u[h])*p[h])*(v[h]*v[h]),_[h]=(f-u[h])*(v[h]*v[h]),c+=y[h]*n[h]+_[h]*r[h]}return c},lagrange:function(u,n,r){for(var f=0,s=0,c,h,v=u.length;s<v;s++){for(h=n[s],c=0;c<v;c++)s!=c&&(h*=(r-u[c])/(u[s]-u[c]));f+=h}return f},cubic_spline:function(u,n,r){for(var f=u.length,s=0,c,h=[],v=[],p=[],y=[],_=[],b=[],w=[];s<f-1;s++)_[s]=u[s+1]-u[s];for(p[0]=0,s=1;s<f-1;s++)p[s]=3/_[s]*(n[s+1]-n[s])-3/_[s-1]*(n[s]-n[s-1]);for(s=1;s<f-1;s++)h[s]=[],v[s]=[],h[s][s-1]=_[s-1],h[s][s]=2*(_[s-1]+_[s]),h[s][s+1]=_[s],v[s][0]=p[s];for(y=e.multiply(e.inv(h),v),c=0;c<f-1;c++)b[c]=(n[c+1]-n[c])/_[c]-_[c]*(y[c+1][0]+2*y[c][0])/3,w[c]=(y[c+1][0]-y[c][0])/(3*_[c]);for(c=0;c<f&&!(u[c]>r);c++);return c-=1,n[c]+(r-u[c])*b[c]+e.sq(r-u[c])*y[c]+(r-u[c])*e.sq(r-u[c])*w[c]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var n=u.length,r=u[0].length,f=0,s,c,h=[],v=[],p=[],y=[],_=[],b=[],w=[],R=[],N=[],q=[];for(f=0;f<n;f++)h[f]=e.sum(u[f])/r;for(f=0;f<r;f++)for(w[f]=[],s=0;s<n;s++)w[f][s]=u[s][f]-h[s];for(w=e.transpose(w),f=0;f<n;f++)for(R[f]=[],s=0;s<n;s++)R[f][s]=e.dot([w[f]],[w[s]])/(r-1);for(p=e.jacobi(R),N=p[0],v=p[1],q=e.transpose(N),f=0;f<v.length;f++)for(s=f;s<v.length;s++)v[f]<v[s]&&(c=v[f],v[f]=v[s],v[s]=c,y=q[f],q[f]=q[s],q[s]=y);for(b=e.transpose(w),f=0;f<n;f++)for(_[f]=[],s=0;s<b.length;s++)_[f][s]=e.dot([q[f]],[b[s]]);return[u,v,q,_]}}),function(m){for(var u=0;u<m.length;u++)(function(n){e.fn[n]=function(r,f){var s=this;return f?(setTimeout(function(){f.call(s,e.fn[n].call(s,r))},15),this):typeof e[n](this,r)=="number"?e[n](this,r):e(e[n](this,r))}})(m[u])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(o,Math),function(e,l){var a=[].slice,d=e.utils.isNumber,g=e.utils.isArray;e.extend({zscore:function(){var n=a.call(arguments);return d(n[1])?(n[0]-n[1])/n[2]:(n[0]-e.mean(n[1]))/e.stdev(n[1],n[2])},ztest:function(){var n=a.call(arguments),r;return g(n[1])?(r=e.zscore(n[0],n[1],n[3]),n[2]===1?e.normal.cdf(-l.abs(r),0,1):e.normal.cdf(-l.abs(r),0,1)*2):n.length>2?(r=e.zscore(n[0],n[1],n[2]),n[3]===1?e.normal.cdf(-l.abs(r),0,1):e.normal.cdf(-l.abs(r),0,1)*2):(r=n[0],n[1]===1?e.normal.cdf(-l.abs(r),0,1):e.normal.cdf(-l.abs(r),0,1)*2)}}),e.extend(e.fn,{zscore:function(n,r){return(n-this.mean())/this.stdev(r)},ztest:function(n,r,f){var s=l.abs(this.zscore(n,f));return r===1?e.normal.cdf(-s,0,1):e.normal.cdf(-s,0,1)*2}}),e.extend({tscore:function(){var n=a.call(arguments);return n.length===4?(n[0]-n[1])/(n[2]/l.sqrt(n[3])):(n[0]-e.mean(n[1]))/(e.stdev(n[1],!0)/l.sqrt(n[1].length))},ttest:function(){var n=a.call(arguments),r;return n.length===5?(r=l.abs(e.tscore(n[0],n[1],n[2],n[3])),n[4]===1?e.studentt.cdf(-r,n[3]-1):e.studentt.cdf(-r,n[3]-1)*2):d(n[1])?(r=l.abs(n[0]),n[2]==1?e.studentt.cdf(-r,n[1]-1):e.studentt.cdf(-r,n[1]-1)*2):(r=l.abs(e.tscore(n[0],n[1])),n[2]==1?e.studentt.cdf(-r,n[1].length-1):e.studentt.cdf(-r,n[1].length-1)*2)}}),e.extend(e.fn,{tscore:function(n){return(n-this.mean())/(this.stdev(!0)/l.sqrt(this.cols()))},ttest:function(n,r){return r===1?1-e.studentt.cdf(l.abs(this.tscore(n)),this.cols()-1):e.studentt.cdf(-l.abs(this.tscore(n)),this.cols()-1)*2}}),e.extend({anovafscore:function(){var n=a.call(arguments),r,f,s,c,h,v,p,y;if(n.length===1){for(h=new Array(n[0].length),p=0;p<n[0].length;p++)h[p]=n[0][p];n=h}for(f=new Array,p=0;p<n.length;p++)f=f.concat(n[p]);for(s=e.mean(f),r=0,p=0;p<n.length;p++)r=r+n[p].length*l.pow(e.mean(n[p])-s,2);for(r/=n.length-1,v=0,p=0;p<n.length;p++)for(c=e.mean(n[p]),y=0;y<n[p].length;y++)v+=l.pow(n[p][y]-c,2);return v/=f.length-n.length,r/v},anovaftest:function(){var n=a.call(arguments),r,f,s,c;if(d(n[0]))return 1-e.centralF.cdf(n[0],n[1],n[2]);var h=e.anovafscore(n);for(r=n.length-1,s=0,c=0;c<n.length;c++)s=s+n[c].length;return f=s-r-1,1-e.centralF.cdf(h,r,f)},ftest:function(n,r,f){return 1-e.centralF.cdf(n,r,f)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var n=0,r;for(r=0;r<this.length;r++)n=n+this[r].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var n=a.call(arguments),r,f,s,c,h;return d(n[0])?(r=n[0],f=n[1],s=n[2],c=n[3],h=n[4]):(r=e.mean(n[0]),f=e.mean(n[1]),s=n[0].length,c=n[1].length,h=n[2]),l.abs(r-f)/(h*l.sqrt((1/s+1/c)/2))},qtest:function(){var n=a.call(arguments),r;n.length===3?(r=n[0],n=n.slice(1)):n.length===7?(r=e.qscore(n[0],n[1],n[2],n[3],n[4]),n=n.slice(5)):(r=e.qscore(n[0],n[1],n[2]),n=n.slice(3));var f=n[0],s=n[1];return 1-e.tukey.cdf(r,s,f-s)},tukeyhsd:function(n){for(var r=e.pooledstdev(n),f=n.map(function(y){return e.mean(y)}),s=n.reduce(function(y,_){return y+_.length},0),c=[],h=0;h<n.length;++h)for(var v=h+1;v<n.length;++v){var p=e.qtest(f[h],f[v],n[h].length,n[v].length,r,s,n.length);c.push([[h,v],p])}return c}}),e.extend({normalci:function(){var n=a.call(arguments),r=new Array(2),f;return n.length===4?f=l.abs(e.normal.inv(n[1]/2,0,1)*n[2]/l.sqrt(n[3])):f=l.abs(e.normal.inv(n[1]/2,0,1)*e.stdev(n[2])/l.sqrt(n[2].length)),r[0]=n[0]-f,r[1]=n[0]+f,r},tci:function(){var n=a.call(arguments),r=new Array(2),f;return n.length===4?f=l.abs(e.studentt.inv(n[1]/2,n[3]-1)*n[2]/l.sqrt(n[3])):f=l.abs(e.studentt.inv(n[1]/2,n[2].length-1)*e.stdev(n[2],!0)/l.sqrt(n[2].length)),r[0]=n[0]-f,r[1]=n[0]+f,r},significant:function(n,r){return n<r}}),e.extend(e.fn,{normalci:function(n,r){return e.normalci(n,r,this.toArray())},tci:function(n,r){return e.tci(n,r,this.toArray())}});function m(u,n,r,f){if(u>1||r>1||u<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var s=(u*n+r*f)/(n+f),c=l.sqrt(s*(1-s)*(1/n+1/f));return(u-r)/c}e.extend(e.fn,{oneSidedDifferenceOfProportions:function(n,r,f,s){var c=m(n,r,f,s);return e.ztest(c,1)},twoSidedDifferenceOfProportions:function(n,r,f,s){var c=m(n,r,f,s);return e.ztest(c,2)}})}(o,Math),o.models=function(){function e(m){var u=m[0].length,n=o.arange(u).map(function(r){var f=o.arange(u).filter(function(s){return s!==r});return l(o.col(m,r).map(function(s){return s[0]}),o.col(m,f))});return n}function l(m,u){var n=m.length,r=u[0].length-1,f=n-r-1,s=o.lstsq(u,m),c=o.multiply(u,s.map(function(w){return[w]})).map(function(w){return w[0]}),h=o.subtract(m,c),v=o.mean(m),p=o.sum(c.map(function(w){return Math.pow(w-v,2)})),y=o.sum(m.map(function(w,R){return Math.pow(w-c[R],2)})),_=p+y,b=p/_;return{exog:u,endog:m,nobs:n,df_model:r,df_resid:f,coef:s,predict:c,resid:h,ybar:v,SST:_,SSE:p,SSR:y,R2:b}}function a(m){var u=e(m.exog),n=Math.sqrt(m.SSR/m.df_resid),r=u.map(function(v){var p=v.SST,y=v.R2;return n/Math.sqrt(p*(1-y))}),f=m.coef.map(function(v,p){return(v-0)/r[p]}),s=f.map(function(v){var p=o.studentt.cdf(v,m.df_resid);return(p>.5?1-p:p)*2}),c=o.studentt.inv(.975,m.df_resid),h=m.coef.map(function(v,p){var y=c*r[p];return[v-y,v+y]});return{se:r,t:f,p:s,sigmaHat:n,interval95:h}}function d(m){var u=m.R2/m.df_model/((1-m.R2)/m.df_resid),n=function(f,s,c){return o.beta.cdf(f/(c/s+f),s/2,c/2)},r=1-n(u,m.df_model,m.df_resid);return{F_statistic:u,pvalue:r}}function g(m,u){var n=l(m,u),r=a(n),f=d(n),s=1-(1-n.R2)*((n.nobs-1)/n.df_resid);return n.t=r,n.f=f,n.adjust_R2=s,n}return{ols:g}}(),o.extend({buildxmatrix:function(){for(var l=new Array(arguments.length),a=0;a<arguments.length;a++){var d=[1];l[a]=d.concat(arguments[a])}return o(l)},builddxmatrix:function(){for(var l=new Array(arguments[0].length),a=0;a<arguments[0].length;a++){var d=[1];l[a]=d.concat(arguments[0][a])}return o(l)},buildjxmatrix:function(l){for(var a=new Array(l.length),d=0;d<l.length;d++)a[d]=l[d];return o.builddxmatrix(a)},buildymatrix:function(l){return o(l).transpose()},buildjymatrix:function(l){return l.transpose()},matrixmult:function(l,a){var d,g,m,u,n;if(l.cols()==a.rows()){if(a.rows()>1){for(u=[],d=0;d<l.rows();d++)for(u[d]=[],g=0;g<a.cols();g++){for(n=0,m=0;m<l.cols();m++)n+=l.toArray()[d][m]*a.toArray()[m][g];u[d][g]=n}return o(u)}for(u=[],d=0;d<l.rows();d++)for(u[d]=[],g=0;g<a.cols();g++){for(n=0,m=0;m<l.cols();m++)n+=l.toArray()[d][m]*a.toArray()[g];u[d][g]=n}return o(u)}},regress:function(l,a){var d=o.xtranspxinv(l),g=l.transpose(),m=o.matrixmult(o(d),g);return o.matrixmult(m,a)},regresst:function(l,a,d){var g=o.regress(l,a),m={};m.anova={};var u=o.jMatYBar(l,g);m.yBar=u;var n=a.mean();m.anova.residuals=o.residuals(a,u),m.anova.ssr=o.ssr(u,n),m.anova.msr=m.anova.ssr/(l[0].length-1),m.anova.sse=o.sse(a,u),m.anova.mse=m.anova.sse/(a.length-(l[0].length-1)-1),m.anova.sst=o.sst(a,n),m.anova.mst=m.anova.sst/(a.length-1),m.anova.r2=1-m.anova.sse/m.anova.sst,m.anova.r2<0&&(m.anova.r2=0),m.anova.fratio=m.anova.msr/m.anova.mse,m.anova.pvalue=o.anovaftest(m.anova.fratio,l[0].length-1,a.length-(l[0].length-1)-1),m.anova.rmse=Math.sqrt(m.anova.mse),m.anova.r2adj=1-m.anova.mse/m.anova.mst,m.anova.r2adj<0&&(m.anova.r2adj=0),m.stats=new Array(l[0].length);for(var r=o.xtranspxinv(l),f,s,c,h=0;h<g.length;h++)f=Math.sqrt(m.anova.mse*Math.abs(r[h][h])),s=Math.abs(g[h]/f),c=o.ttest(s,a.length-l[0].length-1,d),m.stats[h]=[g[h],f,s,c];return m.regress=g,m},xtranspx:function(l){return o.matrixmult(l.transpose(),l)},xtranspxinv:function(l){var a=o.matrixmult(l.transpose(),l),d=o.inv(a);return d},jMatYBar:function(l,a){var d=o.matrixmult(l,a);return new o(d)},residuals:function(l,a){return o.matrixsubtract(l,a)},ssr:function(l,a){for(var d=0,g=0;g<l.length;g++)d+=Math.pow(l[g]-a,2);return d},sse:function(l,a){for(var d=0,g=0;g<l.length;g++)d+=Math.pow(l[g]-a[g],2);return d},sst:function(l,a){for(var d=0,g=0;g<l.length;g++)d+=Math.pow(l[g]-a,2);return d},matrixsubtract:function(l,a){for(var d=new Array(l.length),g=0;g<l.length;g++){d[g]=new Array(l[g].length);for(var m=0;m<l[g].length;m++)d[g][m]=l[g][m]-a[g][m]}return o(d)}}),o.jStat=o,o})})(Io);const Do=mr,Lo=(i,t,o)=>{const l=1/o;o=l,t=t/1e3*(1/l);let a=[];return i.forEach(d=>{const g=Array(8).fill(d.maxWell.length);let m=Array(g.length).fill(0);for(var u=0;u<g.length;u++)m[u]=t*l*o**u;const n=[-1*Math.log10(m[0]*10),-1*Math.log10(m[m.length-1]/10)];let r=Array(g[0]).fill(0);for(var u=0;u<g.length;u++)r[u]=d.maxWell.filter(c=>c>=u).length;let f=0;r[0]!=0&&(f=Ao.local_min(s=>-1*Co(s,m,g,r),n[0],n[1],1e-4).x),a=[{sample:d.name,nrep:d.maxWell.length,titer:f,titer_ul:10**f/1e3},...a]}),a},Co=(i,t,o,e)=>{let l=1;for(var a=0;a<t.length;a++){let d=-1*Math.expm1(10**i*-1*t[a]);l=l*Do.binomial.pdf(e[a],o[a],d)}return l},Oo=i=>{let t=[],o=[],e;return i.forEach(l=>{if(l.added)for(var a=0;a<l.maxWell.length;a++)t.includes(l.colNames[a])?(e=o.find(d=>d.name==l.colNames[a]),e.maxWell=[l.maxWell[a],...e.maxWell]):(e={name:l.colNames[a],maxWell:[l.maxWell[a]]},t=[e.name,...t],o=[e,...o])}),o},Vo=(i,t,o)=>{if(t==null|o==null)return null;const e=Oo(i);let l=[];const a=qo(e,t,o),d=Lo(e,t,o);for(var g=0;g<a.length;g++)l=[{sample:a[g].sample,nrep:a[g].nrep,rm_titer:a[g].titer,ms_titer:d[g].titer,ms_titer_ul:d[g].titer_ul},...l];return l};function oi(i,t,o){const e=i.slice();return e[3]=t[o],e}function fi(i,t,o){const e=i.slice();return e[6]=t[o],e}function ui(i){let t,o,e,l,a,d,g,m,u,n,r,f,s,c,h,v,p,y,_,b,w,R=i[0],N=[];for(let q=0;q<R.length;q+=1)N[q]=ai(oi(i,R,q));return b=new Rn({props:{type:"secondary",$$slots:{default:[Wo]},$$scope:{ctx:i}}}),b.$on("click",i[2]),{c(){t=I("table"),o=I("tr"),e=I("th"),l=W("Sample"),a=U(),d=I("th"),g=W("TCID50/L"),m=U(),u=I("th"),n=W("SIN/L"),r=U(),f=I("th"),s=W("Log10 SIN/mL"),c=U(),h=I("th"),v=W("# Replicates"),p=U();for(let q=0;q<N.length;q+=1)N[q].c();y=U(),_=I("div"),j(b.$$.fragment),this.h()},l(q){t=D(q,"TABLE",{class:!0});var C=z(t);o=D(C,"TR",{});var A=z(o);e=D(A,"TH",{class:!0});var P=z(e);l=H(P,"Sample"),P.forEach(k),a=Q(A),d=D(A,"TH",{class:!0});var F=z(d);g=H(F,"TCID50/L"),F.forEach(k),m=Q(A),u=D(A,"TH",{class:!0});var B=z(u);n=H(B,"SIN/L"),B.forEach(k),r=Q(A),f=D(A,"TH",{class:!0});var K=z(f);s=H(K,"Log10 SIN/mL"),K.forEach(k),c=Q(A),h=D(A,"TH",{class:!0});var S=z(h);v=H(S,"# Replicates"),S.forEach(k),A.forEach(k),p=Q(C);for(let Z=0;Z<N.length;Z+=1)N[Z].l(C);C.forEach(k),y=Q(q),_=D(q,"DIV",{class:!0});var $=z(_);ee(b.$$.fragment,$),$.forEach(k),this.h()},h(){E(e,"class","svelte-hzsd5o"),E(d,"class","titer svelte-hzsd5o"),E(u,"class","titer svelte-hzsd5o"),E(f,"class","titer svelte-hzsd5o"),E(h,"class","titer svelte-hzsd5o"),E(t,"class","titer-table svelte-hzsd5o"),E(_,"class","dl_button svelte-hzsd5o")},m(q,C){L(q,t,C),T(t,o),T(o,e),T(e,l),T(o,a),T(o,d),T(d,g),T(o,m),T(o,u),T(u,n),T(o,r),T(o,f),T(f,s),T(o,c),T(o,h),T(h,v),T(t,p);for(let A=0;A<N.length;A+=1)N[A].m(t,null);L(q,y,C),L(q,_,C),ne(b,_,null),w=!0},p(q,C){if(C&3){R=q[0];let P;for(P=0;P<R.length;P+=1){const F=oi(q,R,P);N[P]?N[P].p(F,C):(N[P]=ai(F),N[P].c(),N[P].m(t,null))}for(;P<N.length;P+=1)N[P].d(1);N.length=R.length}const A={};C&512&&(A.$$scope={dirty:C,ctx:q}),b.$set(A)},i(q){w||(O(b.$$.fragment,q),w=!0)},o(q){G(b.$$.fragment,q),w=!1},d(q){q&&k(t),Ce(N,q),q&&k(y),q&&k(_),te(b)}}}function si(i){let t,o=i[3][i[6]].toFixed(2)+"",e;return{c(){t=I("td"),e=W(o),this.h()},l(l){t=D(l,"TD",{class:!0});var a=z(t);e=H(a,o),a.forEach(k),this.h()},h(){E(t,"class","titer svelte-hzsd5o")},m(l,a){L(l,t,a),T(t,e)},p(l,a){a&1&&o!==(o=l[3][l[6]].toFixed(2)+"")&&Ne(e,o)},d(l){l&&k(t)}}}function ai(i){let t,o,e=i[3].sample+"",l,a,d,g,m=i[3].nrep+"",u,n,r=i[1],f=[];for(let s=0;s<r.length;s+=1)f[s]=si(fi(i,r,s));return{c(){t=I("tr"),o=I("td"),l=W(e),a=U();for(let s=0;s<f.length;s+=1)f[s].c();d=U(),g=I("td"),u=W(m),n=U(),this.h()},l(s){t=D(s,"TR",{});var c=z(t);o=D(c,"TD",{class:!0});var h=z(o);l=H(h,e),h.forEach(k),a=Q(c);for(let p=0;p<f.length;p+=1)f[p].l(c);d=Q(c),g=D(c,"TD",{class:!0});var v=z(g);u=H(v,m),v.forEach(k),n=Q(c),c.forEach(k),this.h()},h(){E(o,"class","svelte-hzsd5o"),E(g,"class","titer svelte-hzsd5o")},m(s,c){L(s,t,c),T(t,o),T(o,l),T(t,a);for(let h=0;h<f.length;h+=1)f[h].m(t,null);T(t,d),T(t,g),T(g,u),T(t,n)},p(s,c){if(c&1&&e!==(e=s[3].sample+"")&&Ne(l,e),c&3){r=s[1];let h;for(h=0;h<r.length;h+=1){const v=fi(s,r,h);f[h]?f[h].p(v,c):(f[h]=si(v),f[h].c(),f[h].m(t,d))}for(;h<f.length;h+=1)f[h].d(1);f.length=r.length}c&1&&m!==(m=s[3].nrep+"")&&Ne(u,m)},d(s){s&&k(t),Ce(f,s)}}}function Wo(i){let t;return{c(){t=W("Download CSV")},l(o){t=H(o,"Download CSV")},m(o,e){L(o,t,e)},d(o){o&&k(t)}}}function Ho(i){let t,o,e=i[0]!=null&&ui(i);return{c(){e&&e.c(),t=_e()},l(l){e&&e.l(l),t=_e()},m(l,a){e&&e.m(l,a),L(l,t,a),o=!0},p(l,[a]){l[0]!=null?e?(e.p(l,a),a&1&&O(e,1)):(e=ui(l),e.c(),O(e,1),e.m(t.parentNode,t)):e&&(qe(),G(e,1,1,()=>{e=null}),Pe())},i(l){o||(O(e),o=!0)},o(l){G(e),o=!1},d(l){e&&e.d(l),l&&k(t)}}}function Bo(i,t,o){let{data:e}=t,l=["rm_titer","ms_titer_ul","ms_titer"];const a=()=>{let d=[["sample","ReedMuench_titer","MidSin_titer_uL","MidSin_titer_log10mL","nrep"]];e.forEach(r=>{d=[...d,[r.sample,r.rm_titer,r.ms_titer_ul,r.ms_titer,r.nrep]]});let g="data:text/csv;charset=utf-8,"+d.map(r=>r.join(",")).join(`
`);var m=encodeURI(g),u=document.createElement("a");u.setAttribute("href",m);let n=new Date().toISOString().slice(0,10);u.setAttribute("download",n+"_titers.csv"),document.body.appendChild(u),u.click()};return i.$$set=d=>{"data"in d&&o(0,e=d.data)},[e,l,a]}class Go extends de{constructor(t){super(),me(this,t,Bo,Ho,ge,{data:0})}}function Fo(i){return i===0?!0:i}function Ke(i){return Fo(i)?Array.isArray(i)?t=>i.map(o=>typeof o!="function"?t[o]:o(t)):typeof i!="function"?t=>t[i]:i:null}function Uo(i){const t={};for(const o of i){if(Object(o)!==o)throw new TypeError("iterable for fromEntries should yield objects");const{"0":e,"1":l}=o;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:l})}return t}function sr(i,t={}){return Uo(Object.entries(i).filter(([o,e])=>e!==void 0&&t[o]===void 0))}function Qo(i,t,{sort:o=!1}={}){if(!Array.isArray(i))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const e={},l=Object.keys(t),a=l.length;let d,g,m,u,n,r,f;const s=i.length;for(d=0;d<a;d+=1){for(f=new Set,u=l[d],n=t[u],g=0;g<s;g+=1)if(r=n(i[g]),Array.isArray(r)){const h=r.length;for(m=0;m<h;m+=1)f.add(r[m])}else f.add(r);const c=Array.from(f);e[u]=o===!0?c.sort():c}return e}function Ko(i,t){if(!Array.isArray(i))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const o={},e=Object.keys(t),l=e.length;let a,d,g,m,u,n,r,f;const s=i.length;for(a=0;a<l;a+=1){for(m=e[a],r=t[m],u=null,n=null,d=0;d<s;d+=1)if(f=r(i[d]),Array.isArray(f)){const c=f.length;for(g=0;g<c;g+=1)f[g]!==!1&&f[g]!==void 0&&f[g]!==null&&Number.isNaN(f[g])===!1&&((u===null||f[g]<u)&&(u=f[g]),(n===null||f[g]>n)&&(n=f[g]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((u===null||f<u)&&(u=f),(n===null||f>n)&&(n=f));o[m]=[u,n]}return o}function Yo(i){return typeof i.bandwidth=="function"||Zo(Object.keys(i),["domain","range","unknown","copy"])?"ordinal":"other"}function Zo(i,t){return i.length!==t.length?!1:i.every(o=>t.includes(o))}function Jo(i,t,o){const e=Object.keys(o).reduce((a,d)=>{const g=Yo(o[d]);return a[g]||(a[g]={}),a[g][d]=t[d],a},{ordinal:!1,other:!1});let l={};return e.ordinal&&(l=Qo(i,e.ordinal)),e.other&&(l={...l,...Ko(i,e.other)}),l}function Xo(i=[],t){return Array.isArray(t)===!0?t.map((o,e)=>o===null?i[e]:o):i}function Vt(i){return function([o,e]){return typeof e=="function"&&(e=e(o[i])),o?Xo(o[i],e):e}}function Kt(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function Mo(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function il(i){let t,o,e;i.length!==2?(t=Kt,o=(g,m)=>Kt(i(g),m),e=(g,m)=>i(g)-m):(t=i===Kt||i===Mo?i:So,o=i,e=i);function l(g,m,u=0,n=g.length){if(u<n){if(t(m,m)!==0)return n;do{const r=u+n>>>1;o(g[r],m)<0?u=r+1:n=r}while(u<n)}return u}function a(g,m,u=0,n=g.length){if(u<n){if(t(m,m)!==0)return n;do{const r=u+n>>>1;o(g[r],m)<=0?u=r+1:n=r}while(u<n)}return u}function d(g,m,u=0,n=g.length){const r=l(g,m,u,n-1);return r>u&&e(g[r-1],m)>-e(g[r],m)?r-1:r}return{left:l,center:d,right:a}}function So(){return 0}function $o(i){return i===null?NaN:+i}const jo=il(Kt),ef=jo.right;il($o).center;const nf=ef;class ci extends Map{constructor(t,o=lf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),t!=null)for(const[e,l]of t)this.set(e,l)}get(t){return super.get(di(this,t))}has(t){return super.has(di(this,t))}set(t,o){return super.set(tf(this,t),o)}delete(t){return super.delete(rf(this,t))}}function di({_intern:i,_key:t},o){const e=t(o);return i.has(e)?i.get(e):o}function tf({_intern:i,_key:t},o){const e=t(o);return i.has(e)?i.get(e):(i.set(e,o),o)}function rf({_intern:i,_key:t},o){const e=t(o);return i.has(e)&&(o=i.get(e),i.delete(e)),o}function lf(i){return i!==null&&typeof i=="object"?i.valueOf():i}var gr=Math.sqrt(50),hr=Math.sqrt(10),vr=Math.sqrt(2);function _r(i,t,o){var e,l=-1,a,d,g;if(t=+t,i=+i,o=+o,i===t&&o>0)return[i];if((e=t<i)&&(a=i,i=t,t=a),(g=ll(i,t,o))===0||!isFinite(g))return[];if(g>0){let m=Math.round(i/g),u=Math.round(t/g);for(m*g<i&&++m,u*g>t&&--u,d=new Array(a=u-m+1);++l<a;)d[l]=(m+l)*g}else{g=-g;let m=Math.round(i*g),u=Math.round(t*g);for(m/g<i&&++m,u/g>t&&--u,d=new Array(a=u-m+1);++l<a;)d[l]=(m+l)/g}return e&&d.reverse(),d}function ll(i,t,o){var e=(t-i)/Math.max(0,o),l=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,l);return l>=0?(a>=gr?10:a>=hr?5:a>=vr?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(a>=gr?10:a>=hr?5:a>=vr?2:1)}function of(i,t,o){var e=Math.abs(t-i)/Math.max(0,o),l=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),a=e/l;return a>=gr?l*=10:a>=hr?l*=5:a>=vr&&(l*=2),t<i?-l:l}function ff(i,t,o){i=+i,t=+t,o=(l=arguments.length)<2?(t=i,i=0,1):l<3?1:+o;for(var e=-1,l=Math.max(0,Math.ceil((t-i)/o))|0,a=new Array(l);++e<l;)a[e]=i+e*o;return a}function tt(i,t){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(t).domain(i);break}return this}const mi=Symbol("implicit");function ol(){var i=new ci,t=[],o=[],e=mi;function l(a){let d=i.get(a);if(d===void 0){if(e!==mi)return e;i.set(a,d=t.push(a)-1)}return o[d%o.length]}return l.domain=function(a){if(!arguments.length)return t.slice();t=[],i=new ci;for(const d of a)i.has(d)||i.set(d,t.push(d)-1);return l},l.range=function(a){return arguments.length?(o=Array.from(a),l):o.slice()},l.unknown=function(a){return arguments.length?(e=a,l):e},l.copy=function(){return ol(t,o).unknown(e)},tt.apply(l,arguments),l}function fl(){var i=ol().unknown(void 0),t=i.domain,o=i.range,e=0,l=1,a,d,g=!1,m=0,u=0,n=.5;delete i.unknown;function r(){var f=t().length,s=l<e,c=s?l:e,h=s?e:l;a=(h-c)/Math.max(1,f-m+u*2),g&&(a=Math.floor(a)),c+=(h-c-a*(f-m))*n,d=a*(1-m),g&&(c=Math.round(c),d=Math.round(d));var v=ff(f).map(function(p){return c+a*p});return o(s?v.reverse():v)}return i.domain=function(f){return arguments.length?(t(f),r()):t()},i.range=function(f){return arguments.length?([e,l]=f,e=+e,l=+l,r()):[e,l]},i.rangeRound=function(f){return[e,l]=f,e=+e,l=+l,g=!0,r()},i.bandwidth=function(){return d},i.step=function(){return a},i.round=function(f){return arguments.length?(g=!!f,r()):g},i.padding=function(f){return arguments.length?(m=Math.min(1,u=+f),r()):m},i.paddingInner=function(f){return arguments.length?(m=Math.min(1,f),r()):m},i.paddingOuter=function(f){return arguments.length?(u=+f,r()):u},i.align=function(f){return arguments.length?(n=Math.max(0,Math.min(1,f)),r()):n},i.copy=function(){return fl(t(),[e,l]).round(g).paddingInner(m).paddingOuter(u).align(n)},tt.apply(r(),arguments)}function ul(i){var t=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,delete i.paddingOuter,i.copy=function(){return ul(t())},i}function uf(){return ul(fl.apply(null,arguments).paddingInner(1))}function Rr(i,t,o){i.prototype=t.prototype=o,o.constructor=i}function sl(i,t){var o=Object.create(i.prototype);for(var e in t)o[e]=t[e];return o}function rt(){}var Mn=.7,Xt=1/Mn,En="\\s*([+-]?\\d+)\\s*",Sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sf=/^#([0-9a-f]{3,8})$/,af=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),cf=new RegExp(`^rgb\\(${Le},${Le},${Le}\\)$`),df=new RegExp(`^rgba\\(${En},${En},${En},${Sn}\\)$`),mf=new RegExp(`^rgba\\(${Le},${Le},${Le},${Sn}\\)$`),gf=new RegExp(`^hsl\\(${Sn},${Le},${Le}\\)$`),hf=new RegExp(`^hsla\\(${Sn},${Le},${Le},${Sn}\\)$`),gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rr(rt,$n,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:hi,formatHex:hi,formatHex8:vf,formatHsl:_f,formatRgb:vi,toString:vi});function hi(){return this.rgb().formatHex()}function vf(){return this.rgb().formatHex8()}function _f(){return al(this).formatHsl()}function vi(){return this.rgb().formatRgb()}function $n(i){var t,o;return i=(i+"").trim().toLowerCase(),(t=sf.exec(i))?(o=t[1].length,t=parseInt(t[1],16),o===6?_i(t):o===3?new xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):o===8?Wt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):o===4?Wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=af.exec(i))?new xe(t[1],t[2],t[3],1):(t=cf.exec(i))?new xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=df.exec(i))?Wt(t[1],t[2],t[3],t[4]):(t=mf.exec(i))?Wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gf.exec(i))?bi(t[1],t[2]/100,t[3]/100,1):(t=hf.exec(i))?bi(t[1],t[2]/100,t[3]/100,t[4]):gi.hasOwnProperty(i)?_i(gi[i]):i==="transparent"?new xe(NaN,NaN,NaN,0):null}function _i(i){return new xe(i>>16&255,i>>8&255,i&255,1)}function Wt(i,t,o,e){return e<=0&&(i=t=o=NaN),new xe(i,t,o,e)}function pf(i){return i instanceof rt||(i=$n(i)),i?(i=i.rgb(),new xe(i.r,i.g,i.b,i.opacity)):new xe}function pr(i,t,o,e){return arguments.length===1?pf(i):new xe(i,t,o,e??1)}function xe(i,t,o,e){this.r=+i,this.g=+t,this.b=+o,this.opacity=+e}Rr(xe,pr,sl(rt,{brighter(i){return i=i==null?Xt:Math.pow(Xt,i),new xe(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Mn:Math.pow(Mn,i),new xe(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new xe(nn(this.r),nn(this.g),nn(this.b),Mt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pi,formatHex:pi,formatHex8:yf,formatRgb:yi,toString:yi}));function pi(){return`#${je(this.r)}${je(this.g)}${je(this.b)}`}function yf(){return`#${je(this.r)}${je(this.g)}${je(this.b)}${je((isNaN(this.opacity)?1:this.opacity)*255)}`}function yi(){const i=Mt(this.opacity);return`${i===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${i===1?")":`, ${i})`}`}function Mt(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function nn(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function je(i){return i=nn(i),(i<16?"0":"")+i.toString(16)}function bi(i,t,o,e){return e<=0?i=t=o=NaN:o<=0||o>=1?i=t=NaN:t<=0&&(i=NaN),new Te(i,t,o,e)}function al(i){if(i instanceof Te)return new Te(i.h,i.s,i.l,i.opacity);if(i instanceof rt||(i=$n(i)),!i)return new Te;if(i instanceof Te)return i;i=i.rgb();var t=i.r/255,o=i.g/255,e=i.b/255,l=Math.min(t,o,e),a=Math.max(t,o,e),d=NaN,g=a-l,m=(a+l)/2;return g?(t===a?d=(o-e)/g+(o<e)*6:o===a?d=(e-t)/g+2:d=(t-o)/g+4,g/=m<.5?a+l:2-a-l,d*=60):g=m>0&&m<1?0:d,new Te(d,g,m,i.opacity)}function bf(i,t,o,e){return arguments.length===1?al(i):new Te(i,t,o,e??1)}function Te(i,t,o,e){this.h=+i,this.s=+t,this.l=+o,this.opacity=+e}Rr(Te,bf,sl(rt,{brighter(i){return i=i==null?Xt:Math.pow(Xt,i),new Te(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Mn:Math.pow(Mn,i),new Te(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,o=this.l,e=o+(o<.5?o:1-o)*t,l=2*o-e;return new xe(ar(i>=240?i-240:i+120,l,e),ar(i,l,e),ar(i<120?i+240:i-120,l,e),this.opacity)},clamp(){return new Te(wi(this.h),Ht(this.s),Ht(this.l),Mt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Mt(this.opacity);return`${i===1?"hsl(":"hsla("}${wi(this.h)}, ${Ht(this.s)*100}%, ${Ht(this.l)*100}%${i===1?")":`, ${i})`}`}}));function wi(i){return i=(i||0)%360,i<0?i+360:i}function Ht(i){return Math.max(0,Math.min(1,i||0))}function ar(i,t,o){return(i<60?t+(o-t)*i/60:i<180?o:i<240?t+(o-t)*(240-i)/60:t)*255}const Nr=i=>()=>i;function wf(i,t){return function(o){return i+o*t}}function kf(i,t,o){return i=Math.pow(i,o),t=Math.pow(t,o)-i,o=1/o,function(e){return Math.pow(i+e*t,o)}}function Ef(i){return(i=+i)==1?cl:function(t,o){return o-t?kf(t,o,i):Nr(isNaN(t)?o:t)}}function cl(i,t){var o=t-i;return o?wf(i,o):Nr(isNaN(i)?t:i)}const ki=function i(t){var o=Ef(t);function e(l,a){var d=o((l=pr(l)).r,(a=pr(a)).r),g=o(l.g,a.g),m=o(l.b,a.b),u=cl(l.opacity,a.opacity);return function(n){return l.r=d(n),l.g=g(n),l.b=m(n),l.opacity=u(n),l+""}}return e.gamma=i,e}(1);function xf(i,t){t||(t=[]);var o=i?Math.min(t.length,i.length):0,e=t.slice(),l;return function(a){for(l=0;l<o;++l)e[l]=i[l]*(1-a)+t[l]*a;return e}}function Rf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Nf(i,t){var o=t?t.length:0,e=i?Math.min(o,i.length):0,l=new Array(e),a=new Array(o),d;for(d=0;d<e;++d)l[d]=Tr(i[d],t[d]);for(;d<o;++d)a[d]=t[d];return function(g){for(d=0;d<e;++d)a[d]=l[d](g);return a}}function Tf(i,t){var o=new Date;return i=+i,t=+t,function(e){return o.setTime(i*(1-e)+t*e),o}}function St(i,t){return i=+i,t=+t,function(o){return i*(1-o)+t*o}}function qf(i,t){var o={},e={},l;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in i?o[l]=Tr(i[l],t[l]):e[l]=t[l];return function(a){for(l in o)e[l]=o[l](a);return e}}var yr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cr=new RegExp(yr.source,"g");function Pf(i){return function(){return i}}function zf(i){return function(t){return i(t)+""}}function Af(i,t){var o=yr.lastIndex=cr.lastIndex=0,e,l,a,d=-1,g=[],m=[];for(i=i+"",t=t+"";(e=yr.exec(i))&&(l=cr.exec(t));)(a=l.index)>o&&(a=t.slice(o,a),g[d]?g[d]+=a:g[++d]=a),(e=e[0])===(l=l[0])?g[d]?g[d]+=l:g[++d]=l:(g[++d]=null,m.push({i:d,x:St(e,l)})),o=cr.lastIndex;return o<t.length&&(a=t.slice(o),g[d]?g[d]+=a:g[++d]=a),g.length<2?m[0]?zf(m[0].x):Pf(t):(t=m.length,function(u){for(var n=0,r;n<t;++n)g[(r=m[n]).i]=r.x(u);return g.join("")})}function Tr(i,t){var o=typeof t,e;return t==null||o==="boolean"?Nr(t):(o==="number"?St:o==="string"?(e=$n(t))?(t=e,ki):Af:t instanceof $n?ki:t instanceof Date?Tf:Rf(t)?xf:Array.isArray(t)?Nf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qf:St)(i,t)}function If(i,t){return i=+i,t=+t,function(o){return Math.round(i*(1-o)+t*o)}}function Df(i){return function(){return i}}function Lf(i){return+i}var Ei=[0,1];function De(i){return i}function br(i,t){return(t-=i=+i)?function(o){return(o-i)/t}:Df(isNaN(t)?NaN:.5)}function Cf(i,t){var o;return i>t&&(o=i,i=t,t=o),function(e){return Math.max(i,Math.min(t,e))}}function Of(i,t,o){var e=i[0],l=i[1],a=t[0],d=t[1];return l<e?(e=br(l,e),a=o(d,a)):(e=br(e,l),a=o(a,d)),function(g){return a(e(g))}}function Vf(i,t,o){var e=Math.min(i.length,t.length)-1,l=new Array(e),a=new Array(e),d=-1;for(i[e]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++d<e;)l[d]=br(i[d],i[d+1]),a[d]=o(t[d],t[d+1]);return function(g){var m=nf(i,g,1,e)-1;return a[m](l[m](g))}}function qr(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Pr(){var i=Ei,t=Ei,o=Tr,e,l,a,d=De,g,m,u;function n(){var f=Math.min(i.length,t.length);return d!==De&&(d=Cf(i[0],i[f-1])),g=f>2?Vf:Of,m=u=null,r}function r(f){return f==null||isNaN(f=+f)?a:(m||(m=g(i.map(e),t,o)))(e(d(f)))}return r.invert=function(f){return d(l((u||(u=g(t,i.map(e),St)))(f)))},r.domain=function(f){return arguments.length?(i=Array.from(f,Lf),n()):i.slice()},r.range=function(f){return arguments.length?(t=Array.from(f),n()):t.slice()},r.rangeRound=function(f){return t=Array.from(f),o=If,n()},r.clamp=function(f){return arguments.length?(d=f?!0:De,n()):d!==De},r.interpolate=function(f){return arguments.length?(o=f,n()):o},r.unknown=function(f){return arguments.length?(a=f,r):a},function(f,s){return e=f,l=s,n()}}function Wf(){return Pr()(De,De)}function Hf(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function $t(i,t){if((o=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var o,e=i.slice(0,o);return[e.length>1?e[0]+e.slice(2):e,+i.slice(o+1)]}function Nn(i){return i=$t(Math.abs(i)),i?i[1]:NaN}function Bf(i,t){return function(o,e){for(var l=o.length,a=[],d=0,g=i[0],m=0;l>0&&g>0&&(m+g+1>e&&(g=Math.max(1,e-m)),a.push(o.substring(l-=g,l+g)),!((m+=g+1)>e));)g=i[d=(d+1)%i.length];return a.reverse().join(t)}}function Gf(i){return function(t){return t.replace(/[0-9]/g,function(o){return i[+o]})}}var Ff=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jn(i){if(!(t=Ff.exec(i)))throw new Error("invalid format: "+i);var t;return new zr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jn.prototype=zr.prototype;function zr(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}zr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uf(i){e:for(var t=i.length,o=1,e=-1,l;o<t;++o)switch(i[o]){case".":e=l=o;break;case"0":e===0&&(e=o),l=o;break;default:if(!+i[o])break e;e>0&&(e=0);break}return e>0?i.slice(0,e)+i.slice(l+1):i}var dl;function Qf(i,t){var o=$t(i,t);if(!o)return i+"";var e=o[0],l=o[1],a=l-(dl=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,d=e.length;return a===d?e:a>d?e+new Array(a-d+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+$t(i,Math.max(0,t+a-1))[0]}function xi(i,t){var o=$t(i,t);if(!o)return i+"";var e=o[0],l=o[1];return l<0?"0."+new Array(-l).join("0")+e:e.length>l+1?e.slice(0,l+1)+"."+e.slice(l+1):e+new Array(l-e.length+2).join("0")}const Ri={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Hf,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>xi(i*100,t),r:xi,s:Qf,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Ni(i){return i}var Ti=Array.prototype.map,qi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kf(i){var t=i.grouping===void 0||i.thousands===void 0?Ni:Bf(Ti.call(i.grouping,Number),i.thousands+""),o=i.currency===void 0?"":i.currency[0]+"",e=i.currency===void 0?"":i.currency[1]+"",l=i.decimal===void 0?".":i.decimal+"",a=i.numerals===void 0?Ni:Gf(Ti.call(i.numerals,String)),d=i.percent===void 0?"%":i.percent+"",g=i.minus===void 0?"":i.minus+"",m=i.nan===void 0?"NaN":i.nan+"";function u(r){r=jn(r);var f=r.fill,s=r.align,c=r.sign,h=r.symbol,v=r.zero,p=r.width,y=r.comma,_=r.precision,b=r.trim,w=r.type;w==="n"?(y=!0,w="g"):Ri[w]||(_===void 0&&(_=12),b=!0,w="g"),(v||f==="0"&&s==="=")&&(v=!0,f="0",s="=");var R=h==="$"?o:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",N=h==="$"?e:/[%p]/.test(w)?d:"",q=Ri[w],C=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(P){var F=R,B=N,K,S,$;if(w==="c")B=q(P)+B,P="";else{P=+P;var Z=P<0||1/P<0;if(P=isNaN(P)?m:q(Math.abs(P),_),b&&(P=Uf(P)),Z&&+P==0&&c!=="+"&&(Z=!1),F=(Z?c==="("?c:g:c==="-"||c==="("?"":c)+F,B=(w==="s"?qi[8+dl/3]:"")+B+(Z&&c==="("?")":""),C){for(K=-1,S=P.length;++K<S;)if($=P.charCodeAt(K),48>$||$>57){B=($===46?l+P.slice(K+1):P.slice(K))+B,P=P.slice(0,K);break}}}y&&!v&&(P=t(P,1/0));var ie=F.length+P.length+B.length,M=ie<p?new Array(p-ie+1).join(f):"";switch(y&&v&&(P=t(M+P,M.length?p-B.length:1/0),M=""),s){case"<":P=F+P+B+M;break;case"=":P=F+M+P+B;break;case"^":P=M.slice(0,ie=M.length>>1)+F+P+B+M.slice(ie);break;default:P=M+F+P+B;break}return a(P)}return A.toString=function(){return r+""},A}function n(r,f){var s=u((r=jn(r),r.type="f",r)),c=Math.max(-8,Math.min(8,Math.floor(Nn(f)/3)))*3,h=Math.pow(10,-c),v=qi[8+c/3];return function(p){return s(h*p)+v}}return{format:u,formatPrefix:n}}var Bt,Ar,ml;Yf({thousands:",",grouping:[3],currency:["$",""]});function Yf(i){return Bt=Kf(i),Ar=Bt.format,ml=Bt.formatPrefix,Bt}function Zf(i){return Math.max(0,-Nn(Math.abs(i)))}function Jf(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nn(t)/3)))*3-Nn(Math.abs(i)))}function Xf(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,Nn(t)-Nn(i))+1}function Mf(i,t,o,e){var l=of(i,t,o),a;switch(e=jn(e??",f"),e.type){case"s":{var d=Math.max(Math.abs(i),Math.abs(t));return e.precision==null&&!isNaN(a=Jf(l,d))&&(e.precision=a),ml(e,d)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=Xf(l,Math.max(Math.abs(i),Math.abs(t))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=Zf(l))&&(e.precision=a-(e.type==="%")*2);break}}return Ar(e)}function gl(i){var t=i.domain;return i.ticks=function(o){var e=t();return _r(e[0],e[e.length-1],o??10)},i.tickFormat=function(o,e){var l=t();return Mf(l[0],l[l.length-1],o??10,e)},i.nice=function(o){o==null&&(o=10);var e=t(),l=0,a=e.length-1,d=e[l],g=e[a],m,u,n=10;for(g<d&&(u=d,d=g,g=u,u=l,l=a,a=u);n-- >0;){if(u=ll(d,g,o),u===m)return e[l]=d,e[a]=g,t(e);if(u>0)d=Math.floor(d/u)*u,g=Math.ceil(g/u)*u;else if(u<0)d=Math.ceil(d*u)/u,g=Math.floor(g*u)/u;else break;m=u}return i},i}function Yt(){var i=Wf();return i.copy=function(){return qr(i,Yt())},tt.apply(i,arguments),gl(i)}function Sf(i,t){i=i.slice();var o=0,e=i.length-1,l=i[o],a=i[e],d;return a<l&&(d=o,o=e,e=d,d=l,l=a,a=d),i[o]=t.floor(l),i[e]=t.ceil(a),i}function Pi(i){return Math.log(i)}function zi(i){return Math.exp(i)}function $f(i){return-Math.log(-i)}function jf(i){return-Math.exp(-i)}function eu(i){return isFinite(i)?+("1e"+i):i<0?0:i}function nu(i){return i===10?eu:i===Math.E?Math.exp:t=>Math.pow(i,t)}function tu(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),t=>Math.log(t)/i)}function Ai(i){return(t,o)=>-i(-t,o)}function ru(i){const t=i(Pi,zi),o=t.domain;let e=10,l,a;function d(){return l=tu(e),a=nu(e),o()[0]<0?(l=Ai(l),a=Ai(a),i($f,jf)):i(Pi,zi),t}return t.base=function(g){return arguments.length?(e=+g,d()):e},t.domain=function(g){return arguments.length?(o(g),d()):o()},t.ticks=g=>{const m=o();let u=m[0],n=m[m.length-1];const r=n<u;r&&([u,n]=[n,u]);let f=l(u),s=l(n),c,h;const v=g==null?10:+g;let p=[];if(!(e%1)&&s-f<v){if(f=Math.floor(f),s=Math.ceil(s),u>0){for(;f<=s;++f)for(c=1;c<e;++c)if(h=f<0?c/a(-f):c*a(f),!(h<u)){if(h>n)break;p.push(h)}}else for(;f<=s;++f)for(c=e-1;c>=1;--c)if(h=f>0?c/a(-f):c*a(f),!(h<u)){if(h>n)break;p.push(h)}p.length*2<v&&(p=_r(u,n,v))}else p=_r(f,s,Math.min(s-f,v)).map(a);return r?p.reverse():p},t.tickFormat=(g,m)=>{if(g==null&&(g=10),m==null&&(m=e===10?"s":","),typeof m!="function"&&(!(e%1)&&(m=jn(m)).precision==null&&(m.trim=!0),m=Ar(m)),g===1/0)return m;const u=Math.max(1,e*g/t.ticks().length);return n=>{let r=n/a(Math.round(l(n)));return r*e<e-.5&&(r*=e),r<=u?m(n):""}},t.nice=()=>o(Sf(o(),{floor:g=>a(Math.floor(l(g))),ceil:g=>a(Math.ceil(l(g)))})),t}function hl(){const i=ru(Pr()).domain([1,10]);return i.copy=()=>qr(i,hl()).base(i.base()),tt.apply(i,arguments),i}function Ii(i){return function(t){return t<0?-Math.pow(-t,i):Math.pow(t,i)}}function iu(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function lu(i){return i<0?-i*i:i*i}function ou(i){var t=i(De,De),o=1;function e(){return o===1?i(De,De):o===.5?i(iu,lu):i(Ii(o),Ii(1/o))}return t.exponent=function(l){return arguments.length?(o=+l,e()):o},gl(t)}function vl(){var i=ou(Pr());return i.copy=function(){return qr(i,vl()).exponent(i.exponent())},tt.apply(i,arguments),i}function fu(){return vl.apply(null,arguments).exponent(.5)}const Jn={x:Yt,y:Yt,z:Yt,r:fu};function uu(i){return i.constant?"symlog":i.base?"log":i.exponent?i.exponent()===.5?"sqrt":"pow":"other"}function Di(i){return i}function su(i){return t=>Math.log(i*t)}function au(i){return t=>i*Math.exp(t)}function cu(i){return t=>Math.sign(t)*Math.log1p(Math.abs(t/i))}function du(i){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*i}function Gt(i){return function(o){return o<0?-Math.pow(-o,i):Math.pow(o,i)}}function mu(i){const t=uu(i);if(t==="log"){const o=Math.sign(i.domain()[0]);return{lift:su(o),ground:au(o),scaleType:t}}return t==="pow"?{lift:Gt(1),ground:Gt(1/1),scaleType:t}:t==="sqrt"?{lift:Gt(.5),ground:Gt(1/.5),scaleType:t}:t==="symlog"?{lift:cu(1),ground:du(1),scaleType:t}:{lift:Di,ground:Di,scaleType:t}}function gu(i,t){if(typeof i.range!="function")throw new Error("Scale method `range` must be a function");if(typeof i.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return i.domain();i.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",i.domain()),i.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",i.range());const{lift:o,ground:e}=mu(i),l=i.domain()[0],a=Object.prototype.toString.call(l)==="[object Date]",[d,g]=i.domain().map(s=>o(a?s.getTime():s)),[m,u]=i.range(),n=t[0]||0,r=t[1]||0,f=(g-d)/(Math.abs(u-m)-n-r);return[d-n*f,r*f+g].map(s=>e(a?new Date(s):s))}function hu(i,t,o,e,l){let a,d;return l===!0?(a=0,d=100):(a=i==="r"?1:0,d=i==="y"?o:i==="r"?25:t),e===!0?[d,a]:[a,d]}function vu(i,t,o,e,l,a){return l?typeof l=="function"?l({width:t,height:o}):l:hu(i,t,o,e,a)}function Ft(i){return function([o,e,l,a,d,g,m,u,n,r]){if(e===null)return null;const f=vu(i,m,u,g,n,r),s=o===Jn[i]?o():o.copy();return s.domain(l),(!s.interpolator||typeof s.interpolator=="function"&&s.interpolator().name.startsWith("identity"))&&s.range(f),a&&s.domain(gu(s,a)),(d===!0||typeof d=="number")&&(typeof s.nice=="function"?s.nice(typeof d=="number"?d:void 0):console.error(`[Layer Cake] You set \`${i}Nice: true\` but the ${i}Scale does not have a \`.nice\` method. Ignoring...`)),s}}function Ut([i,t]){return o=>{const e=i(o);return Array.isArray(e)?e.map(l=>t(l)):t(e)}}function Qt([i]){if(typeof i=="function"){if(typeof i.range=="function")return i.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const _u=i=>({element:i[0]&4,width:i[0]&256,height:i[0]&512,aspectRatio:i[0]&1024,containerWidth:i[0]&128,containerHeight:i[0]&64}),Li=i=>({element:i[2],width:i[8],height:i[9],aspectRatio:i[10],containerWidth:i[7],containerHeight:i[6]});function Ci(i){let t,o,e;const l=i[90].default,a=Ye(l,i,i[89],Li);return{c(){t=I("div"),a&&a.c(),this.h()},l(d){t=D(d,"DIV",{class:!0});var g=z(t);a&&a.l(g),g.forEach(k),this.h()},h(){E(t,"class","layercake-container svelte-1ll0j6t"),nt(()=>i[92].call(t)),ae(t,"position",i[5]),ae(t,"top",i[5]==="absolute"?"0":null),ae(t,"right",i[5]==="absolute"?"0":null),ae(t,"bottom",i[5]==="absolute"?"0":null),ae(t,"left",i[5]==="absolute"?"0":null),ae(t,"pointer-events",i[4]===!1?"none":null)},m(d,g){L(d,t,g),a&&a.m(t,null),i[91](t),o=Gl(t,i[92].bind(t)),e=!0},p(d,g){a&&a.p&&(!e||g[0]&1988|g[2]&134217728)&&Ze(a,l,d,d[89],e?Xe(l,d[89],g,_u):Je(d[89]),Li),g[0]&32&&ae(t,"position",d[5]),g[0]&32&&ae(t,"top",d[5]==="absolute"?"0":null),g[0]&32&&ae(t,"right",d[5]==="absolute"?"0":null),g[0]&32&&ae(t,"bottom",d[5]==="absolute"?"0":null),g[0]&32&&ae(t,"left",d[5]==="absolute"?"0":null),g[0]&16&&ae(t,"pointer-events",d[4]===!1?"none":null)},i(d){e||(O(a,d),e=!0)},o(d){G(a,d),e=!1},d(d){d&&k(t),a&&a.d(d),i[91](null),o()}}}function pu(i){let t,o,e=(i[3]===!0||typeof window<"u")&&Ci(i);return{c(){e&&e.c(),t=_e()},l(l){e&&e.l(l),t=_e()},m(l,a){e&&e.m(l,a),L(l,t,a),o=!0},p(l,a){l[3]===!0||typeof window<"u"?e?(e.p(l,a),a[0]&8&&O(e,1)):(e=Ci(l),e.c(),O(e,1),e.m(t.parentNode,t)):e&&(qe(),G(e,1,1,()=>{e=null}),Pe())},i(l){o||(O(e),o=!0)},o(l){G(e),o=!1},d(l){e&&e.d(l),l&&k(t)}}}function yu(i,t,o){let e,l,a,d,g,m,u,n,r,f,s,c,h,v,p,y,_,b,w,R,N,q,C,A,P,F,B,K,S,$,Z,ie,M,fe,ue,se,le,ke,J,he,we,{$$slots:it={},$$scope:Tn}=t,{ssr:qn=!1}=t,{pointerEvents:Pn=!0}=t,{position:Me="relative"}=t,{percentRange:Re=!1}=t,{width:rn=void 0}=t,{height:ln=void 0}=t,{containerWidth:Ve=rn||100}=t,{containerHeight:Ee=ln||100}=t,{element:Se=void 0}=t,{x:We=void 0}=t,{y:He=void 0}=t,{z:on=void 0}=t,{r:fn=void 0}=t,{data:un=[]}=t,{xDomain:sn=void 0}=t,{yDomain:an=void 0}=t,{zDomain:cn=void 0}=t,{rDomain:dn=void 0}=t,{xNice:lt=!1}=t,{yNice:ot=!1}=t,{zNice:ft=!1}=t,{rNice:ut=!1}=t,{xPadding:st=void 0}=t,{yPadding:at=void 0}=t,{zPadding:ct=void 0}=t,{rPadding:dt=void 0}=t,{xScale:mt=Jn.x}=t,{yScale:zn=Jn.y}=t,{zScale:gt=Jn.z}=t,{rScale:ht=Jn.r}=t,{xRange:mn=void 0}=t,{yRange:gn=void 0}=t,{zRange:hn=void 0}=t,{rRange:vn=void 0}=t,{xReverse:vt=!1}=t,{yReverse:_t=typeof zn.bandwidth!="function"}=t,{zReverse:pt=!1}=t,{rReverse:yt=!1}=t,{padding:bt={}}=t,{extents:wt={}}=t,{flatData:kt=void 0}=t,{custom:Et={}}=t,nr=!1;Hl(()=>{nr=!0});const re={},Fe=Y(Re);V(i,Fe,x=>o(128,ke=x));const _n=Y(Ve);V(i,_n,x=>o(7,le=x));const pn=Y(Ee);V(i,pn,x=>o(6,se=x));const xt=Y(sr(wt));V(i,xt,x=>o(127,ue=x));const Rt=Y(un);V(i,Rt,x=>o(126,fe=x));const An=Y(kt||un);V(i,An,x=>o(125,M=x));const Nt=Y(bt);V(i,Nt,x=>o(124,ie=x));const yn=Y(Ke(We));V(i,yn,x=>o(123,Z=x));const bn=Y(Ke(He));V(i,bn,x=>o(122,$=x));const wn=Y(Ke(on));V(i,wn,x=>o(121,S=x));const kn=Y(Ke(fn));V(i,kn,x=>o(120,K=x));const Tt=Y(sn);V(i,Tt,x=>o(119,B=x));const qt=Y(an);V(i,qt,x=>o(118,F=x));const Pt=Y(cn);V(i,Pt,x=>o(117,P=x));const zt=Y(dn);V(i,zt,x=>o(116,A=x));const In=Y(lt);V(i,In,x=>o(115,C=x));const Dn=Y(ot);V(i,Dn,x=>o(114,q=x));const Ln=Y(ft);V(i,Ln,x=>o(113,N=x));const Cn=Y(ut);V(i,Cn,x=>o(112,R=x));const On=Y(vt);V(i,On,x=>o(111,w=x));const Vn=Y(_t);V(i,Vn,x=>o(110,b=x));const Wn=Y(pt);V(i,Wn,x=>o(109,_=x));const Hn=Y(yt);V(i,Hn,x=>o(108,y=x));const Bn=Y(st);V(i,Bn,x=>o(107,p=x));const Gn=Y(at);V(i,Gn,x=>o(106,v=x));const Fn=Y(ct);V(i,Fn,x=>o(105,h=x));const Un=Y(dt);V(i,Un,x=>o(104,c=x));const At=Y(mn);V(i,At,x=>o(103,s=x));const It=Y(gn);V(i,It,x=>o(102,f=x));const Dt=Y(hn);V(i,Dt,x=>o(101,r=x));const Lt=Y(vn);V(i,Lt,x=>o(100,n=x));const Qn=Y(mt);V(i,Qn,x=>o(99,u=x));const Kn=Y(zn);V(i,Kn,x=>o(98,m=x));const Yn=Y(gt);V(i,Yn,x=>o(97,g=x));const Zn=Y(ht);V(i,Zn,x=>o(96,d=x));const Ct=Y(re);V(i,Ct,x=>o(94,l=x));const Ot=Y(Et);V(i,Ot,x=>o(95,a=x));const Ir=oe([yn,bn,wn,kn],([x,Ge,ze,ve])=>{const $e={};return x&&($e.x=x),Ge&&($e.y=Ge),ze&&($e.z=ze),ve&&($e.r=ve),$e}),Dr=oe([Nt,_n,pn],([x])=>Object.assign({top:0,right:0,bottom:0,left:0},x)),Lr=oe([_n,pn,Dr],([x,Ge,ze])=>{const ve={};return ve.top=ze.top,ve.right=x-ze.right,ve.bottom=Ge-ze.bottom,ve.left=ze.left,ve.width=ve.right-ve.left,ve.height=ve.bottom-ve.top,ve.width<=0&&nr===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),ve.height<=0&&nr===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),ve}),Ue=oe([Lr],([x])=>x.width);V(i,Ue,x=>o(8,J=x));const Qe=oe([Lr],([x])=>x.height);V(i,Qe,x=>o(9,he=x));const Be=oe([An,Ir,xt,Qn,Kn,Zn,Yn],([x,Ge,ze,ve,$e,Tl,ql])=>{const Pl={x:ve,y:$e,r:Tl,z:ql},fr=sr(Ge,ze),zl=Object.fromEntries(Object.keys(fr).map(ur=>[ur,Pl[ur]]));return Object.keys(fr).length>0?{...Jo(x,fr,zl),...ze}:{}}),Cr=oe([Be,Tt],Vt("x")),Or=oe([Be,qt],Vt("y")),Vr=oe([Be,Pt],Vt("z")),Wr=oe([Be,zt],Vt("r")),tr=oe([Qn,Be,Cr,Bn,In,On,Ue,Qe,At,Fe],Ft("x")),_l=oe([yn,tr],Ut),rr=oe([Kn,Be,Or,Gn,Dn,Vn,Ue,Qe,It,Fe],Ft("y")),pl=oe([bn,rr],Ut),ir=oe([Yn,Be,Vr,Fn,Ln,Wn,Ue,Qe,Dt,Fe],Ft("z")),yl=oe([wn,ir],Ut),lr=oe([Zn,Be,Wr,Un,Cn,Hn,Ue,Qe,Lt,Fe],Ft("r")),bl=oe([kn,lr],Ut),wl=oe([tr],Qt),kl=oe([rr],Qt),El=oe([ir],Qt),xl=oe([lr],Qt),or=oe([Ue,Qe],([x,Ge])=>x/Ge);V(i,or,x=>o(10,we=x));function Rl(x){Zt[x?"unshift":"push"](()=>{Se=x,o(2,Se)})}function Nl(){Ve=this.clientWidth,Ee=this.clientHeight,o(0,Ve),o(1,Ee)}return i.$$set=x=>{"ssr"in x&&o(3,qn=x.ssr),"pointerEvents"in x&&o(4,Pn=x.pointerEvents),"position"in x&&o(5,Me=x.position),"percentRange"in x&&o(51,Re=x.percentRange),"width"in x&&o(52,rn=x.width),"height"in x&&o(53,ln=x.height),"containerWidth"in x&&o(0,Ve=x.containerWidth),"containerHeight"in x&&o(1,Ee=x.containerHeight),"element"in x&&o(2,Se=x.element),"x"in x&&o(54,We=x.x),"y"in x&&o(55,He=x.y),"z"in x&&o(56,on=x.z),"r"in x&&o(57,fn=x.r),"data"in x&&o(58,un=x.data),"xDomain"in x&&o(59,sn=x.xDomain),"yDomain"in x&&o(60,an=x.yDomain),"zDomain"in x&&o(61,cn=x.zDomain),"rDomain"in x&&o(62,dn=x.rDomain),"xNice"in x&&o(63,lt=x.xNice),"yNice"in x&&o(64,ot=x.yNice),"zNice"in x&&o(65,ft=x.zNice),"rNice"in x&&o(66,ut=x.rNice),"xPadding"in x&&o(67,st=x.xPadding),"yPadding"in x&&o(68,at=x.yPadding),"zPadding"in x&&o(69,ct=x.zPadding),"rPadding"in x&&o(70,dt=x.rPadding),"xScale"in x&&o(71,mt=x.xScale),"yScale"in x&&o(72,zn=x.yScale),"zScale"in x&&o(73,gt=x.zScale),"rScale"in x&&o(74,ht=x.rScale),"xRange"in x&&o(75,mn=x.xRange),"yRange"in x&&o(76,gn=x.yRange),"zRange"in x&&o(77,hn=x.zRange),"rRange"in x&&o(78,vn=x.rRange),"xReverse"in x&&o(79,vt=x.xReverse),"yReverse"in x&&o(80,_t=x.yReverse),"zReverse"in x&&o(81,pt=x.zReverse),"rReverse"in x&&o(82,yt=x.rReverse),"padding"in x&&o(83,bt=x.padding),"extents"in x&&o(84,wt=x.extents),"flatData"in x&&o(85,kt=x.flatData),"custom"in x&&o(86,Et=x.custom),"$$scope"in x&&o(89,Tn=x.$$scope)},i.$$.update=()=>{i.$$.dirty[1]&8388608&&We&&o(87,re.x=We,re),i.$$.dirty[1]&16777216&&He&&o(87,re.y=He,re),i.$$.dirty[1]&33554432&&on&&o(87,re.z=on,re),i.$$.dirty[1]&67108864&&fn&&o(87,re.r=fn,re),i.$$.dirty[1]&268435456&&sn&&o(87,re.xDomain=sn,re),i.$$.dirty[1]&536870912&&an&&o(87,re.yDomain=an,re),i.$$.dirty[1]&1073741824&&cn&&o(87,re.zDomain=cn,re),i.$$.dirty[2]&1&&dn&&o(87,re.rDomain=dn,re),i.$$.dirty[2]&8192&&mn&&o(87,re.xRange=mn,re),i.$$.dirty[2]&16384&&gn&&o(87,re.yRange=gn,re),i.$$.dirty[2]&32768&&hn&&o(87,re.zRange=hn,re),i.$$.dirty[2]&65536&&vn&&o(87,re.rRange=vn,re),i.$$.dirty[1]&1048576&&X(Fe,ke=Re,ke),i.$$.dirty[0]&1&&X(_n,le=Ve,le),i.$$.dirty[0]&2&&X(pn,se=Ee,se),i.$$.dirty[2]&4194304&&X(xt,ue=sr(wt),ue),i.$$.dirty[1]&134217728&&X(Rt,fe=un,fe),i.$$.dirty[1]&134217728|i.$$.dirty[2]&8388608&&X(An,M=kt||un,M),i.$$.dirty[2]&2097152&&X(Nt,ie=bt,ie),i.$$.dirty[1]&8388608&&X(yn,Z=Ke(We),Z),i.$$.dirty[1]&16777216&&X(bn,$=Ke(He),$),i.$$.dirty[1]&33554432&&X(wn,S=Ke(on),S),i.$$.dirty[1]&67108864&&X(kn,K=Ke(fn),K),i.$$.dirty[1]&268435456&&X(Tt,B=sn,B),i.$$.dirty[1]&536870912&&X(qt,F=an,F),i.$$.dirty[1]&1073741824&&X(Pt,P=cn,P),i.$$.dirty[2]&1&&X(zt,A=dn,A),i.$$.dirty[2]&2&&X(In,C=lt,C),i.$$.dirty[2]&4&&X(Dn,q=ot,q),i.$$.dirty[2]&8&&X(Ln,N=ft,N),i.$$.dirty[2]&16&&X(Cn,R=ut,R),i.$$.dirty[2]&131072&&X(On,w=vt,w),i.$$.dirty[2]&262144&&X(Vn,b=_t,b),i.$$.dirty[2]&524288&&X(Wn,_=pt,_),i.$$.dirty[2]&1048576&&X(Hn,y=yt,y),i.$$.dirty[2]&32&&X(Bn,p=st,p),i.$$.dirty[2]&64&&X(Gn,v=at,v),i.$$.dirty[2]&128&&X(Fn,h=ct,h),i.$$.dirty[2]&256&&X(Un,c=dt,c),i.$$.dirty[2]&8192&&X(At,s=mn,s),i.$$.dirty[2]&16384&&X(It,f=gn,f),i.$$.dirty[2]&32768&&X(Dt,r=hn,r),i.$$.dirty[2]&65536&&X(Lt,n=vn,n),i.$$.dirty[2]&512&&X(Qn,u=mt,u),i.$$.dirty[2]&1024&&X(Kn,m=zn,m),i.$$.dirty[2]&2048&&X(Yn,g=gt,g),i.$$.dirty[2]&4096&&X(Zn,d=ht,d),i.$$.dirty[2]&16777216&&X(Ot,a=Et,a),i.$$.dirty[2]&33554432&&X(Ct,l=re,l),i.$$.dirty[2]&67108864&&Bl("LayerCake",e)},o(88,e={activeGetters:Ir,width:Ue,height:Qe,percentRange:Fe,aspectRatio:or,containerWidth:_n,containerHeight:pn,x:yn,y:bn,z:wn,r:kn,custom:Ot,data:Rt,xNice:In,yNice:Dn,zNice:Ln,rNice:Cn,xReverse:On,yReverse:Vn,zReverse:Wn,rReverse:Hn,xPadding:Bn,yPadding:Gn,zPadding:Fn,rPadding:Un,padding:Dr,flatData:An,extents:Be,xDomain:Cr,yDomain:Or,zDomain:Vr,rDomain:Wr,xRange:wl,yRange:kl,zRange:El,rRange:xl,config:Ct,xScale:tr,xGet:_l,yScale:rr,yGet:pl,zScale:ir,zGet:yl,rScale:lr,rGet:bl}),[Ve,Ee,Se,qn,Pn,Me,se,le,J,he,we,Fe,_n,pn,xt,Rt,An,Nt,yn,bn,wn,kn,Tt,qt,Pt,zt,In,Dn,Ln,Cn,On,Vn,Wn,Hn,Bn,Gn,Fn,Un,At,It,Dt,Lt,Qn,Kn,Yn,Zn,Ct,Ot,Ue,Qe,or,Re,rn,ln,We,He,on,fn,un,sn,an,cn,dn,lt,ot,ft,ut,st,at,ct,dt,mt,zn,gt,ht,mn,gn,hn,vn,vt,_t,pt,yt,bt,wt,kt,Et,re,e,Tn,it,Rl,Nl]}class bu extends de{constructor(t){super(),me(this,t,yu,pu,ge,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const wu=i=>({element:i&1}),Oi=i=>({element:i[0]}),ku=i=>({element:i&1}),Vi=i=>({element:i[0]});function Eu(i){let t,o,e,l,a;const d=i[12].defs,g=Ye(d,i,i[11],Vi),m=i[12].default,u=Ye(m,i,i[11],Oi);return{c(){t=ye("svg"),o=ye("defs"),g&&g.c(),e=ye("g"),u&&u.c(),this.h()},l(n){t=be(n,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var r=z(t);o=be(r,"defs",{});var f=z(o);g&&g.l(f),f.forEach(k),e=be(r,"g",{class:!0,transform:!0});var s=z(e);u&&u.l(s),s.forEach(k),r.forEach(k),this.h()},h(){E(e,"class","layercake-layout-svg_g"),E(e,"transform",l="translate("+i[7].left+", "+i[7].top+")"),E(t,"class","layercake-layout-svg svelte-17l4rdd"),E(t,"viewBox",i[4]),E(t,"width",i[5]),E(t,"height",i[6]),ae(t,"z-index",i[2]),ae(t,"pointer-events",i[3]===!1?"none":null)},m(n,r){L(n,t,r),T(t,o),g&&g.m(o,null),T(t,e),u&&u.m(e,null),i[13](e),i[14](t),a=!0},p(n,[r]){g&&g.p&&(!a||r&2049)&&Ze(g,d,n,n[11],a?Xe(d,n[11],r,ku):Je(n[11]),Vi),u&&u.p&&(!a||r&2049)&&Ze(u,m,n,n[11],a?Xe(m,n[11],r,wu):Je(n[11]),Oi),(!a||r&128&&l!==(l="translate("+n[7].left+", "+n[7].top+")"))&&E(e,"transform",l),(!a||r&16)&&E(t,"viewBox",n[4]),(!a||r&32)&&E(t,"width",n[5]),(!a||r&64)&&E(t,"height",n[6]),r&4&&ae(t,"z-index",n[2]),r&8&&ae(t,"pointer-events",n[3]===!1?"none":null)},i(n){a||(O(g,n),O(u,n),a=!0)},o(n){G(g,n),G(u,n),a=!1},d(n){n&&k(t),g&&g.d(n),u&&u.d(n),i[13](null),i[14](null)}}}function xu(i,t,o){let e,l,a,{$$slots:d={},$$scope:g}=t,{element:m=void 0}=t,{innerElement:u=void 0}=t,{zIndex:n=void 0}=t,{pointerEvents:r=void 0}=t,{viewBox:f=void 0}=t;const{containerWidth:s,containerHeight:c,padding:h}=er("LayerCake");V(i,s,y=>o(5,e=y)),V(i,c,y=>o(6,l=y)),V(i,h,y=>o(7,a=y));function v(y){Zt[y?"unshift":"push"](()=>{u=y,o(1,u)})}function p(y){Zt[y?"unshift":"push"](()=>{m=y,o(0,m)})}return i.$$set=y=>{"element"in y&&o(0,m=y.element),"innerElement"in y&&o(1,u=y.innerElement),"zIndex"in y&&o(2,n=y.zIndex),"pointerEvents"in y&&o(3,r=y.pointerEvents),"viewBox"in y&&o(4,f=y.viewBox),"$$scope"in y&&o(11,g=y.$$scope)},[m,u,n,r,f,e,l,a,s,c,h,g,d,v,p]}class Wi extends de{constructor(t){super(),me(this,t,xu,Eu,ge,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Hi(i,t,o){const e=i.slice();return e[20]=t[o],e[22]=o,e}function Bi(i){let t,o;return{c(){t=ye("line"),this.h()},l(e){t=be(e,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),z(t).forEach(k),this.h()},h(){E(t,"class","gridline svelte-1eat80j"),E(t,"y1",o=i[12]*-1),E(t,"y2","0"),E(t,"x1","0"),E(t,"x2","0")},m(e,l){L(e,t,l)},p(e,l){l&4096&&o!==(o=e[12]*-1)&&E(t,"y1",o)},d(e){e&&k(t)}}}function Gi(i){let t,o,e;return{c(){t=ye("line"),this.h()},l(l){t=be(l,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),z(t).forEach(k),this.h()},h(){E(t,"class","tick-mark svelte-1eat80j"),E(t,"y1",0),E(t,"y2",6),E(t,"x1",o=i[5]||i[8]?i[9].bandwidth()/2:0),E(t,"x2",e=i[5]||i[8]?i[9].bandwidth()/2:0)},m(l,a){L(l,t,a)},p(l,a){a&800&&o!==(o=l[5]||l[8]?l[9].bandwidth()/2:0)&&E(t,"x1",o),a&800&&e!==(e=l[5]||l[8]?l[9].bandwidth()/2:0)&&E(t,"x2",e)},d(l){l&&k(t)}}}function Fi(i,t){let o,e,l,a=t[4](t[20])+"",d,g,m,u,n,r=t[0]!==!1&&Bi(t),f=t[1]===!0&&Gi(t);return{key:i,first:null,c(){o=ye("g"),r&&r.c(),e=_e(),f&&f.c(),l=ye("text"),d=W(a),this.h()},l(s){o=be(s,"g",{class:!0,transform:!0});var c=z(o);r&&r.l(c),e=_e(),f&&f.l(c),l=be(c,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,class:!0});var h=z(l);d=H(h,a),h.forEach(k),c.forEach(k),this.h()},h(){E(l,"x",g=t[5]||t[8]?t[9].bandwidth()/2:0),E(l,"y",t[6]),E(l,"dx",""),E(l,"dy",""),E(l,"text-anchor",m=t[18](t[22])),E(l,"class","svelte-1eat80j"),E(o,"class",u="tick tick-"+t[22]+" svelte-1eat80j"),E(o,"transform",n="translate("+t[9](t[20])+","+Math.max(...t[11])+")"),this.first=o},m(s,c){L(s,o,c),r&&r.m(o,null),T(o,e),f&&f.m(o,null),T(o,l),T(l,d)},p(s,c){t=s,t[0]!==!1?r?r.p(t,c):(r=Bi(t),r.c(),r.m(o,e)):r&&(r.d(1),r=null),t[1]===!0?f?f.p(t,c):(f=Gi(t),f.c(),f.m(o,l)):f&&(f.d(1),f=null),c&1040&&a!==(a=t[4](t[20])+"")&&Ne(d,a),c&800&&g!==(g=t[5]||t[8]?t[9].bandwidth()/2:0)&&E(l,"x",g),c&64&&E(l,"y",t[6]),c&1024&&m!==(m=t[18](t[22]))&&E(l,"text-anchor",m),c&1024&&u!==(u="tick tick-"+t[22]+" svelte-1eat80j")&&E(o,"class",u),c&3584&&n!==(n="translate("+t[9](t[20])+","+Math.max(...t[11])+")")&&E(o,"transform",n)},d(s){s&&k(o),r&&r.d(),f&&f.d()}}}function Ui(i){let t,o,e;return{c(){t=ye("line"),this.h()},l(l){t=be(l,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),z(t).forEach(k),this.h()},h(){E(t,"class","baseline svelte-1eat80j"),E(t,"y1",o=i[12]+.5),E(t,"y2",e=i[12]+.5),E(t,"x1","0"),E(t,"x2",i[13])},m(l,a){L(l,t,a)},p(l,a){a&4096&&o!==(o=l[12]+.5)&&E(t,"y1",o),a&4096&&e!==(e=l[12]+.5)&&E(t,"y2",e),a&8192&&E(t,"x2",l[13])},d(l){l&&k(t)}}}function Ru(i){let t,o,e=[],l=new Map,a,d,g,m,u,n=i[10];const r=s=>s[20];for(let s=0;s<n.length;s+=1){let c=Hi(i,n,s),h=r(c);l.set(h,e[s]=Fi(h,c))}let f=i[2]===!0&&Ui(i);return{c(){t=W(`Test

`),o=ye("g");for(let s=0;s<e.length;s+=1)e[s].c();a=_e(),f&&f.c(),d=ye("text"),g=W(i[7]),this.h()},l(s){t=H(s,`Test

`),o=be(s,"g",{class:!0});var c=z(o);for(let v=0;v<e.length;v+=1)e[v].l(c);a=_e(),f&&f.l(c),d=be(c,"text",{class:!0,y:!0,x:!0});var h=z(d);g=H(h,i[7]),h.forEach(k),c.forEach(k),this.h()},h(){E(d,"class","axis-label svelte-1eat80j"),E(d,"y",m=i[12]+35),E(d,"x",u=i[13]/2),E(o,"class","axis x-axis svelte-1eat80j"),Ae(o,"snapTicks",i[3])},m(s,c){L(s,t,c),L(s,o,c);for(let h=0;h<e.length;h+=1)e[h].m(o,null);T(o,a),f&&f.m(o,null),T(o,d),T(d,g)},p(s,[c]){c&270195&&(n=s[10],e=kr(e,c,r,1,s,n,l,o,el,Fi,a,Hi)),s[2]===!0?f?f.p(s,c):(f=Ui(s),f.c(),f.m(o,d)):f&&(f.d(1),f=null),c&128&&Ne(g,s[7]),c&4096&&m!==(m=s[12]+35)&&E(d,"y",m),c&8192&&u!==(u=s[13]/2)&&E(d,"x",u),c&8&&Ae(o,"snapTicks",s[3])},i:ce,o:ce,d(s){s&&k(t),s&&k(o);for(let c=0;c<e.length;c+=1)e[c].d();f&&f.d()}}}function Nu(i,t,o){let e,l,a,d,g,m;const{width:u,height:n,xScale:r,yRange:f}=er("LayerCake");V(i,u,N=>o(13,m=N)),V(i,n,N=>o(12,g=N)),V(i,r,N=>o(9,a=N)),V(i,f,N=>o(11,d=N));let{gridlines:s=!0}=t,{tickMarks:c=!1}=t,{baseline:h=!1}=t,{snapTicks:v=!1}=t,{formatTick:p=N=>N}=t,{ticks:y=void 0}=t,{xTick:_=0}=t,{yTick:b=16}=t,{xAxisTitle:w=""}=t;function R(N){if(v===!0){if(N===0)return"start";if(N===l.length-1)return"end"}return"middle"}return i.$$set=N=>{"gridlines"in N&&o(0,s=N.gridlines),"tickMarks"in N&&o(1,c=N.tickMarks),"baseline"in N&&o(2,h=N.baseline),"snapTicks"in N&&o(3,v=N.snapTicks),"formatTick"in N&&o(4,p=N.formatTick),"ticks"in N&&o(19,y=N.ticks),"xTick"in N&&o(5,_=N.xTick),"yTick"in N&&o(6,b=N.yTick),"xAxisTitle"in N&&o(7,w=N.xAxisTitle)},i.$$.update=()=>{i.$$.dirty&512&&o(8,e=typeof a.bandwidth=="function"),i.$$.dirty&525056&&o(10,l=Array.isArray(y)?y:e?a.domain():typeof y=="function"?y(a.ticks()):a.ticks(y))},[s,c,h,v,p,_,b,w,e,a,l,d,g,m,u,n,r,f,R,y]}class Tu extends de{constructor(t){super(),me(this,t,Nu,Ru,ge,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:19,xTick:5,yTick:6,xAxisTitle:7})}}function Qi(i,t,o){const e=i.slice();return e[17]=t[o],e}function Ki(i){let t,o,e;return{c(){t=ye("line"),this.h()},l(l){t=be(l,"line",{class:!0,x2:!0,y1:!0,y2:!0}),z(t).forEach(k),this.h()},h(){E(t,"class","gridline svelte-qjm35e"),E(t,"x2","100%"),E(t,"y1",o=i[4]+(i[8]?i[9].bandwidth()/2:0)),E(t,"y2",e=i[4]+(i[8]?i[9].bandwidth()/2:0))},m(l,a){L(l,t,a)},p(l,a){a&784&&o!==(o=l[4]+(l[8]?l[9].bandwidth()/2:0))&&E(t,"y1",o),a&784&&e!==(e=l[4]+(l[8]?l[9].bandwidth()/2:0))&&E(t,"y2",e)},d(l){l&&k(t)}}}function Yi(i){let t,o,e,l;return{c(){t=ye("line"),this.h()},l(a){t=be(a,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),z(t).forEach(k),this.h()},h(){E(t,"class","tick-mark svelte-qjm35e"),E(t,"x1","0"),E(t,"x2",o=i[8]?-6:6),E(t,"y1",e=i[4]+(i[8]?i[9].bandwidth()/2:0)),E(t,"y2",l=i[4]+(i[8]?i[9].bandwidth()/2:0))},m(a,d){L(a,t,d)},p(a,d){d&256&&o!==(o=a[8]?-6:6)&&E(t,"x2",o),d&784&&e!==(e=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(t,"y1",e),d&784&&l!==(l=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(t,"y2",l)},d(a){a&&k(t)}}}function Zi(i,t){let o,e,l,a=t[2](t[17])+"",d,g,m,u,n,r,f=t[0]!==!1&&Ki(t),s=t[1]===!0&&Yi(t);return{key:i,first:null,c(){o=ye("g"),f&&f.c(),e=_e(),s&&s.c(),l=ye("text"),d=W(a),this.h()},l(c){o=be(c,"g",{class:!0,transform:!0});var h=z(o);f&&f.l(h),e=_e(),s&&s.l(h),l=be(h,"text",{x:!0,y:!0,dx:!0,dy:!0,style:!0,class:!0});var v=z(l);d=H(v,a),v.forEach(k),h.forEach(k),this.h()},h(){E(l,"x",t[3]),E(l,"y",g=t[4]+(t[8]?t[9].bandwidth()/2:0)),E(l,"dx",m=t[8]?-9:t[5]),E(l,"dy",u=t[8]?4:t[6]),ae(l,"text-anchor",t[8]?"end":t[7]),E(l,"class","svelte-qjm35e"),E(o,"class",n="tick tick-"+t[17]+" svelte-qjm35e"),E(o,"transform",r="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")"),this.first=o},m(c,h){L(c,o,h),f&&f.m(o,null),T(o,e),s&&s.m(o,null),T(o,l),T(l,d)},p(c,h){t=c,t[0]!==!1?f?f.p(t,h):(f=Ki(t),f.c(),f.m(o,e)):f&&(f.d(1),f=null),t[1]===!0?s?s.p(t,h):(s=Yi(t),s.c(),s.m(o,l)):s&&(s.d(1),s=null),h&1028&&a!==(a=t[2](t[17])+"")&&Ne(d,a),h&8&&E(l,"x",t[3]),h&784&&g!==(g=t[4]+(t[8]?t[9].bandwidth()/2:0))&&E(l,"y",g),h&288&&m!==(m=t[8]?-9:t[5])&&E(l,"dx",m),h&320&&u!==(u=t[8]?4:t[6])&&E(l,"dy",u),h&384&&ae(l,"text-anchor",t[8]?"end":t[7]),h&1024&&n!==(n="tick tick-"+t[17]+" svelte-qjm35e")&&E(o,"class",n),h&7936&&r!==(r="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&E(o,"transform",r)},d(c){c&&k(o),f&&f.d(),s&&s.d()}}}function qu(i){let t,o=[],e=new Map,l,a=i[10];const d=g=>g[17];for(let g=0;g<a.length;g+=1){let m=Qi(i,a,g),u=d(m);e.set(u,o[g]=Zi(u,m))}return{c(){t=ye("g");for(let g=0;g<o.length;g+=1)o[g].c();this.h()},l(g){t=be(g,"g",{class:!0,transform:!0});var m=z(t);for(let u=0;u<o.length;u+=1)o[u].l(m);m.forEach(k),this.h()},h(){E(t,"class","axis y-axis"),E(t,"transform",l="translate("+-i[11].left+", 0)")},m(g,m){L(g,t,m);for(let u=0;u<o.length;u+=1)o[u].m(t,null)},p(g,[m]){m&8191&&(a=g[10],o=kr(o,m,d,1,g,a,e,t,el,Zi,null,Qi)),m&2048&&l!==(l="translate("+-g[11].left+", 0)")&&E(t,"transform",l)},i:ce,o:ce,d(g){g&&k(t);for(let m=0;m<o.length;m+=1)o[m].d()}}}function Pu(i,t,o){let e,l,a,d,g;const{padding:m,xRange:u,yScale:n}=er("LayerCake");V(i,m,b=>o(11,d=b)),V(i,u,b=>o(12,g=b)),V(i,n,b=>o(9,a=b));let{gridlines:r=!0}=t,{tickMarks:f=!1}=t,{formatTick:s=b=>b}=t,{ticks:c=4}=t,{xTick:h=0}=t,{yTick:v=0}=t,{dxTick:p=0}=t,{dyTick:y=-4}=t,{textAnchor:_="start"}=t;return i.$$set=b=>{"gridlines"in b&&o(0,r=b.gridlines),"tickMarks"in b&&o(1,f=b.tickMarks),"formatTick"in b&&o(2,s=b.formatTick),"ticks"in b&&o(16,c=b.ticks),"xTick"in b&&o(3,h=b.xTick),"yTick"in b&&o(4,v=b.yTick),"dxTick"in b&&o(5,p=b.dxTick),"dyTick"in b&&o(6,y=b.dyTick),"textAnchor"in b&&o(7,_=b.textAnchor)},i.$$.update=()=>{i.$$.dirty&512&&o(8,e=typeof a.bandwidth=="function"),i.$$.dirty&66304&&o(10,l=Array.isArray(c)?c:e?a.domain():typeof c=="function"?c(a.ticks()):a.ticks(c))},[r,f,s,h,v,p,y,_,e,a,l,d,g,m,u,n,c]}class zu extends de{constructor(t){super(),me(this,t,Pu,qu,ge,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function Ji(i,t,o){const e=i.slice();return e[14]=t[o],e}function Xi(i){let t,o,e;return{c(){t=ye("circle"),this.h()},l(l){t=be(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),z(t).forEach(k),this.h()},h(){E(t,"cx",o=i[5](i[14])+(i[6].bandwidth?i[6].bandwidth()/2:0)),E(t,"cy",e=i[7](i[14])+(i[8].bandwidth?i[8].bandwidth()/2:0)),E(t,"r",i[0]),E(t,"fill",i[1]),E(t,"stroke",i[2]),E(t,"stroke-width",i[3])},m(l,a){L(l,t,a)},p(l,a){a&112&&o!==(o=l[5](l[14])+(l[6].bandwidth?l[6].bandwidth()/2:0))&&E(t,"cx",o),a&400&&e!==(e=l[7](l[14])+(l[8].bandwidth?l[8].bandwidth()/2:0))&&E(t,"cy",e),a&1&&E(t,"r",l[0]),a&2&&E(t,"fill",l[1]),a&4&&E(t,"stroke",l[2]),a&8&&E(t,"stroke-width",l[3])},d(l){l&&k(t)}}}function Au(i){let t,o=i[4],e=[];for(let l=0;l<o.length;l+=1)e[l]=Xi(Ji(i,o,l));return{c(){t=ye("g");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=be(l,"g",{class:!0});var a=z(t);for(let d=0;d<e.length;d+=1)e[d].l(a);a.forEach(k),this.h()},h(){E(t,"class","scatter-group")},m(l,a){L(l,t,a);for(let d=0;d<e.length;d+=1)e[d].m(t,null)},p(l,[a]){if(a&511){o=l[4];let d;for(d=0;d<o.length;d+=1){const g=Ji(l,o,d);e[d]?e[d].p(g,a):(e[d]=Xi(g),e[d].c(),e[d].m(t,null))}for(;d<e.length;d+=1)e[d].d(1);e.length=o.length}},i:ce,o:ce,d(l){l&&k(t),Ce(e,l)}}}function Iu(i,t,o){let e,l,a,d,g;const{data:m,xGet:u,yGet:n,xScale:r,yScale:f}=er("LayerCake");V(i,m,p=>o(4,e=p)),V(i,u,p=>o(5,l=p)),V(i,n,p=>o(7,d=p)),V(i,r,p=>o(6,a=p)),V(i,f,p=>o(8,g=p));let{r:s=5}=t,{fill:c="#0cf"}=t,{stroke:h="#000"}=t,{strokeWidth:v=0}=t;return i.$$set=p=>{"r"in p&&o(0,s=p.r),"fill"in p&&o(1,c=p.fill),"stroke"in p&&o(2,h=p.stroke),"strokeWidth"in p&&o(3,v=p.strokeWidth)},[s,c,h,v,e,l,a,d,g,m,u,n,r,f]}class Du extends de{constructor(t){super(),me(this,t,Iu,Au,ge,{r:0,fill:1,stroke:2,strokeWidth:3})}}function Lu(i){let t,o,e,l;return t=new Tu({props:{ticks:i[1],formatTick:i[10],xAxisTitle:i[4]+"/L"}}),e=new zu({}),{c(){j(t.$$.fragment),o=U(),j(e.$$.fragment)},l(a){ee(t.$$.fragment,a),o=Q(a),ee(e.$$.fragment,a)},m(a,d){ne(t,a,d),L(a,o,d),ne(e,a,d),l=!0},p(a,d){const g={};d&2&&(g.ticks=a[1]),d&16&&(g.xAxisTitle=a[4]+"/L"),t.$set(g)},i(a){l||(O(t.$$.fragment,a),O(e.$$.fragment,a),l=!0)},o(a){G(t.$$.fragment,a),G(e.$$.fragment,a),l=!1},d(a){te(t,a),a&&k(o),te(e,a)}}}function Cu(i){let t,o;return t=new Du({props:{r:"6.5"}}),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p:ce,i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Ou(i){let t,o,e,l;return t=new Wi({props:{$$slots:{default:[Lu]},$$scope:{ctx:i}}}),e=new Wi({props:{$$slots:{default:[Cu]},$$scope:{ctx:i}}}),{c(){j(t.$$.fragment),o=U(),j(e.$$.fragment)},l(a){ee(t.$$.fragment,a),o=Q(a),ee(e.$$.fragment,a)},m(a,d){ne(t,a,d),L(a,o,d),ne(e,a,d),l=!0},p(a,d){const g={};d&2066&&(g.$$scope={dirty:d,ctx:a}),t.$set(g);const m={};d&2048&&(m.$$scope={dirty:d,ctx:a}),e.$set(m)},i(a){l||(O(t.$$.fragment,a),O(e.$$.fragment,a),l=!0)},o(a){G(t.$$.fragment,a),G(e.$$.fragment,a),l=!1},d(a){te(t,a),a&&k(o),te(e,a)}}}function Vu(i){let t,o,e;return o=new bu({props:{x:i[3],y:Wu,yScale:uf(),yDomain:i[5],xScale:hl(),xDomain:i[2],data:i[0],$$slots:{default:[Ou]},$$scope:{ctx:i}}}),{c(){t=I("div"),j(o.$$.fragment),this.h()},l(l){t=D(l,"DIV",{class:!0,style:!0});var a=z(t);ee(o.$$.fragment,a),a.forEach(k),this.h()},h(){E(t,"class","chart-container svelte-b6xev8"),ae(t,"height",i[6]+"px")},m(l,a){L(l,t,a),ne(o,t,null),e=!0},p(l,[a]){const d={};a&8&&(d.x=l[3]),a&32&&(d.yDomain=l[5]),a&4&&(d.xDomain=l[2]),a&1&&(d.data=l[0]),a&2066&&(d.$$scope={dirty:a,ctx:l}),o.$set(d),(!e||a&64)&&ae(t,"height",l[6]+"px")},i(l){e||(O(o.$$.fragment,l),e=!0)},o(l){G(o.$$.fragment,l),e=!1},d(l){l&&k(t),te(o)}}}const Wu="sample";function Hu(i,t,o){let e,l,{plotData:a}=t,{titerMethod:d}=t,g,m,u,n,r,f;const s=c=>"1e"+Math.log10(c);return i.$$set=c=>{"plotData"in c&&o(0,a=c.plotData),"titerMethod"in c&&o(7,d=c.titerMethod)},i.$$.update=()=>{if(i.$$.dirty&1&&o(6,e=a.length*50+100),i.$$.dirty&1&&o(5,l=a.map(c=>c.sample)),i.$$.dirty&899){o(1,u=[]),o(3,r=d),o(9,m=0),o(8,g=1/0),a.forEach(c=>{c[d]<g&&o(8,g=c[d]),c[d]>m&&o(9,m=c[d])});for(let c=String(g).split(".")[0].length-2;c<String(m).split(".")[0].length+1;c++)o(1,u=[10**c,...u]);o(1,u=u.reverse()),o(2,n=[u[0],u[u.length-1]]),o(4,f="TCID50"),d=="ms_titer_ul"&&o(4,f="SIN")}},[a,u,n,r,f,l,e,d,g,m,s]}class Bu extends de{constructor(t){super(),me(this,t,Hu,Vu,ge,{plotData:0,titerMethod:7})}}const Gu=i=>({}),Mi=i=>({});function Fu(i){let t,o,e,l,a,d,g,m,u,n;const r=i[4].header,f=Ye(r,i,i[3],Mi),s=i[4].default,c=Ye(s,i,i[3],null);return{c(){t=I("div"),o=U(),e=I("div"),l=I("div"),a=W(""),d=U(),f&&f.c(),g=U(),c&&c.c(),this.h()},l(h){t=D(h,"DIV",{class:!0}),z(t).forEach(k),o=Q(h),e=D(h,"DIV",{class:!0,role:!0,"aria-modal":!0});var v=z(e);l=D(v,"DIV",{class:!0,autofocus:!0});var p=z(l);a=H(p,""),p.forEach(k),d=Q(v),f&&f.l(v),g=Q(v),c&&c.l(v),v.forEach(k),this.h()},h(){E(t,"class","modal-background svelte-3wiyh3"),E(l,"class","xclose svelte-3wiyh3"),E(l,"autofocus",""),E(e,"class","modal svelte-3wiyh3"),E(e,"role","dialog"),E(e,"aria-modal","true")},m(h,v){L(h,t,v),L(h,o,v),L(h,e,v),T(e,l),T(l,a),T(e,d),f&&f.m(e,null),T(e,g),c&&c.m(e,null),i[5](e),m=!0,l.focus(),u||(n=[pe(window,"keydown",i[2]),pe(t,"click",i[1]),pe(l,"click",i[1])],u=!0)},p(h,[v]){f&&f.p&&(!m||v&8)&&Ze(f,r,h,h[3],m?Xe(r,h[3],v,Gu):Je(h[3]),Mi),c&&c.p&&(!m||v&8)&&Ze(c,s,h,h[3],m?Xe(s,h[3],v,null):Je(h[3]),null)},i(h){m||(O(f,h),O(c,h),m=!0)},o(h){G(f,h),G(c,h),m=!1},d(h){h&&k(t),h&&k(o),h&&k(e),f&&f.d(h),c&&c.d(h),i[5](null),u=!1,jt(n)}}}function Uu(i,t,o){let{$$slots:e={},$$scope:l}=t;const a=et(),d=()=>a("close");let g;const m=r=>{if(r.key==="Escape"){d();return}if(r.key==="Tab"){const f=g.querySelectorAll("*"),s=Array.from(f).filter(h=>h.tabIndex>=0);let c=s.indexOf(document.activeElement);c===-1&&r.shiftKey&&(c=0),c+=s.length+(r.shiftKey?-1:1),c%=s.length,s[c].focus(),r.preventDefault()}},u=typeof document<"u"&&document.activeElement;u&&Fl(()=>{u.focus()});function n(r){Zt[r?"unshift":"push"](()=>{g=r,o(0,g)})}return i.$$set=r=>{"$$scope"in r&&o(3,l=r.$$scope)},[g,d,m,l,e,n]}class Qu extends de{constructor(t){super(),me(this,t,Uu,Fu,ge,{})}}function Si(i){let t,o;return t=new Qu({props:{$$slots:{default:[Ku]},$$scope:{ctx:i}}}),t.$on("close",i[14]),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p(e,l){const a={};l&32768&&(a.$$scope={dirty:l,ctx:e}),t.$set(a)},i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Ku(i){let t,o,e,l,a,d,g,m,u,n,r,f,s,c,h,v,p,y,_,b,w,R,N,q,C,A,P,F,B,K,S,$,Z,ie,M,fe,ue,se,le,ke;return{c(){t=I("h1"),o=W("Titer Calculator Settings:"),e=W(`

			The following settings can be adjusted to match the experimental parameters.
			`),l=I("ul"),a=I("li"),d=W("Volume (L): Specify the infection volume in the first row (row A)."),g=U(),m=I("li"),u=W("Dilution: Specify the dilution factor between successive rows."),n=U(),r=I("li"),f=W("Method: Specify the method for computing the viral titers."),s=U(),c=I("br"),h=U(),v=I("h1"),p=W("Method references:"),y=U(),_=I("ul"),b=I("li"),w=I("strong"),R=W("Reed-Meunch"),N=W(": The Reed-Muench calculation is based off the Bloom Lab "),q=I("a"),C=W("implementation"),A=W(", originally described in "),P=I("a"),F=W("Reed and Meunch, 1938"),B=W("."),K=U(),S=I("li"),$=I("strong"),Z=W("MidSin"),ie=W(": The MidSin calculation is based off the original "),M=I("a"),fe=W("implementation"),ue=W(", described in detail in "),se=I("a"),le=W("Cresta et al, 2021"),ke=W("."),this.h()},l(J){t=D(J,"H1",{class:!0});var he=z(t);o=H(he,"Titer Calculator Settings:"),he.forEach(k),e=H(J,`

			The following settings can be adjusted to match the experimental parameters.
			`),l=D(J,"UL",{class:!0});var we=z(l);a=D(we,"LI",{});var it=z(a);d=H(it,"Volume (L): Specify the infection volume in the first row (row A)."),it.forEach(k),g=Q(we),m=D(we,"LI",{});var Tn=z(m);u=H(Tn,"Dilution: Specify the dilution factor between successive rows."),Tn.forEach(k),n=Q(we),r=D(we,"LI",{});var qn=z(r);f=H(qn,"Method: Specify the method for computing the viral titers."),qn.forEach(k),we.forEach(k),s=Q(J),c=D(J,"BR",{}),h=Q(J),v=D(J,"H1",{class:!0});var Pn=z(v);p=H(Pn,"Method references:"),Pn.forEach(k),y=Q(J),_=D(J,"UL",{class:!0});var Me=z(_);b=D(Me,"LI",{});var Re=z(b);w=D(Re,"STRONG",{});var rn=z(w);R=H(rn,"Reed-Meunch"),rn.forEach(k),N=H(Re,": The Reed-Muench calculation is based off the Bloom Lab "),q=D(Re,"A",{href:!0,class:!0});var ln=z(q);C=H(ln,"implementation"),ln.forEach(k),A=H(Re,", originally described in "),P=D(Re,"A",{href:!0,class:!0});var Ve=z(P);F=H(Ve,"Reed and Meunch, 1938"),Ve.forEach(k),B=H(Re,"."),Re.forEach(k),K=Q(Me),S=D(Me,"LI",{});var Ee=z(S);$=D(Ee,"STRONG",{});var Se=z($);Z=H(Se,"MidSin"),Se.forEach(k),ie=H(Ee,": The MidSin calculation is based off the original "),M=D(Ee,"A",{href:!0,class:!0});var We=z(M);fe=H(We,"implementation"),We.forEach(k),ue=H(Ee,", described in detail in "),se=D(Ee,"A",{href:!0,class:!0});var He=z(se);le=H(He,"Cresta et al, 2021"),He.forEach(k),ke=H(Ee,"."),Ee.forEach(k),Me.forEach(k),this.h()},h(){E(t,"class","svelte-1d76pqs"),E(l,"class","list-disc svelte-1d76pqs"),E(v,"class","svelte-1d76pqs"),E(q,"href","https://github.com/jbloomlab/reedmuenchcalculator"),E(q,"class","svelte-1d76pqs"),E(P,"href","https://doi.org/10.1093/oxfordjournals.aje.a118408"),E(P,"class","svelte-1d76pqs"),E(M,"href","https://github.com/cbeauc/midSIN"),E(M,"class","svelte-1d76pqs"),E(se,"href","https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1009480"),E(se,"class","svelte-1d76pqs"),E(_,"class","list-disc svelte-1d76pqs")},m(J,he){L(J,t,he),T(t,o),L(J,e,he),L(J,l,he),T(l,a),T(a,d),T(l,g),T(l,m),T(m,u),T(l,n),T(l,r),T(r,f),L(J,s,he),L(J,c,he),L(J,h,he),L(J,v,he),T(v,p),L(J,y,he),L(J,_,he),T(_,b),T(b,w),T(w,R),T(b,N),T(b,q),T(q,C),T(b,A),T(b,P),T(P,F),T(b,B),T(_,K),T(_,S),T(S,$),T($,Z),T(S,ie),T(S,M),T(M,fe),T(S,ue),T(S,se),T(se,le),T(S,ke)},p:ce,d(J){J&&k(t),J&&k(e),J&&k(l),J&&k(s),J&&k(c),J&&k(h),J&&k(v),J&&k(y),J&&k(_)}}}function $i(i){let t,o,e,l,a,d;t=new Bu({props:{plotData:i[6],titerMethod:i[5]}}),e=new Go({props:{data:i[2]}});let g=i[3].length>0&&ji(i);return{c(){j(t.$$.fragment),o=U(),j(e.$$.fragment),l=U(),g&&g.c(),a=_e()},l(m){ee(t.$$.fragment,m),o=Q(m),ee(e.$$.fragment,m),l=Q(m),g&&g.l(m),a=_e()},m(m,u){ne(t,m,u),L(m,o,u),ne(e,m,u),L(m,l,u),g&&g.m(m,u),L(m,a,u),d=!0},p(m,u){const n={};u&64&&(n.plotData=m[6]),u&32&&(n.titerMethod=m[5]),t.$set(n);const r={};u&4&&(r.data=m[2]),e.$set(r),m[3].length>0?g?g.p(m,u):(g=ji(m),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(m){d||(O(t.$$.fragment,m),O(e.$$.fragment,m),d=!0)},o(m){G(t.$$.fragment,m),G(e.$$.fragment,m),d=!1},d(m){te(t,m),m&&k(o),te(e,m),m&&k(l),g&&g.d(m),m&&k(a)}}}function ji(i){let t,o,e,l,a;return{c(){t=I("h3"),o=W("Warnings"),e=W(`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),l=W(i[7]),a=W("."),this.h()},l(d){t=D(d,"H3",{class:!0});var g=z(t);o=H(g,"Warnings"),g.forEach(k),e=H(d,`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),l=H(d,i[7]),a=H(d,"."),this.h()},h(){E(t,"class","warning svelte-1d76pqs")},m(d,g){L(d,t,g),T(t,o),L(d,e,g),L(d,l,g),L(d,a,g)},p(d,g){g&128&&Ne(l,d[7])},d(d){d&&k(t),d&&k(e),d&&k(l),d&&k(a)}}}function Yu(i){let t,o,e,l,a,d,g,m,u,n,r,f,s,c,h,v,p,y,_,b,w,R,N,q,C,A=i[8]&&Si(i),P=i[4]!=null&&$i(i);return{c(){t=I("div"),o=I("div"),e=I("div"),l=W(`Volume (L):
			`),a=I("input"),d=U(),g=I("div"),m=W(`Dilution:
			`),u=I("input"),n=U(),r=I("div"),f=W(`Method:
			`),s=I("select"),c=I("option"),h=W("Reed-Meunch"),v=I("option"),p=W("MidSin"),y=U(),_=I("div"),b=W(""),w=U(),A&&A.c(),R=U(),P&&P.c(),this.h()},l(F){t=D(F,"DIV",{class:!0});var B=z(t);o=D(B,"DIV",{class:!0});var K=z(o);e=D(K,"DIV",{class:!0});var S=z(e);l=H(S,`Volume (L):
			`),a=D(S,"INPUT",{class:!0,type:!0,id:!0,min:!0}),S.forEach(k),d=Q(K),g=D(K,"DIV",{class:!0});var $=z(g);m=H($,`Dilution:
			`),u=D($,"INPUT",{class:!0,type:!0,id:!0,min:!0}),$.forEach(k),n=Q(K),r=D(K,"DIV",{class:!0});var Z=z(r);f=H(Z,`Method:
			`),s=D(Z,"SELECT",{class:!0,name:!0,id:!0});var ie=z(s);c=D(ie,"OPTION",{});var M=z(c);h=H(M,"Reed-Meunch"),M.forEach(k),v=D(ie,"OPTION",{});var fe=z(v);p=H(fe,"MidSin"),fe.forEach(k),ie.forEach(k),y=Q(Z),_=D(Z,"DIV",{class:!0});var ue=z(_);b=H(ue,""),ue.forEach(k),Z.forEach(k),K.forEach(k),w=Q(B),A&&A.l(B),R=Q(B),P&&P.l(B),B.forEach(k),this.h()},h(){E(a,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),E(a,"type","number"),E(a,"id","volume"),E(a,"min","1"),E(e,"class","CalcOpts"),E(u,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),E(u,"type","number"),E(u,"id","dilution"),E(u,"min","1"),E(g,"class","CalcOpts"),c.__value="rm_titer",c.value=c.__value,v.__value="ms_titer_ul",v.value=v.__value,E(s,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(s,"name","method"),E(s,"id","method"),i[5]===void 0&&nt(()=>i[12].call(s)),E(_,"class","info svelte-1d76pqs"),E(r,"class","CalcOpts"),E(o,"class","calcmenu grid 1opt:grid-cols-1 2opt:grid-cols-2 3opt:grid-cols-3 gap-2 svelte-1d76pqs"),E(t,"class","container svelte-1d76pqs")},m(F,B){L(F,t,B),T(t,o),T(o,e),T(e,l),T(e,a),Ie(a,i[0]),T(o,d),T(o,g),T(g,m),T(g,u),Ie(u,i[1]),T(o,n),T(o,r),T(r,f),T(r,s),T(s,c),T(c,h),T(s,v),T(v,p),xn(s,i[5]),T(r,y),T(r,_),T(_,b),T(t,w),A&&A.m(t,null),T(t,R),P&&P.m(t,null),N=!0,q||(C=[pe(a,"input",i[10]),pe(u,"input",i[11]),pe(s,"change",i[12]),pe(_,"click",i[13])],q=!0)},p(F,[B]){B&1&&Jt(a.value)!==F[0]&&Ie(a,F[0]),B&2&&Jt(u.value)!==F[1]&&Ie(u,F[1]),B&32&&xn(s,F[5]),F[8]?A?(A.p(F,B),B&256&&O(A,1)):(A=Si(F),A.c(),O(A,1),A.m(t,R)):A&&(qe(),G(A,1,1,()=>{A=null}),Pe()),F[4]!=null?P?(P.p(F,B),B&16&&O(P,1)):(P=$i(F),P.c(),O(P,1),P.m(t,null)):P&&(qe(),G(P,1,1,()=>{P=null}),Pe())},i(F){N||(O(A),O(P),N=!0)},o(F){G(A),G(P),N=!1},d(F){F&&k(t),A&&A.d(),P&&P.d(),q=!1,jt(C)}}}function Zu(i,t,o){let e,l;V(i,Oe,y=>o(9,l=y));let a=11,d=10,g="rm_titer",m,u,n,r,f=!1;function s(){a=Jt(this.value),o(0,a)}function c(){d=Jt(this.value),o(1,d)}function h(){g=Er(this),o(5,g)}const v=()=>o(8,f=!0),p=()=>o(8,f=!1);return i.$$.update=()=>{i.$$.dirty&515&&o(4,e=Vo(l,a,d)),i.$$.dirty&28&&e!=null&&(o(2,m=e.filter(y=>y.nrep>1)),o(3,u=e.filter(y=>y.nrep<2)),o(6,n=m.filter(y=>y.rm_titer>0)),o(7,r=u.map(y=>y.sample).join(", ")))},[a,d,m,u,e,g,n,r,f,l,s,c,h,v,p]}class Ju extends de{constructor(t){super(),me(this,t,Zu,Yu,ge,{})}}function Xu(i){let t,o;return t=new Ju({}),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p:ce,i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Mu(i){let t,o;return t=new To({}),t.$on("add",i[3]),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p:ce,i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Su(i){let t,o;return t=new wo({}),t.$on("add",i[3]),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p:ce,i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function $u(i){let t,o;return t=new co({}),t.$on("edit",i[4]),{c(){j(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,l){ne(t,e,l),o=!0},p:ce,i(e){o||(O(t.$$.fragment,e),o=!0)},o(e){G(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function ju(i){let t,o,e,l,a,d;o=new ho({props:{activeItem:i[0],items:i[1]}}),o.$on("tabChange",i[2]);const g=[$u,Su,Mu,Xu],m=[];function u(n,r){return n[0]==="All Plates"?0:n[0]==="Add New Plate"?1:n[0]==="Edit Plate"?2:n[0]==="Results"?3:-1}return~(l=u(i))&&(a=m[l]=g[l](i)),{c(){t=I("main"),j(o.$$.fragment),e=U(),a&&a.c(),this.h()},l(n){t=D(n,"MAIN",{class:!0});var r=z(t);ee(o.$$.fragment,r),e=Q(r),a&&a.l(r),r.forEach(k),this.h()},h(){E(t,"class","svelte-tcccgt")},m(n,r){L(n,t,r),ne(o,t,null),T(t,e),~l&&m[l].m(t,null),d=!0},p(n,[r]){const f={};r&1&&(f.activeItem=n[0]),o.$set(f);let s=l;l=u(n),l===s?~l&&m[l].p(n,r):(a&&(qe(),G(m[s],1,1,()=>{m[s]=null}),Pe()),~l?(a=m[l],a?a.p(n,r):(a=m[l]=g[l](n),a.c()),O(a,1),a.m(t,null)):a=null)},i(n){d||(O(o.$$.fragment,n),O(a),d=!0)},o(n){G(o.$$.fragment,n),G(a),d=!1},d(n){n&&k(t),te(o),~l&&m[l].d()}}}function es(i,t,o){let e,l;V(i,Oe,n=>o(5,e=n)),V(i,en,n=>o(6,l=n));let a=["All Plates","Add New Plate","Edit Plate","Results"],d="All Plates";return[d,a,n=>{if(n.detail.currentTab=="Edit Plate"&n.detail.newTab!="EditPlate"&&l!=-1){let r=e.find(f=>f.id==l);r.added=!0,en.set(-1)}n.detail.newTab=="Results"&e.length<2||n.detail.newTab=="Edit Plate"&e.length<2?o(0,d=n.detail.currentTab):o(0,d=n.detail.newTab)},n=>{o(0,d="All Plates")},n=>{o(0,d="Edit Plate"),en.set(n.detail.plate.id)}]}class rs extends de{constructor(t){super(),me(this,t,es,ju,ge,{})}}export{rs as default};
