import{S as ue,i as se,s as ae,F as hn,k as I,q as G,a as U,l as D,m as q,r as B,h as N,c as Q,n as E,L as Ee,b as z,J as T,M as we,u as be,G as vn,H as _n,I as pn,f as O,t as V,N as ht,O as Ht,g as Pe,d as qe,P as ze,B as oe,w as $,x as j,y as ee,z as ne,Q as Qr,R as zl,E as Al,T as vt,K as L,U as Il,V as Dl,W as Ll,X as Zn,Y as Cl,Z as Ol,_ as Wl,$ as yn,D as _t,e as me,a0 as Ne,a1 as pt,o as Hl,a2 as Z,a3 as Vl,p as fe,a4 as Gl,a5 as lt,a6 as ve,a7 as _e,a8 as Yr,a9 as $i,aa as Vr}from"../../chunks/index-b328ed93.js";import{w as Y,d as re}from"../../chunks/index-ba285eb9.js";function Bl(i){let r,l,n,o,a,d,g,m;const u=i[4].default,e=hn(u,i,i[3],null);return{c(){r=I("div"),l=I("div"),n=G(i[2]),o=U(),a=I("button"),e&&e.c(),this.h()},l(t){r=D(t,"DIV",{class:!0});var f=q(r);l=D(f,"DIV",{class:!0});var s=q(l);n=B(s,i[2]),s.forEach(N),o=Q(f),a=D(f,"BUTTON",{class:!0});var c=q(a);e&&e.l(c),c.forEach(N),f.forEach(N),this.h()},h(){E(l,"class","letter-label svelte-180z40v"),E(a,"class","svelte-180z40v"),Ee(a,"selected",i[0]),Ee(a,"added",i[1]),E(r,"class","button-row")},m(t,f){z(t,r,f),T(r,l),T(l,n),T(r,o),T(r,a),e&&e.m(a,null),d=!0,g||(m=we(a,"click",i[5]),g=!0)},p(t,[f]){(!d||f&4)&&be(n,t[2]),e&&e.p&&(!d||f&8)&&vn(e,u,t,t[3],d?pn(u,t[3],f,null):_n(t[3]),null),(!d||f&1)&&Ee(a,"selected",t[0]),(!d||f&2)&&Ee(a,"added",t[1])},i(t){d||(O(e,t),d=!0)},o(t){V(e,t),d=!1},d(t){t&&N(r),e&&e.d(t),g=!1,m()}}}function Fl(i,r,l){let{$$slots:n={},$$scope:o}=r,{selected:a=!1}=r,{added:d=!1}=r,{rowLetter:g=""}=r;function m(u){ht.call(this,i,u)}return i.$$set=u=>{"selected"in u&&l(0,a=u.selected),"added"in u&&l(1,d=u.added),"rowLetter"in u&&l(2,g=u.rowLetter),"$$scope"in u&&l(3,o=u.$$scope)},[a,d,g,o,n,m]}class Ul extends ue{constructor(r){super(),se(this,r,Fl,Bl,ae,{selected:0,added:1,rowLetter:2})}}function Ql(i){let r,l,n,o,a;const d=i[2].default,g=hn(d,i,i[1],null);return{c(){r=I("div"),l=I("div"),n=G(i[0]),o=U(),g&&g.c(),this.h()},l(m){r=D(m,"DIV",{class:!0});var u=q(r);l=D(u,"DIV",{class:!0});var e=q(l);n=B(e,i[0]),e.forEach(N),o=Q(u),g&&g.l(u),u.forEach(N),this.h()},h(){E(l,"class","title text-xl text-center"),E(r,"class","card shadow-lg min-w-min svelte-1tnsosu")},m(m,u){z(m,r,u),T(r,l),T(l,n),T(r,o),g&&g.m(r,null),a=!0},p(m,[u]){(!a||u&1)&&be(n,m[0]),g&&g.p&&(!a||u&2)&&vn(g,d,m,m[1],a?pn(d,m[1],u,null):_n(m[1]),null)},i(m){a||(O(g,m),a=!0)},o(m){V(g,m),a=!1},d(m){m&&N(r),g&&g.d(m)}}}function Yl(i,r,l){let{$$slots:n={},$$scope:o}=r,{cardTitle:a}=r;return i.$$set=d=>{"cardTitle"in d&&l(0,a=d.cardTitle),"$$scope"in d&&l(1,o=d.$$scope)},[a,o,n]}class Zl extends ue{constructor(r){super(),se(this,r,Yl,Ql,ae,{cardTitle:0})}}function Kl(i){let r,l,n,o,a;const d=i[3].default,g=hn(d,i,i[2],null);return{c(){r=I("button"),g&&g.c(),this.h()},l(m){r=D(m,"BUTTON",{class:!0});var u=q(r);g&&g.l(u),u.forEach(N),this.h()},h(){E(r,"class",l=Ht(i[0])+" svelte-1x31uai"),Ee(r,"flat",i[1])},m(m,u){z(m,r,u),g&&g.m(r,null),n=!0,o||(a=we(r,"click",i[4]),o=!0)},p(m,[u]){g&&g.p&&(!n||u&4)&&vn(g,d,m,m[2],n?pn(d,m[2],u,null):_n(m[2]),null),(!n||u&1&&l!==(l=Ht(m[0])+" svelte-1x31uai"))&&E(r,"class",l),(!n||u&3)&&Ee(r,"flat",m[1])},i(m){n||(O(g,m),n=!0)},o(m){V(g,m),n=!1},d(m){m&&N(r),g&&g.d(m),o=!1,a()}}}function Jl(i,r,l){let{$$slots:n={},$$scope:o}=r,{type:a="primary"}=r,{flat:d=!0}=r;function g(m){ht.call(this,i,m)}return i.$$set=m=>{"type"in m&&l(0,a=m.type),"flat"in m&&l(1,d=m.flat),"$$scope"in m&&l(2,o=m.$$scope)},[a,d,o,n,g]}class wn extends ue{constructor(r){super(),se(this,r,Jl,Kl,ae,{type:0,flat:1})}}const Bn=i=>{let r=Array(12).fill(-1),l=Array.from({length:12},(n,o)=>o+1);return{id:i,name:"Plate "+i,maxWell:r,colNames:l,added:!1}},Ae=Y([Bn(1)]),ot=Y(1),Fe=Y(-1),Qe=[Bn(3),Bn(2),Bn(1)];Qe[1].maxWell=[-1,4,4,3,4,3,5,6,5,5,6,-1];Qe[1].colNames=["Neg"].concat(Array(5).fill("A"),Array(5).fill("B"),["Neg"]);Qe[1].added=!0;Qe[2].maxWell=[-1,2,2,2,3,2,4,4,4,5,4,-1];Qe[2].colNames=["Neg"].concat(Array(5).fill("C"),Array(5).fill("D"),["Neg"]);Qe[2].added=!0;function Vt(i,r,l){const n=i.slice();return n[6]=r[l],n[8]=l,n}function Gt(i,r,l){const n=i.slice();return n[9]=r[l],n[11]=l,n}function Bt(i,r,l){const n=i.slice();return n[12]=r[l],n}function Ft(i){let r,l=i[12]+"",n;return{c(){r=I("td"),n=G(l),this.h()},l(o){r=D(o,"TD",{class:!0});var a=q(r);n=B(a,l),a.forEach(N),this.h()},h(){E(r,"class","svelte-1oiezpb")},m(o,a){z(o,r,a),T(r,n)},p:oe,d(o){o&&N(r)}}}function Ut(i){let r,l,n;function o(){return i[4](i[11],i[8])}return l=new Ul({props:{selected:i[8]<=i[9],added:i[0].added}}),l.$on("click",o),{c(){r=I("td"),$(l.$$.fragment),this.h()},l(a){r=D(a,"TD",{class:!0});var d=q(r);j(l.$$.fragment,d),d.forEach(N),this.h()},h(){E(r,"class","svelte-1oiezpb")},m(a,d){z(a,r,d),ee(l,r,null),n=!0},p(a,d){i=a;const g={};d&1&&(g.selected=i[8]<=i[9]),d&1&&(g.added=i[0].added),l.$set(g)},i(a){n||(O(l.$$.fragment,a),n=!0)},o(a){V(l.$$.fragment,a),n=!1},d(a){a&&N(r),ne(l)}}}function Qt(i){let r,l,n=i[6]+"",o,a,d,g,m=i[0].maxWell,u=[];for(let t=0;t<m.length;t+=1)u[t]=Ut(Gt(i,m,t));const e=t=>V(u[t],1,1,()=>{u[t]=null});return{c(){r=I("tr"),l=I("td"),o=G(n),a=U();for(let t=0;t<u.length;t+=1)u[t].c();d=U(),this.h()},l(t){r=D(t,"TR",{});var f=q(r);l=D(f,"TD",{class:!0});var s=q(l);o=B(s,n),s.forEach(N),a=Q(f);for(let c=0;c<u.length;c+=1)u[c].l(f);d=Q(f),f.forEach(N),this.h()},h(){E(l,"class","svelte-1oiezpb")},m(t,f){z(t,r,f),T(r,l),T(l,o),T(r,a);for(let s=0;s<u.length;s+=1)u[s].m(r,null);T(r,d),g=!0},p(t,f){if(f&9){m=t[0].maxWell;let s;for(s=0;s<m.length;s+=1){const c=Gt(t,m,s);u[s]?(u[s].p(c,f),O(u[s],1)):(u[s]=Ut(c),u[s].c(),O(u[s],1),u[s].m(r,d))}for(Pe(),s=m.length;s<u.length;s+=1)e(s);qe()}},i(t){if(!g){for(let f=0;f<m.length;f+=1)O(u[f]);g=!0}},o(t){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)V(u[f]);g=!1},d(t){t&&N(r),ze(u,t)}}}function Xl(i){let r,l,n,o,a,d,g=i[2],m=[];for(let f=0;f<g.length;f+=1)m[f]=Ft(Bt(i,g,f));let u=i[1],e=[];for(let f=0;f<u.length;f+=1)e[f]=Qt(Vt(i,u,f));const t=f=>V(e[f],1,1,()=>{e[f]=null});return{c(){r=I("table"),l=I("tr"),n=I("td"),o=U();for(let f=0;f<m.length;f+=1)m[f].c();a=U();for(let f=0;f<e.length;f+=1)e[f].c();this.h()},l(f){r=D(f,"TABLE",{class:!0});var s=q(r);l=D(s,"TR",{});var c=q(l);n=D(c,"TD",{class:!0}),q(n).forEach(N),o=Q(c);for(let h=0;h<m.length;h+=1)m[h].l(c);c.forEach(N),a=Q(s);for(let h=0;h<e.length;h+=1)e[h].l(s);s.forEach(N),this.h()},h(){E(n,"class","svelte-1oiezpb"),E(r,"class","svelte-1oiezpb")},m(f,s){z(f,r,s),T(r,l),T(l,n),T(l,o);for(let c=0;c<m.length;c+=1)m[c].m(l,null);T(r,a);for(let c=0;c<e.length;c+=1)e[c].m(r,null);d=!0},p(f,[s]){if(s&4){g=f[2];let c;for(c=0;c<g.length;c+=1){const h=Bt(f,g,c);m[c]?m[c].p(h,s):(m[c]=Ft(h),m[c].c(),m[c].m(l,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=g.length}if(s&11){u=f[1];let c;for(c=0;c<u.length;c+=1){const h=Vt(f,u,c);e[c]?(e[c].p(h,s),O(e[c],1)):(e[c]=Qt(h),e[c].c(),O(e[c],1),e[c].m(r,null))}for(Pe(),c=u.length;c<e.length;c+=1)t(c);qe()}},i(f){if(!d){for(let s=0;s<u.length;s+=1)O(e[s]);d=!0}},o(f){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)V(e[s]);d=!1},d(f){f&&N(r),ze(m,f),ze(e,f)}}}function Ml(i,r,l){let{plate:n}=r;n.maxWell.length;let o=["A","B","C","D","E","F","G","H"],a=Array.from({length:12},(m,u)=>u+1);const d=(m,u,e)=>{n.added||(n.maxWell[u]==e?l(0,n.maxWell[u]=-1,n):l(0,n.maxWell[u]=e,n),Ae.update(t=>{let f=[...t];return f.find(s=>s.id===m),f}))},g=(m,u)=>d(n.id,m,u);return i.$$set=m=>{"plate"in m&&l(0,n=m.plate)},[n,o,a,d,g]}class yt extends ue{constructor(r){super(),se(this,r,Ml,Xl,ae,{plate:0})}}function Sl(i){let r;return{c(){r=G("Delete")},l(l){r=B(l,"Delete")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function $l(i){let r;return{c(){r=G("Edit")},l(l){r=B(l,"Edit")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function jl(i){let r,l,n,o,a,d,g,m,u;return r=new yt({props:{plate:i[0]}}),a=new wn({props:{type:"primary",$$slots:{default:[Sl]},$$scope:{ctx:i}}}),a.$on("click",i[3]),m=new wn({props:{type:"secondary",$$slots:{default:[$l]},$$scope:{ctx:i}}}),m.$on("click",i[4]),{c(){$(r.$$.fragment),l=U(),n=I("div"),o=I("div"),$(a.$$.fragment),d=U(),g=I("div"),$(m.$$.fragment),this.h()},l(e){j(r.$$.fragment,e),l=Q(e),n=D(e,"DIV",{class:!0});var t=q(n);o=D(t,"DIV",{class:!0});var f=q(o);j(a.$$.fragment,f),f.forEach(N),d=Q(t),g=D(t,"DIV",{class:!0});var s=q(g);j(m.$$.fragment,s),s.forEach(N),t.forEach(N),this.h()},h(){E(o,"class","absolute bottom-0 right-0"),E(g,"class","absolute bottom-0 left-0"),E(n,"class","button-footer relative svelte-x2uown")},m(e,t){ee(r,e,t),z(e,l,t),z(e,n,t),T(n,o),ee(a,o,null),T(n,d),T(n,g),ee(m,g,null),u=!0},p(e,t){const f={};t&1&&(f.plate=e[0]),r.$set(f);const s={};t&64&&(s.$$scope={dirty:t,ctx:e}),a.$set(s);const c={};t&64&&(c.$$scope={dirty:t,ctx:e}),m.$set(c)},i(e){u||(O(r.$$.fragment,e),O(a.$$.fragment,e),O(m.$$.fragment,e),u=!0)},o(e){V(r.$$.fragment,e),V(a.$$.fragment,e),V(m.$$.fragment,e),u=!1},d(e){ne(r,e),e&&N(l),e&&N(n),ne(a),ne(m)}}}function eo(i){let r,l;return r=new Zl({props:{cardTitle:i[0].name,$$slots:{default:[jl]},$$scope:{ctx:i}}}),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p(n,[o]){const a={};o&1&&(a.cardTitle=n[0].name),o&65&&(a.$$scope={dirty:o,ctx:n}),r.$set(a)},i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function no(i,r,l){let{plate:n}=r,o=Qr();const a=u=>{Ae.update(e=>e.filter(t=>t.id!=u))},d=u=>{Fe.set(u.id),o("edit",{plate:u})},g=()=>a(n.id),m=()=>d(n);return i.$$set=u=>{"plate"in u&&l(0,n=u.plate)},[n,a,d,g,m]}class ro extends ue{constructor(r){super(),se(this,r,no,eo,ae,{plate:0})}}function ji(i){const r=i-1;return r*r*r+1}function to(i,{delay:r=0,duration:l=400,easing:n=zl}={}){const o=+getComputedStyle(i).opacity;return{delay:r,duration:l,easing:n,css:a=>`opacity: ${a*o}`}}function io(i,{delay:r=0,duration:l=400,easing:n=ji,start:o=0,opacity:a=0}={}){const d=getComputedStyle(i),g=+d.opacity,m=d.transform==="none"?"":d.transform,u=1-o,e=g*(1-a);return{delay:r,duration:l,easing:n,css:(t,f)=>`
			transform: ${m} scale(${1-u*f});
			opacity: ${g-e*f}
		`}}function lo(i,{from:r,to:l},n={}){const o=getComputedStyle(i),a=o.transform==="none"?"":o.transform,[d,g]=o.transformOrigin.split(" ").map(parseFloat),m=r.left+r.width*d/l.width-(l.left+d),u=r.top+r.height*g/l.height-(l.top+g),{delay:e=0,duration:t=s=>Math.sqrt(s)*120,easing:f=ji}=n;return{delay:e,duration:Al(t)?t(Math.sqrt(m*m+u*u)):t,easing:f,css:(s,c)=>{const h=c*m,v=c*u,w=s+c*r.width/l.width,y=s+c*r.height/l.height;return`transform: ${a} translate(${h}px, ${v}px) scale(${w}, ${y});`}}}function Yt(i,r,l){const n=i.slice();return n[6]=r[l],n}function Zt(i){let r,l;return r=new ro({props:{plate:i[6]}}),r.$on("edit",i[4]),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p(n,o){const a={};o&1&&(a.plate=n[6]),r.$set(a)},i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Kt(i,r){let l,n,o,a,d,g=oe,m,u=r[6].added&&Zt(r);return{key:i,first:null,c(){l=I("div"),u&&u.c(),n=U(),this.h()},l(e){l=D(e,"DIV",{});var t=q(l);u&&u.l(t),n=Q(t),t.forEach(N),this.h()},h(){this.first=l},m(e,t){z(e,l,t),u&&u.m(l,null),T(l,n),m=!0},p(e,t){r=e,r[6].added?u?(u.p(r,t),t&1&&O(u,1)):(u=Zt(r),u.c(),O(u,1),u.m(l,n)):u&&(Pe(),V(u,1,1,()=>{u=null}),qe())},r(){d=l.getBoundingClientRect()},f(){Il(l),g(),Dl(l,d)},a(){g(),g=Ll(l,d,lo,{duration:500})},i(e){m||(O(u),Zn(()=>{a&&a.end(1),o=Cl(l,to,{}),o.start()}),m=!0)},o(e){V(u),o&&o.invalidate(),e&&(a=Ol(l,io,{})),m=!1},d(e){e&&N(l),u&&u.d(),e&&a&&a.end()}}}function Jt(i){let r,l,n,o,a,d,g;return d=new wn({props:{type:"secondary",$$slots:{default:[oo]},$$scope:{ctx:i}}}),d.$on("click",i[5]),{c(){r=I("p"),l=G("Please add a plate to continue"),n=U(),o=I("br"),a=U(),$(d.$$.fragment)},l(m){r=D(m,"P",{});var u=q(r);l=B(u,"Please add a plate to continue"),u.forEach(N),n=Q(m),o=D(m,"BR",{}),a=Q(m),j(d.$$.fragment,m)},m(m,u){z(m,r,u),T(r,l),z(m,n,u),z(m,o,u),z(m,a,u),ee(d,m,u),g=!0},p(m,u){const e={};u&512&&(e.$$scope={dirty:u,ctx:m}),d.$set(e)},i(m){g||(O(d.$$.fragment,m),g=!0)},o(m){V(d.$$.fragment,m),g=!1},d(m){m&&N(r),m&&N(n),m&&N(o),m&&N(a),ne(d,m)}}}function oo(i){let r;return{c(){r=G("Load Demo data")},l(l){r=B(l,"Load Demo data")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function fo(i){let r,l=[],n=new Map,o,a,d,g=i[0];const m=e=>e[6].id;for(let e=0;e<g.length;e+=1){let t=Yt(i,g,e),f=m(t);n.set(f,l[e]=Kt(f,t))}let u=i[1]&&Jt(i);return{c(){r=I("div");for(let e=0;e<l.length;e+=1)l[e].c();o=U(),a=I("div"),u&&u.c(),this.h()},l(e){r=D(e,"DIV",{class:!0});var t=q(r);for(let s=0;s<l.length;s+=1)l[s].l(t);t.forEach(N),o=Q(e),a=D(e,"DIV",{class:!0});var f=q(a);u&&u.l(f),f.forEach(N),this.h()},h(){E(r,"class","grid 1plate:grid-cols-1 2plate:grid-cols-2 3plate:grid-cols-3 gap-8"),E(a,"class","emptyMessage svelte-vi6p6h")},m(e,t){z(e,r,t);for(let f=0;f<l.length;f+=1)l[f].m(r,null);z(e,o,t),z(e,a,t),u&&u.m(a,null),d=!0},p(e,[t]){if(t&1){g=e[0],Pe();for(let f=0;f<l.length;f+=1)l[f].r();l=vt(l,t,m,1,e,g,n,r,Wl,Kt,null,Yt);for(let f=0;f<l.length;f+=1)l[f].a();qe()}e[1]?u?(u.p(e,t),t&2&&O(u,1)):(u=Jt(e),u.c(),O(u,1),u.m(a,null)):u&&(Pe(),V(u,1,1,()=>{u=null}),qe())},i(e){if(!d){for(let t=0;t<g.length;t+=1)O(l[t]);O(u),d=!0}},o(e){for(let t=0;t<l.length;t+=1)V(l[t]);V(u),d=!1},d(e){e&&N(r);for(let t=0;t<l.length;t+=1)l[t].d();e&&N(o),e&&N(a),u&&u.d()}}}function uo(i,r,l){let n,o,a;L(i,Ae,u=>l(3,a=u));const d=()=>{Ae.set(Qe),ot.set(3)};function g(u){ht.call(this,i,u)}const m=()=>d();return i.$$.update=()=>{i.$$.dirty&8&&l(1,n=a.length==1),i.$$.dirty&8&&l(0,o=a.slice(1).reverse())},[o,n,d,a,g,m]}class so extends ue{constructor(r){super(),se(this,r,uo,fo,ae,{})}}function Xt(i,r,l){const n=i.slice();return n[4]=r[l],n}function Mt(i){let r,l,n=i[4]+"",o,a,d,g;function m(){return i[3](i[4])}return{c(){r=I("li"),l=I("div"),o=G(n),a=U(),this.h()},l(u){r=D(u,"LI",{class:!0});var e=q(r);l=D(e,"DIV",{class:!0});var t=q(l);o=B(t,n),t.forEach(N),a=Q(e),e.forEach(N),this.h()},h(){E(l,"class","svelte-aio21l"),Ee(l,"active",i[4]===i[1]),E(r,"class","svelte-aio21l")},m(u,e){z(u,r,e),T(r,l),T(l,o),T(r,a),d||(g=we(r,"click",m),d=!0)},p(u,e){i=u,e&1&&n!==(n=i[4]+"")&&be(o,n),e&3&&Ee(l,"active",i[4]===i[1])},d(u){u&&N(r),d=!1,g()}}}function ao(i){let r,l,n=i[0],o=[];for(let a=0;a<n.length;a+=1)o[a]=Mt(Xt(i,n,a));return{c(){r=I("div"),l=I("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){r=D(a,"DIV",{class:!0});var d=q(r);l=D(d,"UL",{class:!0});var g=q(l);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(N),d.forEach(N),this.h()},h(){E(l,"class","svelte-aio21l"),E(r,"class","tabs svelte-aio21l")},m(a,d){z(a,r,d),T(r,l);for(let g=0;g<o.length;g+=1)o[g].m(l,null)},p(a,[d]){if(d&7){n=a[0];let g;for(g=0;g<n.length;g+=1){const m=Xt(a,n,g);o[g]?o[g].p(m,d):(o[g]=Mt(m),o[g].c(),o[g].m(l,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=n.length}},i:oe,o:oe,d(a){a&&N(r),ze(o,a)}}}function co(i,r,l){let{items:n}=r,{activeItem:o}=r;const a=Qr(),d=g=>a("tabChange",{currentTab:o,newTab:g});return i.$$set=g=>{"items"in g&&l(0,n=g.items),"activeItem"in g&&l(1,o=g.activeItem)},[n,o,a,d]}class mo extends ue{constructor(r){super(),se(this,r,co,ao,ae,{items:0,activeItem:1})}}function St(i,r,l){const n=i.slice();return n[7]=r[l],n[8]=r,n[9]=l,n}function $t(i,r,l){const n=i.slice();return n[0]=r[l],n}function jt(i){let r,l=i[0].name+"",n,o;return{c(){r=I("option"),n=G(l),this.h()},l(a){r=D(a,"OPTION",{});var d=q(r);n=B(d,l),d.forEach(N),this.h()},h(){r.__value=o=i[0].name,r.value=r.__value},m(a,d){z(a,r,d),T(r,n)},p(a,d){d&4&&l!==(l=a[0].name+"")&&be(n,l),d&4&&o!==(o=a[0].name)&&(r.__value=o,r.value=r.__value)},d(a){a&&N(r)}}}function ei(i){let r,l=i[0].added===!0&&jt(i);return{c(){l&&l.c(),r=me()},l(n){l&&l.l(n),r=me()},m(n,o){l&&l.m(n,o),z(n,r,o)},p(n,o){n[0].added===!0?l?l.p(n,o):(l=jt(n),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&N(r)}}}function ni(i){let r,l,n,o=i[9]+1+"",a,d,g,m,u,e,t;function f(){i[6].call(m,i[8],i[9])}return{c(){r=I("form"),l=I("label"),n=G("Column "),a=G(o),d=G(" Sample Name:"),g=U(),m=I("input"),u=U(),this.h()},l(s){r=D(s,"FORM",{});var c=q(r);l=D(c,"LABEL",{for:!0});var h=q(l);n=B(h,"Column "),a=B(h,o),d=B(h," Sample Name:"),h.forEach(N),g=Q(c),m=D(c,"INPUT",{class:!0,id:!0,type:!0}),u=Q(c),c.forEach(N),this.h()},h(){E(l,"for","question"),E(m,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white colinput svelte-5rwbji"),E(m,"id","question"),E(m,"type","text")},m(s,c){z(s,r,c),T(r,l),T(l,n),T(l,a),T(l,d),T(r,g),T(r,m),Ne(m,i[7]),T(r,u),e||(t=we(m,"input",f),e=!0)},p(s,c){i=s,c&1&&m.value!==i[7]&&Ne(m,i[7])},d(s){s&&N(r),e=!1,t()}}}function go(i){let r,l,n,o,a,d,g,m,u=i[2],e=[];for(let s=0;s<u.length;s+=1)e[s]=ei($t(i,u,s));let t=i[0].colNames,f=[];for(let s=0;s<t.length;s+=1)f[s]=ni(St(i,t,s));return{c(){r=I("div"),l=G(`Copy column labels of exiting plate:
	`),n=I("select"),o=I("option");for(let s=0;s<e.length;s+=1)e[s].c();a=U(),d=I("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){r=D(s,"DIV",{class:!0});var c=q(r);l=B(c,`Copy column labels of exiting plate:
	`),n=D(c,"SELECT",{class:!0,name:!0,id:!0});var h=q(n);o=D(h,"OPTION",{});var v=q(o);v.forEach(N);for(let y=0;y<e.length;y+=1)e[y].l(h);h.forEach(N),c.forEach(N),a=Q(s),d=D(s,"DIV",{class:!0});var w=q(d);for(let y=0;y<f.length;y+=1)f[y].l(w);w.forEach(N),this.h()},h(){o.__value="none",o.value=o.__value,o.selected=!0,o.disabled=!0,o.hidden=!0,E(n,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(n,"name","plates"),E(n,"id","plates"),i[1]===void 0&&Zn(()=>i[4].call(n)),E(r,"class","CopySelect svelte-5rwbji"),E(d,"class","grid 1form:grid-cols-1 2form:grid-cols-2 3form:grid-cols-3 gap-x-8 gap-y-4")},m(s,c){z(s,r,c),T(r,l),T(r,n),T(n,o);for(let h=0;h<e.length;h+=1)e[h].m(n,null);yn(n,i[1]),z(s,a,c),z(s,d,c);for(let h=0;h<f.length;h+=1)f[h].m(d,null);g||(m=[we(n,"change",i[4]),we(n,"change",i[5])],g=!0)},p(s,[c]){if(c&4){u=s[2];let h;for(h=0;h<u.length;h+=1){const v=$t(s,u,h);e[h]?e[h].p(v,c):(e[h]=ei(v),e[h].c(),e[h].m(n,null))}for(;h<e.length;h+=1)e[h].d(1);e.length=u.length}if(c&6&&yn(n,s[1]),c&1){t=s[0].colNames;let h;for(h=0;h<t.length;h+=1){const v=St(s,t,h);f[h]?f[h].p(v,c):(f[h]=ni(v),f[h].c(),f[h].m(d,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=t.length}},i:oe,o:oe,d(s){s&&N(r),ze(e,s),s&&N(a),s&&N(d),ze(f,s),g=!1,_t(m)}}}function ho(i,r,l){let n;L(i,Ae,e=>l(2,n=e));let{plate:o}=r,a;const d=e=>{const t=n.find(f=>f.name==e).colNames;l(0,o.colNames=[...t],o)};function g(){a=pt(this),l(1,a)}const m=()=>d(a);function u(e,t){e[t]=this.value,l(0,o)}return i.$$set=e=>{"plate"in e&&l(0,o=e.plate)},[o,a,n,d,g,m,u]}class el extends ue{constructor(r){super(),se(this,r,ho,go,ae,{plate:0})}}function vo(i){let r;return{c(){r=G("Add Plate")},l(l){r=B(l,"Add Plate")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function _o(i){let r,l,n,o,a,d,g,m,u,e,t,f,s;return a=new yt({props:{plate:i[0]}}),m=new wn({props:{type:"secondary",$$slots:{default:[vo]},$$scope:{ctx:i}}}),m.$on("click",i[5]),e=new el({props:{plate:i[0]}}),{c(){r=I("form"),l=G("Plate Name: "),n=I("input"),o=U(),$(a.$$.fragment),d=U(),g=I("div"),$(m.$$.fragment),u=U(),$(e.$$.fragment),this.h()},l(c){r=D(c,"FORM",{class:!0});var h=q(r);l=B(h,"Plate Name: "),n=D(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(N),o=Q(c),j(a.$$.fragment,c),d=Q(c),g=D(c,"DIV",{class:!0});var v=q(g);j(m.$$.fragment,v),v.forEach(N),u=Q(c),j(e.$$.fragment,c),this.h()},h(){E(n,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(n,"id","question"),E(n,"type","text"),E(r,"class","NameForm svelte-iqog5b"),E(g,"class","ButtonContainer svelte-iqog5b")},m(c,h){z(c,r,h),T(r,l),T(r,n),Ne(n,i[0].name),z(c,o,h),ee(a,c,h),z(c,d,h),z(c,g,h),ee(m,g,null),z(c,u,h),ee(e,c,h),t=!0,f||(s=we(n,"input",i[4]),f=!0)},p(c,[h]){h&1&&n.value!==c[0].name&&Ne(n,c[0].name);const v={};h&1&&(v.plate=c[0]),a.$set(v);const w={};h&128&&(w.$$scope={dirty:h,ctx:c}),m.$set(w);const y={};h&1&&(y.plate=c[0]),e.$set(y)},i(c){t||(O(a.$$.fragment,c),O(m.$$.fragment,c),O(e.$$.fragment,c),t=!0)},o(c){V(a.$$.fragment,c),V(m.$$.fragment,c),V(e.$$.fragment,c),t=!1},d(c){c&&N(r),c&&N(o),ne(a,c),c&&N(d),c&&N(g),ne(m),c&&N(u),ne(e,c),f=!1,s()}}}function po(i,r,l){let n,o,a;L(i,ot,e=>l(2,o=e)),L(i,Ae,e=>l(3,a=e));let d=Qr();const g=e=>{Ae.update(t=>{let f=[...t],s=f.find(h=>h.id==e);return s.added=!0,f=[Bn(o+1),...f],f}),ot.update(t=>t+1),d("add")};function m(){n.name=this.value,l(0,n),l(3,a),l(2,o)}const u=()=>g(n.id);return i.$$.update=()=>{i.$$.dirty&12&&l(0,n=a.find(e=>e.id==o))},[n,g,o,a,m,u]}class yo extends ue{constructor(r){super(),se(this,r,po,_o,ae,{})}}function ri(i,r,l){const n=i.slice();return n[11]=r[l],n}function wo(i){let r,l,n,o,a,d=i[2],g=[];for(let m=0;m<d.length;m+=1)g[m]=ii(ri(i,d,m));return{c(){r=G(`Plate to edit:
	`),l=I("select"),n=I("option");for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){r=B(m,`Plate to edit:
	`),l=D(m,"SELECT",{class:!0,name:!0,id:!0});var u=q(l);n=D(u,"OPTION",{});var e=q(n);e.forEach(N);for(let t=0;t<g.length;t+=1)g[t].l(u);u.forEach(N),this.h()},h(){n.__value="none",n.value=n.__value,n.selected=!0,n.disabled=!0,n.hidden=!0,E(l,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(l,"name","plates"),E(l,"id","plates"),i[1]===void 0&&Zn(()=>i[7].call(l))},m(m,u){z(m,r,u),z(m,l,u),T(l,n);for(let e=0;e<g.length;e+=1)g[e].m(l,null);yn(l,i[1]),o||(a=[we(l,"change",i[7]),we(l,"change",i[8])],o=!0)},p(m,u){if(u&4){d=m[2];let e;for(e=0;e<d.length;e+=1){const t=ri(m,d,e);g[e]?g[e].p(t,u):(g[e]=ii(t),g[e].c(),g[e].m(l,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=d.length}u&6&&yn(l,m[1])},i:oe,o:oe,d(m){m&&N(r),m&&N(l),ze(g,m),o=!1,_t(a)}}}function bo(i){let r,l,n,o,a,d,g,m,u,e,t,f,s;return a=new yt({props:{plate:i[0]}}),m=new wn({props:{type:"secondary",$$slots:{default:[ko]},$$scope:{ctx:i}}}),m.$on("click",i[6]),e=new el({props:{plate:i[0]}}),{c(){r=I("form"),l=G("Plate Name: "),n=I("input"),o=U(),$(a.$$.fragment),d=U(),g=I("div"),$(m.$$.fragment),u=U(),$(e.$$.fragment),this.h()},l(c){r=D(c,"FORM",{class:!0});var h=q(r);l=B(h,"Plate Name: "),n=D(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(N),o=Q(c),j(a.$$.fragment,c),d=Q(c),g=D(c,"DIV",{class:!0});var v=q(g);j(m.$$.fragment,v),v.forEach(N),u=Q(c),j(e.$$.fragment,c),this.h()},h(){E(n,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(n,"id","question"),E(n,"type","text"),E(r,"class","NameForm svelte-1hrsnk0"),E(g,"class","ButtonContainer svelte-1hrsnk0")},m(c,h){z(c,r,h),T(r,l),T(r,n),Ne(n,i[0].name),z(c,o,h),ee(a,c,h),z(c,d,h),z(c,g,h),ee(m,g,null),z(c,u,h),ee(e,c,h),t=!0,f||(s=we(n,"input",i[5]),f=!0)},p(c,h){h&1&&n.value!==c[0].name&&Ne(n,c[0].name);const v={};h&1&&(v.plate=c[0]),a.$set(v);const w={};h&16384&&(w.$$scope={dirty:h,ctx:c}),m.$set(w);const y={};h&1&&(y.plate=c[0]),e.$set(y)},i(c){t||(O(a.$$.fragment,c),O(m.$$.fragment,c),O(e.$$.fragment,c),t=!0)},o(c){V(a.$$.fragment,c),V(m.$$.fragment,c),V(e.$$.fragment,c),t=!1},d(c){c&&N(r),c&&N(o),ne(a,c),c&&N(d),c&&N(g),ne(m),c&&N(u),ne(e,c),f=!1,s()}}}function ti(i){let r,l=i[11].name+"",n,o;return{c(){r=I("option"),n=G(l),this.h()},l(a){r=D(a,"OPTION",{});var d=q(r);n=B(d,l),d.forEach(N),this.h()},h(){r.__value=o=i[11].name,r.value=r.__value},m(a,d){z(a,r,d),T(r,n)},p(a,d){d&4&&l!==(l=a[11].name+"")&&be(n,l),d&4&&o!==(o=a[11].name)&&(r.__value=o,r.value=r.__value)},d(a){a&&N(r)}}}function ii(i){let r,l=i[11].added===!0&&ti(i);return{c(){l&&l.c(),r=me()},l(n){l&&l.l(n),r=me()},m(n,o){l&&l.m(n,o),z(n,r,o)},p(n,o){n[11].added===!0?l?l.p(n,o):(l=ti(n),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&N(r)}}}function ko(i){let r;return{c(){r=G("Update Plate")},l(l){r=B(l,"Update Plate")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function xo(i){let r,l,n,o;const a=[bo,wo],d=[];function g(m,u){return m[0]!=null?0:1}return r=g(i),l=d[r]=a[r](i),{c(){l.c(),n=me()},l(m){l.l(m),n=me()},m(m,u){d[r].m(m,u),z(m,n,u),o=!0},p(m,[u]){let e=r;r=g(m),r===e?d[r].p(m,u):(Pe(),V(d[e],1,1,()=>{d[e]=null}),qe(),l=d[r],l?l.p(m,u):(l=d[r]=a[r](m),l.c()),O(l,1),l.m(n.parentNode,n))},i(m){o||(O(l),o=!0)},o(m){V(l),o=!1},d(m){d[r].d(m),m&&N(n)}}}function Eo(i,r,l){let n,o;L(i,Ae,c=>l(2,n=c)),L(i,Fe,c=>l(9,o=c));let a=Qr(),{plate:d=n.find(c=>c.id==o)}=r,g;d!=null&&(d.added=!1);const m=c=>{l(0,d=n.find(h=>h.name==c)),l(0,d.added=!1,d),Fe.set(d.id)},u=c=>{l(0,d.added=!0,d),Fe.set(-1),a("add")};function e(){d.name=this.value,l(0,d)}const t=()=>u(d.name);function f(){g=pt(this),l(1,g)}const s=()=>m(g);return i.$$set=c=>{"plate"in c&&l(0,d=c.plate)},[d,g,n,m,u,e,t,f,s]}class No extends ue{constructor(r){super(),se(this,r,Eo,xo,ae,{plate:0})}}const Ro=(i,r,l)=>{let n=8,o=[];return i.forEach(a=>{let d=Array(n).fill(0),g=0;for(var m=0;m<d.length;m++)d[m]=g+a.maxWell.filter(v=>v<m).length,g=d[m];let u=Array(n).fill(0);g=0;for(var m=u.length-1;m>=0;m--)u[m]=g+a.maxWell.filter(w=>w>=m).length,g=u[m];let e=Array(n).fill(0);for(var m=0;m<e.length;m++)e[m]=100*u[m]/(u[m]+d[m]);let t,f,s;for(var m=0;m<e.length;m++)if(e[m]<50){t=e[m-1],f=e[m],s=m-1;break}let c=(t-50)/(t-f),h=l**(s+c)/r;isNaN(h)&&(h=0),o=[{sample:a.name,nrep:a.maxWell.length,titer:h},...o]}),o};var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function*nl(i,r,l=0,n=2*Number.EPSILON){const o=(3-Math.sqrt(5))/2;let a=i+o*(r-i),d=a,g=d,m=0,u=yield a,e=u,t=e,f,s;for(;;){const c=.5*(i+r),h=n*Math.abs(a)+l,v=2*h;if(Math.abs(a-c)<=v-.5*(r-i))return{x:a,fx:u};let w=0,y=w,_=y;Math.abs(m)>h&&(w=(a-d)*(u-t),y=(a-g)*(u-e),_=(a-g)*y-(a-d)*w,y=2*(y-w),y>0?_=-_:y=-y,w=m,m=f),Math.abs(_)<Math.abs(.5*y*w)&&_>y*(i-a)&&_<y*(r-a)?(f=_/y,s=a+f,(s-i<v||r-s<v)&&(f=a<c?h:-h)):(m=(a<c?r:i)-a,f=o*m),s=a+(Math.abs(f)>=h?f:f>0?h:-h);const p=yield s;p<=u?(s<a?r=a:i=a,g=d,t=e,d=a,e=u,a=s,u=p):(s<a?i=s:r=s,p<=e||d==a?(g=d,t=e,d=s,e=p):(p<=t||g==a||g==d)&&(g=s,t=p))}}function Po(i,r,l,n=0,o=Number.EPSILON){const a=nl(r,l,n,o);let d=a.next();for(;!d.done;){const g=d.value,m=i(g);d=a.next(m)}return d.value}var qo={local_min_generator:nl,local_min:Po},ft={},zo={get exports(){return ft},set exports(i){ft=i}};(function(i,r){(function(l,n){i.exports=n()})(To,function(){var l=function(n,o){var a=Array.prototype.concat,d=Array.prototype.slice,g=Object.prototype.toString;function m(y,_){var p=y>_?y:_;return n.pow(10,17-~~(n.log(p>0?p:-p)*n.LOG10E))}var u=Array.isArray||function(_){return g.call(_)==="[object Array]"};function e(y){return g.call(y)==="[object Function]"}function t(y){return typeof y=="number"?y-y===0:!1}function f(y){return a.apply([],y)}function s(){return new s._init(arguments)}s.fn=s.prototype,s._init=function(_){if(u(_[0]))if(u(_[0][0])){e(_[1])&&(_[0]=s.map(_[0],_[1]));for(var p=0;p<_[0].length;p++)this[p]=_[0][p];this.length=_[0].length}else this[0]=e(_[1])?s.map(_[0],_[1]):_[0],this.length=1;else if(t(_[0]))this[0]=s.seq.apply(null,_),this.length=1;else{if(_[0]instanceof s)return s(_[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:m,isArray:u,isFunction:e,isNumber:t,toVector:f},s._random_fn=n.random,s.setRandom=function(_){if(typeof _!="function")throw new TypeError("fn is not a function");s._random_fn=_},s.extend=function(_){var p,b;if(arguments.length===1){for(b in _)s[b]=_[b];return this}for(p=1;p<arguments.length;p++)for(b in arguments[p])_[b]=arguments[p][b];return _},s.rows=function(_){return _.length||1},s.cols=function(_){return _[0].length||1},s.dimensions=function(_){return{rows:s.rows(_),cols:s.cols(_)}},s.row=function(_,p){return u(p)?p.map(function(b){return s.row(_,b)}):_[p]},s.rowa=function(_,p){return s.row(_,p)},s.col=function(_,p){if(u(p)){var b=s.arange(_.length).map(function(){return new Array(p.length)});return p.forEach(function(P,C){s.arange(_.length).forEach(function(W){b[W][C]=_[W][P]})}),b}for(var k=new Array(_.length),R=0;R<_.length;R++)k[R]=[_[R][p]];return k},s.cola=function(_,p){return s.col(_,p).map(function(b){return b[0]})},s.diag=function(_){for(var p=s.rows(_),b=new Array(p),k=0;k<p;k++)b[k]=[_[k][k]];return b},s.antidiag=function(_){for(var p=s.rows(_)-1,b=new Array(p),k=0;p>=0;p--,k++)b[k]=[_[k][p]];return b},s.transpose=function(_){var p=[],b,k,R,P,C;for(u(_[0])||(_=[_]),k=_.length,R=_[0].length,C=0;C<R;C++){for(b=new Array(k),P=0;P<k;P++)b[P]=_[P][C];p.push(b)}return p.length===1?p[0]:p},s.map=function(_,p,b){var k,R,P,C,W;for(u(_[0])||(_=[_]),R=_.length,P=_[0].length,C=b?_:new Array(R),k=0;k<R;k++)for(C[k]||(C[k]=new Array(P)),W=0;W<P;W++)C[k][W]=p(_[k][W],k,W);return C.length===1?C[0]:C},s.cumreduce=function(_,p,b){var k,R,P,C,W;for(u(_[0])||(_=[_]),R=_.length,P=_[0].length,C=b?_:new Array(R),k=0;k<R;k++)for(C[k]||(C[k]=new Array(P)),P>0&&(C[k][0]=_[k][0]),W=1;W<P;W++)C[k][W]=p(C[k][W-1],_[k][W]);return C.length===1?C[0]:C},s.alter=function(_,p){return s.map(_,p,!0)},s.create=function(_,p,b){var k=new Array(_),R,P;for(e(p)&&(b=p,p=_),R=0;R<_;R++)for(k[R]=new Array(p),P=0;P<p;P++)k[R][P]=b(R,P);return k};function c(){return 0}s.zeros=function(_,p){return t(p)||(p=_),s.create(_,p,c)};function h(){return 1}s.ones=function(_,p){return t(p)||(p=_),s.create(_,p,h)},s.rand=function(_,p){return t(p)||(p=_),s.create(_,p,s._random_fn)};function v(y,_){return y===_?1:0}s.identity=function(_,p){return t(p)||(p=_),s.create(_,p,v)},s.symmetric=function(_){var p=_.length,b,k;if(_.length!==_[0].length)return!1;for(b=0;b<p;b++)for(k=0;k<p;k++)if(_[k][b]!==_[b][k])return!1;return!0},s.clear=function(_){return s.alter(_,c)},s.seq=function(_,p,b,k){e(k)||(k=!1);var R=[],P=m(_,p),C=(p*P-_*P)/((b-1)*P),W=_,A;for(A=0;W<=p&&A<b;A++,W=(_*P+C*P*A)/P)R.push(k?k(W,A):W);return R},s.arange=function(_,p,b){var k=[],R;if(b=b||1,p===o&&(p=_,_=0),_===p||b===0)return[];if(_<p&&b<0)return[];if(_>p&&b>0)return[];if(b>0)for(R=_;R<p;R+=b)k.push(R);else for(R=_;R>p;R+=b)k.push(R);return k},s.slice=function(){function y(p,b,k,R){var P,C=[],W=p.length;if(b===o&&k===o&&R===o)return s.copy(p);if(b=b||0,k=k||p.length,b=b>=0?b:W+b,k=k>=0?k:W+k,R=R||1,b===k||R===0)return[];if(b<k&&R<0)return[];if(b>k&&R>0)return[];if(R>0)for(P=b;P<k;P+=R)C.push(p[P]);else for(P=b;P>k;P+=R)C.push(p[P]);return C}function _(p,b){var k,R;if(b=b||{},t(b.row)){if(t(b.col))return p[b.row][b.col];var P=s.rowa(p,b.row);return k=b.col||{},y(P,k.start,k.end,k.step)}if(t(b.col)){var C=s.cola(p,b.col);return R=b.row||{},y(C,R.start,R.end,R.step)}R=b.row||{},k=b.col||{};var W=y(p,R.start,R.end,R.step);return W.map(function(A){return y(A,k.start,k.end,k.step)})}return _}(),s.sliceAssign=function(_,p,b){var k,R;if(t(p.row)){if(t(p.col))return _[p.row][p.col]=b;p.col=p.col||{},p.col.start=p.col.start||0,p.col.end=p.col.end||_[0].length,p.col.step=p.col.step||1,k=s.arange(p.col.start,n.min(_.length,p.col.end),p.col.step);var P=p.row;return k.forEach(function(W,A){_[P][W]=b[A]}),_}if(t(p.col)){p.row=p.row||{},p.row.start=p.row.start||0,p.row.end=p.row.end||_.length,p.row.step=p.row.step||1,R=s.arange(p.row.start,n.min(_[0].length,p.row.end),p.row.step);var C=p.col;return R.forEach(function(W,A){_[W][C]=b[A]}),_}return b[0].length===o&&(b=[b]),p.row.start=p.row.start||0,p.row.end=p.row.end||_.length,p.row.step=p.row.step||1,p.col.start=p.col.start||0,p.col.end=p.col.end||_[0].length,p.col.step=p.col.step||1,R=s.arange(p.row.start,n.min(_.length,p.row.end),p.row.step),k=s.arange(p.col.start,n.min(_[0].length,p.col.end),p.col.step),R.forEach(function(W,A){k.forEach(function(J,H){_[W][J]=b[A][H]})}),_},s.diagonal=function(_){var p=s.zeros(_.length,_.length);return _.forEach(function(b,k){p[k][k]=b}),p},s.copy=function(_){return _.map(function(p){return t(p)?p:p.map(function(b){return b})})};var w=s.prototype;return w.length=0,w.push=Array.prototype.push,w.sort=Array.prototype.sort,w.splice=Array.prototype.splice,w.slice=Array.prototype.slice,w.toArray=function(){return this.length>1?d.call(this):d.call(this)[0]},w.map=function(_,p){return s(s.map(this,_,p))},w.cumreduce=function(_,p){return s(s.cumreduce(this,_,p))},w.alter=function(_){return s.alter(this,_),this},function(y){for(var _=0;_<y.length;_++)(function(p){w[p]=function(b){var k=this,R;return b?(setTimeout(function(){b.call(k,w[p].call(k))}),this):(R=s[p](this),u(R)?s(R):R)}})(y[_])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(y){for(var _=0;_<y.length;_++)(function(p){w[p]=function(b,k){var R=this;return k?(setTimeout(function(){k.call(R,w[p].call(R,b))}),this):s(s[p](this,b))}})(y[_])}("row col".split(" ")),function(y){for(var _=0;_<y.length;_++)(function(p){w[p]=function(){return s(s[p].apply(null,arguments))}})(y[_])}("create zeros ones rand identity".split(" ")),s}(Math);return function(n,o){var a=n.utils.isFunction;function d(u,e){return u-e}function g(u,e,t){return o.max(e,o.min(u,t))}n.sum=function(e){for(var t=0,f=e.length;--f>=0;)t+=e[f];return t},n.sumsqrd=function(e){for(var t=0,f=e.length;--f>=0;)t+=e[f]*e[f];return t},n.sumsqerr=function(e){for(var t=n.mean(e),f=0,s=e.length,c;--s>=0;)c=e[s]-t,f+=c*c;return f},n.sumrow=function(e){for(var t=0,f=e.length;--f>=0;)t+=e[f];return t},n.product=function(e){for(var t=1,f=e.length;--f>=0;)t*=e[f];return t},n.min=function(e){for(var t=e[0],f=0;++f<e.length;)e[f]<t&&(t=e[f]);return t},n.max=function(e){for(var t=e[0],f=0;++f<e.length;)e[f]>t&&(t=e[f]);return t},n.unique=function(e){for(var t={},f=[],s=0;s<e.length;s++)t[e[s]]||(t[e[s]]=!0,f.push(e[s]));return f},n.mean=function(e){return n.sum(e)/e.length},n.meansqerr=function(e){return n.sumsqerr(e)/e.length},n.geomean=function(e){var t=e.map(o.log),f=n.mean(t);return o.exp(f)},n.median=function(e){var t=e.length,f=e.slice().sort(d);return t&1?f[t/2|0]:(f[t/2-1]+f[t/2])/2},n.cumsum=function(e){return n.cumreduce(e,function(t,f){return t+f})},n.cumprod=function(e){return n.cumreduce(e,function(t,f){return t*f})},n.diff=function(e){var t=[],f=e.length,s;for(s=1;s<f;s++)t.push(e[s]-e[s-1]);return t},n.rank=function(u){var e,t=[],f={};for(e=0;e<u.length;e++){var s=u[e];f[s]?f[s]++:(f[s]=1,t.push(s))}var c=t.sort(d),h={},v=1;for(e=0;e<c.length;e++){var s=c[e],w=f[s],y=v,_=v+w-1,p=(y+_)/2;h[s]=p,v+=w}return u.map(function(b){return h[b]})},n.mode=function(e){var t=e.length,f=e.slice().sort(d),s=1,c=0,h=0,v=[],w;for(w=0;w<t;w++)f[w]===f[w+1]?s++:(s>c?(v=[f[w]],c=s,h=0):s===c&&(v.push(f[w]),h++),s=1);return h===0?v[0]:v},n.range=function(e){return n.max(e)-n.min(e)},n.variance=function(e,t){return n.sumsqerr(e)/(e.length-(t?1:0))},n.pooledvariance=function(e){var t=e.reduce(function(s,c){return s+n.sumsqerr(c)},0),f=e.reduce(function(s,c){return s+c.length},0);return t/(f-e.length)},n.deviation=function(u){for(var e=n.mean(u),t=u.length,f=new Array(t),s=0;s<t;s++)f[s]=u[s]-e;return f},n.stdev=function(e,t){return o.sqrt(n.variance(e,t))},n.pooledstdev=function(e){return o.sqrt(n.pooledvariance(e))},n.meandev=function(e){for(var t=n.mean(e),f=[],s=e.length-1;s>=0;s--)f.push(o.abs(e[s]-t));return n.mean(f)},n.meddev=function(e){for(var t=n.median(e),f=[],s=e.length-1;s>=0;s--)f.push(o.abs(e[s]-t));return n.median(f)},n.coeffvar=function(e){return n.stdev(e)/n.mean(e)},n.quartiles=function(e){var t=e.length,f=e.slice().sort(d);return[f[o.round(t/4)-1],f[o.round(t/2)-1],f[o.round(t*3/4)-1]]},n.quantiles=function(e,t,f,s){var c=e.slice().sort(d),h=[t.length],v=e.length,w,y,_,p,b,k;for(typeof f>"u"&&(f=3/8),typeof s>"u"&&(s=3/8),w=0;w<t.length;w++)y=t[w],_=f+y*(1-f-s),p=v*y+_,b=o.floor(g(p,1,v-1)),k=g(p-b,0,1),h[w]=(1-k)*c[b-1]+k*c[b];return h},n.percentile=function(e,t,f){var s=e.slice().sort(d),c=t*(s.length+(f?1:-1))+(f?0:1),h=parseInt(c),v=c-h;return h+1<s.length?s[h-1]+v*(s[h]-s[h-1]):s[h-1]},n.percentileOfScore=function(e,t,f){var s=0,c=e.length,h=!1,v,w;for(f==="strict"&&(h=!0),w=0;w<c;w++)v=e[w],(h&&v<t||!h&&v<=t)&&s++;return s/c},n.histogram=function(e,t){t=t||4;var f=n.min(e),s=(n.max(e)-f)/t,c=e.length,h=[],v;for(v=0;v<t;v++)h[v]=0;for(v=0;v<c;v++)h[o.min(o.floor((e[v]-f)/s),t-1)]+=1;return h},n.covariance=function(e,t){var f=n.mean(e),s=n.mean(t),c=e.length,h=new Array(c),v;for(v=0;v<c;v++)h[v]=(e[v]-f)*(t[v]-s);return n.sum(h)/(c-1)},n.corrcoeff=function(e,t){return n.covariance(e,t)/n.stdev(e,1)/n.stdev(t,1)},n.spearmancoeff=function(u,e){return u=n.rank(u),e=n.rank(e),n.corrcoeff(u,e)},n.stanMoment=function(e,t){for(var f=n.mean(e),s=n.stdev(e),c=e.length,h=0,v=0;v<c;v++)h+=o.pow((e[v]-f)/s,t);return h/e.length},n.skewness=function(e){return n.stanMoment(e,3)},n.kurtosis=function(e){return n.stanMoment(e,4)-3};var m=n.prototype;(function(u){for(var e=0;e<u.length;e++)(function(t){m[t]=function(f,s){var c=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[t].call(v,f))}),this;if(this.length>1){for(v=f===!0?this:this.transpose();h<v.length;h++)c[h]=n[t](v[h]);return c}return n[t](this[0],f)}})(u[e])})("cumsum cumprod".split(" ")),function(u){for(var e=0;e<u.length;e++)(function(t){m[t]=function(f,s){var c=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[t].call(v,f))}),this;if(this.length>1){for(t!=="sumrow"&&(v=f===!0?this:this.transpose());h<v.length;h++)c[h]=n[t](v[h]);return f===!0?n[t](n.utils.toVector(c)):c}return n[t](this[0],f)}})(u[e])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(u){for(var e=0;e<u.length;e++)(function(t){m[t]=function(){var f=[],s=0,c=this,h=Array.prototype.slice.call(arguments),v;if(a(h[h.length-1])){v=h[h.length-1];var w=h.slice(0,h.length-1);return setTimeout(function(){v.call(c,m[t].apply(c,w))}),this}else{v=void 0;var y=function(p){return n[t].apply(c,[p].concat(h))}}if(this.length>1){for(c=c.transpose();s<c.length;s++)f[s]=y(c[s]);return f}return y(this[0])}})(u[e])}("quantiles percentileOfScore".split(" "))}(l,Math),function(n,o){n.gammaln=function(d){var g=0,m=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,e,t,f;for(f=(t=e=d)+5.5,f-=(e+.5)*o.log(f);g<6;g++)u+=m[g]/++t;return o.log(2.5066282746310007*u/e)-f},n.loggam=function(d){var g,m,u,e,t,f,s,c=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(g=d,s=0,d==1||d==2)return 0;for(d<=7&&(s=o.floor(7-d),g=d+s),m=1/(g*g),u=2*o.PI,t=c[9],f=8;f>=0;f--)t*=m,t+=c[f];if(e=t/g+.5*o.log(u)+(g-.5)*o.log(g)-g,d<=7)for(f=1;f<=s;f++)e-=o.log(g-1),g-=1;return e},n.gammafn=function(d){var g=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],m=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,e=0,t=0,f=0,s=d,c,h,v,w;if(d>171.6243769536076)return 1/0;if(s<=0)if(w=s%1+36e-17,w)u=(s&1?-1:1)*o.PI/o.sin(o.PI*w),s=1-s;else return 1/0;for(v=s,s<1?h=s++:h=(s-=e=(s|0)-1)-1,c=0;c<8;++c)f=(f+g[c])*h,t=t*h+m[c];if(w=f/t+1,v<s)w/=v;else if(v>s)for(c=0;c<e;++c)w*=s,s++;return u&&(w=u/w),w},n.gammap=function(d,g){return n.lowRegGamma(d,g)*n.gammafn(d)},n.lowRegGamma=function(d,g){var m=n.gammaln(d),u=d,e=1/d,t=e,f=g+1-d,s=1/1e-30,c=1/f,h=c,v=1,w=-~(o.log(d>=1?d:1/d)*8.5+d*.4+17),y;if(g<0||d<=0)return NaN;if(g<d+1){for(;v<=w;v++)e+=t*=g/++u;return e*o.exp(-g+d*o.log(g)-m)}for(;v<=w;v++)y=-v*(v-d),f+=2,c=y*c+f,s=f+y/s,c=1/c,h*=c*s;return 1-h*o.exp(-g+d*o.log(g)-m)},n.factorialln=function(d){return d<0?NaN:n.gammaln(d+1)},n.factorial=function(d){return d<0?NaN:n.gammafn(d+1)},n.combination=function(d,g){return d>170||g>170?o.exp(n.combinationln(d,g)):n.factorial(d)/n.factorial(g)/n.factorial(d-g)},n.combinationln=function(d,g){return n.factorialln(d)-n.factorialln(g)-n.factorialln(d-g)},n.permutation=function(d,g){return n.factorial(d)/n.factorial(d-g)},n.betafn=function(d,g){if(!(d<=0||g<=0))return d+g>170?o.exp(n.betaln(d,g)):n.gammafn(d)*n.gammafn(g)/n.gammafn(d+g)},n.betaln=function(d,g){return n.gammaln(d)+n.gammaln(g)-n.gammaln(d+g)},n.betacf=function(d,g,m){var u=1e-30,e=1,t=g+m,f=g+1,s=g-1,c=1,h=1-t*d/f,v,w,y,_;for(o.abs(h)<u&&(h=u),h=1/h,_=h;e<=100&&(v=2*e,w=e*(m-e)*d/((s+v)*(g+v)),h=1+w*h,o.abs(h)<u&&(h=u),c=1+w/c,o.abs(c)<u&&(c=u),h=1/h,_*=h*c,w=-(g+e)*(t+e)*d/((g+v)*(f+v)),h=1+w*h,o.abs(h)<u&&(h=u),c=1+w/c,o.abs(c)<u&&(c=u),h=1/h,y=h*c,_*=y,!(o.abs(y-1)<3e-7));e++);return _},n.gammapinv=function(d,g){var m=0,u=g-1,e=1e-8,t=n.gammaln(g),f,s,c,h,v,w,y;if(d>=1)return o.max(100,g+100*o.sqrt(g));if(d<=0)return 0;for(g>1?(w=o.log(u),y=o.exp(u*(w-1)-t),v=d<.5?d:1-d,c=o.sqrt(-2*o.log(v)),f=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,d<.5&&(f=-f),f=o.max(.001,g*o.pow(1-1/(9*g)-f/(3*o.sqrt(g)),3))):(c=1-g*(.253+g*.12),d<c?f=o.pow(d/c,1/g):f=1-o.log(1-(d-c)/(1-c)));m<12;m++){if(f<=0)return 0;if(s=n.lowRegGamma(g,f)-d,g>1?c=y*o.exp(-(f-u)+u*(o.log(f)-w)):c=o.exp(-f+u*o.log(f)-t),h=s/c,f-=c=h/(1-.5*o.min(1,h*((g-1)/f-1))),f<=0&&(f=.5*(f+c)),o.abs(c)<e*f)break}return f},n.erf=function(d){var g=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],m=g.length-1,u=!1,e=0,t=0,f,s,c,h;for(d<0&&(d=-d,u=!0),f=2/(2+d),s=4*f-2;m>0;m--)c=e,e=s*e-t+g[m],t=c;return h=f*o.exp(-d*d+.5*(g[0]+s*e)-t),u?h-1:1-h},n.erfc=function(d){return 1-n.erf(d)},n.erfcinv=function(d){var g=0,m,u,e,t;if(d>=2)return-100;if(d<=0)return 100;for(t=d<1?d:2-d,e=o.sqrt(-2*o.log(t/2)),m=-.70711*((2.30753+e*.27061)/(1+e*(.99229+e*.04481))-e);g<2;g++)u=n.erfc(m)-t,m+=u/(1.1283791670955126*o.exp(-m*m)-m*u);return d<1?m:-m},n.ibetainv=function(d,g,m){var u=1e-8,e=g-1,t=m-1,f=0,s,c,h,v,w,y,_,p,b,k,R;if(d<=0)return 0;if(d>=1)return 1;for(g>=1&&m>=1?(h=d<.5?d:1-d,v=o.sqrt(-2*o.log(h)),_=(2.30753+v*.27061)/(1+v*(.99229+v*.04481))-v,d<.5&&(_=-_),p=(_*_-3)/6,b=2/(1/(2*g-1)+1/(2*m-1)),k=_*o.sqrt(p+b)/b-(1/(2*m-1)-1/(2*g-1))*(p+5/6-2/(3*b)),_=g/(g+m*o.exp(2*k))):(s=o.log(g/(g+m)),c=o.log(m/(g+m)),v=o.exp(g*s)/g,w=o.exp(m*c)/m,k=v+w,d<v/k?_=o.pow(g*k*d,1/g):_=1-o.pow(m*k*(1-d),1/m)),R=-n.gammaln(g)-n.gammaln(m)+n.gammaln(g+m);f<10;f++){if(_===0||_===1)return _;if(y=n.ibeta(_,g,m)-d,v=o.exp(e*o.log(_)+t*o.log(1-_)+R),w=y/v,_-=v=w/(1-.5*o.min(1,w*(e/_-t/(1-_)))),_<=0&&(_=.5*(_+v)),_>=1&&(_=.5*(_+v+1)),o.abs(v)<u*_&&f>0)break}return _},n.ibeta=function(d,g,m){var u=d===0||d===1?0:o.exp(n.gammaln(g+m)-n.gammaln(g)-n.gammaln(m)+g*o.log(d)+m*o.log(1-d));return d<0||d>1?!1:d<(g+1)/(g+m+2)?u*n.betacf(d,g,m)/g:1-u*n.betacf(1-d,m,g)/m},n.randn=function(d,g){var m,u,e,t,f;if(g||(g=d),d)return n.create(d,g,function(){return n.randn()});do m=n._random_fn(),u=1.7156*(n._random_fn()-.5),e=m-.449871,t=o.abs(u)+.386595,f=e*e+t*(.196*t-.25472*e);while(f>.27597&&(f>.27846||u*u>-4*o.log(m)*m*m));return u/m},n.randg=function(d,g,m){var u=d,e,t,f,s,c,h;if(m||(m=g),d||(d=1),g)return h=n.zeros(g,m),h.alter(function(){return n.randg(d)}),h;d<1&&(d+=1),e=d-1/3,t=1/o.sqrt(9*e);do{do c=n.randn(),s=1+t*c;while(s<=0);s=s*s*s,f=n._random_fn()}while(f>1-.331*o.pow(c,4)&&o.log(f)>.5*c*c+e*(1-s+o.log(s)));if(d==u)return e*s;do f=n._random_fn();while(f===0);return o.pow(f,1/u)*e*s},function(a){for(var d=0;d<a.length;d++)(function(g){n.fn[g]=function(){return n(n.map(this,function(m){return n[g](m)}))}})(a[d])}("gammaln gammafn factorial factorialln".split(" ")),function(a){for(var d=0;d<a.length;d++)(function(g){n.fn[g]=function(){return n(n[g].apply(null,arguments))}})(a[d])}("randn".split(" "))}(l,Math),function(n,o){(function(u){for(var e=0;e<u.length;e++)(function(t){n[t]=function f(s,c,h){return this instanceof f?(this._a=s,this._b=c,this._c=h,this):new f(s,c,h)},n.fn[t]=function(f,s,c){var h=n[t](f,s,c);return h.data=this,h},n[t].prototype.sample=function(f){var s=this._a,c=this._b,h=this._c;return f?n.alter(f,function(){return n[t].sample(s,c,h)}):n[t].sample(s,c,h)},function(f){for(var s=0;s<f.length;s++)(function(c){n[t].prototype[c]=function(h){var v=this._a,w=this._b,y=this._c;return!h&&h!==0&&(h=this.data),typeof h!="number"?n.fn.map.call(h,function(_){return n[t][c](_,v,w,y)}):n[t][c](h,v,w,y)}})(f[s])}("pdf cdf inv".split(" ")),function(f){for(var s=0;s<f.length;s++)(function(c){n[t].prototype[c]=function(){return n[t][c](this._a,this._b,this._c)}})(f[s])}("mean median mode variance".split(" "))})(u[e])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),n.extend(n.beta,{pdf:function(e,t,f){return e>1||e<0?0:t==1&&f==1?1:t<512&&f<512?o.pow(e,t-1)*o.pow(1-e,f-1)/n.betafn(t,f):o.exp((t-1)*o.log(e)+(f-1)*o.log(1-e)-n.betaln(t,f))},cdf:function(e,t,f){return e>1||e<0?(e>1)*1:n.ibeta(e,t,f)},inv:function(e,t,f){return n.ibetainv(e,t,f)},mean:function(e,t){return e/(e+t)},median:function(e,t){return n.ibetainv(.5,e,t)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(e,t){var f=n.randg(e);return f/(f+n.randg(t))},variance:function(e,t){return e*t/(o.pow(e+t,2)*(e+t+1))}}),n.extend(n.centralF,{pdf:function(e,t,f){var s,c,h;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/n.betafn(t/2,f/2)*o.pow(t/f,t/2)*o.pow(e,t/2-1)*o.pow(1+t/f*e,-(t+f)/2):(s=t*e/(f+e*t),c=f/(f+e*t),h=t*c/2,h*n.binomial.pdf((t-2)/2,(t+f-2)/2,s))},cdf:function(e,t,f){return e<0?0:n.ibeta(t*e/(t*e+f),t/2,f/2)},inv:function(e,t,f){return f/(t*(1/n.ibetainv(e,t/2,f/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(e,t){var f=n.randg(e/2)*2,s=n.randg(t/2)*2;return f/e/(s/t)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),n.extend(n.cauchy,{pdf:function(e,t,f){return f<0?0:f/(o.pow(e-t,2)+o.pow(f,2))/o.PI},cdf:function(e,t,f){return o.atan((e-t)/f)/o.PI+.5},inv:function(u,e,t){return e+t*o.tan(o.PI*(u-.5))},median:function(e){return e},mode:function(e){return e},sample:function(e,t){return n.randn()*o.sqrt(1/(2*n.randg(.5)))*t+e}}),n.extend(n.chisquare,{pdf:function(e,t){return e<0?0:e===0&&t===2?.5:o.exp((t/2-1)*o.log(e)-e/2-t/2*o.log(2)-n.gammaln(t/2))},cdf:function(e,t){return e<0?0:n.lowRegGamma(t/2,e/2)},inv:function(u,e){return 2*n.gammapinv(u,.5*e)},mean:function(u){return u},median:function(e){return e*o.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(e){return n.randg(e/2)*2},variance:function(e){return 2*e}}),n.extend(n.exponential,{pdf:function(e,t){return e<0?0:t*o.exp(-t*e)},cdf:function(e,t){return e<0?0:1-o.exp(-t*e)},inv:function(u,e){return-o.log(1-u)/e},mean:function(u){return 1/u},median:function(u){return 1/u*o.log(2)},mode:function(){return 0},sample:function(e){return-1/e*o.log(n._random_fn())},variance:function(u){return o.pow(u,-2)}}),n.extend(n.gamma,{pdf:function(e,t,f){return e<0?0:e===0&&t===1?1/f:o.exp((t-1)*o.log(e)-e/f-n.gammaln(t)-t*o.log(f))},cdf:function(e,t,f){return e<0?0:n.lowRegGamma(t,e/f)},inv:function(u,e,t){return n.gammapinv(u,e)*t},mean:function(u,e){return u*e},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(e,t){return n.randg(e)*t},variance:function(e,t){return e*t*t}}),n.extend(n.invgamma,{pdf:function(e,t,f){return e<=0?0:o.exp(-(t+1)*o.log(e)-f/e-n.gammaln(t)+t*o.log(f))},cdf:function(e,t,f){return e<=0?0:1-n.lowRegGamma(t,f/e)},inv:function(u,e,t){return t/n.gammapinv(1-u,e)},mean:function(u,e){return u>1?e/(u-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(e,t){return t/n.randg(e)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),n.extend(n.kumaraswamy,{pdf:function(e,t,f){return e===0&&t===1?f:e===1&&f===1?t:o.exp(o.log(t)+o.log(f)+(t-1)*o.log(e)+(f-1)*o.log(1-o.pow(e,t)))},cdf:function(e,t,f){return e<0?0:e>1?1:1-o.pow(1-o.pow(e,t),f)},inv:function(e,t,f){return o.pow(1-o.pow(1-e,1/f),1/t)},mean:function(u,e){return e*n.gammafn(1+1/u)*n.gammafn(e)/n.gammafn(1+1/u+e)},median:function(e,t){return o.pow(1-o.pow(2,-1/t),1/e)},mode:function(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return o.pow((e-1)/(e*t-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),n.extend(n.lognormal,{pdf:function(e,t,f){return e<=0?0:o.exp(-o.log(e)-.5*o.log(2*o.PI)-o.log(f)-o.pow(o.log(e)-t,2)/(2*f*f))},cdf:function(e,t,f){return e<0?0:.5+.5*n.erf((o.log(e)-t)/o.sqrt(2*f*f))},inv:function(u,e,t){return o.exp(-1.4142135623730951*t*n.erfcinv(2*u)+e)},mean:function(e,t){return o.exp(e+t*t/2)},median:function(e){return o.exp(e)},mode:function(e,t){return o.exp(e-t*t)},sample:function(e,t){return o.exp(n.randn()*t+e)},variance:function(e,t){return(o.exp(t*t)-1)*o.exp(2*e+t*t)}}),n.extend(n.noncentralt,{pdf:function(e,t,f){var s=1e-14;return o.abs(f)<s?n.studentt.pdf(e,t):o.abs(e)<s?o.exp(n.gammaln((t+1)/2)-f*f/2-.5*o.log(o.PI*t)-n.gammaln(t/2)):t/e*(n.noncentralt.cdf(e*o.sqrt(1+2/t),t+2,f)-n.noncentralt.cdf(e,t,f))},cdf:function(e,t,f){var s=1e-14,c=200;if(o.abs(f)<s)return n.studentt.cdf(e,t);var h=!1;e<0&&(h=!0,f=-f);for(var v=n.normal.cdf(-f,0,1),w=s+1,y=w,_=e*e/(e*e+t),p=0,b=o.exp(-f*f/2),k=o.exp(-f*f/2-.5*o.log(2)-n.gammaln(3/2))*f;p<c||y>s||w>s;)y=w,p>0&&(b*=f*f/(2*p),k*=f*f/(2*(p+1/2))),w=b*n.beta.cdf(_,p+.5,t/2)+k*n.beta.cdf(_,p+1,t/2),v+=.5*w,p++;return h?1-v:v}}),n.extend(n.normal,{pdf:function(e,t,f){return o.exp(-.5*o.log(2*o.PI)-o.log(f)-o.pow(e-t,2)/(2*f*f))},cdf:function(e,t,f){return .5*(1+n.erf((e-t)/o.sqrt(2*f*f)))},inv:function(u,e,t){return-1.4142135623730951*t*n.erfcinv(2*u)+e},mean:function(u){return u},median:function(e){return e},mode:function(u){return u},sample:function(e,t){return n.randn()*t+e},variance:function(u,e){return e*e}}),n.extend(n.pareto,{pdf:function(e,t,f){return e<t?0:f*o.pow(t,f)/o.pow(e,f+1)},cdf:function(e,t,f){return e<t?0:1-o.pow(t/e,f)},inv:function(e,t,f){return t/o.pow(1-e,1/f)},mean:function(e,t){if(!(t<=1))return t*o.pow(e,t)/(t-1)},median:function(e,t){return e*(t*o.SQRT2)},mode:function(e){return e},variance:function(u,e){if(!(e<=2))return u*u*e/(o.pow(e-1,2)*(e-2))}}),n.extend(n.studentt,{pdf:function(e,t){return t=t>1e100?1e100:t,1/(o.sqrt(t)*n.betafn(.5,t/2))*o.pow(1+e*e/t,-((t+1)/2))},cdf:function(e,t){var f=t/2;return n.ibeta((e+o.sqrt(e*e+t))/(2*o.sqrt(e*e+t)),f,f)},inv:function(u,e){var t=n.ibetainv(2*o.min(u,1-u),.5*e,.5);return t=o.sqrt(e*(1-t)/t),u>.5?t:-t},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(e){return n.randn()*o.sqrt(e/(2*n.randg(e/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),n.extend(n.weibull,{pdf:function(e,t,f){return e<0||t<0||f<0?0:f/t*o.pow(e/t,f-1)*o.exp(-o.pow(e/t,f))},cdf:function(e,t,f){return e<0?0:1-o.exp(-o.pow(e/t,f))},inv:function(u,e,t){return e*o.pow(-o.log(1-u),1/t)},mean:function(u,e){return u*n.gammafn(1+1/e)},median:function(e,t){return e*o.pow(o.log(2),1/t)},mode:function(e,t){return t<=1?0:e*o.pow((t-1)/t,1/t)},sample:function(e,t){return e*o.pow(-o.log(n._random_fn()),1/t)},variance:function(e,t){return e*e*n.gammafn(1+2/t)-o.pow(n.weibull.mean(e,t),2)}}),n.extend(n.uniform,{pdf:function(e,t,f){return e<t||e>f?0:1/(f-t)},cdf:function(e,t,f){return e<t?0:e<f?(e-t)/(f-t):1},inv:function(u,e,t){return e+u*(t-e)},mean:function(e,t){return .5*(e+t)},median:function(e,t){return n.mean(e,t)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(e,t){return e/2+t/2+(t/2-e/2)*(2*n._random_fn()-1)},variance:function(e,t){return o.pow(t-e,2)/12}});function a(u,e,t,f){for(var s=0,c=1,h=1,v=1,w=0,y=0,_;o.abs((h-y)/h)>f;)y=h,_=-(e+w)*(e+t+w)*u/(e+2*w)/(e+2*w+1),s=h+_*s,c=v+_*c,w=w+1,_=w*(t-w)*u/(e+2*w-1)/(e+2*w),h=s+_*h,v=c+_*v,s=s/v,c=c/v,h=h/v,v=1;return h/e}n.extend(n.binomial,{pdf:function(e,t,f){return f===0||f===1?t*f===e?1:0:n.combination(t,e)*o.pow(f,e)*o.pow(1-f,t-e)},cdf:function(e,t,f){var s,c=1e-10;if(e<0)return 0;if(e>=t)return 1;if(f<0||f>1||t<=0)return NaN;e=o.floor(e);var h=f,v=e+1,w=t-e,y=v+w,_=o.exp(n.gammaln(y)-n.gammaln(w)-n.gammaln(v)+v*o.log(h)+w*o.log(1-h));return h<(v+1)/(y+2)?s=_*a(h,v,w,c):s=1-_*a(1-h,w,v,c),o.round((1-s)*(1/c))/(1/c)}}),n.extend(n.negbin,{pdf:function(e,t,f){return e!==e>>>0?!1:e<0?0:n.combination(e+t-1,t-1)*o.pow(1-f,e)*o.pow(f,t)},cdf:function(e,t,f){var s=0,c=0;if(e<0)return 0;for(;c<=e;c++)s+=n.negbin.pdf(c,t,f);return s}}),n.extend(n.hypgeom,{pdf:function(e,t,f,s){if(e!==e|0)return!1;if(e<0||e<f-(t-s))return 0;if(e>s||e>f)return 0;if(f*2>t)return s*2>t?n.hypgeom.pdf(t-f-s+e,t,t-f,t-s):n.hypgeom.pdf(s-e,t,t-f,s);if(s*2>t)return n.hypgeom.pdf(f-e,t,f,t-s);if(f<s)return n.hypgeom.pdf(e,t,s,f);for(var c=1,h=0,v=0;v<e;v++){for(;c>1&&h<s;)c*=1-f/(t-h),h++;c*=(s-v)*(f-v)/((v+1)*(t-f-s+v+1))}for(;h<s;h++)c*=1-f/(t-h);return o.min(1,o.max(0,c))},cdf:function(e,t,f,s){if(e<0||e<f-(t-s))return 0;if(e>=s||e>=f)return 1;if(f*2>t)return s*2>t?n.hypgeom.cdf(t-f-s+e,t,t-f,t-s):1-n.hypgeom.cdf(s-e-1,t,t-f,s);if(s*2>t)return 1-n.hypgeom.cdf(f-e-1,t,f,t-s);if(f<s)return n.hypgeom.cdf(e,t,s,f);for(var c=1,h=1,v=0,w=0;w<e;w++){for(;c>1&&v<s;){var y=1-f/(t-v);h*=y,c*=y,v++}h*=(s-w)*(f-w)/((w+1)*(t-f-s+w+1)),c+=h}for(;v<s;v++)c*=1-f/(t-v);return o.min(1,o.max(0,c))}}),n.extend(n.poisson,{pdf:function(e,t){return t<0||e%1!==0||e<0?0:o.pow(t,e)*o.exp(-t)/n.factorial(e)},cdf:function(e,t){var f=[],s=0;if(e<0)return 0;for(;s<=e;s++)f.push(n.poisson.pdf(s,t));return n.sum(f)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(e){var t=1,f=0,s=o.exp(-e);do f++,t*=n._random_fn();while(t>s);return f-1},sampleLarge:function(e){var t=e,f,s,c,h,v,w,y,_,p,b;for(h=o.sqrt(t),v=o.log(t),y=.931+2.53*h,w=-.059+.02483*y,_=1.1239+1.1328/(y-3.4),p=.9277-3.6224/(y-2);;){if(s=o.random()-.5,c=o.random(),b=.5-o.abs(s),f=o.floor((2*w/b+y)*s+t+.43),b>=.07&&c<=p)return f;if(!(f<0||b<.013&&c>b)&&o.log(c)+o.log(_)-o.log(w/(b*b)+y)<=-t+f*v-n.loggam(f+1))return f}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),n.extend(n.triangular,{pdf:function(e,t,f,s){return f<=t||s<t||s>f?NaN:e<t||e>f?0:e<s?2*(e-t)/((f-t)*(s-t)):e===s?2/(f-t):2*(f-e)/((f-t)*(f-s))},cdf:function(e,t,f,s){return f<=t||s<t||s>f?NaN:e<=t?0:e>=f?1:e<=s?o.pow(e-t,2)/((f-t)*(s-t)):1-o.pow(f-e,2)/((f-t)*(f-s))},inv:function(e,t,f,s){return f<=t||s<t||s>f?NaN:e<=(s-t)/(f-t)?t+(f-t)*o.sqrt(e*((s-t)/(f-t))):t+(f-t)*(1-o.sqrt((1-e)*(1-(s-t)/(f-t))))},mean:function(e,t,f){return(e+t+f)/3},median:function(e,t,f){if(f<=(e+t)/2)return t-o.sqrt((t-e)*(t-f))/o.sqrt(2);if(f>(e+t)/2)return e+o.sqrt((t-e)*(f-e))/o.sqrt(2)},mode:function(e,t,f){return f},sample:function(e,t,f){var s=n._random_fn();return s<(f-e)/(t-e)?e+o.sqrt(s*(t-e)*(f-e)):t-o.sqrt((1-s)*(t-e)*(t-f))},variance:function(e,t,f){return(e*e+t*t+f*f-e*t-e*f-t*f)/18}}),n.extend(n.arcsine,{pdf:function(e,t,f){return f<=t?NaN:e<=t||e>=f?0:2/o.PI*o.pow(o.pow(f-t,2)-o.pow(2*e-t-f,2),-.5)},cdf:function(e,t,f){return e<t?0:e<f?2/o.PI*o.asin(o.sqrt((e-t)/(f-t))):1},inv:function(u,e,t){return e+(.5-.5*o.cos(o.PI*u))*(t-e)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(e,t){return(e+t)/2+(t-e)/2*o.sin(2*o.PI*n.uniform.sample(0,1))},variance:function(e,t){return t<=e?NaN:o.pow(t-e,2)/8}});function d(u){return u/o.abs(u)}n.extend(n.laplace,{pdf:function(e,t,f){return f<=0?0:o.exp(-o.abs(e-t)/f)/(2*f)},cdf:function(e,t,f){return f<=0?0:e<t?.5*o.exp((e-t)/f):1-.5*o.exp(-(e-t)/f)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,e){return 2*e*e},sample:function(e,t){var f=n._random_fn()-.5;return e-t*d(f)*o.log(1-2*o.abs(f))}});function g(u,e,t){var f=12,s=6,c=-30,h=-50,v=60,w=8,y=3,_=2,p=3,b=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],k=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],R=u*.5;if(R>=w)return 1;var P=2*n.normal.cdf(R,0,1,1,0)-1;P>=o.exp(h/t)?P=o.pow(P,t):P=0;var C;u>y?C=_:C=p;for(var W=R,A=(w-R)/C,J=W+A,H=0,F=t-1,K=1;K<=C;K++){for(var ce=0,X=.5*(J+W),le=.5*(J-W),M=1;M<=f;M++){var ge,te;s<M?(ge=f-M+1,te=b[ge-1]):(ge=M,te=-b[ge-1]);var he=le*te,ie=X+he,pe=ie*ie;if(pe>v)break;var Ce=2*n.normal.cdf(ie,0,1,1,0),Ye=2*n.normal.cdf(ie,u,1,1,0),Ie=Ce*.5-Ye*.5;Ie>=o.exp(c/F)&&(Ie=k[ge-1]*o.exp(-(.5*pe))*o.pow(Ie,F),ce+=Ie)}ce*=2*le*t/o.sqrt(2*o.PI),H+=ce,W=J,J+=A}return P+=H,P<=o.exp(c/e)?0:(P=o.pow(P,e),P>=1?1:P)}function m(u,e,t){var f=.322232421088,s=.099348462606,c=-1,h=.588581570495,v=-.342242088547,w=.531103462366,y=-.204231210125,_=.10353775285,p=-453642210148e-16,b=.0038560700634,k=.8832,R=.2368,P=1.214,C=1.208,W=1.4142,A=120,J=.5-.5*u,H=o.sqrt(o.log(1/(J*J))),F=H+((((H*p+y)*H+v)*H+c)*H+f)/((((H*b+_)*H+w)*H+h)*H+s);t<A&&(F+=(F*F*F+F)/t/4);var K=k-R*F;return t<A&&(K+=-P/t+C*F/t),F*(K*o.log(e-1)+W)}n.extend(n.tukey,{cdf:function(e,t,f){var s=1,c=t,h=16,v=8,w=-30,y=1e-14,_=100,p=800,b=5e3,k=25e3,R=1,P=.5,C=.25,W=.125,A=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],J=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(f<2||s<1||c<2)return NaN;if(!Number.isFinite(e))return 1;if(f>k)return g(e,s,c);var H=f*.5,F=H*o.log(f)-f*o.log(2)-n.gammaln(H),K=H-1,ce=f*.25,X;f<=_?X=R:f<=p?X=P:f<=b?X=C:X=W,F+=o.log(X);for(var le=0,M=1;M<=50;M++){for(var ge=0,te=(2*M-1)*X,he=1;he<=h;he++){var ie,pe;v<he?(ie=he-v-1,pe=F+K*o.log(te+A[ie]*X)-(A[ie]*X+te)*ce):(ie=he-1,pe=F+K*o.log(te-A[ie]*X)+(A[ie]*X-te)*ce);var Ce;if(pe>=w){v<he?Ce=e*o.sqrt((A[ie]*X+te)*.5):Ce=e*o.sqrt((-(A[ie]*X)+te)*.5);var Ye=g(Ce,s,c),Ie=Ye*J[ie]*o.exp(pe);ge+=Ie}}if(M*X>=1&&ge<=y)break;le+=ge}if(ge>y)throw new Error("tukey.cdf failed to converge");return le>1&&(le=1),le},inv:function(u,e,t){var f=1,s=e,c=1e-4,h=50;if(t<2||f<1||s<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var v=m(u,s,t),w=n.tukey.cdf(v,e,t)-u,y;w>0?y=o.max(0,v-1):y=v+1;for(var _=n.tukey.cdf(y,e,t)-u,p,b=1;b<h;b++){p=y-_*(y-v)/(_-w),w=_,v=y,p<0&&(p=0,_=-u),_=n.tukey.cdf(p,e,t)-u,y=p;var k=o.abs(y-v);if(k<c)return p}throw new Error("tukey.inv failed to converge")}})}(l,Math),function(n,o){var a=Array.prototype.push,d=n.utils.isArray;function g(m){return d(m)||m instanceof n}n.extend({add:function(u,e){return g(e)?(g(e[0])||(e=[e]),n.map(u,function(t,f,s){return t+e[f][s]})):n.map(u,function(t){return t+e})},subtract:function(u,e){return g(e)?(g(e[0])||(e=[e]),n.map(u,function(t,f,s){return t-e[f][s]||0})):n.map(u,function(t){return t-e})},divide:function(u,e){return g(e)?(g(e[0])||(e=[e]),n.multiply(u,n.inv(e))):n.map(u,function(t){return t/e})},multiply:function(u,e){var t,f,s,c,h,v,w,y;if(u.length===void 0&&e.length===void 0)return u*e;if(h=u.length,v=u[0].length,w=n.zeros(h,s=g(e)?e[0].length:v),y=0,g(e)){for(;y<s;y++)for(t=0;t<h;t++){for(c=0,f=0;f<v;f++)c+=u[t][f]*e[f][y];w[t][y]=c}return h===1&&y===1?w[0][0]:w}return n.map(u,function(_){return _*e})},outer:function(u,e){return n.multiply(u.map(function(t){return[t]}),[e])},dot:function(u,e){g(u[0])||(u=[u]),g(e[0])||(e=[e]);for(var t=u[0].length===1&&u.length!==1?n.transpose(u):u,f=e[0].length===1&&e.length!==1?n.transpose(e):e,s=[],c=0,h=t.length,v=t[0].length,w,y;c<h;c++){for(s[c]=[],w=0,y=0;y<v;y++)w+=t[c][y]*f[c][y];s[c]=w}return s.length===1?s[0]:s},pow:function(u,e){return n.map(u,function(t){return o.pow(t,e)})},exp:function(u){return n.map(u,function(e){return o.exp(e)})},log:function(u){return n.map(u,function(e){return o.log(e)})},abs:function(u){return n.map(u,function(e){return o.abs(e)})},norm:function(u,e){var t=0,f=0;for(isNaN(e)&&(e=2),g(u[0])&&(u=u[0]);f<u.length;f++)t+=o.pow(o.abs(u[f]),e);return o.pow(t,1/e)},angle:function(u,e){return o.acos(n.dot(u,e)/(n.norm(u)*n.norm(e)))},aug:function(u,e){var t=[],f;for(f=0;f<u.length;f++)t.push(u[f].slice());for(f=0;f<t.length;f++)a.apply(t[f],e[f]);return t},inv:function(u){for(var e=u.length,t=u[0].length,f=n.identity(e,t),s=n.gauss_jordan(u,f),c=[],h=0,v;h<e;h++)for(c[h]=[],v=t;v<s[0].length;v++)c[h][v-t]=s[h][v];return c},det:function m(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var e=0,t=0;t<u.length;t++){for(var f=[],s=1;s<u.length;s++){f[s-1]=[];for(var c=0;c<u.length;c++)c<t?f[s-1][c]=u[s][c]:c>t&&(f[s-1][c-1]=u[s][c])}var h=t%2?-1:1;e+=m(f)*u[0][t]*h}return e},gauss_elimination:function(u,e){var t=0,f=0,s=u.length,c=u[0].length,h=1,v=0,w=[],y,_,p,b;for(u=n.aug(u,e),y=u[0].length,t=0;t<s;t++){for(_=u[t][t],f=t,b=t+1;b<c;b++)_<o.abs(u[b][t])&&(_=u[b][t],f=b);if(f!=t)for(b=0;b<y;b++)p=u[t][b],u[t][b]=u[f][b],u[f][b]=p;for(f=t+1;f<s;f++)for(h=u[f][t]/u[t][t],b=t;b<y;b++)u[f][b]=u[f][b]-h*u[t][b]}for(t=s-1;t>=0;t--){for(v=0,f=t+1;f<=s-1;f++)v=v+w[f]*u[t][f];w[t]=(u[t][y-1]-v)/u[t][t]}return w},gauss_jordan:function(u,e){var t=n.aug(u,e),f=t.length,s=t[0].length,c=0,h,v,w;for(v=0;v<f;v++){var y=v;for(w=v+1;w<f;w++)o.abs(t[w][v])>o.abs(t[y][v])&&(y=w);var _=t[v];for(t[v]=t[y],t[y]=_,w=v+1;w<f;w++)for(c=t[w][v]/t[v][v],h=v;h<s;h++)t[w][h]-=t[v][h]*c}for(v=f-1;v>=0;v--){for(c=t[v][v],w=0;w<v;w++)for(h=s-1;h>v-1;h--)t[w][h]-=t[v][h]*t[w][v]/c;for(t[v][v]/=c,h=f;h<s;h++)t[v][h]/=c}return t},triaUpSolve:function(u,e){var t=u[0].length,f=n.zeros(1,t)[0],s,c=!1;return e[0].length!=null&&(e=e.map(function(h){return h[0]}),c=!0),n.arange(t-1,-1,-1).forEach(function(h){s=n.arange(h+1,t).map(function(v){return f[v]*u[h][v]}),f[h]=(e[h]-n.sum(s))/u[h][h]}),c?f.map(function(h){return[h]}):f},triaLowSolve:function(u,e){var t=u[0].length,f=n.zeros(1,t)[0],s,c=!1;return e[0].length!=null&&(e=e.map(function(h){return h[0]}),c=!0),n.arange(t).forEach(function(h){s=n.arange(h).map(function(v){return u[h][v]*f[v]}),f[h]=(e[h]-n.sum(s))/u[h][h]}),c?f.map(function(h){return[h]}):f},lu:function(u){var e=u.length,t=n.identity(e),f=n.zeros(u.length,u[0].length),s;return n.arange(e).forEach(function(c){f[0][c]=u[0][c]}),n.arange(1,e).forEach(function(c){n.arange(c).forEach(function(h){s=n.arange(h).map(function(v){return t[c][v]*f[v][h]}),t[c][h]=(u[c][h]-n.sum(s))/f[h][h]}),n.arange(c,e).forEach(function(h){s=n.arange(c).map(function(v){return t[c][v]*f[v][h]}),f[c][h]=u[s.length][h]-n.sum(s)})}),[t,f]},cholesky:function(u){var e=u.length,t=n.zeros(u.length,u[0].length),f;return n.arange(e).forEach(function(s){f=n.arange(s).map(function(c){return o.pow(t[s][c],2)}),t[s][s]=o.sqrt(u[s][s]-n.sum(f)),n.arange(s+1,e).forEach(function(c){f=n.arange(s).map(function(h){return t[s][h]*t[c][h]}),t[c][s]=(u[s][c]-n.sum(f))/t[s][s]})}),t},gauss_jacobi:function(u,e,t,f){for(var s=0,c=0,h=u.length,v=[],w=[],y=[],_,p,b,k;s<h;s++)for(v[s]=[],w[s]=[],y[s]=[],c=0;c<h;c++)s>c?(v[s][c]=u[s][c],w[s][c]=y[s][c]=0):s<c?(w[s][c]=u[s][c],v[s][c]=y[s][c]=0):(y[s][c]=u[s][c],v[s][c]=w[s][c]=0);for(b=n.multiply(n.multiply(n.inv(y),n.add(v,w)),-1),p=n.multiply(n.inv(y),e),_=t,k=n.add(n.multiply(b,t),p),s=2;o.abs(n.norm(n.subtract(k,_)))>f;)_=k,k=n.add(n.multiply(b,_),p),s++;return k},gauss_seidel:function(u,e,t,f){for(var s=0,c=u.length,h=[],v=[],w=[],y,_,p,b,k;s<c;s++)for(h[s]=[],v[s]=[],w[s]=[],y=0;y<c;y++)s>y?(h[s][y]=u[s][y],v[s][y]=w[s][y]=0):s<y?(v[s][y]=u[s][y],h[s][y]=w[s][y]=0):(w[s][y]=u[s][y],h[s][y]=v[s][y]=0);for(b=n.multiply(n.multiply(n.inv(n.add(w,h)),v),-1),p=n.multiply(n.inv(n.add(w,h)),e),_=t,k=n.add(n.multiply(b,t),p),s=2;o.abs(n.norm(n.subtract(k,_)))>f;)_=k,k=n.add(n.multiply(b,_),p),s=s+1;return k},SOR:function(u,e,t,f,s){for(var c=0,h=u.length,v=[],w=[],y=[],_,p,b,k,R;c<h;c++)for(v[c]=[],w[c]=[],y[c]=[],_=0;_<h;_++)c>_?(v[c][_]=u[c][_],w[c][_]=y[c][_]=0):c<_?(w[c][_]=u[c][_],v[c][_]=y[c][_]=0):(y[c][_]=u[c][_],v[c][_]=w[c][_]=0);for(k=n.multiply(n.inv(n.add(y,n.multiply(v,s))),n.subtract(n.multiply(y,1-s),n.multiply(w,s))),b=n.multiply(n.multiply(n.inv(n.add(y,n.multiply(v,s))),e),s),p=t,R=n.add(n.multiply(k,t),b),c=2;o.abs(n.norm(n.subtract(R,p)))>f;)p=R,R=n.add(n.multiply(k,p),b),c++;return R},householder:function(u){for(var e=u.length,t=u[0].length,f=0,s=[],c=[],h,v,w,y,_;f<e-1;f++){for(h=0,y=f+1;y<t;y++)h+=u[y][f]*u[y][f];for(_=u[f+1][f]>0?-1:1,h=_*o.sqrt(h),v=o.sqrt((h*h-u[f+1][f]*h)/2),s=n.zeros(e,1),s[f+1][0]=(u[f+1][f]-h)/(2*v),w=f+2;w<e;w++)s[w][0]=u[w][f]/(2*v);c=n.subtract(n.identity(e,t),n.multiply(n.multiply(s,n.transpose(s)),2)),u=n.multiply(c,n.multiply(u,c))}return u},QR:function(){var m=n.sum,u=n.arange;function e(t){var f=t.length,s=t[0].length,c=n.zeros(s,s);t=n.copy(t);var h,v,w;for(v=0;v<s;v++){for(c[v][v]=o.sqrt(m(u(f).map(function(y){return t[y][v]*t[y][v]}))),h=0;h<f;h++)t[h][v]=t[h][v]/c[v][v];for(w=v+1;w<s;w++)for(c[v][w]=m(u(f).map(function(y){return t[y][v]*t[y][w]})),h=0;h<f;h++)t[h][w]=t[h][w]-t[h][v]*c[v][w]}return[t,c]}return e}(),lstsq:function(){function m(e){e=n.copy(e);var t=e.length,f=n.identity(t);return n.arange(t-1,-1,-1).forEach(function(s){n.sliceAssign(f,{row:s},n.divide(n.slice(f,{row:s}),e[s][s])),n.sliceAssign(e,{row:s},n.divide(n.slice(e,{row:s}),e[s][s])),n.arange(s).forEach(function(c){var h=n.multiply(e[c][s],-1),v=n.slice(e,{row:c}),w=n.multiply(n.slice(e,{row:s}),h);n.sliceAssign(e,{row:c},n.add(v,w));var y=n.slice(f,{row:c}),_=n.multiply(n.slice(f,{row:s}),h);n.sliceAssign(f,{row:c},n.add(y,_))})}),f}function u(e,t){var f=!1;t[0].length===void 0&&(t=t.map(function(k){return[k]}),f=!0);var s=n.QR(e),c=s[0],h=s[1],v=e[0].length,w=n.slice(c,{col:{end:v}}),y=n.slice(h,{row:{end:v}}),_=m(y),p=n.transpose(w);p[0].length===void 0&&(p=[p]);var b=n.multiply(n.multiply(_,p),t);return b.length===void 0&&(b=[[b]]),f?b.map(function(k){return k[0]}):b}return u}(),jacobi:function(u){for(var e=1,t=u.length,f=n.identity(t,t),s=[],c,h,v,w,y,_,p,b;e===1;){for(_=u[0][1],w=0,y=1,h=0;h<t;h++)for(v=0;v<t;v++)h!=v&&_<o.abs(u[h][v])&&(_=o.abs(u[h][v]),w=h,y=v);for(u[w][w]===u[y][y]?p=u[w][y]>0?o.PI/4:-o.PI/4:p=o.atan(2*u[w][y]/(u[w][w]-u[y][y]))/2,b=n.identity(t,t),b[w][w]=o.cos(p),b[w][y]=-o.sin(p),b[y][w]=o.sin(p),b[y][y]=o.cos(p),f=n.multiply(f,b),c=n.multiply(n.multiply(n.inv(b),u),b),u=c,e=0,h=1;h<t;h++)for(v=1;v<t;v++)h!=v&&o.abs(u[h][v])>.001&&(e=1)}for(h=0;h<t;h++)s.push(u[h][h]);return[f,s]},rungekutta:function(u,e,t,f,s,c){var h,v,w,y,_;if(c===2)for(;f<=t;)h=e*u(f,s),v=e*u(f+e,s+h),w=s+(h+v)/2,s=w,f=f+e;if(c===4)for(;f<=t;)h=e*u(f,s),v=e*u(f+e/2,s+h/2),y=e*u(f+e/2,s+v/2),_=e*u(f+e,s+y),w=s+(h+2*v+2*y+_)/6,s=w,f=f+e;return s},romberg:function(u,e,t,f){for(var s=0,c=(t-e)/2,h=[],v=[],w=[],y,_,p,b,k;s<f/2;){for(k=u(e),p=e,b=0;p<=t;p=p+c,b++)h[b]=p;for(y=h.length,p=1;p<y-1;p++)k+=(p%2!==0?4:2)*u(h[p]);k=c/3*(k+u(t)),w[s]=k,c/=2,s++}for(_=w.length,y=1;_!==1;){for(p=0;p<_-1;p++)v[p]=(o.pow(4,y)*w[p+1]-w[p])/(o.pow(4,y)-1);_=v.length,w=v,v=[],y++}return w},richardson:function(u,e,t,f){function s(R,P){for(var C=0,W=R.length,A;C<W;C++)R[C]===P&&(A=C);return A}for(var c=o.abs(t-u[s(u,t)+1]),h=0,v=[],w=[],y,_,p,b,k;f>=c;)y=s(u,t+f),_=s(u,t),v[h]=(e[y]-2*e[_]+e[2*_-y])/(f*f),f/=2,h++;for(b=v.length,p=1;b!=1;){for(k=0;k<b-1;k++)w[k]=(o.pow(4,p)*v[k+1]-v[k])/(o.pow(4,p)-1);b=w.length,v=w,w=[],p++}return v},simpson:function(u,e,t,f){for(var s=(t-e)/f,c=u(e),h=[],v=e,w=0,y=1,_;v<=t;v=v+s,w++)h[w]=v;for(_=h.length;y<_-1;y++)c+=(y%2!==0?4:2)*u(h[y]);return s/3*(c+u(t))},hermite:function(u,e,t,f){for(var s=u.length,c=0,h=0,v=[],w=[],y=[],_=[],p;h<s;h++){for(v[h]=1,p=0;p<s;p++)h!=p&&(v[h]*=(f-u[p])/(u[h]-u[p]));for(w[h]=0,p=0;p<s;p++)h!=p&&(w[h]+=1/(u[h]-u[p]));y[h]=(1-2*(f-u[h])*w[h])*(v[h]*v[h]),_[h]=(f-u[h])*(v[h]*v[h]),c+=y[h]*e[h]+_[h]*t[h]}return c},lagrange:function(u,e,t){for(var f=0,s=0,c,h,v=u.length;s<v;s++){for(h=e[s],c=0;c<v;c++)s!=c&&(h*=(t-u[c])/(u[s]-u[c]));f+=h}return f},cubic_spline:function(u,e,t){for(var f=u.length,s=0,c,h=[],v=[],w=[],y=[],_=[],p=[],b=[];s<f-1;s++)_[s]=u[s+1]-u[s];for(w[0]=0,s=1;s<f-1;s++)w[s]=3/_[s]*(e[s+1]-e[s])-3/_[s-1]*(e[s]-e[s-1]);for(s=1;s<f-1;s++)h[s]=[],v[s]=[],h[s][s-1]=_[s-1],h[s][s]=2*(_[s-1]+_[s]),h[s][s+1]=_[s],v[s][0]=w[s];for(y=n.multiply(n.inv(h),v),c=0;c<f-1;c++)p[c]=(e[c+1]-e[c])/_[c]-_[c]*(y[c+1][0]+2*y[c][0])/3,b[c]=(y[c+1][0]-y[c][0])/(3*_[c]);for(c=0;c<f&&!(u[c]>t);c++);return c-=1,e[c]+(t-u[c])*p[c]+n.sq(t-u[c])*y[c]+(t-u[c])*n.sq(t-u[c])*b[c]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var e=u.length,t=u[0].length,f=0,s,c,h=[],v=[],w=[],y=[],_=[],p=[],b=[],k=[],R=[],P=[];for(f=0;f<e;f++)h[f]=n.sum(u[f])/t;for(f=0;f<t;f++)for(b[f]=[],s=0;s<e;s++)b[f][s]=u[s][f]-h[s];for(b=n.transpose(b),f=0;f<e;f++)for(k[f]=[],s=0;s<e;s++)k[f][s]=n.dot([b[f]],[b[s]])/(t-1);for(w=n.jacobi(k),R=w[0],v=w[1],P=n.transpose(R),f=0;f<v.length;f++)for(s=f;s<v.length;s++)v[f]<v[s]&&(c=v[f],v[f]=v[s],v[s]=c,y=P[f],P[f]=P[s],P[s]=y);for(p=n.transpose(b),f=0;f<e;f++)for(_[f]=[],s=0;s<p.length;s++)_[f][s]=n.dot([P[f]],[p[s]]);return[u,v,P,_]}}),function(m){for(var u=0;u<m.length;u++)(function(e){n.fn[e]=function(t,f){var s=this;return f?(setTimeout(function(){f.call(s,n.fn[e].call(s,t))},15),this):typeof n[e](this,t)=="number"?n[e](this,t):n(n[e](this,t))}})(m[u])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(l,Math),function(n,o){var a=[].slice,d=n.utils.isNumber,g=n.utils.isArray;n.extend({zscore:function(){var e=a.call(arguments);return d(e[1])?(e[0]-e[1])/e[2]:(e[0]-n.mean(e[1]))/n.stdev(e[1],e[2])},ztest:function(){var e=a.call(arguments),t;return g(e[1])?(t=n.zscore(e[0],e[1],e[3]),e[2]===1?n.normal.cdf(-o.abs(t),0,1):n.normal.cdf(-o.abs(t),0,1)*2):e.length>2?(t=n.zscore(e[0],e[1],e[2]),e[3]===1?n.normal.cdf(-o.abs(t),0,1):n.normal.cdf(-o.abs(t),0,1)*2):(t=e[0],e[1]===1?n.normal.cdf(-o.abs(t),0,1):n.normal.cdf(-o.abs(t),0,1)*2)}}),n.extend(n.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(e,t,f){var s=o.abs(this.zscore(e,f));return t===1?n.normal.cdf(-s,0,1):n.normal.cdf(-s,0,1)*2}}),n.extend({tscore:function(){var e=a.call(arguments);return e.length===4?(e[0]-e[1])/(e[2]/o.sqrt(e[3])):(e[0]-n.mean(e[1]))/(n.stdev(e[1],!0)/o.sqrt(e[1].length))},ttest:function(){var e=a.call(arguments),t;return e.length===5?(t=o.abs(n.tscore(e[0],e[1],e[2],e[3])),e[4]===1?n.studentt.cdf(-t,e[3]-1):n.studentt.cdf(-t,e[3]-1)*2):d(e[1])?(t=o.abs(e[0]),e[2]==1?n.studentt.cdf(-t,e[1]-1):n.studentt.cdf(-t,e[1]-1)*2):(t=o.abs(n.tscore(e[0],e[1])),e[2]==1?n.studentt.cdf(-t,e[1].length-1):n.studentt.cdf(-t,e[1].length-1)*2)}}),n.extend(n.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/o.sqrt(this.cols()))},ttest:function(e,t){return t===1?1-n.studentt.cdf(o.abs(this.tscore(e)),this.cols()-1):n.studentt.cdf(-o.abs(this.tscore(e)),this.cols()-1)*2}}),n.extend({anovafscore:function(){var e=a.call(arguments),t,f,s,c,h,v,w,y;if(e.length===1){for(h=new Array(e[0].length),w=0;w<e[0].length;w++)h[w]=e[0][w];e=h}for(f=new Array,w=0;w<e.length;w++)f=f.concat(e[w]);for(s=n.mean(f),t=0,w=0;w<e.length;w++)t=t+e[w].length*o.pow(n.mean(e[w])-s,2);for(t/=e.length-1,v=0,w=0;w<e.length;w++)for(c=n.mean(e[w]),y=0;y<e[w].length;y++)v+=o.pow(e[w][y]-c,2);return v/=f.length-e.length,t/v},anovaftest:function(){var e=a.call(arguments),t,f,s,c;if(d(e[0]))return 1-n.centralF.cdf(e[0],e[1],e[2]);var h=n.anovafscore(e);for(t=e.length-1,s=0,c=0;c<e.length;c++)s=s+e[c].length;return f=s-t-1,1-n.centralF.cdf(h,t,f)},ftest:function(e,t,f){return 1-n.centralF.cdf(e,t,f)}}),n.extend(n.fn,{anovafscore:function(){return n.anovafscore(this.toArray())},anovaftes:function(){var e=0,t;for(t=0;t<this.length;t++)e=e+this[t].length;return n.ftest(this.anovafscore(),this.length-1,e-this.length)}}),n.extend({qscore:function(){var e=a.call(arguments),t,f,s,c,h;return d(e[0])?(t=e[0],f=e[1],s=e[2],c=e[3],h=e[4]):(t=n.mean(e[0]),f=n.mean(e[1]),s=e[0].length,c=e[1].length,h=e[2]),o.abs(t-f)/(h*o.sqrt((1/s+1/c)/2))},qtest:function(){var e=a.call(arguments),t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=n.qscore(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=n.qscore(e[0],e[1],e[2]),e=e.slice(3));var f=e[0],s=e[1];return 1-n.tukey.cdf(t,s,f-s)},tukeyhsd:function(e){for(var t=n.pooledstdev(e),f=e.map(function(y){return n.mean(y)}),s=e.reduce(function(y,_){return y+_.length},0),c=[],h=0;h<e.length;++h)for(var v=h+1;v<e.length;++v){var w=n.qtest(f[h],f[v],e[h].length,e[v].length,t,s,e.length);c.push([[h,v],w])}return c}}),n.extend({normalci:function(){var e=a.call(arguments),t=new Array(2),f;return e.length===4?f=o.abs(n.normal.inv(e[1]/2,0,1)*e[2]/o.sqrt(e[3])):f=o.abs(n.normal.inv(e[1]/2,0,1)*n.stdev(e[2])/o.sqrt(e[2].length)),t[0]=e[0]-f,t[1]=e[0]+f,t},tci:function(){var e=a.call(arguments),t=new Array(2),f;return e.length===4?f=o.abs(n.studentt.inv(e[1]/2,e[3]-1)*e[2]/o.sqrt(e[3])):f=o.abs(n.studentt.inv(e[1]/2,e[2].length-1)*n.stdev(e[2],!0)/o.sqrt(e[2].length)),t[0]=e[0]-f,t[1]=e[0]+f,t},significant:function(e,t){return e<t}}),n.extend(n.fn,{normalci:function(e,t){return n.normalci(e,t,this.toArray())},tci:function(e,t){return n.tci(e,t,this.toArray())}});function m(u,e,t,f){if(u>1||t>1||u<=0||t<=0)throw new Error("Proportions should be greater than 0 and less than 1");var s=(u*e+t*f)/(e+f),c=o.sqrt(s*(1-s)*(1/e+1/f));return(u-t)/c}n.extend(n.fn,{oneSidedDifferenceOfProportions:function(e,t,f,s){var c=m(e,t,f,s);return n.ztest(c,1)},twoSidedDifferenceOfProportions:function(e,t,f,s){var c=m(e,t,f,s);return n.ztest(c,2)}})}(l,Math),l.models=function(){function n(m){var u=m[0].length,e=l.arange(u).map(function(t){var f=l.arange(u).filter(function(s){return s!==t});return o(l.col(m,t).map(function(s){return s[0]}),l.col(m,f))});return e}function o(m,u){var e=m.length,t=u[0].length-1,f=e-t-1,s=l.lstsq(u,m),c=l.multiply(u,s.map(function(b){return[b]})).map(function(b){return b[0]}),h=l.subtract(m,c),v=l.mean(m),w=l.sum(c.map(function(b){return Math.pow(b-v,2)})),y=l.sum(m.map(function(b,k){return Math.pow(b-c[k],2)})),_=w+y,p=w/_;return{exog:u,endog:m,nobs:e,df_model:t,df_resid:f,coef:s,predict:c,resid:h,ybar:v,SST:_,SSE:w,SSR:y,R2:p}}function a(m){var u=n(m.exog),e=Math.sqrt(m.SSR/m.df_resid),t=u.map(function(v){var w=v.SST,y=v.R2;return e/Math.sqrt(w*(1-y))}),f=m.coef.map(function(v,w){return(v-0)/t[w]}),s=f.map(function(v){var w=l.studentt.cdf(v,m.df_resid);return(w>.5?1-w:w)*2}),c=l.studentt.inv(.975,m.df_resid),h=m.coef.map(function(v,w){var y=c*t[w];return[v-y,v+y]});return{se:t,t:f,p:s,sigmaHat:e,interval95:h}}function d(m){var u=m.R2/m.df_model/((1-m.R2)/m.df_resid),e=function(f,s,c){return l.beta.cdf(f/(c/s+f),s/2,c/2)},t=1-e(u,m.df_model,m.df_resid);return{F_statistic:u,pvalue:t}}function g(m,u){var e=o(m,u),t=a(e),f=d(e),s=1-(1-e.R2)*((e.nobs-1)/e.df_resid);return e.t=t,e.f=f,e.adjust_R2=s,e}return{ols:g}}(),l.extend({buildxmatrix:function(){for(var o=new Array(arguments.length),a=0;a<arguments.length;a++){var d=[1];o[a]=d.concat(arguments[a])}return l(o)},builddxmatrix:function(){for(var o=new Array(arguments[0].length),a=0;a<arguments[0].length;a++){var d=[1];o[a]=d.concat(arguments[0][a])}return l(o)},buildjxmatrix:function(o){for(var a=new Array(o.length),d=0;d<o.length;d++)a[d]=o[d];return l.builddxmatrix(a)},buildymatrix:function(o){return l(o).transpose()},buildjymatrix:function(o){return o.transpose()},matrixmult:function(o,a){var d,g,m,u,e;if(o.cols()==a.rows()){if(a.rows()>1){for(u=[],d=0;d<o.rows();d++)for(u[d]=[],g=0;g<a.cols();g++){for(e=0,m=0;m<o.cols();m++)e+=o.toArray()[d][m]*a.toArray()[m][g];u[d][g]=e}return l(u)}for(u=[],d=0;d<o.rows();d++)for(u[d]=[],g=0;g<a.cols();g++){for(e=0,m=0;m<o.cols();m++)e+=o.toArray()[d][m]*a.toArray()[g];u[d][g]=e}return l(u)}},regress:function(o,a){var d=l.xtranspxinv(o),g=o.transpose(),m=l.matrixmult(l(d),g);return l.matrixmult(m,a)},regresst:function(o,a,d){var g=l.regress(o,a),m={};m.anova={};var u=l.jMatYBar(o,g);m.yBar=u;var e=a.mean();m.anova.residuals=l.residuals(a,u),m.anova.ssr=l.ssr(u,e),m.anova.msr=m.anova.ssr/(o[0].length-1),m.anova.sse=l.sse(a,u),m.anova.mse=m.anova.sse/(a.length-(o[0].length-1)-1),m.anova.sst=l.sst(a,e),m.anova.mst=m.anova.sst/(a.length-1),m.anova.r2=1-m.anova.sse/m.anova.sst,m.anova.r2<0&&(m.anova.r2=0),m.anova.fratio=m.anova.msr/m.anova.mse,m.anova.pvalue=l.anovaftest(m.anova.fratio,o[0].length-1,a.length-(o[0].length-1)-1),m.anova.rmse=Math.sqrt(m.anova.mse),m.anova.r2adj=1-m.anova.mse/m.anova.mst,m.anova.r2adj<0&&(m.anova.r2adj=0),m.stats=new Array(o[0].length);for(var t=l.xtranspxinv(o),f,s,c,h=0;h<g.length;h++)f=Math.sqrt(m.anova.mse*Math.abs(t[h][h])),s=Math.abs(g[h]/f),c=l.ttest(s,a.length-o[0].length-1,d),m.stats[h]=[g[h],f,s,c];return m.regress=g,m},xtranspx:function(o){return l.matrixmult(o.transpose(),o)},xtranspxinv:function(o){var a=l.matrixmult(o.transpose(),o),d=l.inv(a);return d},jMatYBar:function(o,a){var d=l.matrixmult(o,a);return new l(d)},residuals:function(o,a){return l.matrixsubtract(o,a)},ssr:function(o,a){for(var d=0,g=0;g<o.length;g++)d+=Math.pow(o[g]-a,2);return d},sse:function(o,a){for(var d=0,g=0;g<o.length;g++)d+=Math.pow(o[g]-a[g],2);return d},sst:function(o,a){for(var d=0,g=0;g<o.length;g++)d+=Math.pow(o[g]-a,2);return d},matrixsubtract:function(o,a){for(var d=new Array(o.length),g=0;g<o.length;g++){d[g]=new Array(o[g].length);for(var m=0;m<o[g].length;m++)d[g][m]=o[g][m]-a[g][m]}return l(d)}}),l.jStat=l,l})})(zo);const Ao=ft,Io=(i,r,l)=>{const o=1/l;l=o,r=r/1e3*(1/o);let a=[];return i.forEach(d=>{const g=Array(8).fill(d.maxWell.length);let m=Array(g.length).fill(0);for(var u=0;u<g.length;u++)m[u]=r*o*l**u;const e=[-1*Math.log10(m[0]*10),-1*Math.log10(m[m.length-1]/10)];let t=Array(g[0]).fill(0);for(var u=0;u<g.length;u++)t[u]=d.maxWell.filter(c=>c>=u).length;let f=0;t[0]!=0&&(f=qo.local_min(s=>-1*Do(s,m,g,t),e[0],e[1],1e-4).x),a=[{sample:d.name,nrep:d.maxWell.length,titer:f,titer_ul:10**f/1e3},...a]}),a},Do=(i,r,l,n)=>{let o=1;for(var a=0;a<r.length;a++){let d=-1*Math.expm1(10**i*-1*r[a]);o=o*Ao.binomial.pdf(n[a],l[a],d)}return o},Lo=i=>{let r=[],l=[],n;return i.forEach(o=>{if(o.added)for(var a=0;a<o.maxWell.length;a++)r.includes(o.colNames[a])?(n=l.find(d=>d.name==o.colNames[a]),n.maxWell=[o.maxWell[a],...n.maxWell]):(n={name:o.colNames[a],maxWell:[o.maxWell[a]]},r=[n.name,...r],l=[n,...l])}),l},Co=(i,r,l)=>{if(r==null|l==null)return null;const n=Lo(i);let o=[];const a=Ro(n,r,l),d=Io(n,r,l);for(var g=0;g<a.length;g++)o=[{sample:a[g].sample,nrep:a[g].nrep,rm_titer:a[g].titer,ms_titer:d[g].titer,ms_titer_ul:d[g].titer_ul},...o];return o};function li(i,r,l){const n=i.slice();return n[2]=r[l],n}function oi(i,r,l){const n=i.slice();return n[5]=r[l],n}function fi(i){let r,l,n,o,a,d,g,m,u,e,t,f,s,c,h,v,w,y=i[0],_=[];for(let p=0;p<y.length;p+=1)_[p]=si(li(i,y,p));return{c(){r=I("table"),l=I("tr"),n=I("th"),o=G("Sample"),a=U(),d=I("th"),g=G("TCID50/L"),m=U(),u=I("th"),e=G("SIN/uL"),t=U(),f=I("th"),s=G("Log10 SIN/mL"),c=U(),h=I("th"),v=G("# Replicates"),w=U();for(let p=0;p<_.length;p+=1)_[p].c();this.h()},l(p){r=D(p,"TABLE",{class:!0});var b=q(r);l=D(b,"TR",{});var k=q(l);n=D(k,"TH",{class:!0});var R=q(n);o=B(R,"Sample"),R.forEach(N),a=Q(k),d=D(k,"TH",{class:!0});var P=q(d);g=B(P,"TCID50/L"),P.forEach(N),m=Q(k),u=D(k,"TH",{class:!0});var C=q(u);e=B(C,"SIN/uL"),C.forEach(N),t=Q(k),f=D(k,"TH",{class:!0});var W=q(f);s=B(W,"Log10 SIN/mL"),W.forEach(N),c=Q(k),h=D(k,"TH",{class:!0});var A=q(h);v=B(A,"# Replicates"),A.forEach(N),k.forEach(N),w=Q(b);for(let J=0;J<_.length;J+=1)_[J].l(b);b.forEach(N),this.h()},h(){E(n,"class","svelte-xwi62g"),E(d,"class","titer svelte-xwi62g"),E(u,"class","titer svelte-xwi62g"),E(f,"class","titer svelte-xwi62g"),E(h,"class","titer svelte-xwi62g"),E(r,"class","titer-table svelte-xwi62g")},m(p,b){z(p,r,b),T(r,l),T(l,n),T(n,o),T(l,a),T(l,d),T(d,g),T(l,m),T(l,u),T(u,e),T(l,t),T(l,f),T(f,s),T(l,c),T(l,h),T(h,v),T(r,w);for(let k=0;k<_.length;k+=1)_[k].m(r,null)},p(p,b){if(b&3){y=p[0];let k;for(k=0;k<y.length;k+=1){const R=li(p,y,k);_[k]?_[k].p(R,b):(_[k]=si(R),_[k].c(),_[k].m(r,null))}for(;k<_.length;k+=1)_[k].d(1);_.length=y.length}},d(p){p&&N(r),ze(_,p)}}}function ui(i){let r,l=i[2][i[5]].toFixed(2)+"",n;return{c(){r=I("td"),n=G(l),this.h()},l(o){r=D(o,"TD",{class:!0});var a=q(r);n=B(a,l),a.forEach(N),this.h()},h(){E(r,"class","titer svelte-xwi62g")},m(o,a){z(o,r,a),T(r,n)},p(o,a){a&1&&l!==(l=o[2][o[5]].toFixed(2)+"")&&be(n,l)},d(o){o&&N(r)}}}function si(i){let r,l,n=i[2].sample+"",o,a,d,g,m=i[2].nrep+"",u,e,t=i[1],f=[];for(let s=0;s<t.length;s+=1)f[s]=ui(oi(i,t,s));return{c(){r=I("tr"),l=I("td"),o=G(n),a=U();for(let s=0;s<f.length;s+=1)f[s].c();d=U(),g=I("td"),u=G(m),e=U(),this.h()},l(s){r=D(s,"TR",{});var c=q(r);l=D(c,"TD",{class:!0});var h=q(l);o=B(h,n),h.forEach(N),a=Q(c);for(let w=0;w<f.length;w+=1)f[w].l(c);d=Q(c),g=D(c,"TD",{class:!0});var v=q(g);u=B(v,m),v.forEach(N),e=Q(c),c.forEach(N),this.h()},h(){E(l,"class","svelte-xwi62g"),E(g,"class","titer svelte-xwi62g")},m(s,c){z(s,r,c),T(r,l),T(l,o),T(r,a);for(let h=0;h<f.length;h+=1)f[h].m(r,null);T(r,d),T(r,g),T(g,u),T(r,e)},p(s,c){if(c&1&&n!==(n=s[2].sample+"")&&be(o,n),c&3){t=s[1];let h;for(h=0;h<t.length;h+=1){const v=oi(s,t,h);f[h]?f[h].p(v,c):(f[h]=ui(v),f[h].c(),f[h].m(r,d))}for(;h<f.length;h+=1)f[h].d(1);f.length=t.length}c&1&&m!==(m=s[2].nrep+"")&&be(u,m)},d(s){s&&N(r),ze(f,s)}}}function Oo(i){let r,l=i[0]!=null&&fi(i);return{c(){l&&l.c(),r=me()},l(n){l&&l.l(n),r=me()},m(n,o){l&&l.m(n,o),z(n,r,o)},p(n,[o]){n[0]!=null?l?l.p(n,o):(l=fi(n),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i:oe,o:oe,d(n){l&&l.d(n),n&&N(r)}}}function Wo(i,r,l){let{data:n}=r,o=["rm_titer","ms_titer_ul","ms_titer"];return i.$$set=a=>{"data"in a&&l(0,n=a.data)},[n,o]}class Ho extends ue{constructor(r){super(),se(this,r,Wo,Oo,ae,{data:0})}}function Vo(i){return i===0?!0:i}function Ve(i){return Vo(i)?Array.isArray(i)?r=>i.map(l=>typeof l!="function"?r[l]:l(r)):typeof i!="function"?r=>r[i]:i:null}function Go(i){const r={};for(const l of i){if(Object(l)!==l)throw new TypeError("iterable for fromEntries should yield objects");const{"0":n,"1":o}=l;Object.defineProperty(r,n,{configurable:!0,enumerable:!0,writable:!0,value:o})}return r}function rt(i,r={}){return Go(Object.entries(i).filter(([l,n])=>n!==void 0&&r[l]===void 0))}function Bo(i,r,{sort:l=!1}={}){if(!Array.isArray(i))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(r)||r===void 0||r===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const n={},o=Object.keys(r),a=o.length;let d,g,m,u,e,t,f;const s=i.length;for(d=0;d<a;d+=1){for(f=new Set,u=o[d],e=r[u],g=0;g<s;g+=1)if(t=e(i[g]),Array.isArray(t)){const h=t.length;for(m=0;m<h;m+=1)f.add(t[m])}else f.add(t);const c=Array.from(f);n[u]=l===!0?c.sort():c}return n}function Fo(i,r){if(!Array.isArray(i))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(r)||r===void 0||r===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const l={},n=Object.keys(r),o=n.length;let a,d,g,m,u,e,t,f;const s=i.length;for(a=0;a<o;a+=1){for(m=n[a],t=r[m],u=null,e=null,d=0;d<s;d+=1)if(f=t(i[d]),Array.isArray(f)){const c=f.length;for(g=0;g<c;g+=1)f[g]!==!1&&f[g]!==void 0&&f[g]!==null&&Number.isNaN(f[g])===!1&&((u===null||f[g]<u)&&(u=f[g]),(e===null||f[g]>e)&&(e=f[g]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((u===null||f<u)&&(u=f),(e===null||f>e)&&(e=f));l[m]=[u,e]}return l}function Uo(i){return typeof i.bandwidth=="function"||Qo(Object.keys(i),["domain","range","unknown","copy"])?"ordinal":"other"}function Qo(i,r){return i.length!==r.length?!1:i.every(l=>r.includes(l))}function Yo(i,r,l){const n=Object.keys(l).reduce((a,d)=>{const g=Uo(l[d]);return a[g]||(a[g]={}),a[g][d]=r[d],a},{ordinal:!1,other:!1});let o={};return n.ordinal&&(o=Bo(i,n.ordinal)),n.other&&(o={...o,...Fo(i,n.other)}),o}function Zo(i=[],r){return Array.isArray(r)===!0?r.map((l,n)=>l===null?i[n]:l):i}function qr(i){return function([l,n]){return typeof n=="function"&&(n=n(l[i])),l?Zo(l[i],n):n}}function Wr(i,r){return i==null||r==null?NaN:i<r?-1:i>r?1:i>=r?0:NaN}function Ko(i,r){return i==null||r==null?NaN:r<i?-1:r>i?1:r>=i?0:NaN}function rl(i){let r,l,n;i.length!==2?(r=Wr,l=(g,m)=>Wr(i(g),m),n=(g,m)=>i(g)-m):(r=i===Wr||i===Ko?i:Jo,l=i,n=i);function o(g,m,u=0,e=g.length){if(u<e){if(r(m,m)!==0)return e;do{const t=u+e>>>1;l(g[t],m)<0?u=t+1:e=t}while(u<e)}return u}function a(g,m,u=0,e=g.length){if(u<e){if(r(m,m)!==0)return e;do{const t=u+e>>>1;l(g[t],m)<=0?u=t+1:e=t}while(u<e)}return u}function d(g,m,u=0,e=g.length){const t=o(g,m,u,e-1);return t>u&&n(g[t-1],m)>-n(g[t],m)?t-1:t}return{left:o,center:d,right:a}}function Jo(){return 0}function Xo(i){return i===null?NaN:+i}const Mo=rl(Wr),So=Mo.right;rl(Xo).center;const $o=So;class ai extends Map{constructor(r,l=nf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:l}}),r!=null)for(const[n,o]of r)this.set(n,o)}get(r){return super.get(ci(this,r))}has(r){return super.has(ci(this,r))}set(r,l){return super.set(jo(this,r),l)}delete(r){return super.delete(ef(this,r))}}function ci({_intern:i,_key:r},l){const n=r(l);return i.has(n)?i.get(n):l}function jo({_intern:i,_key:r},l){const n=r(l);return i.has(n)?i.get(n):(i.set(n,l),l)}function ef({_intern:i,_key:r},l){const n=r(l);return i.has(n)&&(l=i.get(n),i.delete(n)),l}function nf(i){return i!==null&&typeof i=="object"?i.valueOf():i}var ut=Math.sqrt(50),st=Math.sqrt(10),at=Math.sqrt(2);function ct(i,r,l){var n,o=-1,a,d,g;if(r=+r,i=+i,l=+l,i===r&&l>0)return[i];if((n=r<i)&&(a=i,i=r,r=a),(g=tl(i,r,l))===0||!isFinite(g))return[];if(g>0){let m=Math.round(i/g),u=Math.round(r/g);for(m*g<i&&++m,u*g>r&&--u,d=new Array(a=u-m+1);++o<a;)d[o]=(m+o)*g}else{g=-g;let m=Math.round(i*g),u=Math.round(r*g);for(m/g<i&&++m,u/g>r&&--u,d=new Array(a=u-m+1);++o<a;)d[o]=(m+o)/g}return n&&d.reverse(),d}function tl(i,r,l){var n=(r-i)/Math.max(0,l),o=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,o);return o>=0?(a>=ut?10:a>=st?5:a>=at?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=ut?10:a>=st?5:a>=at?2:1)}function rf(i,r,l){var n=Math.abs(r-i)/Math.max(0,l),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/o;return a>=ut?o*=10:a>=st?o*=5:a>=at&&(o*=2),r<i?-o:o}function tf(i,r,l){i=+i,r=+r,l=(o=arguments.length)<2?(r=i,i=0,1):o<3?1:+l;for(var n=-1,o=Math.max(0,Math.ceil((r-i)/l))|0,a=new Array(o);++n<o;)a[n]=i+n*l;return a}function Kn(i,r){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(r).domain(i);break}return this}const di=Symbol("implicit");function il(){var i=new ai,r=[],l=[],n=di;function o(a){let d=i.get(a);if(d===void 0){if(n!==di)return n;i.set(a,d=r.push(a)-1)}return l[d%l.length]}return o.domain=function(a){if(!arguments.length)return r.slice();r=[],i=new ai;for(const d of a)i.has(d)||i.set(d,r.push(d)-1);return o},o.range=function(a){return arguments.length?(l=Array.from(a),o):l.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return il(r,l).unknown(n)},Kn.apply(o,arguments),o}function ll(){var i=il().unknown(void 0),r=i.domain,l=i.range,n=0,o=1,a,d,g=!1,m=0,u=0,e=.5;delete i.unknown;function t(){var f=r().length,s=o<n,c=s?o:n,h=s?n:o;a=(h-c)/Math.max(1,f-m+u*2),g&&(a=Math.floor(a)),c+=(h-c-a*(f-m))*e,d=a*(1-m),g&&(c=Math.round(c),d=Math.round(d));var v=tf(f).map(function(w){return c+a*w});return l(s?v.reverse():v)}return i.domain=function(f){return arguments.length?(r(f),t()):r()},i.range=function(f){return arguments.length?([n,o]=f,n=+n,o=+o,t()):[n,o]},i.rangeRound=function(f){return[n,o]=f,n=+n,o=+o,g=!0,t()},i.bandwidth=function(){return d},i.step=function(){return a},i.round=function(f){return arguments.length?(g=!!f,t()):g},i.padding=function(f){return arguments.length?(m=Math.min(1,u=+f),t()):m},i.paddingInner=function(f){return arguments.length?(m=Math.min(1,f),t()):m},i.paddingOuter=function(f){return arguments.length?(u=+f,t()):u},i.align=function(f){return arguments.length?(e=Math.max(0,Math.min(1,f)),t()):e},i.copy=function(){return ll(r(),[n,o]).round(g).paddingInner(m).paddingOuter(u).align(e)},Kn.apply(t(),arguments)}function ol(i){var r=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,delete i.paddingOuter,i.copy=function(){return ol(r())},i}function lf(){return ol(ll.apply(null,arguments).paddingInner(1))}function wt(i,r,l){i.prototype=r.prototype=l,l.constructor=i}function fl(i,r){var l=Object.create(i.prototype);for(var n in r)l[n]=r[n];return l}function Jn(){}var Fn=.7,Gr=1/Fn,gn="\\s*([+-]?\\d+)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",of=/^#([0-9a-f]{3,8})$/,ff=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),uf=new RegExp(`^rgb\\(${Te},${Te},${Te}\\)$`),sf=new RegExp(`^rgba\\(${gn},${gn},${gn},${Un}\\)$`),af=new RegExp(`^rgba\\(${Te},${Te},${Te},${Un}\\)$`),cf=new RegExp(`^hsl\\(${Un},${Te},${Te}\\)$`),df=new RegExp(`^hsla\\(${Un},${Te},${Te},${Un}\\)$`),mi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wt(Jn,Qn,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:gi,formatHex:gi,formatHex8:mf,formatHsl:gf,formatRgb:hi,toString:hi});function gi(){return this.rgb().formatHex()}function mf(){return this.rgb().formatHex8()}function gf(){return ul(this).formatHsl()}function hi(){return this.rgb().formatRgb()}function Qn(i){var r,l;return i=(i+"").trim().toLowerCase(),(r=of.exec(i))?(l=r[1].length,r=parseInt(r[1],16),l===6?vi(r):l===3?new ye(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):l===8?zr(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):l===4?zr(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=ff.exec(i))?new ye(r[1],r[2],r[3],1):(r=uf.exec(i))?new ye(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=sf.exec(i))?zr(r[1],r[2],r[3],r[4]):(r=af.exec(i))?zr(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=cf.exec(i))?yi(r[1],r[2]/100,r[3]/100,1):(r=df.exec(i))?yi(r[1],r[2]/100,r[3]/100,r[4]):mi.hasOwnProperty(i)?vi(mi[i]):i==="transparent"?new ye(NaN,NaN,NaN,0):null}function vi(i){return new ye(i>>16&255,i>>8&255,i&255,1)}function zr(i,r,l,n){return n<=0&&(i=r=l=NaN),new ye(i,r,l,n)}function hf(i){return i instanceof Jn||(i=Qn(i)),i?(i=i.rgb(),new ye(i.r,i.g,i.b,i.opacity)):new ye}function dt(i,r,l,n){return arguments.length===1?hf(i):new ye(i,r,l,n??1)}function ye(i,r,l,n){this.r=+i,this.g=+r,this.b=+l,this.opacity=+n}wt(ye,dt,fl(Jn,{brighter(i){return i=i==null?Gr:Math.pow(Gr,i),new ye(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Fn:Math.pow(Fn,i),new ye(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ye(Ue(this.r),Ue(this.g),Ue(this.b),Br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_i,formatHex:_i,formatHex8:vf,formatRgb:pi,toString:pi}));function _i(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function vf(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function pi(){const i=Br(this.opacity);return`${i===1?"rgb(":"rgba("}${Ue(this.r)}, ${Ue(this.g)}, ${Ue(this.b)}${i===1?")":`, ${i})`}`}function Br(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Ue(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Be(i){return i=Ue(i),(i<16?"0":"")+i.toString(16)}function yi(i,r,l,n){return n<=0?i=r=l=NaN:l<=0||l>=1?i=r=NaN:r<=0&&(i=NaN),new ke(i,r,l,n)}function ul(i){if(i instanceof ke)return new ke(i.h,i.s,i.l,i.opacity);if(i instanceof Jn||(i=Qn(i)),!i)return new ke;if(i instanceof ke)return i;i=i.rgb();var r=i.r/255,l=i.g/255,n=i.b/255,o=Math.min(r,l,n),a=Math.max(r,l,n),d=NaN,g=a-o,m=(a+o)/2;return g?(r===a?d=(l-n)/g+(l<n)*6:l===a?d=(n-r)/g+2:d=(r-l)/g+4,g/=m<.5?a+o:2-a-o,d*=60):g=m>0&&m<1?0:d,new ke(d,g,m,i.opacity)}function _f(i,r,l,n){return arguments.length===1?ul(i):new ke(i,r,l,n??1)}function ke(i,r,l,n){this.h=+i,this.s=+r,this.l=+l,this.opacity=+n}wt(ke,_f,fl(Jn,{brighter(i){return i=i==null?Gr:Math.pow(Gr,i),new ke(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Fn:Math.pow(Fn,i),new ke(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,r=isNaN(i)||isNaN(this.s)?0:this.s,l=this.l,n=l+(l<.5?l:1-l)*r,o=2*l-n;return new ye(tt(i>=240?i-240:i+120,o,n),tt(i,o,n),tt(i<120?i+240:i-120,o,n),this.opacity)},clamp(){return new ke(wi(this.h),Ar(this.s),Ar(this.l),Br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Br(this.opacity);return`${i===1?"hsl(":"hsla("}${wi(this.h)}, ${Ar(this.s)*100}%, ${Ar(this.l)*100}%${i===1?")":`, ${i})`}`}}));function wi(i){return i=(i||0)%360,i<0?i+360:i}function Ar(i){return Math.max(0,Math.min(1,i||0))}function tt(i,r,l){return(i<60?r+(l-r)*i/60:i<180?l:i<240?r+(l-r)*(240-i)/60:r)*255}const bt=i=>()=>i;function pf(i,r){return function(l){return i+l*r}}function yf(i,r,l){return i=Math.pow(i,l),r=Math.pow(r,l)-i,l=1/l,function(n){return Math.pow(i+n*r,l)}}function wf(i){return(i=+i)==1?sl:function(r,l){return l-r?yf(r,l,i):bt(isNaN(r)?l:r)}}function sl(i,r){var l=r-i;return l?pf(i,l):bt(isNaN(i)?r:i)}const bi=function i(r){var l=wf(r);function n(o,a){var d=l((o=dt(o)).r,(a=dt(a)).r),g=l(o.g,a.g),m=l(o.b,a.b),u=sl(o.opacity,a.opacity);return function(e){return o.r=d(e),o.g=g(e),o.b=m(e),o.opacity=u(e),o+""}}return n.gamma=i,n}(1);function bf(i,r){r||(r=[]);var l=i?Math.min(r.length,i.length):0,n=r.slice(),o;return function(a){for(o=0;o<l;++o)n[o]=i[o]*(1-a)+r[o]*a;return n}}function kf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function xf(i,r){var l=r?r.length:0,n=i?Math.min(l,i.length):0,o=new Array(n),a=new Array(l),d;for(d=0;d<n;++d)o[d]=kt(i[d],r[d]);for(;d<l;++d)a[d]=r[d];return function(g){for(d=0;d<n;++d)a[d]=o[d](g);return a}}function Ef(i,r){var l=new Date;return i=+i,r=+r,function(n){return l.setTime(i*(1-n)+r*n),l}}function Fr(i,r){return i=+i,r=+r,function(l){return i*(1-l)+r*l}}function Nf(i,r){var l={},n={},o;(i===null||typeof i!="object")&&(i={}),(r===null||typeof r!="object")&&(r={});for(o in r)o in i?l[o]=kt(i[o],r[o]):n[o]=r[o];return function(a){for(o in l)n[o]=l[o](a);return n}}var mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,it=new RegExp(mt.source,"g");function Rf(i){return function(){return i}}function Tf(i){return function(r){return i(r)+""}}function Pf(i,r){var l=mt.lastIndex=it.lastIndex=0,n,o,a,d=-1,g=[],m=[];for(i=i+"",r=r+"";(n=mt.exec(i))&&(o=it.exec(r));)(a=o.index)>l&&(a=r.slice(l,a),g[d]?g[d]+=a:g[++d]=a),(n=n[0])===(o=o[0])?g[d]?g[d]+=o:g[++d]=o:(g[++d]=null,m.push({i:d,x:Fr(n,o)})),l=it.lastIndex;return l<r.length&&(a=r.slice(l),g[d]?g[d]+=a:g[++d]=a),g.length<2?m[0]?Tf(m[0].x):Rf(r):(r=m.length,function(u){for(var e=0,t;e<r;++e)g[(t=m[e]).i]=t.x(u);return g.join("")})}function kt(i,r){var l=typeof r,n;return r==null||l==="boolean"?bt(r):(l==="number"?Fr:l==="string"?(n=Qn(r))?(r=n,bi):Pf:r instanceof Qn?bi:r instanceof Date?Ef:kf(r)?bf:Array.isArray(r)?xf:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Nf:Fr)(i,r)}function qf(i,r){return i=+i,r=+r,function(l){return Math.round(i*(1-l)+r*l)}}function zf(i){return function(){return i}}function Af(i){return+i}var ki=[0,1];function Re(i){return i}function gt(i,r){return(r-=i=+i)?function(l){return(l-i)/r}:zf(isNaN(r)?NaN:.5)}function If(i,r){var l;return i>r&&(l=i,i=r,r=l),function(n){return Math.max(i,Math.min(r,n))}}function Df(i,r,l){var n=i[0],o=i[1],a=r[0],d=r[1];return o<n?(n=gt(o,n),a=l(d,a)):(n=gt(n,o),a=l(a,d)),function(g){return a(n(g))}}function Lf(i,r,l){var n=Math.min(i.length,r.length)-1,o=new Array(n),a=new Array(n),d=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),r=r.slice().reverse());++d<n;)o[d]=gt(i[d],i[d+1]),a[d]=l(r[d],r[d+1]);return function(g){var m=$o(i,g,1,n)-1;return a[m](o[m](g))}}function xt(i,r){return r.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Et(){var i=ki,r=ki,l=kt,n,o,a,d=Re,g,m,u;function e(){var f=Math.min(i.length,r.length);return d!==Re&&(d=If(i[0],i[f-1])),g=f>2?Lf:Df,m=u=null,t}function t(f){return f==null||isNaN(f=+f)?a:(m||(m=g(i.map(n),r,l)))(n(d(f)))}return t.invert=function(f){return d(o((u||(u=g(r,i.map(n),Fr)))(f)))},t.domain=function(f){return arguments.length?(i=Array.from(f,Af),e()):i.slice()},t.range=function(f){return arguments.length?(r=Array.from(f),e()):r.slice()},t.rangeRound=function(f){return r=Array.from(f),l=qf,e()},t.clamp=function(f){return arguments.length?(d=f?!0:Re,e()):d!==Re},t.interpolate=function(f){return arguments.length?(l=f,e()):l},t.unknown=function(f){return arguments.length?(a=f,t):a},function(f,s){return n=f,o=s,e()}}function Cf(){return Et()(Re,Re)}function Of(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function Ur(i,r){if((l=(i=r?i.toExponential(r-1):i.toExponential()).indexOf("e"))<0)return null;var l,n=i.slice(0,l);return[n.length>1?n[0]+n.slice(2):n,+i.slice(l+1)]}function bn(i){return i=Ur(Math.abs(i)),i?i[1]:NaN}function Wf(i,r){return function(l,n){for(var o=l.length,a=[],d=0,g=i[0],m=0;o>0&&g>0&&(m+g+1>n&&(g=Math.max(1,n-m)),a.push(l.substring(o-=g,o+g)),!((m+=g+1)>n));)g=i[d=(d+1)%i.length];return a.reverse().join(r)}}function Hf(i){return function(r){return r.replace(/[0-9]/g,function(l){return i[+l]})}}var Vf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yn(i){if(!(r=Vf.exec(i)))throw new Error("invalid format: "+i);var r;return new Nt({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Yn.prototype=Nt.prototype;function Nt(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gf(i){e:for(var r=i.length,l=1,n=-1,o;l<r;++l)switch(i[l]){case".":n=o=l;break;case"0":n===0&&(n=l),o=l;break;default:if(!+i[l])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(o+1):i}var al;function Bf(i,r){var l=Ur(i,r);if(!l)return i+"";var n=l[0],o=l[1],a=o-(al=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,d=n.length;return a===d?n:a>d?n+new Array(a-d+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ur(i,Math.max(0,r+a-1))[0]}function xi(i,r){var l=Ur(i,r);if(!l)return i+"";var n=l[0],o=l[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const Ei={"%":(i,r)=>(i*100).toFixed(r),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Of,e:(i,r)=>i.toExponential(r),f:(i,r)=>i.toFixed(r),g:(i,r)=>i.toPrecision(r),o:i=>Math.round(i).toString(8),p:(i,r)=>xi(i*100,r),r:xi,s:Bf,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Ni(i){return i}var Ri=Array.prototype.map,Ti=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ff(i){var r=i.grouping===void 0||i.thousands===void 0?Ni:Wf(Ri.call(i.grouping,Number),i.thousands+""),l=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",o=i.decimal===void 0?".":i.decimal+"",a=i.numerals===void 0?Ni:Hf(Ri.call(i.numerals,String)),d=i.percent===void 0?"%":i.percent+"",g=i.minus===void 0?"":i.minus+"",m=i.nan===void 0?"NaN":i.nan+"";function u(t){t=Yn(t);var f=t.fill,s=t.align,c=t.sign,h=t.symbol,v=t.zero,w=t.width,y=t.comma,_=t.precision,p=t.trim,b=t.type;b==="n"?(y=!0,b="g"):Ei[b]||(_===void 0&&(_=12),p=!0,b="g"),(v||f==="0"&&s==="=")&&(v=!0,f="0",s="=");var k=h==="$"?l:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",R=h==="$"?n:/[%p]/.test(b)?d:"",P=Ei[b],C=/[defgprs%]/.test(b);_=_===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function W(A){var J=k,H=R,F,K,ce;if(b==="c")H=P(A)+H,A="";else{A=+A;var X=A<0||1/A<0;if(A=isNaN(A)?m:P(Math.abs(A),_),p&&(A=Gf(A)),X&&+A==0&&c!=="+"&&(X=!1),J=(X?c==="("?c:g:c==="-"||c==="("?"":c)+J,H=(b==="s"?Ti[8+al/3]:"")+H+(X&&c==="("?")":""),C){for(F=-1,K=A.length;++F<K;)if(ce=A.charCodeAt(F),48>ce||ce>57){H=(ce===46?o+A.slice(F+1):A.slice(F))+H,A=A.slice(0,F);break}}}y&&!v&&(A=r(A,1/0));var le=J.length+A.length+H.length,M=le<w?new Array(w-le+1).join(f):"";switch(y&&v&&(A=r(M+A,M.length?w-H.length:1/0),M=""),s){case"<":A=J+A+H+M;break;case"=":A=J+M+A+H;break;case"^":A=M.slice(0,le=M.length>>1)+J+A+H+M.slice(le);break;default:A=M+J+A+H;break}return a(A)}return W.toString=function(){return t+""},W}function e(t,f){var s=u((t=Yn(t),t.type="f",t)),c=Math.max(-8,Math.min(8,Math.floor(bn(f)/3)))*3,h=Math.pow(10,-c),v=Ti[8+c/3];return function(w){return s(h*w)+v}}return{format:u,formatPrefix:e}}var Ir,Rt,cl;Uf({thousands:",",grouping:[3],currency:["$",""]});function Uf(i){return Ir=Ff(i),Rt=Ir.format,cl=Ir.formatPrefix,Ir}function Qf(i){return Math.max(0,-bn(Math.abs(i)))}function Yf(i,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bn(r)/3)))*3-bn(Math.abs(i)))}function Zf(i,r){return i=Math.abs(i),r=Math.abs(r)-i,Math.max(0,bn(r)-bn(i))+1}function Kf(i,r,l,n){var o=rf(i,r,l),a;switch(n=Yn(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(i),Math.abs(r));return n.precision==null&&!isNaN(a=Yf(o,d))&&(n.precision=a),cl(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Zf(o,Math.max(Math.abs(i),Math.abs(r))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Qf(o))&&(n.precision=a-(n.type==="%")*2);break}}return Rt(n)}function dl(i){var r=i.domain;return i.ticks=function(l){var n=r();return ct(n[0],n[n.length-1],l??10)},i.tickFormat=function(l,n){var o=r();return Kf(o[0],o[o.length-1],l??10,n)},i.nice=function(l){l==null&&(l=10);var n=r(),o=0,a=n.length-1,d=n[o],g=n[a],m,u,e=10;for(g<d&&(u=d,d=g,g=u,u=o,o=a,a=u);e-- >0;){if(u=tl(d,g,l),u===m)return n[o]=d,n[a]=g,r(n);if(u>0)d=Math.floor(d/u)*u,g=Math.ceil(g/u)*u;else if(u<0)d=Math.ceil(d*u)/u,g=Math.floor(g*u)/u;else break;m=u}return i},i}function Hr(){var i=Cf();return i.copy=function(){return xt(i,Hr())},Kn.apply(i,arguments),dl(i)}function Jf(i,r){i=i.slice();var l=0,n=i.length-1,o=i[l],a=i[n],d;return a<o&&(d=l,l=n,n=d,d=o,o=a,a=d),i[l]=r.floor(o),i[n]=r.ceil(a),i}function Pi(i){return Math.log(i)}function qi(i){return Math.exp(i)}function Xf(i){return-Math.log(-i)}function Mf(i){return-Math.exp(-i)}function Sf(i){return isFinite(i)?+("1e"+i):i<0?0:i}function $f(i){return i===10?Sf:i===Math.E?Math.exp:r=>Math.pow(i,r)}function jf(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),r=>Math.log(r)/i)}function zi(i){return(r,l)=>-i(-r,l)}function eu(i){const r=i(Pi,qi),l=r.domain;let n=10,o,a;function d(){return o=jf(n),a=$f(n),l()[0]<0?(o=zi(o),a=zi(a),i(Xf,Mf)):i(Pi,qi),r}return r.base=function(g){return arguments.length?(n=+g,d()):n},r.domain=function(g){return arguments.length?(l(g),d()):l()},r.ticks=g=>{const m=l();let u=m[0],e=m[m.length-1];const t=e<u;t&&([u,e]=[e,u]);let f=o(u),s=o(e),c,h;const v=g==null?10:+g;let w=[];if(!(n%1)&&s-f<v){if(f=Math.floor(f),s=Math.ceil(s),u>0){for(;f<=s;++f)for(c=1;c<n;++c)if(h=f<0?c/a(-f):c*a(f),!(h<u)){if(h>e)break;w.push(h)}}else for(;f<=s;++f)for(c=n-1;c>=1;--c)if(h=f>0?c/a(-f):c*a(f),!(h<u)){if(h>e)break;w.push(h)}w.length*2<v&&(w=ct(u,e,v))}else w=ct(f,s,Math.min(s-f,v)).map(a);return t?w.reverse():w},r.tickFormat=(g,m)=>{if(g==null&&(g=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Yn(m)).precision==null&&(m.trim=!0),m=Rt(m)),g===1/0)return m;const u=Math.max(1,n*g/r.ticks().length);return e=>{let t=e/a(Math.round(o(e)));return t*n<n-.5&&(t*=n),t<=u?m(e):""}},r.nice=()=>l(Jf(l(),{floor:g=>a(Math.floor(o(g))),ceil:g=>a(Math.ceil(o(g)))})),r}function ml(){const i=eu(Et()).domain([1,10]);return i.copy=()=>xt(i,ml()).base(i.base()),Kn.apply(i,arguments),i}function Ai(i){return function(r){return r<0?-Math.pow(-r,i):Math.pow(r,i)}}function nu(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function ru(i){return i<0?-i*i:i*i}function tu(i){var r=i(Re,Re),l=1;function n(){return l===1?i(Re,Re):l===.5?i(nu,ru):i(Ai(l),Ai(1/l))}return r.exponent=function(o){return arguments.length?(l=+o,n()):l},dl(r)}function gl(){var i=tu(Et());return i.copy=function(){return xt(i,gl()).exponent(i.exponent())},Kn.apply(i,arguments),i}function iu(){return gl.apply(null,arguments).exponent(.5)}const Gn={x:Hr,y:Hr,z:Hr,r:iu};function lu(i){return i.constant?"symlog":i.base?"log":i.exponent?i.exponent()===.5?"sqrt":"pow":"other"}function Ii(i){return i}function ou(i){return r=>Math.log(i*r)}function fu(i){return r=>i*Math.exp(r)}function uu(i){return r=>Math.sign(r)*Math.log1p(Math.abs(r/i))}function su(i){return r=>Math.sign(r)*Math.expm1(Math.abs(r))*i}function Dr(i){return function(l){return l<0?-Math.pow(-l,i):Math.pow(l,i)}}function au(i){const r=lu(i);if(r==="log"){const l=Math.sign(i.domain()[0]);return{lift:ou(l),ground:fu(l),scaleType:r}}return r==="pow"?{lift:Dr(1),ground:Dr(1/1),scaleType:r}:r==="sqrt"?{lift:Dr(.5),ground:Dr(1/.5),scaleType:r}:r==="symlog"?{lift:uu(1),ground:su(1),scaleType:r}:{lift:Ii,ground:Ii,scaleType:r}}function cu(i,r){if(typeof i.range!="function")throw new Error("Scale method `range` must be a function");if(typeof i.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(r))return i.domain();i.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",i.domain()),i.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",i.range());const{lift:l,ground:n}=au(i),o=i.domain()[0],a=Object.prototype.toString.call(o)==="[object Date]",[d,g]=i.domain().map(s=>l(a?s.getTime():s)),[m,u]=i.range(),e=r[0]||0,t=r[1]||0,f=(g-d)/(Math.abs(u-m)-e-t);return[d-e*f,t*f+g].map(s=>n(a?new Date(s):s))}function du(i,r,l,n,o){let a,d;return o===!0?(a=0,d=100):(a=i==="r"?1:0,d=i==="y"?l:i==="r"?25:r),n===!0?[d,a]:[a,d]}function mu(i,r,l,n,o,a){return o?typeof o=="function"?o({width:r,height:l}):o:du(i,r,l,n,a)}function Lr(i){return function([l,n,o,a,d,g,m,u,e,t]){if(n===null)return null;const f=mu(i,m,u,g,e,t),s=l===Gn[i]?l():l.copy();return s.domain(o),(!s.interpolator||typeof s.interpolator=="function"&&s.interpolator().name.startsWith("identity"))&&s.range(f),a&&s.domain(cu(s,a)),(d===!0||typeof d=="number")&&(typeof s.nice=="function"?s.nice(typeof d=="number"?d:void 0):console.error(`[Layer Cake] You set \`${i}Nice: true\` but the ${i}Scale does not have a \`.nice\` method. Ignoring...`)),s}}function Cr([i,r]){return l=>{const n=i(l);return Array.isArray(n)?n.map(o=>r(o)):r(n)}}function Or([i]){if(typeof i=="function"){if(typeof i.range=="function")return i.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const gu=i=>({element:i[0]&4,width:i[0]&256,height:i[0]&512,aspectRatio:i[0]&1024,containerWidth:i[0]&128,containerHeight:i[0]&64}),Di=i=>({element:i[2],width:i[8],height:i[9],aspectRatio:i[10],containerWidth:i[7],containerHeight:i[6]});function Li(i){let r,l,n;const o=i[90].default,a=hn(o,i,i[89],Di);return{c(){r=I("div"),a&&a.c(),this.h()},l(d){r=D(d,"DIV",{class:!0});var g=q(r);a&&a.l(g),g.forEach(N),this.h()},h(){E(r,"class","layercake-container svelte-1ll0j6t"),Zn(()=>i[92].call(r)),fe(r,"position",i[5]),fe(r,"top",i[5]==="absolute"?"0":null),fe(r,"right",i[5]==="absolute"?"0":null),fe(r,"bottom",i[5]==="absolute"?"0":null),fe(r,"left",i[5]==="absolute"?"0":null),fe(r,"pointer-events",i[4]===!1?"none":null)},m(d,g){z(d,r,g),a&&a.m(r,null),i[91](r),l=Gl(r,i[92].bind(r)),n=!0},p(d,g){a&&a.p&&(!n||g[0]&1988|g[2]&134217728)&&vn(a,o,d,d[89],n?pn(o,d[89],g,gu):_n(d[89]),Di),g[0]&32&&fe(r,"position",d[5]),g[0]&32&&fe(r,"top",d[5]==="absolute"?"0":null),g[0]&32&&fe(r,"right",d[5]==="absolute"?"0":null),g[0]&32&&fe(r,"bottom",d[5]==="absolute"?"0":null),g[0]&32&&fe(r,"left",d[5]==="absolute"?"0":null),g[0]&16&&fe(r,"pointer-events",d[4]===!1?"none":null)},i(d){n||(O(a,d),n=!0)},o(d){V(a,d),n=!1},d(d){d&&N(r),a&&a.d(d),i[91](null),l()}}}function hu(i){let r,l,n=(i[3]===!0||typeof window<"u")&&Li(i);return{c(){n&&n.c(),r=me()},l(o){n&&n.l(o),r=me()},m(o,a){n&&n.m(o,a),z(o,r,a),l=!0},p(o,a){o[3]===!0||typeof window<"u"?n?(n.p(o,a),a[0]&8&&O(n,1)):(n=Li(o),n.c(),O(n,1),n.m(r.parentNode,r)):n&&(Pe(),V(n,1,1,()=>{n=null}),qe())},i(o){l||(O(n),l=!0)},o(o){V(n),l=!1},d(o){n&&n.d(o),o&&N(r)}}}function vu(i,r,l){let n,o,a,d,g,m,u,e,t,f,s,c,h,v,w,y,_,p,b,k,R,P,C,W,A,J,H,F,K,ce,X,le,M,ge,te,he,ie,pe,Ce,Ye,Ie,{$$slots:hl={},$$scope:Tt}=r,{ssr:Pt=!1}=r,{pointerEvents:qt=!0}=r,{position:zt="relative"}=r,{percentRange:Xn=!1}=r,{width:Zr=void 0}=r,{height:Kr=void 0}=r,{containerWidth:Ze=Zr||100}=r,{containerHeight:Ke=Kr||100}=r,{element:Mn=void 0}=r,{x:Je=void 0}=r,{y:Xe=void 0}=r,{z:Me=void 0}=r,{r:Se=void 0}=r,{data:$e=[]}=r,{xDomain:je=void 0}=r,{yDomain:en=void 0}=r,{zDomain:nn=void 0}=r,{rDomain:rn=void 0}=r,{xNice:Sn=!1}=r,{yNice:$n=!1}=r,{zNice:jn=!1}=r,{rNice:er=!1}=r,{xPadding:nr=void 0}=r,{yPadding:rr=void 0}=r,{zPadding:tr=void 0}=r,{rPadding:ir=void 0}=r,{xScale:lr=Gn.x}=r,{yScale:kn=Gn.y}=r,{zScale:or=Gn.z}=r,{rScale:fr=Gn.r}=r,{xRange:tn=void 0}=r,{yRange:ln=void 0}=r,{zRange:on=void 0}=r,{rRange:fn=void 0}=r,{xReverse:ur=!1}=r,{yReverse:sr=typeof kn.bandwidth!="function"}=r,{zReverse:ar=!1}=r,{rReverse:cr=!1}=r,{padding:dr={}}=r,{extents:mr={}}=r,{flatData:gr=void 0}=r,{custom:hr={}}=r,Jr=!1;Hl(()=>{Jr=!0});const S={},Oe=Y(Xn);L(i,Oe,x=>l(128,pe=x));const un=Y(Ze);L(i,un,x=>l(7,ie=x));const sn=Y(Ke);L(i,sn,x=>l(6,he=x));const vr=Y(rt(mr));L(i,vr,x=>l(127,te=x));const _r=Y($e);L(i,_r,x=>l(126,ge=x));const xn=Y(gr||$e);L(i,xn,x=>l(125,M=x));const pr=Y(dr);L(i,pr,x=>l(124,le=x));const an=Y(Ve(Je));L(i,an,x=>l(123,X=x));const cn=Y(Ve(Xe));L(i,cn,x=>l(122,ce=x));const dn=Y(Ve(Me));L(i,dn,x=>l(121,K=x));const mn=Y(Ve(Se));L(i,mn,x=>l(120,F=x));const yr=Y(je);L(i,yr,x=>l(119,H=x));const wr=Y(en);L(i,wr,x=>l(118,J=x));const br=Y(nn);L(i,br,x=>l(117,A=x));const kr=Y(rn);L(i,kr,x=>l(116,W=x));const En=Y(Sn);L(i,En,x=>l(115,C=x));const Nn=Y($n);L(i,Nn,x=>l(114,P=x));const Rn=Y(jn);L(i,Rn,x=>l(113,R=x));const Tn=Y(er);L(i,Tn,x=>l(112,k=x));const Pn=Y(ur);L(i,Pn,x=>l(111,b=x));const qn=Y(sr);L(i,qn,x=>l(110,p=x));const zn=Y(ar);L(i,zn,x=>l(109,_=x));const An=Y(cr);L(i,An,x=>l(108,y=x));const In=Y(nr);L(i,In,x=>l(107,w=x));const Dn=Y(rr);L(i,Dn,x=>l(106,v=x));const Ln=Y(tr);L(i,Ln,x=>l(105,h=x));const Cn=Y(ir);L(i,Cn,x=>l(104,c=x));const xr=Y(tn);L(i,xr,x=>l(103,s=x));const Er=Y(ln);L(i,Er,x=>l(102,f=x));const Nr=Y(on);L(i,Nr,x=>l(101,t=x));const Rr=Y(fn);L(i,Rr,x=>l(100,e=x));const On=Y(lr);L(i,On,x=>l(99,u=x));const Wn=Y(kn);L(i,Wn,x=>l(98,m=x));const Hn=Y(or);L(i,Hn,x=>l(97,g=x));const Vn=Y(fr);L(i,Vn,x=>l(96,d=x));const Tr=Y(S);L(i,Tr,x=>l(94,o=x));const Pr=Y(hr);L(i,Pr,x=>l(95,a=x));const At=re([an,cn,dn,mn],([x,Le,xe,de])=>{const Ge={};return x&&(Ge.x=x),Le&&(Ge.y=Le),xe&&(Ge.z=xe),de&&(Ge.r=de),Ge}),It=re([pr,un,sn],([x])=>Object.assign({top:0,right:0,bottom:0,left:0},x)),Dt=re([un,sn,It],([x,Le,xe])=>{const de={};return de.top=xe.top,de.right=x-xe.right,de.bottom=Le-xe.bottom,de.left=xe.left,de.width=de.right-de.left,de.height=de.bottom-de.top,de.width<=0&&Jr===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),de.height<=0&&Jr===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),de}),We=re([Dt],([x])=>x.width);L(i,We,x=>l(8,Ce=x));const He=re([Dt],([x])=>x.height);L(i,He,x=>l(9,Ye=x));const De=re([xn,At,vr,On,Wn,Vn,Hn],([x,Le,xe,de,Ge,Rl,Tl])=>{const Pl={x:de,y:Ge,r:Rl,z:Tl},et=rt(Le,xe),ql=Object.fromEntries(Object.keys(et).map(nt=>[nt,Pl[nt]]));return Object.keys(et).length>0?{...Yo(x,et,ql),...xe}:{}}),Lt=re([De,yr],qr("x")),Ct=re([De,wr],qr("y")),Ot=re([De,br],qr("z")),Wt=re([De,kr],qr("r")),Xr=re([On,De,Lt,In,En,Pn,We,He,xr,Oe],Lr("x")),vl=re([an,Xr],Cr),Mr=re([Wn,De,Ct,Dn,Nn,qn,We,He,Er,Oe],Lr("y")),_l=re([cn,Mr],Cr),Sr=re([Hn,De,Ot,Ln,Rn,zn,We,He,Nr,Oe],Lr("z")),pl=re([dn,Sr],Cr),$r=re([Vn,De,Wt,Cn,Tn,An,We,He,Rr,Oe],Lr("r")),yl=re([mn,$r],Cr),wl=re([Xr],Or),bl=re([Mr],Or),kl=re([Sr],Or),xl=re([$r],Or),jr=re([We,He],([x,Le])=>x/Le);L(i,jr,x=>l(10,Ie=x));function El(x){lt[x?"unshift":"push"](()=>{Mn=x,l(2,Mn)})}function Nl(){Ze=this.clientWidth,Ke=this.clientHeight,l(0,Ze),l(1,Ke)}return i.$$set=x=>{"ssr"in x&&l(3,Pt=x.ssr),"pointerEvents"in x&&l(4,qt=x.pointerEvents),"position"in x&&l(5,zt=x.position),"percentRange"in x&&l(51,Xn=x.percentRange),"width"in x&&l(52,Zr=x.width),"height"in x&&l(53,Kr=x.height),"containerWidth"in x&&l(0,Ze=x.containerWidth),"containerHeight"in x&&l(1,Ke=x.containerHeight),"element"in x&&l(2,Mn=x.element),"x"in x&&l(54,Je=x.x),"y"in x&&l(55,Xe=x.y),"z"in x&&l(56,Me=x.z),"r"in x&&l(57,Se=x.r),"data"in x&&l(58,$e=x.data),"xDomain"in x&&l(59,je=x.xDomain),"yDomain"in x&&l(60,en=x.yDomain),"zDomain"in x&&l(61,nn=x.zDomain),"rDomain"in x&&l(62,rn=x.rDomain),"xNice"in x&&l(63,Sn=x.xNice),"yNice"in x&&l(64,$n=x.yNice),"zNice"in x&&l(65,jn=x.zNice),"rNice"in x&&l(66,er=x.rNice),"xPadding"in x&&l(67,nr=x.xPadding),"yPadding"in x&&l(68,rr=x.yPadding),"zPadding"in x&&l(69,tr=x.zPadding),"rPadding"in x&&l(70,ir=x.rPadding),"xScale"in x&&l(71,lr=x.xScale),"yScale"in x&&l(72,kn=x.yScale),"zScale"in x&&l(73,or=x.zScale),"rScale"in x&&l(74,fr=x.rScale),"xRange"in x&&l(75,tn=x.xRange),"yRange"in x&&l(76,ln=x.yRange),"zRange"in x&&l(77,on=x.zRange),"rRange"in x&&l(78,fn=x.rRange),"xReverse"in x&&l(79,ur=x.xReverse),"yReverse"in x&&l(80,sr=x.yReverse),"zReverse"in x&&l(81,ar=x.zReverse),"rReverse"in x&&l(82,cr=x.rReverse),"padding"in x&&l(83,dr=x.padding),"extents"in x&&l(84,mr=x.extents),"flatData"in x&&l(85,gr=x.flatData),"custom"in x&&l(86,hr=x.custom),"$$scope"in x&&l(89,Tt=x.$$scope)},i.$$.update=()=>{i.$$.dirty[1]&8388608&&Je&&l(87,S.x=Je,S),i.$$.dirty[1]&16777216&&Xe&&l(87,S.y=Xe,S),i.$$.dirty[1]&33554432&&Me&&l(87,S.z=Me,S),i.$$.dirty[1]&67108864&&Se&&l(87,S.r=Se,S),i.$$.dirty[1]&268435456&&je&&l(87,S.xDomain=je,S),i.$$.dirty[1]&536870912&&en&&l(87,S.yDomain=en,S),i.$$.dirty[1]&1073741824&&nn&&l(87,S.zDomain=nn,S),i.$$.dirty[2]&1&&rn&&l(87,S.rDomain=rn,S),i.$$.dirty[2]&8192&&tn&&l(87,S.xRange=tn,S),i.$$.dirty[2]&16384&&ln&&l(87,S.yRange=ln,S),i.$$.dirty[2]&32768&&on&&l(87,S.zRange=on,S),i.$$.dirty[2]&65536&&fn&&l(87,S.rRange=fn,S),i.$$.dirty[1]&1048576&&Z(Oe,pe=Xn,pe),i.$$.dirty[0]&1&&Z(un,ie=Ze,ie),i.$$.dirty[0]&2&&Z(sn,he=Ke,he),i.$$.dirty[2]&4194304&&Z(vr,te=rt(mr),te),i.$$.dirty[1]&134217728&&Z(_r,ge=$e,ge),i.$$.dirty[1]&134217728|i.$$.dirty[2]&8388608&&Z(xn,M=gr||$e,M),i.$$.dirty[2]&2097152&&Z(pr,le=dr,le),i.$$.dirty[1]&8388608&&Z(an,X=Ve(Je),X),i.$$.dirty[1]&16777216&&Z(cn,ce=Ve(Xe),ce),i.$$.dirty[1]&33554432&&Z(dn,K=Ve(Me),K),i.$$.dirty[1]&67108864&&Z(mn,F=Ve(Se),F),i.$$.dirty[1]&268435456&&Z(yr,H=je,H),i.$$.dirty[1]&536870912&&Z(wr,J=en,J),i.$$.dirty[1]&1073741824&&Z(br,A=nn,A),i.$$.dirty[2]&1&&Z(kr,W=rn,W),i.$$.dirty[2]&2&&Z(En,C=Sn,C),i.$$.dirty[2]&4&&Z(Nn,P=$n,P),i.$$.dirty[2]&8&&Z(Rn,R=jn,R),i.$$.dirty[2]&16&&Z(Tn,k=er,k),i.$$.dirty[2]&131072&&Z(Pn,b=ur,b),i.$$.dirty[2]&262144&&Z(qn,p=sr,p),i.$$.dirty[2]&524288&&Z(zn,_=ar,_),i.$$.dirty[2]&1048576&&Z(An,y=cr,y),i.$$.dirty[2]&32&&Z(In,w=nr,w),i.$$.dirty[2]&64&&Z(Dn,v=rr,v),i.$$.dirty[2]&128&&Z(Ln,h=tr,h),i.$$.dirty[2]&256&&Z(Cn,c=ir,c),i.$$.dirty[2]&8192&&Z(xr,s=tn,s),i.$$.dirty[2]&16384&&Z(Er,f=ln,f),i.$$.dirty[2]&32768&&Z(Nr,t=on,t),i.$$.dirty[2]&65536&&Z(Rr,e=fn,e),i.$$.dirty[2]&512&&Z(On,u=lr,u),i.$$.dirty[2]&1024&&Z(Wn,m=kn,m),i.$$.dirty[2]&2048&&Z(Hn,g=or,g),i.$$.dirty[2]&4096&&Z(Vn,d=fr,d),i.$$.dirty[2]&16777216&&Z(Pr,a=hr,a),i.$$.dirty[2]&33554432&&Z(Tr,o=S,o),i.$$.dirty[2]&67108864&&Vl("LayerCake",n)},l(88,n={activeGetters:At,width:We,height:He,percentRange:Oe,aspectRatio:jr,containerWidth:un,containerHeight:sn,x:an,y:cn,z:dn,r:mn,custom:Pr,data:_r,xNice:En,yNice:Nn,zNice:Rn,rNice:Tn,xReverse:Pn,yReverse:qn,zReverse:zn,rReverse:An,xPadding:In,yPadding:Dn,zPadding:Ln,rPadding:Cn,padding:It,flatData:xn,extents:De,xDomain:Lt,yDomain:Ct,zDomain:Ot,rDomain:Wt,xRange:wl,yRange:bl,zRange:kl,rRange:xl,config:Tr,xScale:Xr,xGet:vl,yScale:Mr,yGet:_l,zScale:Sr,zGet:pl,rScale:$r,rGet:yl}),[Ze,Ke,Mn,Pt,qt,zt,he,ie,Ce,Ye,Ie,Oe,un,sn,vr,_r,xn,pr,an,cn,dn,mn,yr,wr,br,kr,En,Nn,Rn,Tn,Pn,qn,zn,An,In,Dn,Ln,Cn,xr,Er,Nr,Rr,On,Wn,Hn,Vn,Tr,Pr,We,He,jr,Xn,Zr,Kr,Je,Xe,Me,Se,$e,je,en,nn,rn,Sn,$n,jn,er,nr,rr,tr,ir,lr,kn,or,fr,tn,ln,on,fn,ur,sr,ar,cr,dr,mr,gr,hr,S,n,Tt,hl,El,Nl]}class _u extends ue{constructor(r){super(),se(this,r,vu,hu,ae,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const pu=i=>({element:i&1}),Ci=i=>({element:i[0]}),yu=i=>({element:i&1}),Oi=i=>({element:i[0]});function wu(i){let r,l,n,o,a;const d=i[12].defs,g=hn(d,i,i[11],Oi),m=i[12].default,u=hn(m,i,i[11],Ci);return{c(){r=ve("svg"),l=ve("defs"),g&&g.c(),n=ve("g"),u&&u.c(),this.h()},l(e){r=_e(e,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var t=q(r);l=_e(t,"defs",{});var f=q(l);g&&g.l(f),f.forEach(N),n=_e(t,"g",{class:!0,transform:!0});var s=q(n);u&&u.l(s),s.forEach(N),t.forEach(N),this.h()},h(){E(n,"class","layercake-layout-svg_g"),E(n,"transform",o="translate("+i[7].left+", "+i[7].top+")"),E(r,"class","layercake-layout-svg svelte-17l4rdd"),E(r,"viewBox",i[4]),E(r,"width",i[5]),E(r,"height",i[6]),fe(r,"z-index",i[2]),fe(r,"pointer-events",i[3]===!1?"none":null)},m(e,t){z(e,r,t),T(r,l),g&&g.m(l,null),T(r,n),u&&u.m(n,null),i[13](n),i[14](r),a=!0},p(e,[t]){g&&g.p&&(!a||t&2049)&&vn(g,d,e,e[11],a?pn(d,e[11],t,yu):_n(e[11]),Oi),u&&u.p&&(!a||t&2049)&&vn(u,m,e,e[11],a?pn(m,e[11],t,pu):_n(e[11]),Ci),(!a||t&128&&o!==(o="translate("+e[7].left+", "+e[7].top+")"))&&E(n,"transform",o),(!a||t&16)&&E(r,"viewBox",e[4]),(!a||t&32)&&E(r,"width",e[5]),(!a||t&64)&&E(r,"height",e[6]),t&4&&fe(r,"z-index",e[2]),t&8&&fe(r,"pointer-events",e[3]===!1?"none":null)},i(e){a||(O(g,e),O(u,e),a=!0)},o(e){V(g,e),V(u,e),a=!1},d(e){e&&N(r),g&&g.d(e),u&&u.d(e),i[13](null),i[14](null)}}}function bu(i,r,l){let n,o,a,{$$slots:d={},$$scope:g}=r,{element:m=void 0}=r,{innerElement:u=void 0}=r,{zIndex:e=void 0}=r,{pointerEvents:t=void 0}=r,{viewBox:f=void 0}=r;const{containerWidth:s,containerHeight:c,padding:h}=Yr("LayerCake");L(i,s,y=>l(5,n=y)),L(i,c,y=>l(6,o=y)),L(i,h,y=>l(7,a=y));function v(y){lt[y?"unshift":"push"](()=>{u=y,l(1,u)})}function w(y){lt[y?"unshift":"push"](()=>{m=y,l(0,m)})}return i.$$set=y=>{"element"in y&&l(0,m=y.element),"innerElement"in y&&l(1,u=y.innerElement),"zIndex"in y&&l(2,e=y.zIndex),"pointerEvents"in y&&l(3,t=y.pointerEvents),"viewBox"in y&&l(4,f=y.viewBox),"$$scope"in y&&l(11,g=y.$$scope)},[m,u,e,t,f,n,o,a,s,c,h,g,d,v,w]}class Wi extends ue{constructor(r){super(),se(this,r,bu,wu,ae,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Hi(i,r,l){const n=i.slice();return n[20]=r[l],n[22]=l,n}function Vi(i){let r,l;return{c(){r=ve("line"),this.h()},l(n){r=_e(n,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),q(r).forEach(N),this.h()},h(){E(r,"class","gridline svelte-1eat80j"),E(r,"y1",l=i[12]*-1),E(r,"y2","0"),E(r,"x1","0"),E(r,"x2","0")},m(n,o){z(n,r,o)},p(n,o){o&4096&&l!==(l=n[12]*-1)&&E(r,"y1",l)},d(n){n&&N(r)}}}function Gi(i){let r,l,n;return{c(){r=ve("line"),this.h()},l(o){r=_e(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),q(r).forEach(N),this.h()},h(){E(r,"class","tick-mark svelte-1eat80j"),E(r,"y1",0),E(r,"y2",6),E(r,"x1",l=i[5]||i[8]?i[9].bandwidth()/2:0),E(r,"x2",n=i[5]||i[8]?i[9].bandwidth()/2:0)},m(o,a){z(o,r,a)},p(o,a){a&800&&l!==(l=o[5]||o[8]?o[9].bandwidth()/2:0)&&E(r,"x1",l),a&800&&n!==(n=o[5]||o[8]?o[9].bandwidth()/2:0)&&E(r,"x2",n)},d(o){o&&N(r)}}}function Bi(i,r){let l,n,o,a=r[4](r[20])+"",d,g,m,u,e,t=r[0]!==!1&&Vi(r),f=r[1]===!0&&Gi(r);return{key:i,first:null,c(){l=ve("g"),t&&t.c(),n=me(),f&&f.c(),o=ve("text"),d=G(a),this.h()},l(s){l=_e(s,"g",{class:!0,transform:!0});var c=q(l);t&&t.l(c),n=me(),f&&f.l(c),o=_e(c,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,class:!0});var h=q(o);d=B(h,a),h.forEach(N),c.forEach(N),this.h()},h(){E(o,"x",g=r[5]||r[8]?r[9].bandwidth()/2:0),E(o,"y",r[6]),E(o,"dx",""),E(o,"dy",""),E(o,"text-anchor",m=r[18](r[22])),E(o,"class","svelte-1eat80j"),E(l,"class",u="tick tick-"+r[22]+" svelte-1eat80j"),E(l,"transform",e="translate("+r[9](r[20])+","+Math.max(...r[11])+")"),this.first=l},m(s,c){z(s,l,c),t&&t.m(l,null),T(l,n),f&&f.m(l,null),T(l,o),T(o,d)},p(s,c){r=s,r[0]!==!1?t?t.p(r,c):(t=Vi(r),t.c(),t.m(l,n)):t&&(t.d(1),t=null),r[1]===!0?f?f.p(r,c):(f=Gi(r),f.c(),f.m(l,o)):f&&(f.d(1),f=null),c&1040&&a!==(a=r[4](r[20])+"")&&be(d,a),c&800&&g!==(g=r[5]||r[8]?r[9].bandwidth()/2:0)&&E(o,"x",g),c&64&&E(o,"y",r[6]),c&1024&&m!==(m=r[18](r[22]))&&E(o,"text-anchor",m),c&1024&&u!==(u="tick tick-"+r[22]+" svelte-1eat80j")&&E(l,"class",u),c&3584&&e!==(e="translate("+r[9](r[20])+","+Math.max(...r[11])+")")&&E(l,"transform",e)},d(s){s&&N(l),t&&t.d(),f&&f.d()}}}function Fi(i){let r,l,n;return{c(){r=ve("line"),this.h()},l(o){r=_e(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),q(r).forEach(N),this.h()},h(){E(r,"class","baseline svelte-1eat80j"),E(r,"y1",l=i[12]+.5),E(r,"y2",n=i[12]+.5),E(r,"x1","0"),E(r,"x2",i[13])},m(o,a){z(o,r,a)},p(o,a){a&4096&&l!==(l=o[12]+.5)&&E(r,"y1",l),a&4096&&n!==(n=o[12]+.5)&&E(r,"y2",n),a&8192&&E(r,"x2",o[13])},d(o){o&&N(r)}}}function ku(i){let r,l,n=[],o=new Map,a,d,g,m,u,e=i[10];const t=s=>s[20];for(let s=0;s<e.length;s+=1){let c=Hi(i,e,s),h=t(c);o.set(h,n[s]=Bi(h,c))}let f=i[2]===!0&&Fi(i);return{c(){r=G(`Test

`),l=ve("g");for(let s=0;s<n.length;s+=1)n[s].c();a=me(),f&&f.c(),d=ve("text"),g=G(i[7]),this.h()},l(s){r=B(s,`Test

`),l=_e(s,"g",{class:!0});var c=q(l);for(let v=0;v<n.length;v+=1)n[v].l(c);a=me(),f&&f.l(c),d=_e(c,"text",{class:!0,y:!0,x:!0});var h=q(d);g=B(h,i[7]),h.forEach(N),c.forEach(N),this.h()},h(){E(d,"class","axis-label svelte-1eat80j"),E(d,"y",m=i[12]+35),E(d,"x",u=i[13]/2),E(l,"class","axis x-axis svelte-1eat80j"),Ee(l,"snapTicks",i[3])},m(s,c){z(s,r,c),z(s,l,c);for(let h=0;h<n.length;h+=1)n[h].m(l,null);T(l,a),f&&f.m(l,null),T(l,d),T(d,g)},p(s,[c]){c&270195&&(e=s[10],n=vt(n,c,t,1,s,e,o,l,$i,Bi,a,Hi)),s[2]===!0?f?f.p(s,c):(f=Fi(s),f.c(),f.m(l,d)):f&&(f.d(1),f=null),c&128&&be(g,s[7]),c&4096&&m!==(m=s[12]+35)&&E(d,"y",m),c&8192&&u!==(u=s[13]/2)&&E(d,"x",u),c&8&&Ee(l,"snapTicks",s[3])},i:oe,o:oe,d(s){s&&N(r),s&&N(l);for(let c=0;c<n.length;c+=1)n[c].d();f&&f.d()}}}function xu(i,r,l){let n,o,a,d,g,m;const{width:u,height:e,xScale:t,yRange:f}=Yr("LayerCake");L(i,u,R=>l(13,m=R)),L(i,e,R=>l(12,g=R)),L(i,t,R=>l(9,a=R)),L(i,f,R=>l(11,d=R));let{gridlines:s=!0}=r,{tickMarks:c=!1}=r,{baseline:h=!1}=r,{snapTicks:v=!1}=r,{formatTick:w=R=>R}=r,{ticks:y=void 0}=r,{xTick:_=0}=r,{yTick:p=16}=r,{xAxisTitle:b=""}=r;function k(R){if(v===!0){if(R===0)return"start";if(R===o.length-1)return"end"}return"middle"}return i.$$set=R=>{"gridlines"in R&&l(0,s=R.gridlines),"tickMarks"in R&&l(1,c=R.tickMarks),"baseline"in R&&l(2,h=R.baseline),"snapTicks"in R&&l(3,v=R.snapTicks),"formatTick"in R&&l(4,w=R.formatTick),"ticks"in R&&l(19,y=R.ticks),"xTick"in R&&l(5,_=R.xTick),"yTick"in R&&l(6,p=R.yTick),"xAxisTitle"in R&&l(7,b=R.xAxisTitle)},i.$$.update=()=>{i.$$.dirty&512&&l(8,n=typeof a.bandwidth=="function"),i.$$.dirty&525056&&l(10,o=Array.isArray(y)?y:n?a.domain():typeof y=="function"?y(a.ticks()):a.ticks(y))},[s,c,h,v,w,_,p,b,n,a,o,d,g,m,u,e,t,f,k,y]}class Eu extends ue{constructor(r){super(),se(this,r,xu,ku,ae,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:19,xTick:5,yTick:6,xAxisTitle:7})}}function Ui(i,r,l){const n=i.slice();return n[17]=r[l],n}function Qi(i){let r,l,n;return{c(){r=ve("line"),this.h()},l(o){r=_e(o,"line",{class:!0,x2:!0,y1:!0,y2:!0}),q(r).forEach(N),this.h()},h(){E(r,"class","gridline svelte-qjm35e"),E(r,"x2","100%"),E(r,"y1",l=i[4]+(i[8]?i[9].bandwidth()/2:0)),E(r,"y2",n=i[4]+(i[8]?i[9].bandwidth()/2:0))},m(o,a){z(o,r,a)},p(o,a){a&784&&l!==(l=o[4]+(o[8]?o[9].bandwidth()/2:0))&&E(r,"y1",l),a&784&&n!==(n=o[4]+(o[8]?o[9].bandwidth()/2:0))&&E(r,"y2",n)},d(o){o&&N(r)}}}function Yi(i){let r,l,n,o;return{c(){r=ve("line"),this.h()},l(a){r=_e(a,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),q(r).forEach(N),this.h()},h(){E(r,"class","tick-mark svelte-qjm35e"),E(r,"x1","0"),E(r,"x2",l=i[8]?-6:6),E(r,"y1",n=i[4]+(i[8]?i[9].bandwidth()/2:0)),E(r,"y2",o=i[4]+(i[8]?i[9].bandwidth()/2:0))},m(a,d){z(a,r,d)},p(a,d){d&256&&l!==(l=a[8]?-6:6)&&E(r,"x2",l),d&784&&n!==(n=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(r,"y1",n),d&784&&o!==(o=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(r,"y2",o)},d(a){a&&N(r)}}}function Zi(i,r){let l,n,o,a=r[2](r[17])+"",d,g,m,u,e,t,f=r[0]!==!1&&Qi(r),s=r[1]===!0&&Yi(r);return{key:i,first:null,c(){l=ve("g"),f&&f.c(),n=me(),s&&s.c(),o=ve("text"),d=G(a),this.h()},l(c){l=_e(c,"g",{class:!0,transform:!0});var h=q(l);f&&f.l(h),n=me(),s&&s.l(h),o=_e(h,"text",{x:!0,y:!0,dx:!0,dy:!0,style:!0,class:!0});var v=q(o);d=B(v,a),v.forEach(N),h.forEach(N),this.h()},h(){E(o,"x",r[3]),E(o,"y",g=r[4]+(r[8]?r[9].bandwidth()/2:0)),E(o,"dx",m=r[8]?-9:r[5]),E(o,"dy",u=r[8]?4:r[6]),fe(o,"text-anchor",r[8]?"end":r[7]),E(o,"class","svelte-qjm35e"),E(l,"class",e="tick tick-"+r[17]+" svelte-qjm35e"),E(l,"transform",t="translate("+(r[12][0]+(r[8]?r[11].left:0))+", "+r[9](r[17])+")"),this.first=l},m(c,h){z(c,l,h),f&&f.m(l,null),T(l,n),s&&s.m(l,null),T(l,o),T(o,d)},p(c,h){r=c,r[0]!==!1?f?f.p(r,h):(f=Qi(r),f.c(),f.m(l,n)):f&&(f.d(1),f=null),r[1]===!0?s?s.p(r,h):(s=Yi(r),s.c(),s.m(l,o)):s&&(s.d(1),s=null),h&1028&&a!==(a=r[2](r[17])+"")&&be(d,a),h&8&&E(o,"x",r[3]),h&784&&g!==(g=r[4]+(r[8]?r[9].bandwidth()/2:0))&&E(o,"y",g),h&288&&m!==(m=r[8]?-9:r[5])&&E(o,"dx",m),h&320&&u!==(u=r[8]?4:r[6])&&E(o,"dy",u),h&384&&fe(o,"text-anchor",r[8]?"end":r[7]),h&1024&&e!==(e="tick tick-"+r[17]+" svelte-qjm35e")&&E(l,"class",e),h&7936&&t!==(t="translate("+(r[12][0]+(r[8]?r[11].left:0))+", "+r[9](r[17])+")")&&E(l,"transform",t)},d(c){c&&N(l),f&&f.d(),s&&s.d()}}}function Nu(i){let r,l=[],n=new Map,o,a=i[10];const d=g=>g[17];for(let g=0;g<a.length;g+=1){let m=Ui(i,a,g),u=d(m);n.set(u,l[g]=Zi(u,m))}return{c(){r=ve("g");for(let g=0;g<l.length;g+=1)l[g].c();this.h()},l(g){r=_e(g,"g",{class:!0,transform:!0});var m=q(r);for(let u=0;u<l.length;u+=1)l[u].l(m);m.forEach(N),this.h()},h(){E(r,"class","axis y-axis"),E(r,"transform",o="translate("+-i[11].left+", 0)")},m(g,m){z(g,r,m);for(let u=0;u<l.length;u+=1)l[u].m(r,null)},p(g,[m]){m&8191&&(a=g[10],l=vt(l,m,d,1,g,a,n,r,$i,Zi,null,Ui)),m&2048&&o!==(o="translate("+-g[11].left+", 0)")&&E(r,"transform",o)},i:oe,o:oe,d(g){g&&N(r);for(let m=0;m<l.length;m+=1)l[m].d()}}}function Ru(i,r,l){let n,o,a,d,g;const{padding:m,xRange:u,yScale:e}=Yr("LayerCake");L(i,m,p=>l(11,d=p)),L(i,u,p=>l(12,g=p)),L(i,e,p=>l(9,a=p));let{gridlines:t=!0}=r,{tickMarks:f=!1}=r,{formatTick:s=p=>p}=r,{ticks:c=4}=r,{xTick:h=0}=r,{yTick:v=0}=r,{dxTick:w=0}=r,{dyTick:y=-4}=r,{textAnchor:_="start"}=r;return i.$$set=p=>{"gridlines"in p&&l(0,t=p.gridlines),"tickMarks"in p&&l(1,f=p.tickMarks),"formatTick"in p&&l(2,s=p.formatTick),"ticks"in p&&l(16,c=p.ticks),"xTick"in p&&l(3,h=p.xTick),"yTick"in p&&l(4,v=p.yTick),"dxTick"in p&&l(5,w=p.dxTick),"dyTick"in p&&l(6,y=p.dyTick),"textAnchor"in p&&l(7,_=p.textAnchor)},i.$$.update=()=>{i.$$.dirty&512&&l(8,n=typeof a.bandwidth=="function"),i.$$.dirty&66304&&l(10,o=Array.isArray(c)?c:n?a.domain():typeof c=="function"?c(a.ticks()):a.ticks(c))},[t,f,s,h,v,w,y,_,n,a,o,d,g,m,u,e,c]}class Tu extends ue{constructor(r){super(),se(this,r,Ru,Nu,ae,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function Ki(i,r,l){const n=i.slice();return n[14]=r[l],n}function Ji(i){let r,l,n;return{c(){r=ve("circle"),this.h()},l(o){r=_e(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),q(r).forEach(N),this.h()},h(){E(r,"cx",l=i[5](i[14])+(i[6].bandwidth?i[6].bandwidth()/2:0)),E(r,"cy",n=i[7](i[14])+(i[8].bandwidth?i[8].bandwidth()/2:0)),E(r,"r",i[0]),E(r,"fill",i[1]),E(r,"stroke",i[2]),E(r,"stroke-width",i[3])},m(o,a){z(o,r,a)},p(o,a){a&112&&l!==(l=o[5](o[14])+(o[6].bandwidth?o[6].bandwidth()/2:0))&&E(r,"cx",l),a&400&&n!==(n=o[7](o[14])+(o[8].bandwidth?o[8].bandwidth()/2:0))&&E(r,"cy",n),a&1&&E(r,"r",o[0]),a&2&&E(r,"fill",o[1]),a&4&&E(r,"stroke",o[2]),a&8&&E(r,"stroke-width",o[3])},d(o){o&&N(r)}}}function Pu(i){let r,l=i[4],n=[];for(let o=0;o<l.length;o+=1)n[o]=Ji(Ki(i,l,o));return{c(){r=ve("g");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){r=_e(o,"g",{class:!0});var a=q(r);for(let d=0;d<n.length;d+=1)n[d].l(a);a.forEach(N),this.h()},h(){E(r,"class","scatter-group")},m(o,a){z(o,r,a);for(let d=0;d<n.length;d+=1)n[d].m(r,null)},p(o,[a]){if(a&511){l=o[4];let d;for(d=0;d<l.length;d+=1){const g=Ki(o,l,d);n[d]?n[d].p(g,a):(n[d]=Ji(g),n[d].c(),n[d].m(r,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=l.length}},i:oe,o:oe,d(o){o&&N(r),ze(n,o)}}}function qu(i,r,l){let n,o,a,d,g;const{data:m,xGet:u,yGet:e,xScale:t,yScale:f}=Yr("LayerCake");L(i,m,w=>l(4,n=w)),L(i,u,w=>l(5,o=w)),L(i,e,w=>l(7,d=w)),L(i,t,w=>l(6,a=w)),L(i,f,w=>l(8,g=w));let{r:s=5}=r,{fill:c="#0cf"}=r,{stroke:h="#000"}=r,{strokeWidth:v=0}=r;return i.$$set=w=>{"r"in w&&l(0,s=w.r),"fill"in w&&l(1,c=w.fill),"stroke"in w&&l(2,h=w.stroke),"strokeWidth"in w&&l(3,v=w.strokeWidth)},[s,c,h,v,n,o,a,d,g,m,u,e,t,f]}class zu extends ue{constructor(r){super(),se(this,r,qu,Pu,ae,{r:0,fill:1,stroke:2,strokeWidth:3})}}function Au(i){let r,l,n,o;return r=new Eu({props:{ticks:i[1],formatTick:i[10],xAxisTitle:i[4]+"/L"}}),n=new Tu({}),{c(){$(r.$$.fragment),l=U(),$(n.$$.fragment)},l(a){j(r.$$.fragment,a),l=Q(a),j(n.$$.fragment,a)},m(a,d){ee(r,a,d),z(a,l,d),ee(n,a,d),o=!0},p(a,d){const g={};d&2&&(g.ticks=a[1]),d&16&&(g.xAxisTitle=a[4]+"/L"),r.$set(g)},i(a){o||(O(r.$$.fragment,a),O(n.$$.fragment,a),o=!0)},o(a){V(r.$$.fragment,a),V(n.$$.fragment,a),o=!1},d(a){ne(r,a),a&&N(l),ne(n,a)}}}function Iu(i){let r,l;return r=new zu({props:{r:"6.5"}}),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p:oe,i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Du(i){let r,l,n,o;return r=new Wi({props:{$$slots:{default:[Au]},$$scope:{ctx:i}}}),n=new Wi({props:{$$slots:{default:[Iu]},$$scope:{ctx:i}}}),{c(){$(r.$$.fragment),l=U(),$(n.$$.fragment)},l(a){j(r.$$.fragment,a),l=Q(a),j(n.$$.fragment,a)},m(a,d){ee(r,a,d),z(a,l,d),ee(n,a,d),o=!0},p(a,d){const g={};d&2066&&(g.$$scope={dirty:d,ctx:a}),r.$set(g);const m={};d&2048&&(m.$$scope={dirty:d,ctx:a}),n.$set(m)},i(a){o||(O(r.$$.fragment,a),O(n.$$.fragment,a),o=!0)},o(a){V(r.$$.fragment,a),V(n.$$.fragment,a),o=!1},d(a){ne(r,a),a&&N(l),ne(n,a)}}}function Lu(i){let r,l,n;return l=new _u({props:{x:i[3],y:Cu,yScale:lf(),yDomain:i[5],xScale:ml(),xDomain:i[2],data:i[0],$$slots:{default:[Du]},$$scope:{ctx:i}}}),{c(){r=I("div"),$(l.$$.fragment),this.h()},l(o){r=D(o,"DIV",{class:!0,style:!0});var a=q(r);j(l.$$.fragment,a),a.forEach(N),this.h()},h(){E(r,"class","chart-container svelte-b6xev8"),fe(r,"height",i[6]+"px")},m(o,a){z(o,r,a),ee(l,r,null),n=!0},p(o,[a]){const d={};a&8&&(d.x=o[3]),a&32&&(d.yDomain=o[5]),a&4&&(d.xDomain=o[2]),a&1&&(d.data=o[0]),a&2066&&(d.$$scope={dirty:a,ctx:o}),l.$set(d),(!n||a&64)&&fe(r,"height",o[6]+"px")},i(o){n||(O(l.$$.fragment,o),n=!0)},o(o){V(l.$$.fragment,o),n=!1},d(o){o&&N(r),ne(l)}}}const Cu="sample";function Ou(i,r,l){let n,o,{plotData:a}=r,{titerMethod:d}=r,g,m,u,e,t,f;const s=c=>"1e"+Math.log10(c);return i.$$set=c=>{"plotData"in c&&l(0,a=c.plotData),"titerMethod"in c&&l(7,d=c.titerMethod)},i.$$.update=()=>{if(i.$$.dirty&1&&l(6,n=a.length*50+100),i.$$.dirty&1&&l(5,o=a.map(c=>c.sample)),i.$$.dirty&899){l(1,u=[]),l(3,t=d),l(9,m=0),l(8,g=1/0),a.forEach(c=>{c[d]<g&&l(8,g=c[d]),c[d]>m&&l(9,m=c[d])});for(let c=String(g).split(".")[0].length-2;c<String(m).split(".")[0].length+1;c++)l(1,u=[10**c,...u]);l(1,u=u.reverse()),l(2,e=[u[0],u[u.length-1]]),l(4,f="TCID50"),d=="ms_titer_ul"&&l(4,f="SIN")}},[a,u,e,t,f,o,n,d,g,m,s]}class Wu extends ue{constructor(r){super(),se(this,r,Ou,Lu,ae,{plotData:0,titerMethod:7})}}function Xi(i){let r,l,n,o,a,d,g,m,u,e;r=new Wu({props:{plotData:i[6],titerMethod:i[5]}}),d=new Ho({props:{data:i[2]}});let t=i[4].length>0&&Mi(i),f=i[3].length>0&&Si(i);return{c(){$(r.$$.fragment),l=U(),n=I("h1"),o=G("Results Table"),a=U(),$(d.$$.fragment),g=U(),t&&t.c(),m=U(),f&&f.c(),u=me(),this.h()},l(s){j(r.$$.fragment,s),l=Q(s),n=D(s,"H1",{class:!0});var c=q(n);o=B(c,"Results Table"),c.forEach(N),a=Q(s),j(d.$$.fragment,s),g=Q(s),t&&t.l(s),m=Q(s),f&&f.l(s),u=me(),this.h()},h(){E(n,"class","svelte-jm1qlx")},m(s,c){ee(r,s,c),z(s,l,c),z(s,n,c),T(n,o),z(s,a,c),ee(d,s,c),z(s,g,c),t&&t.m(s,c),z(s,m,c),f&&f.m(s,c),z(s,u,c),e=!0},p(s,c){const h={};c&64&&(h.plotData=s[6]),c&32&&(h.titerMethod=s[5]),r.$set(h);const v={};c&4&&(v.data=s[2]),d.$set(v),s[4].length>0?t?(t.p(s,c),c&16&&O(t,1)):(t=Mi(s),t.c(),O(t,1),t.m(m.parentNode,m)):t&&(Pe(),V(t,1,1,()=>{t=null}),qe()),s[3].length>0?f?f.p(s,c):(f=Si(s),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i(s){e||(O(r.$$.fragment,s),O(d.$$.fragment,s),O(t),e=!0)},o(s){V(r.$$.fragment,s),V(d.$$.fragment,s),V(t),e=!1},d(s){ne(r,s),s&&N(l),s&&N(n),s&&N(a),ne(d,s),s&&N(g),t&&t.d(s),s&&N(m),f&&f.d(s),s&&N(u)}}}function Mi(i){let r,l;return r=new wn({props:{type:"secondary",$$slots:{default:[Hu]},$$scope:{ctx:i}}}),r.$on("click",i[8]),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p(n,o){const a={};o&8192&&(a.$$scope={dirty:o,ctx:n}),r.$set(a)},i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Hu(i){let r;return{c(){r=G("Download CSV")},l(l){r=B(l,"Download CSV")},m(l,n){z(l,r,n)},d(l){l&&N(r)}}}function Si(i){let r,l,n,o,a;return{c(){r=I("h3"),l=G("Warnings"),n=G(`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=G(i[7]),a=G("."),this.h()},l(d){r=D(d,"H3",{class:!0});var g=q(r);l=B(g,"Warnings"),g.forEach(N),n=B(d,`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=B(d,i[7]),a=B(d,"."),this.h()},h(){E(r,"class","warning svelte-jm1qlx")},m(d,g){z(d,r,g),T(r,l),z(d,n,g),z(d,o,g),z(d,a,g)},p(d,g){g&128&&be(o,d[7])},d(d){d&&N(r),d&&N(n),d&&N(o),d&&N(a)}}}function Vu(i){let r,l,n,o,a,d,g,m,u,e,t,f,s,c,h,v,w,y,_,p,b,k,R,P,C,W,A,J,H=i[4]!=null&&Xi(i);return{c(){r=I("div"),l=I("h1"),n=G("TCID50 Calculator Settings"),o=U(),a=I("p"),d=G(`The following settings can be adjusted to match the experimental parameters.
		`),g=I("ul"),m=I("li"),u=G("Volume (L): Specify the infection volume in the first row (row A)."),e=U(),t=I("li"),f=G("Dilution: Specify the dilution factor between successive rows."),s=U(),c=I("div"),h=G(`Volume (L):
			`),v=I("input"),w=G(`
			Dilution:
			`),y=I("input"),_=G(`
			Method:
			`),p=I("select"),b=I("option"),k=G("Reed-Meunch"),R=I("option"),P=G("MidSin"),C=U(),H&&H.c(),this.h()},l(F){r=D(F,"DIV",{class:!0});var K=q(r);l=D(K,"H1",{class:!0});var ce=q(l);n=B(ce,"TCID50 Calculator Settings"),ce.forEach(N),o=Q(K),a=D(K,"P",{});var X=q(a);d=B(X,`The following settings can be adjusted to match the experimental parameters.
		`),X.forEach(N),g=D(K,"UL",{class:!0});var le=q(g);m=D(le,"LI",{});var M=q(m);u=B(M,"Volume (L): Specify the infection volume in the first row (row A)."),M.forEach(N),e=Q(le),t=D(le,"LI",{});var ge=q(t);f=B(ge,"Dilution: Specify the dilution factor between successive rows."),ge.forEach(N),le.forEach(N),s=Q(K),c=D(K,"DIV",{class:!0});var te=q(c);h=B(te,`Volume (L):
			`),v=D(te,"INPUT",{class:!0,type:!0,id:!0,min:!0}),w=B(te,`
			Dilution:
			`),y=D(te,"INPUT",{class:!0,type:!0,id:!0,min:!0}),_=B(te,`
			Method:
			`),p=D(te,"SELECT",{class:!0,name:!0,id:!0});var he=q(p);b=D(he,"OPTION",{});var ie=q(b);k=B(ie,"Reed-Meunch"),ie.forEach(N),R=D(he,"OPTION",{});var pe=q(R);P=B(pe,"MidSin"),pe.forEach(N),he.forEach(N),te.forEach(N),C=Q(K),H&&H.l(K),K.forEach(N),this.h()},h(){E(l,"class","svelte-jm1qlx"),E(g,"class","list-disc svelte-jm1qlx"),E(v,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-jm1qlx"),E(v,"type","number"),E(v,"id","volume"),E(v,"min","1"),E(y,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-jm1qlx"),E(y,"type","number"),E(y,"id","dilution"),E(y,"min","1"),b.__value="rm_titer",b.value=b.__value,R.__value="ms_titer_ul",R.value=R.__value,E(p,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(p,"name","method"),E(p,"id","method"),i[5]===void 0&&Zn(()=>i[12].call(p)),E(c,"class","CalcOpts svelte-jm1qlx"),E(r,"class","container svelte-jm1qlx")},m(F,K){z(F,r,K),T(r,l),T(l,n),T(r,o),T(r,a),T(a,d),T(r,g),T(g,m),T(m,u),T(g,e),T(g,t),T(t,f),T(r,s),T(r,c),T(c,h),T(c,v),Ne(v,i[0]),T(c,w),T(c,y),Ne(y,i[1]),T(c,_),T(c,p),T(p,b),T(b,k),T(p,R),T(R,P),yn(p,i[5]),T(r,C),H&&H.m(r,null),W=!0,A||(J=[we(v,"input",i[10]),we(y,"input",i[11]),we(p,"change",i[12])],A=!0)},p(F,[K]){K&1&&Vr(v.value)!==F[0]&&Ne(v,F[0]),K&2&&Vr(y.value)!==F[1]&&Ne(y,F[1]),K&32&&yn(p,F[5]),F[4]!=null?H?(H.p(F,K),K&16&&O(H,1)):(H=Xi(F),H.c(),O(H,1),H.m(r,null)):H&&(Pe(),V(H,1,1,()=>{H=null}),qe())},i(F){W||(O(H),W=!0)},o(F){V(H),W=!1},d(F){F&&N(r),H&&H.d(),A=!1,_t(J)}}}function Gu(i,r,l){let n,o;L(i,Ae,v=>l(9,o=v));let a=11,d=10,g="rm_titer",m,u,e,t;const f=()=>{let v=[["sample","ReedMuench_titer","MidSin_titer_uL","MidSin_titer_log10mL","nrep"]];n.forEach(b=>{v=[...v,[b.sample,b.rm_titer,b.ms_titer_ul,b.ms_titer,b.nrep]]});let w="data:text/csv;charset=utf-8,"+v.map(b=>b.join(",")).join(`
`);var y=encodeURI(w),_=document.createElement("a");_.setAttribute("href",y);let p=new Date().toISOString().slice(0,10);_.setAttribute("download",p+"_titers.csv"),document.body.appendChild(_),_.click()};function s(){a=Vr(this.value),l(0,a)}function c(){d=Vr(this.value),l(1,d)}function h(){g=pt(this),l(5,g)}return i.$$.update=()=>{i.$$.dirty&515&&l(4,n=Co(o,a,d)),i.$$.dirty&28&&n!=null&&(l(2,m=n.filter(v=>v.nrep>1)),l(3,u=n.filter(v=>v.nrep<2)),l(6,e=m.filter(v=>v.rm_titer>0)),l(7,t=u.map(v=>v.sample).join(", ")))},[a,d,m,u,n,g,e,t,f,o,s,c,h]}class Bu extends ue{constructor(r){super(),se(this,r,Gu,Vu,ae,{})}}function Fu(i){let r,l;return r=new Bu({}),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p:oe,i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Uu(i){let r,l;return r=new No({}),r.$on("add",i[3]),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p:oe,i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Qu(i){let r,l;return r=new yo({}),r.$on("add",i[3]),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p:oe,i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Yu(i){let r,l;return r=new so({}),r.$on("edit",i[4]),{c(){$(r.$$.fragment)},l(n){j(r.$$.fragment,n)},m(n,o){ee(r,n,o),l=!0},p:oe,i(n){l||(O(r.$$.fragment,n),l=!0)},o(n){V(r.$$.fragment,n),l=!1},d(n){ne(r,n)}}}function Zu(i){let r,l,n,o,a,d;l=new mo({props:{activeItem:i[0],items:i[1]}}),l.$on("tabChange",i[2]);const g=[Yu,Qu,Uu,Fu],m=[];function u(e,t){return e[0]==="All Plates"?0:e[0]==="Add New Plate"?1:e[0]==="Edit Plate"?2:e[0]==="Results"?3:-1}return~(o=u(i))&&(a=m[o]=g[o](i)),{c(){r=I("main"),$(l.$$.fragment),n=U(),a&&a.c(),this.h()},l(e){r=D(e,"MAIN",{class:!0});var t=q(r);j(l.$$.fragment,t),n=Q(t),a&&a.l(t),t.forEach(N),this.h()},h(){E(r,"class","svelte-1jyp8j2")},m(e,t){z(e,r,t),ee(l,r,null),T(r,n),~o&&m[o].m(r,null),d=!0},p(e,[t]){const f={};t&1&&(f.activeItem=e[0]),l.$set(f);let s=o;o=u(e),o===s?~o&&m[o].p(e,t):(a&&(Pe(),V(m[s],1,1,()=>{m[s]=null}),qe()),~o?(a=m[o],a?a.p(e,t):(a=m[o]=g[o](e),a.c()),O(a,1),a.m(r,null)):a=null)},i(e){d||(O(l.$$.fragment,e),O(a),d=!0)},o(e){V(l.$$.fragment,e),V(a),d=!1},d(e){e&&N(r),ne(l),~o&&m[o].d()}}}function Ku(i,r,l){let n,o;L(i,Ae,e=>l(5,n=e)),L(i,Fe,e=>l(6,o=e));let a=["All Plates","Add New Plate","Edit Plate","Results"],d="All Plates";return[d,a,e=>{if(e.detail.currentTab=="Edit Plate"&e.detail.newTab!="EditPlate"&&o!=-1){let t=n.find(f=>f.id==o);t.added=!0,Fe.set(-1)}e.detail.newTab=="Results"&n.length<2||e.detail.newTab=="Edit Plate"&n.length<2?l(0,d=e.detail.currentTab):l(0,d=e.detail.newTab)},e=>{l(0,d="All Plates")},e=>{l(0,d="Edit Plate"),Fe.set(e.detail.plate.id)}]}class Mu extends ue{constructor(r){super(),se(this,r,Ku,Zu,ae,{})}}export{Mu as default};
