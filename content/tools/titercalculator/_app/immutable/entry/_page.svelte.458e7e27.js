import{S as ce,i as de,s as me,C as Ke,k as D,q as H,a as F,l as I,m as P,r as G,h as k,c as U,n as x,J as Le,b as A,G as z,K as ye,u as Ne,D as Ze,E as Ye,F as Je,g as C,d as W,L as Or,M as ni,v as Re,f as ze,N as Pe,H as oe,y as M,z as $,A as S,B as j,O as at,P as to,Q as ro,R as Vr,I as V,T as io,U as lo,V as oo,W as ct,X as fo,Y as uo,Z as so,_ as Tn,$ as yr,e as _e,a0 as Ce,a1 as Wr,o as ao,a2 as X,a3 as co,p as ie,a4 as mo,w as sr,a5 as be,a6 as we,a7 as dt,a8 as wl,a9 as go,aa as ar,ab as ho}from"../chunks/index.bd2b89a0.js";import{w as K,d as fe}from"../chunks/index.7eeb97cb.js";function vo(r){let n,l,e,o,a,c,g,m;const u=r[4].default,t=Ke(u,r,r[3],null);return{c(){n=D("div"),l=D("div"),e=H(r[2]),o=F(),a=D("button"),t&&t.c(),this.h()},l(i){n=I(i,"DIV",{class:!0});var f=P(n);l=I(f,"DIV",{class:!0});var s=P(l);e=G(s,r[2]),s.forEach(k),o=U(f),a=I(f,"BUTTON",{class:!0});var d=P(a);t&&t.l(d),d.forEach(k),f.forEach(k),this.h()},h(){x(l,"class","letter-label svelte-180z40v"),x(a,"class","svelte-180z40v"),Le(a,"selected",r[0]),Le(a,"added",r[1]),x(n,"class","button-row")},m(i,f){A(i,n,f),z(n,l),z(l,e),z(n,o),z(n,a),t&&t.m(a,null),c=!0,g||(m=ye(a,"click",r[5]),g=!0)},p(i,[f]){(!c||f&4)&&Ne(e,i[2]),t&&t.p&&(!c||f&8)&&Ze(t,u,i,i[3],c?Je(u,i[3],f,null):Ye(i[3]),null),(!c||f&1)&&Le(a,"selected",i[0]),(!c||f&2)&&Le(a,"added",i[1])},i(i){c||(C(t,i),c=!0)},o(i){W(t,i),c=!1},d(i){i&&k(n),t&&t.d(i),g=!1,m()}}}function _o(r,n,l){let{$$slots:e={},$$scope:o}=n,{selected:a=!1}=n,{added:c=!1}=n,{rowLetter:g=""}=n;function m(u){Or.call(this,r,u)}return r.$$set=u=>{"selected"in u&&l(0,a=u.selected),"added"in u&&l(1,c=u.added),"rowLetter"in u&&l(2,g=u.rowLetter),"$$scope"in u&&l(3,o=u.$$scope)},[a,c,g,o,e,m]}class po extends ce{constructor(n){super(),de(this,n,_o,vo,me,{selected:0,added:1,rowLetter:2})}}function yo(r){let n,l,e,o,a;const c=r[2].default,g=Ke(c,r,r[1],null);return{c(){n=D("div"),l=D("div"),e=H(r[0]),o=F(),g&&g.c(),this.h()},l(m){n=I(m,"DIV",{class:!0});var u=P(n);l=I(u,"DIV",{class:!0});var t=P(l);e=G(t,r[0]),t.forEach(k),o=U(u),g&&g.l(u),u.forEach(k),this.h()},h(){x(l,"class","title text-xl text-center"),x(n,"class","card shadow-lg min-w-min svelte-qzs6n9")},m(m,u){A(m,n,u),z(n,l),z(l,e),z(n,o),g&&g.m(n,null),a=!0},p(m,[u]){(!a||u&1)&&Ne(e,m[0]),g&&g.p&&(!a||u&2)&&Ze(g,c,m,m[1],a?Je(c,m[1],u,null):Ye(m[1]),null)},i(m){a||(C(g,m),a=!0)},o(m){W(g,m),a=!1},d(m){m&&k(n),g&&g.d(m)}}}function bo(r,n,l){let{$$slots:e={},$$scope:o}=n,{cardTitle:a}=n;return r.$$set=c=>{"cardTitle"in c&&l(0,a=c.cardTitle),"$$scope"in c&&l(1,o=c.$$scope)},[a,o,e]}class wo extends ce{constructor(n){super(),de(this,n,bo,yo,me,{cardTitle:0})}}function ko(r){let n,l,e,o,a;const c=r[3].default,g=Ke(c,r,r[2],null);return{c(){n=D("button"),g&&g.c(),this.h()},l(m){n=I(m,"BUTTON",{class:!0});var u=P(n);g&&g.l(u),u.forEach(k),this.h()},h(){x(n,"class",l=ni(r[0])+" svelte-1x31uai"),Le(n,"flat",r[1])},m(m,u){A(m,n,u),g&&g.m(n,null),e=!0,o||(a=ye(n,"click",r[4]),o=!0)},p(m,[u]){g&&g.p&&(!e||u&4)&&Ze(g,c,m,m[2],e?Je(c,m[2],u,null):Ye(m[2]),null),(!e||u&1&&l!==(l=ni(m[0])+" svelte-1x31uai"))&&x(n,"class",l),(!e||u&3)&&Le(n,"flat",m[1])},i(m){e||(C(g,m),e=!0)},o(m){W(g,m),e=!1},d(m){m&&k(n),g&&g.d(m),o=!1,a()}}}function Eo(r,n,l){let{$$slots:e={},$$scope:o}=n,{type:a="primary"}=n,{flat:c=!0}=n;function g(m){Or.call(this,r,m)}return r.$$set=m=>{"type"in m&&l(0,a=m.type),"flat"in m&&l(1,c=m.flat),"$$scope"in m&&l(2,o=m.$$scope)},[a,c,o,e,g]}class qn extends ce{constructor(n){super(),de(this,n,Eo,ko,me,{type:0,flat:1})}}const lt=r=>{let n=Array(12).fill(-1),l=Array(12).fill("Neg");for(var e=1;e<11;e++)l[e]=e;return{id:r,name:"Plate "+r,maxWell:n,colNames:l,added:!1}},We=K([lt(1)]),Pr=K(1),nn=K(-1),ti=K(10),ri=K(10),rn=[lt(3),lt(2),lt(1)];rn[1].maxWell=[-1,4,4,3,4,3,5,6,5,5,6,-1];rn[1].colNames=["Neg"].concat(Array(5).fill("1-A"),Array(5).fill("2-B"),["Neg"]);rn[1].added=!0;rn[2].maxWell=[-1,2,2,2,3,2,4,4,4,5,4,-1];rn[2].colNames=["Neg"].concat(Array(5).fill("1-C"),Array(5).fill("2-D"),["Neg"]);rn[2].added=!0;function ii(r,n,l){const e=r.slice();return e[6]=n[l],e[8]=l,e}function li(r,n,l){const e=r.slice();return e[9]=n[l],e[11]=l,e}function oi(r,n,l){const e=r.slice();return e[12]=n[l],e}function fi(r){let n,l=r[12]+"",e;return{c(){n=D("td"),e=H(l),this.h()},l(o){n=I(o,"TD",{class:!0});var a=P(n);e=G(a,l),a.forEach(k),this.h()},h(){x(n,"class","svelte-1oiezpb")},m(o,a){A(o,n,a),z(n,e)},p:oe,d(o){o&&k(n)}}}function ui(r){let n,l,e;function o(){return r[4](r[11],r[8])}return l=new po({props:{selected:r[8]<=r[9],added:r[0].added}}),l.$on("click",o),{c(){n=D("td"),M(l.$$.fragment),this.h()},l(a){n=I(a,"TD",{class:!0});var c=P(n);$(l.$$.fragment,c),c.forEach(k),this.h()},h(){x(n,"class","svelte-1oiezpb")},m(a,c){A(a,n,c),S(l,n,null),e=!0},p(a,c){r=a;const g={};c&1&&(g.selected=r[8]<=r[9]),c&1&&(g.added=r[0].added),l.$set(g)},i(a){e||(C(l.$$.fragment,a),e=!0)},o(a){W(l.$$.fragment,a),e=!1},d(a){a&&k(n),j(l)}}}function si(r){let n,l,e=r[6]+"",o,a,c,g,m=r[0].maxWell,u=[];for(let i=0;i<m.length;i+=1)u[i]=ui(li(r,m,i));const t=i=>W(u[i],1,1,()=>{u[i]=null});return{c(){n=D("tr"),l=D("td"),o=H(e),a=F();for(let i=0;i<u.length;i+=1)u[i].c();c=F(),this.h()},l(i){n=I(i,"TR",{});var f=P(n);l=I(f,"TD",{class:!0});var s=P(l);o=G(s,e),s.forEach(k),a=U(f);for(let d=0;d<u.length;d+=1)u[d].l(f);c=U(f),f.forEach(k),this.h()},h(){x(l,"class","svelte-1oiezpb")},m(i,f){A(i,n,f),z(n,l),z(l,o),z(n,a);for(let s=0;s<u.length;s+=1)u[s]&&u[s].m(n,null);z(n,c),g=!0},p(i,f){if(f&9){m=i[0].maxWell;let s;for(s=0;s<m.length;s+=1){const d=li(i,m,s);u[s]?(u[s].p(d,f),C(u[s],1)):(u[s]=ui(d),u[s].c(),C(u[s],1),u[s].m(n,c))}for(Re(),s=m.length;s<u.length;s+=1)t(s);ze()}},i(i){if(!g){for(let f=0;f<m.length;f+=1)C(u[f]);g=!0}},o(i){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)W(u[f]);g=!1},d(i){i&&k(n),Pe(u,i)}}}function xo(r){let n,l,e,o,a,c,g=r[2],m=[];for(let f=0;f<g.length;f+=1)m[f]=fi(oi(r,g,f));let u=r[1],t=[];for(let f=0;f<u.length;f+=1)t[f]=si(ii(r,u,f));const i=f=>W(t[f],1,1,()=>{t[f]=null});return{c(){n=D("table"),l=D("tr"),e=D("td"),o=F();for(let f=0;f<m.length;f+=1)m[f].c();a=F();for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){n=I(f,"TABLE",{class:!0});var s=P(n);l=I(s,"TR",{});var d=P(l);e=I(d,"TD",{class:!0}),P(e).forEach(k),o=U(d);for(let h=0;h<m.length;h+=1)m[h].l(d);d.forEach(k),a=U(s);for(let h=0;h<t.length;h+=1)t[h].l(s);s.forEach(k),this.h()},h(){x(e,"class","svelte-1oiezpb"),x(n,"class","svelte-1oiezpb")},m(f,s){A(f,n,s),z(n,l),z(l,e),z(l,o);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(l,null);z(n,a);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(n,null);c=!0},p(f,[s]){if(s&4){g=f[2];let d;for(d=0;d<g.length;d+=1){const h=oi(f,g,d);m[d]?m[d].p(h,s):(m[d]=fi(h),m[d].c(),m[d].m(l,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=g.length}if(s&11){u=f[1];let d;for(d=0;d<u.length;d+=1){const h=ii(f,u,d);t[d]?(t[d].p(h,s),C(t[d],1)):(t[d]=si(h),t[d].c(),C(t[d],1),t[d].m(n,null))}for(Re(),d=u.length;d<t.length;d+=1)i(d);ze()}},i(f){if(!c){for(let s=0;s<u.length;s+=1)C(t[s]);c=!0}},o(f){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)W(t[s]);c=!1},d(f){f&&k(n),Pe(m,f),Pe(t,f)}}}function No(r,n,l){let{plate:e}=n;e.maxWell.length;let o=["A","B","C","D","E","F","G","H"],a=Array.from({length:12},(m,u)=>u+1);const c=(m,u,t)=>{e.added||(e.maxWell[u]==t?l(0,e.maxWell[u]=-1,e):l(0,e.maxWell[u]=t,e),We.update(i=>{let f=[...i];return f.find(s=>s.id===m),f}))},g=(m,u)=>c(e.id,m,u);return r.$$set=m=>{"plate"in m&&l(0,e=m.plate)},[e,o,a,c,g]}class Hr extends ce{constructor(n){super(),de(this,n,No,xo,me,{plate:0})}}function Ro(r){let n;return{c(){n=H("Delete")},l(l){n=G(l,"Delete")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function zo(r){let n;return{c(){n=H("Edit")},l(l){n=G(l,"Edit")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function To(r){let n,l,e,o,a,c,g,m,u;return n=new Hr({props:{plate:r[0]}}),a=new qn({props:{type:"primary",$$slots:{default:[Ro]},$$scope:{ctx:r}}}),a.$on("click",r[3]),m=new qn({props:{type:"secondary",$$slots:{default:[zo]},$$scope:{ctx:r}}}),m.$on("click",r[4]),{c(){M(n.$$.fragment),l=F(),e=D("div"),o=D("div"),M(a.$$.fragment),c=F(),g=D("div"),M(m.$$.fragment),this.h()},l(t){$(n.$$.fragment,t),l=U(t),e=I(t,"DIV",{class:!0});var i=P(e);o=I(i,"DIV",{class:!0});var f=P(o);$(a.$$.fragment,f),f.forEach(k),c=U(i),g=I(i,"DIV",{class:!0});var s=P(g);$(m.$$.fragment,s),s.forEach(k),i.forEach(k),this.h()},h(){x(o,"class","absolute bottom-0 right-0"),x(g,"class","absolute bottom-0 left-0"),x(e,"class","button-footer relative svelte-x2uown")},m(t,i){S(n,t,i),A(t,l,i),A(t,e,i),z(e,o),S(a,o,null),z(e,c),z(e,g),S(m,g,null),u=!0},p(t,i){const f={};i&1&&(f.plate=t[0]),n.$set(f);const s={};i&64&&(s.$$scope={dirty:i,ctx:t}),a.$set(s);const d={};i&64&&(d.$$scope={dirty:i,ctx:t}),m.$set(d)},i(t){u||(C(n.$$.fragment,t),C(a.$$.fragment,t),C(m.$$.fragment,t),u=!0)},o(t){W(n.$$.fragment,t),W(a.$$.fragment,t),W(m.$$.fragment,t),u=!1},d(t){j(n,t),t&&k(l),t&&k(e),j(a),j(m)}}}function qo(r){let n,l;return n=new wo({props:{cardTitle:r[0].name,$$slots:{default:[To]},$$scope:{ctx:r}}}),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p(e,[o]){const a={};o&1&&(a.cardTitle=e[0].name),o&65&&(a.$$scope={dirty:o,ctx:e}),n.$set(a)},i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Po(r,n,l){let{plate:e}=n,o=at();const a=u=>{We.update(t=>t.filter(i=>i.id!=u))},c=u=>{nn.set(u.id),o("edit",{plate:u})},g=()=>a(e.id),m=()=>c(e);return r.$$set=u=>{"plate"in u&&l(0,e=u.plate)},[e,a,c,g,m]}class Do extends ce{constructor(n){super(),de(this,n,Po,qo,me,{plate:0})}}function kl(r){const n=r-1;return n*n*n+1}function Io(r,{delay:n=0,duration:l=400,easing:e=to}={}){const o=+getComputedStyle(r).opacity;return{delay:n,duration:l,easing:e,css:a=>`opacity: ${a*o}`}}function Ao(r,{delay:n=0,duration:l=400,easing:e=kl,start:o=0,opacity:a=0}={}){const c=getComputedStyle(r),g=+c.opacity,m=c.transform==="none"?"":c.transform,u=1-o,t=g*(1-a);return{delay:n,duration:l,easing:e,css:(i,f)=>`
			transform: ${m} scale(${1-u*f});
			opacity: ${g-t*f}
		`}}function Lo(r,{from:n,to:l},e={}){const o=getComputedStyle(r),a=o.transform==="none"?"":o.transform,[c,g]=o.transformOrigin.split(" ").map(parseFloat),m=n.left+n.width*c/l.width-(l.left+c),u=n.top+n.height*g/l.height-(l.top+g),{delay:t=0,duration:i=s=>Math.sqrt(s)*120,easing:f=kl}=e;return{delay:t,duration:ro(i)?i(Math.sqrt(m*m+u*u)):i,easing:f,css:(s,d)=>{const h=d*m,v=d*u,y=s+d*n.width/l.width,_=s+d*n.height/l.height;return`transform: ${a} translate(${h}px, ${v}px) scale(${y}, ${_});`}}}function ai(r,n,l){const e=r.slice();return e[6]=n[l],e}function ci(r){let n,l;return n=new Do({props:{plate:r[6]}}),n.$on("edit",r[4]),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p(e,o){const a={};o&1&&(a.plate=e[6]),n.$set(a)},i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function di(r,n){let l,e,o,a,c,g=oe,m,u=n[6].added&&ci(n);return{key:r,first:null,c(){l=D("div"),u&&u.c(),e=F(),this.h()},l(t){l=I(t,"DIV",{});var i=P(l);u&&u.l(i),e=U(i),i.forEach(k),this.h()},h(){this.first=l},m(t,i){A(t,l,i),u&&u.m(l,null),z(l,e),m=!0},p(t,i){n=t,n[6].added?u?(u.p(n,i),i&1&&C(u,1)):(u=ci(n),u.c(),C(u,1),u.m(l,e)):u&&(Re(),W(u,1,1,()=>{u=null}),ze())},r(){c=l.getBoundingClientRect()},f(){io(l),g(),lo(l,c)},a(){g(),g=oo(l,c,Lo,{duration:500})},i(t){m||(C(u),ct(()=>{m&&(a&&a.end(1),o=fo(l,Io,{}),o.start())}),m=!0)},o(t){W(u),o&&o.invalidate(),t&&(a=uo(l,Ao,{})),m=!1},d(t){t&&k(l),u&&u.d(),t&&a&&a.end()}}}function mi(r){let n,l,e,o,a,c,g;return c=new qn({props:{type:"secondary",$$slots:{default:[Co]},$$scope:{ctx:r}}}),c.$on("click",r[5]),{c(){n=D("p"),l=H("Please add a plate to continue"),e=F(),o=D("br"),a=F(),M(c.$$.fragment)},l(m){n=I(m,"P",{});var u=P(n);l=G(u,"Please add a plate to continue"),u.forEach(k),e=U(m),o=I(m,"BR",{}),a=U(m),$(c.$$.fragment,m)},m(m,u){A(m,n,u),z(n,l),A(m,e,u),A(m,o,u),A(m,a,u),S(c,m,u),g=!0},p(m,u){const t={};u&512&&(t.$$scope={dirty:u,ctx:m}),c.$set(t)},i(m){g||(C(c.$$.fragment,m),g=!0)},o(m){W(c.$$.fragment,m),g=!1},d(m){m&&k(n),m&&k(e),m&&k(o),m&&k(a),j(c,m)}}}function Co(r){let n;return{c(){n=H("Load Demo data")},l(l){n=G(l,"Load Demo data")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function Oo(r){let n,l,e=[],o=new Map,a,c,g,m=r[0];const u=i=>i[6].id;for(let i=0;i<m.length;i+=1){let f=ai(r,m,i),s=u(f);o.set(s,e[i]=di(s,f))}let t=r[1]&&mi(r);return{c(){n=D("div"),l=D("div");for(let i=0;i<e.length;i+=1)e[i].c();a=F(),c=D("div"),t&&t.c(),this.h()},l(i){n=I(i,"DIV",{class:!0});var f=P(n);l=I(f,"DIV",{class:!0});var s=P(l);for(let h=0;h<e.length;h+=1)e[h].l(s);s.forEach(k),a=U(f),c=I(f,"DIV",{class:!0});var d=P(c);t&&t.l(d),d.forEach(k),f.forEach(k),this.h()},h(){x(l,"class","grid 1plate:grid-cols-1 2plate:grid-cols-2 3plate:grid-cols-3 gap-2"),x(c,"class","emptyMessage svelte-1gvfhfz"),x(n,"class","container svelte-1gvfhfz")},m(i,f){A(i,n,f),z(n,l);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(l,null);z(n,a),z(n,c),t&&t.m(c,null),g=!0},p(i,[f]){if(f&1){m=i[0],Re();for(let s=0;s<e.length;s+=1)e[s].r();e=Vr(e,f,u,1,i,m,o,l,so,di,null,ai);for(let s=0;s<e.length;s+=1)e[s].a();ze()}i[1]?t?(t.p(i,f),f&2&&C(t,1)):(t=mi(i),t.c(),C(t,1),t.m(c,null)):t&&(Re(),W(t,1,1,()=>{t=null}),ze())},i(i){if(!g){for(let f=0;f<m.length;f+=1)C(e[f]);C(t),g=!0}},o(i){for(let f=0;f<e.length;f+=1)W(e[f]);W(t),g=!1},d(i){i&&k(n);for(let f=0;f<e.length;f+=1)e[f].d();t&&t.d()}}}function Vo(r,n,l){let e,o,a;V(r,We,u=>l(3,a=u));const c=()=>{We.set(rn),Pr.set(3)};function g(u){Or.call(this,r,u)}const m=()=>c();return r.$$.update=()=>{r.$$.dirty&8&&l(1,e=a.length==1),r.$$.dirty&8&&l(0,o=a.slice(1).reverse())},[o,e,c,a,g,m]}class Wo extends ce{constructor(n){super(),de(this,n,Vo,Oo,me,{})}}function gi(r,n,l){const e=r.slice();return e[4]=n[l],e}function hi(r){let n,l,e=r[4]+"",o,a,c,g;function m(){return r[3](r[4])}return{c(){n=D("li"),l=D("div"),o=H(e),a=F(),this.h()},l(u){n=I(u,"LI",{class:!0});var t=P(n);l=I(t,"DIV",{class:!0});var i=P(l);o=G(i,e),i.forEach(k),a=U(t),t.forEach(k),this.h()},h(){x(l,"class","svelte-aio21l"),Le(l,"active",r[4]===r[1]),x(n,"class","svelte-aio21l")},m(u,t){A(u,n,t),z(n,l),z(l,o),z(n,a),c||(g=ye(n,"click",m),c=!0)},p(u,t){r=u,t&1&&e!==(e=r[4]+"")&&Ne(o,e),t&3&&Le(l,"active",r[4]===r[1])},d(u){u&&k(n),c=!1,g()}}}function Ho(r){let n,l,e=r[0],o=[];for(let a=0;a<e.length;a+=1)o[a]=hi(gi(r,e,a));return{c(){n=D("div"),l=D("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){n=I(a,"DIV",{class:!0});var c=P(n);l=I(c,"UL",{class:!0});var g=P(l);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(k),c.forEach(k),this.h()},h(){x(l,"class","svelte-aio21l"),x(n,"class","tabs svelte-aio21l")},m(a,c){A(a,n,c),z(n,l);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(l,null)},p(a,[c]){if(c&7){e=a[0];let g;for(g=0;g<e.length;g+=1){const m=gi(a,e,g);o[g]?o[g].p(m,c):(o[g]=hi(m),o[g].c(),o[g].m(l,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=e.length}},i:oe,o:oe,d(a){a&&k(n),Pe(o,a)}}}function Go(r,n,l){let{items:e}=n,{activeItem:o}=n;const a=at(),c=g=>a("tabChange",{currentTab:o,newTab:g});return r.$$set=g=>{"items"in g&&l(0,e=g.items),"activeItem"in g&&l(1,o=g.activeItem)},[e,o,a,c]}class Bo extends ce{constructor(n){super(),de(this,n,Go,Ho,me,{items:0,activeItem:1})}}function vi(r,n,l){const e=r.slice();return e[7]=n[l],e[8]=n,e[9]=l,e}function _i(r,n,l){const e=r.slice();return e[0]=n[l],e}function pi(r){let n,l=r[0].name+"",e,o;return{c(){n=D("option"),e=H(l),this.h()},l(a){n=I(a,"OPTION",{});var c=P(n);e=G(c,l),c.forEach(k),this.h()},h(){n.__value=o=r[0].name,n.value=n.__value},m(a,c){A(a,n,c),z(n,e)},p(a,c){c&4&&l!==(l=a[0].name+"")&&Ne(e,l),c&4&&o!==(o=a[0].name)&&(n.__value=o,n.value=n.__value)},d(a){a&&k(n)}}}function yi(r){let n,l=r[0].added===!0&&pi(r);return{c(){l&&l.c(),n=_e()},l(e){l&&l.l(e),n=_e()},m(e,o){l&&l.m(e,o),A(e,n,o)},p(e,o){e[0].added===!0?l?l.p(e,o):(l=pi(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&k(n)}}}function bi(r){let n,l,e,o=r[9]+1+"",a,c,g,m,u,t,i;function f(){r[6].call(m,r[8],r[9])}return{c(){n=D("form"),l=D("label"),e=H("Column "),a=H(o),c=H(" Sample Name:"),g=F(),m=D("input"),u=F(),this.h()},l(s){n=I(s,"FORM",{});var d=P(n);l=I(d,"LABEL",{for:!0});var h=P(l);e=G(h,"Column "),a=G(h,o),c=G(h," Sample Name:"),h.forEach(k),g=U(d),m=I(d,"INPUT",{class:!0,id:!0,type:!0}),u=U(d),d.forEach(k),this.h()},h(){x(l,"for","question"),x(m,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white colinput svelte-5rwbji"),x(m,"id","question"),x(m,"type","text")},m(s,d){A(s,n,d),z(n,l),z(l,e),z(l,a),z(l,c),z(n,g),z(n,m),Ce(m,r[7]),z(n,u),t||(i=ye(m,"input",f),t=!0)},p(s,d){r=s,d&1&&m.value!==r[7]&&Ce(m,r[7])},d(s){s&&k(n),t=!1,i()}}}function Fo(r){let n,l,e,o,a,c,g,m,u=r[2],t=[];for(let s=0;s<u.length;s+=1)t[s]=yi(_i(r,u,s));let i=r[0].colNames,f=[];for(let s=0;s<i.length;s+=1)f[s]=bi(vi(r,i,s));return{c(){n=D("div"),l=H(`Copy column labels of exiting plate:
	`),e=D("select"),o=D("option");for(let s=0;s<t.length;s+=1)t[s].c();a=F(),c=D("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){n=I(s,"DIV",{class:!0});var d=P(n);l=G(d,`Copy column labels of exiting plate:
	`),e=I(d,"SELECT",{class:!0,name:!0,id:!0});var h=P(e);o=I(h,"OPTION",{});var v=P(o);v.forEach(k);for(let _=0;_<t.length;_+=1)t[_].l(h);h.forEach(k),d.forEach(k),a=U(s),c=I(s,"DIV",{class:!0});var y=P(c);for(let _=0;_<f.length;_+=1)f[_].l(y);y.forEach(k),this.h()},h(){o.__value="none",o.value=o.__value,o.selected=!0,o.disabled=!0,o.hidden=!0,x(e,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),x(e,"name","plates"),x(e,"id","plates"),r[1]===void 0&&ct(()=>r[4].call(e)),x(n,"class","CopySelect svelte-5rwbji"),x(c,"class","grid 1form:grid-cols-1 2form:grid-cols-2 3form:grid-cols-3 gap-x-8 gap-y-4")},m(s,d){A(s,n,d),z(n,l),z(n,e),z(e,o);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);Tn(e,r[1],!0),A(s,a,d),A(s,c,d);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(c,null);g||(m=[ye(e,"change",r[4]),ye(e,"change",r[5])],g=!0)},p(s,[d]){if(d&4){u=s[2];let h;for(h=0;h<u.length;h+=1){const v=_i(s,u,h);t[h]?t[h].p(v,d):(t[h]=yi(v),t[h].c(),t[h].m(e,null))}for(;h<t.length;h+=1)t[h].d(1);t.length=u.length}if(d&6&&Tn(e,s[1]),d&1){i=s[0].colNames;let h;for(h=0;h<i.length;h+=1){const v=vi(s,i,h);f[h]?f[h].p(v,d):(f[h]=bi(v),f[h].c(),f[h].m(c,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=i.length}},i:oe,o:oe,d(s){s&&k(n),Pe(t,s),s&&k(a),s&&k(c),Pe(f,s),g=!1,yr(m)}}}function Uo(r,n,l){let e;V(r,We,t=>l(2,e=t));let{plate:o}=n,a;const c=t=>{const i=e.find(f=>f.name==t).colNames;l(0,o.colNames=[...i],o)};function g(){a=Wr(this),l(1,a)}const m=()=>c(a);function u(t,i){t[i]=this.value,l(0,o)}return r.$$set=t=>{"plate"in t&&l(0,o=t.plate)},[o,a,e,c,g,m,u]}class El extends ce{constructor(n){super(),de(this,n,Uo,Fo,me,{plate:0})}}function Qo(r){let n;return{c(){n=H("Add Plate")},l(l){n=G(l,"Add Plate")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function Ko(r){let n,l,e,o,a,c,g,m,u,t,i,f,s;return a=new Hr({props:{plate:r[0]}}),m=new qn({props:{type:"secondary",$$slots:{default:[Qo]},$$scope:{ctx:r}}}),m.$on("click",r[5]),t=new El({props:{plate:r[0]}}),{c(){n=D("form"),l=H("Plate Name: "),e=D("input"),o=F(),M(a.$$.fragment),c=F(),g=D("div"),M(m.$$.fragment),u=F(),M(t.$$.fragment),this.h()},l(d){n=I(d,"FORM",{class:!0});var h=P(n);l=G(h,"Plate Name: "),e=I(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),o=U(d),$(a.$$.fragment,d),c=U(d),g=I(d,"DIV",{class:!0});var v=P(g);$(m.$$.fragment,v),v.forEach(k),u=U(d),$(t.$$.fragment,d),this.h()},h(){x(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),x(e,"id","question"),x(e,"type","text"),x(n,"class","NameForm svelte-1vsm84v"),x(g,"class","ButtonContainer svelte-1vsm84v")},m(d,h){A(d,n,h),z(n,l),z(n,e),Ce(e,r[0].name),A(d,o,h),S(a,d,h),A(d,c,h),A(d,g,h),S(m,g,null),A(d,u,h),S(t,d,h),i=!0,f||(s=ye(e,"input",r[4]),f=!0)},p(d,[h]){h&1&&e.value!==d[0].name&&Ce(e,d[0].name);const v={};h&1&&(v.plate=d[0]),a.$set(v);const y={};h&128&&(y.$$scope={dirty:h,ctx:d}),m.$set(y);const _={};h&1&&(_.plate=d[0]),t.$set(_)},i(d){i||(C(a.$$.fragment,d),C(m.$$.fragment,d),C(t.$$.fragment,d),i=!0)},o(d){W(a.$$.fragment,d),W(m.$$.fragment,d),W(t.$$.fragment,d),i=!1},d(d){d&&k(n),d&&k(o),j(a,d),d&&k(c),d&&k(g),j(m),d&&k(u),j(t,d),f=!1,s()}}}function Zo(r,n,l){let e,o,a;V(r,Pr,t=>l(2,o=t)),V(r,We,t=>l(3,a=t));let c=at();const g=t=>{We.update(i=>{let f=[...i],s=f.find(h=>h.id==t);return s.added=!0,f=[lt(o+1),...f],f}),Pr.update(i=>i+1),c("add")};function m(){e.name=this.value,l(0,e),l(3,a),l(2,o)}const u=()=>g(e.id);return r.$$.update=()=>{r.$$.dirty&12&&l(0,e=a.find(t=>t.id==o))},[e,g,o,a,m,u]}class Yo extends ce{constructor(n){super(),de(this,n,Zo,Ko,me,{})}}function wi(r,n,l){const e=r.slice();return e[11]=n[l],e}function Jo(r){let n,l,e,o,a,c=r[2],g=[];for(let m=0;m<c.length;m+=1)g[m]=Ei(wi(r,c,m));return{c(){n=H(`Plate to edit:
	`),l=D("select"),e=D("option");for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){n=G(m,`Plate to edit:
	`),l=I(m,"SELECT",{class:!0,name:!0,id:!0});var u=P(l);e=I(u,"OPTION",{});var t=P(e);t.forEach(k);for(let i=0;i<g.length;i+=1)g[i].l(u);u.forEach(k),this.h()},h(){e.__value="none",e.value=e.__value,e.selected=!0,e.disabled=!0,e.hidden=!0,x(l,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),x(l,"name","plates"),x(l,"id","plates"),r[1]===void 0&&ct(()=>r[7].call(l))},m(m,u){A(m,n,u),A(m,l,u),z(l,e);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(l,null);Tn(l,r[1],!0),o||(a=[ye(l,"change",r[7]),ye(l,"change",r[8])],o=!0)},p(m,u){if(u&4){c=m[2];let t;for(t=0;t<c.length;t+=1){const i=wi(m,c,t);g[t]?g[t].p(i,u):(g[t]=Ei(i),g[t].c(),g[t].m(l,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=c.length}u&6&&Tn(l,m[1])},i:oe,o:oe,d(m){m&&k(n),m&&k(l),Pe(g,m),o=!1,yr(a)}}}function Xo(r){let n,l,e,o,a,c,g,m,u,t,i,f,s;return a=new Hr({props:{plate:r[0]}}),m=new qn({props:{type:"secondary",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),m.$on("click",r[6]),t=new El({props:{plate:r[0]}}),{c(){n=D("form"),l=H("Plate Name: "),e=D("input"),o=F(),M(a.$$.fragment),c=F(),g=D("div"),M(m.$$.fragment),u=F(),M(t.$$.fragment),this.h()},l(d){n=I(d,"FORM",{class:!0});var h=P(n);l=G(h,"Plate Name: "),e=I(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),o=U(d),$(a.$$.fragment,d),c=U(d),g=I(d,"DIV",{class:!0});var v=P(g);$(m.$$.fragment,v),v.forEach(k),u=U(d),$(t.$$.fragment,d),this.h()},h(){x(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),x(e,"id","question"),x(e,"type","text"),x(n,"class","NameForm svelte-1hrsnk0"),x(g,"class","ButtonContainer svelte-1hrsnk0")},m(d,h){A(d,n,h),z(n,l),z(n,e),Ce(e,r[0].name),A(d,o,h),S(a,d,h),A(d,c,h),A(d,g,h),S(m,g,null),A(d,u,h),S(t,d,h),i=!0,f||(s=ye(e,"input",r[5]),f=!0)},p(d,h){h&1&&e.value!==d[0].name&&Ce(e,d[0].name);const v={};h&1&&(v.plate=d[0]),a.$set(v);const y={};h&16384&&(y.$$scope={dirty:h,ctx:d}),m.$set(y);const _={};h&1&&(_.plate=d[0]),t.$set(_)},i(d){i||(C(a.$$.fragment,d),C(m.$$.fragment,d),C(t.$$.fragment,d),i=!0)},o(d){W(a.$$.fragment,d),W(m.$$.fragment,d),W(t.$$.fragment,d),i=!1},d(d){d&&k(n),d&&k(o),j(a,d),d&&k(c),d&&k(g),j(m),d&&k(u),j(t,d),f=!1,s()}}}function ki(r){let n,l=r[11].name+"",e,o;return{c(){n=D("option"),e=H(l),this.h()},l(a){n=I(a,"OPTION",{});var c=P(n);e=G(c,l),c.forEach(k),this.h()},h(){n.__value=o=r[11].name,n.value=n.__value},m(a,c){A(a,n,c),z(n,e)},p(a,c){c&4&&l!==(l=a[11].name+"")&&Ne(e,l),c&4&&o!==(o=a[11].name)&&(n.__value=o,n.value=n.__value)},d(a){a&&k(n)}}}function Ei(r){let n,l=r[11].added===!0&&ki(r);return{c(){l&&l.c(),n=_e()},l(e){l&&l.l(e),n=_e()},m(e,o){l&&l.m(e,o),A(e,n,o)},p(e,o){e[11].added===!0?l?l.p(e,o):(l=ki(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&k(n)}}}function Mo(r){let n;return{c(){n=H("Update Plate")},l(l){n=G(l,"Update Plate")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function $o(r){let n,l,e,o;const a=[Xo,Jo],c=[];function g(m,u){return m[0]!=null?0:1}return n=g(r),l=c[n]=a[n](r),{c(){l.c(),e=_e()},l(m){l.l(m),e=_e()},m(m,u){c[n].m(m,u),A(m,e,u),o=!0},p(m,[u]){let t=n;n=g(m),n===t?c[n].p(m,u):(Re(),W(c[t],1,1,()=>{c[t]=null}),ze(),l=c[n],l?l.p(m,u):(l=c[n]=a[n](m),l.c()),C(l,1),l.m(e.parentNode,e))},i(m){o||(C(l),o=!0)},o(m){W(l),o=!1},d(m){c[n].d(m),m&&k(e)}}}function So(r,n,l){let e,o;V(r,We,d=>l(2,e=d)),V(r,nn,d=>l(9,o=d));let a=at(),{plate:c=e.find(d=>d.id==o)}=n,g;c!=null&&(c.added=!1);const m=d=>{l(0,c=e.find(h=>h.name==d)),l(0,c.added=!1,c),nn.set(c.id)},u=d=>{l(0,c.added=!0,c),nn.set(-1),a("add")};function t(){c.name=this.value,l(0,c)}const i=()=>u(c.name);function f(){g=Wr(this),l(1,g)}const s=()=>m(g);return r.$$set=d=>{"plate"in d&&l(0,c=d.plate)},[c,g,e,m,u,t,i,f,s]}class jo extends ce{constructor(n){super(),de(this,n,So,$o,me,{plate:0})}}const ef=(r,n,l)=>{let e=8,o=[];return r.forEach(a=>{let c=Array(e).fill(0),g=0;for(var m=0;m<c.length;m++)c[m]=g+a.maxWell.filter(v=>v<m).length,g=c[m];let u=Array(e).fill(0);g=0;for(var m=u.length-1;m>=0;m--)u[m]=g+a.maxWell.filter(y=>y>=m).length,g=u[m];let t=Array(e).fill(0);for(var m=0;m<t.length;m++)t[m]=100*u[m]/(u[m]+c[m]);let i,f,s;for(var m=0;m<t.length;m++)if(t[m]<50){i=t[m-1],f=t[m],s=m-1;break}let d=(i-50)/(i-f),h=l**(s+d)/n;isNaN(h)&&(h=0),o=[{sample:a.name,nrep:a.maxWell.length,titer:h},...o]}),o};var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function*xl(r,n,l=0,e=2*Number.EPSILON){const o=(3-Math.sqrt(5))/2;let a=r+o*(n-r),c=a,g=c,m=0,u=yield a,t=u,i=t,f,s;for(;;){const d=.5*(r+n),h=e*Math.abs(a)+l,v=2*h;if(Math.abs(a-d)<=v-.5*(n-r))return{x:a,fx:u};let y=0,_=y,p=_;Math.abs(m)>h&&(y=(a-c)*(u-i),_=(a-g)*(u-t),p=(a-g)*_-(a-c)*y,_=2*(_-y),_>0?p=-p:_=-_,y=m,m=f),Math.abs(p)<Math.abs(.5*_*y)&&p>_*(r-a)&&p<_*(n-a)?(f=p/_,s=a+f,(s-r<v||n-s<v)&&(f=a<d?h:-h)):(m=(a<d?n:r)-a,f=o*m),s=a+(Math.abs(f)>=h?f:f>0?h:-h);const b=yield s;b<=u?(s<a?n=a:r=a,g=c,i=t,c=a,t=u,a=s,u=b):(s<a?r=s:n=s,b<=t||c==a?(g=c,i=t,c=s,t=b):(b<=i||g==a||g==c)&&(g=s,i=b))}}function tf(r,n,l,e=0,o=Number.EPSILON){const a=xl(n,l,e,o);let c=a.next();for(;!c.done;){const g=c.value,m=r(g);c=a.next(m)}return c.value}var rf={local_min_generator:xl,local_min:tf},Dr={},lf={get exports(){return Dr},set exports(r){Dr=r}};(function(r,n){(function(l,e){r.exports=e()})(nf,function(){var l=function(e,o){var a=Array.prototype.concat,c=Array.prototype.slice,g=Object.prototype.toString;function m(_,p){var b=_>p?_:p;return e.pow(10,17-~~(e.log(b>0?b:-b)*e.LOG10E))}var u=Array.isArray||function(p){return g.call(p)==="[object Array]"};function t(_){return g.call(_)==="[object Function]"}function i(_){return typeof _=="number"?_-_===0:!1}function f(_){return a.apply([],_)}function s(){return new s._init(arguments)}s.fn=s.prototype,s._init=function(p){if(u(p[0]))if(u(p[0][0])){t(p[1])&&(p[0]=s.map(p[0],p[1]));for(var b=0;b<p[0].length;b++)this[b]=p[0][b];this.length=p[0].length}else this[0]=t(p[1])?s.map(p[0],p[1]):p[0],this.length=1;else if(i(p[0]))this[0]=s.seq.apply(null,p),this.length=1;else{if(p[0]instanceof s)return s(p[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:m,isArray:u,isFunction:t,isNumber:i,toVector:f},s._random_fn=e.random,s.setRandom=function(p){if(typeof p!="function")throw new TypeError("fn is not a function");s._random_fn=p},s.extend=function(p){var b,w;if(arguments.length===1){for(w in p)s[w]=p[w];return this}for(b=1;b<arguments.length;b++)for(w in arguments[b])p[w]=arguments[b][w];return p},s.rows=function(p){return p.length||1},s.cols=function(p){return p[0].length||1},s.dimensions=function(p){return{rows:s.rows(p),cols:s.cols(p)}},s.row=function(p,b){return u(b)?b.map(function(w){return s.row(p,w)}):p[b]},s.rowa=function(p,b){return s.row(p,b)},s.col=function(p,b){if(u(b)){var w=s.arange(p.length).map(function(){return new Array(b.length)});return b.forEach(function(T,O){s.arange(p.length).forEach(function(L){w[L][O]=p[L][T]})}),w}for(var N=new Array(p.length),R=0;R<p.length;R++)N[R]=[p[R][b]];return N},s.cola=function(p,b){return s.col(p,b).map(function(w){return w[0]})},s.diag=function(p){for(var b=s.rows(p),w=new Array(b),N=0;N<b;N++)w[N]=[p[N][N]];return w},s.antidiag=function(p){for(var b=s.rows(p)-1,w=new Array(b),N=0;b>=0;b--,N++)w[N]=[p[N][b]];return w},s.transpose=function(p){var b=[],w,N,R,T,O;for(u(p[0])||(p=[p]),N=p.length,R=p[0].length,O=0;O<R;O++){for(w=new Array(N),T=0;T<N;T++)w[T]=p[T][O];b.push(w)}return b.length===1?b[0]:b},s.map=function(p,b,w){var N,R,T,O,L;for(u(p[0])||(p=[p]),R=p.length,T=p[0].length,O=w?p:new Array(R),N=0;N<R;N++)for(O[N]||(O[N]=new Array(T)),L=0;L<T;L++)O[N][L]=b(p[N][L],N,L);return O.length===1?O[0]:O},s.cumreduce=function(p,b,w){var N,R,T,O,L;for(u(p[0])||(p=[p]),R=p.length,T=p[0].length,O=w?p:new Array(R),N=0;N<R;N++)for(O[N]||(O[N]=new Array(T)),T>0&&(O[N][0]=p[N][0]),L=1;L<T;L++)O[N][L]=b(O[N][L-1],p[N][L]);return O.length===1?O[0]:O},s.alter=function(p,b){return s.map(p,b,!0)},s.create=function(p,b,w){var N=new Array(p),R,T;for(t(b)&&(w=b,b=p),R=0;R<p;R++)for(N[R]=new Array(b),T=0;T<b;T++)N[R][T]=w(R,T);return N};function d(){return 0}s.zeros=function(p,b){return i(b)||(b=p),s.create(p,b,d)};function h(){return 1}s.ones=function(p,b){return i(b)||(b=p),s.create(p,b,h)},s.rand=function(p,b){return i(b)||(b=p),s.create(p,b,s._random_fn)};function v(_,p){return _===p?1:0}s.identity=function(p,b){return i(b)||(b=p),s.create(p,b,v)},s.symmetric=function(p){var b=p.length,w,N;if(p.length!==p[0].length)return!1;for(w=0;w<b;w++)for(N=0;N<b;N++)if(p[N][w]!==p[w][N])return!1;return!0},s.clear=function(p){return s.alter(p,d)},s.seq=function(p,b,w,N){t(N)||(N=!1);var R=[],T=m(p,b),O=(b*T-p*T)/((w-1)*T),L=p,q;for(q=0;L<=b&&q<w;q++,L=(p*T+O*T*q)/T)R.push(N?N(L,q):L);return R},s.arange=function(p,b,w){var N=[],R;if(w=w||1,b===o&&(b=p,p=0),p===b||w===0)return[];if(p<b&&w<0)return[];if(p>b&&w>0)return[];if(w>0)for(R=p;R<b;R+=w)N.push(R);else for(R=p;R>b;R+=w)N.push(R);return N},s.slice=function(){function _(b,w,N,R){var T,O=[],L=b.length;if(w===o&&N===o&&R===o)return s.copy(b);if(w=w||0,N=N||b.length,w=w>=0?w:L+w,N=N>=0?N:L+N,R=R||1,w===N||R===0)return[];if(w<N&&R<0)return[];if(w>N&&R>0)return[];if(R>0)for(T=w;T<N;T+=R)O.push(b[T]);else for(T=w;T>N;T+=R)O.push(b[T]);return O}function p(b,w){var N,R;if(w=w||{},i(w.row)){if(i(w.col))return b[w.row][w.col];var T=s.rowa(b,w.row);return N=w.col||{},_(T,N.start,N.end,N.step)}if(i(w.col)){var O=s.cola(b,w.col);return R=w.row||{},_(O,R.start,R.end,R.step)}R=w.row||{},N=w.col||{};var L=_(b,R.start,R.end,R.step);return L.map(function(q){return _(q,N.start,N.end,N.step)})}return p}(),s.sliceAssign=function(p,b,w){var N,R;if(i(b.row)){if(i(b.col))return p[b.row][b.col]=w;b.col=b.col||{},b.col.start=b.col.start||0,b.col.end=b.col.end||p[0].length,b.col.step=b.col.step||1,N=s.arange(b.col.start,e.min(p.length,b.col.end),b.col.step);var T=b.row;return N.forEach(function(L,q){p[T][L]=w[q]}),p}if(i(b.col)){b.row=b.row||{},b.row.start=b.row.start||0,b.row.end=b.row.end||p.length,b.row.step=b.row.step||1,R=s.arange(b.row.start,e.min(p[0].length,b.row.end),b.row.step);var O=b.col;return R.forEach(function(L,q){p[L][O]=w[q]}),p}return w[0].length===o&&(w=[w]),b.row.start=b.row.start||0,b.row.end=b.row.end||p.length,b.row.step=b.row.step||1,b.col.start=b.col.start||0,b.col.end=b.col.end||p[0].length,b.col.step=b.col.step||1,R=s.arange(b.row.start,e.min(p.length,b.row.end),b.row.step),N=s.arange(b.col.start,e.min(p[0].length,b.col.end),b.col.step),R.forEach(function(L,q){N.forEach(function(Q,B){p[L][Q]=w[q][B]})}),p},s.diagonal=function(p){var b=s.zeros(p.length,p.length);return p.forEach(function(w,N){b[N][N]=w}),b},s.copy=function(p){return p.map(function(b){return i(b)?b:b.map(function(w){return w})})};var y=s.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?c.call(this):c.call(this)[0]},y.map=function(p,b){return s(s.map(this,p,b))},y.cumreduce=function(p,b){return s(s.cumreduce(this,p,b))},y.alter=function(p){return s.alter(this,p),this},function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(w){var N=this,R;return w?(setTimeout(function(){w.call(N,y[b].call(N))}),this):(R=s[b](this),u(R)?s(R):R)}})(_[p])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(w,N){var R=this;return N?(setTimeout(function(){N.call(R,y[b].call(R,w))}),this):s(s[b](this,w))}})(_[p])}("row col".split(" ")),function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(){return s(s[b].apply(null,arguments))}})(_[p])}("create zeros ones rand identity".split(" ")),s}(Math);return function(e,o){var a=e.utils.isFunction;function c(u,t){return u-t}function g(u,t,i){return o.max(t,o.min(u,i))}e.sum=function(t){for(var i=0,f=t.length;--f>=0;)i+=t[f];return i},e.sumsqrd=function(t){for(var i=0,f=t.length;--f>=0;)i+=t[f]*t[f];return i},e.sumsqerr=function(t){for(var i=e.mean(t),f=0,s=t.length,d;--s>=0;)d=t[s]-i,f+=d*d;return f},e.sumrow=function(t){for(var i=0,f=t.length;--f>=0;)i+=t[f];return i},e.product=function(t){for(var i=1,f=t.length;--f>=0;)i*=t[f];return i},e.min=function(t){for(var i=t[0],f=0;++f<t.length;)t[f]<i&&(i=t[f]);return i},e.max=function(t){for(var i=t[0],f=0;++f<t.length;)t[f]>i&&(i=t[f]);return i},e.unique=function(t){for(var i={},f=[],s=0;s<t.length;s++)i[t[s]]||(i[t[s]]=!0,f.push(t[s]));return f},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(t){var i=t.map(o.log),f=e.mean(i);return o.exp(f)},e.median=function(t){var i=t.length,f=t.slice().sort(c);return i&1?f[i/2|0]:(f[i/2-1]+f[i/2])/2},e.cumsum=function(t){return e.cumreduce(t,function(i,f){return i+f})},e.cumprod=function(t){return e.cumreduce(t,function(i,f){return i*f})},e.diff=function(t){var i=[],f=t.length,s;for(s=1;s<f;s++)i.push(t[s]-t[s-1]);return i},e.rank=function(u){var t,i=[],f={};for(t=0;t<u.length;t++){var s=u[t];f[s]?f[s]++:(f[s]=1,i.push(s))}var d=i.sort(c),h={},v=1;for(t=0;t<d.length;t++){var s=d[t],y=f[s],_=v,p=v+y-1,b=(_+p)/2;h[s]=b,v+=y}return u.map(function(w){return h[w]})},e.mode=function(t){var i=t.length,f=t.slice().sort(c),s=1,d=0,h=0,v=[],y;for(y=0;y<i;y++)f[y]===f[y+1]?s++:(s>d?(v=[f[y]],d=s,h=0):s===d&&(v.push(f[y]),h++),s=1);return h===0?v[0]:v},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,i){return e.sumsqerr(t)/(t.length-(i?1:0))},e.pooledvariance=function(t){var i=t.reduce(function(s,d){return s+e.sumsqerr(d)},0),f=t.reduce(function(s,d){return s+d.length},0);return i/(f-t.length)},e.deviation=function(u){for(var t=e.mean(u),i=u.length,f=new Array(i),s=0;s<i;s++)f[s]=u[s]-t;return f},e.stdev=function(t,i){return o.sqrt(e.variance(t,i))},e.pooledstdev=function(t){return o.sqrt(e.pooledvariance(t))},e.meandev=function(t){for(var i=e.mean(t),f=[],s=t.length-1;s>=0;s--)f.push(o.abs(t[s]-i));return e.mean(f)},e.meddev=function(t){for(var i=e.median(t),f=[],s=t.length-1;s>=0;s--)f.push(o.abs(t[s]-i));return e.median(f)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(t){var i=t.length,f=t.slice().sort(c);return[f[o.round(i/4)-1],f[o.round(i/2)-1],f[o.round(i*3/4)-1]]},e.quantiles=function(t,i,f,s){var d=t.slice().sort(c),h=[i.length],v=t.length,y,_,p,b,w,N;for(typeof f>"u"&&(f=3/8),typeof s>"u"&&(s=3/8),y=0;y<i.length;y++)_=i[y],p=f+_*(1-f-s),b=v*_+p,w=o.floor(g(b,1,v-1)),N=g(b-w,0,1),h[y]=(1-N)*d[w-1]+N*d[w];return h},e.percentile=function(t,i,f){var s=t.slice().sort(c),d=i*(s.length+(f?1:-1))+(f?0:1),h=parseInt(d),v=d-h;return h+1<s.length?s[h-1]+v*(s[h]-s[h-1]):s[h-1]},e.percentileOfScore=function(t,i,f){var s=0,d=t.length,h=!1,v,y;for(f==="strict"&&(h=!0),y=0;y<d;y++)v=t[y],(h&&v<i||!h&&v<=i)&&s++;return s/d},e.histogram=function(t,i){i=i||4;var f=e.min(t),s=(e.max(t)-f)/i,d=t.length,h=[],v;for(v=0;v<i;v++)h[v]=0;for(v=0;v<d;v++)h[o.min(o.floor((t[v]-f)/s),i-1)]+=1;return h},e.covariance=function(t,i){var f=e.mean(t),s=e.mean(i),d=t.length,h=new Array(d),v;for(v=0;v<d;v++)h[v]=(t[v]-f)*(i[v]-s);return e.sum(h)/(d-1)},e.corrcoeff=function(t,i){return e.covariance(t,i)/e.stdev(t,1)/e.stdev(i,1)},e.spearmancoeff=function(u,t){return u=e.rank(u),t=e.rank(t),e.corrcoeff(u,t)},e.stanMoment=function(t,i){for(var f=e.mean(t),s=e.stdev(t),d=t.length,h=0,v=0;v<d;v++)h+=o.pow((t[v]-f)/s,i);return h/t.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var m=e.prototype;(function(u){for(var t=0;t<u.length;t++)(function(i){m[i]=function(f,s){var d=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[i].call(v,f))}),this;if(this.length>1){for(v=f===!0?this:this.transpose();h<v.length;h++)d[h]=e[i](v[h]);return d}return e[i](this[0],f)}})(u[t])})("cumsum cumprod".split(" ")),function(u){for(var t=0;t<u.length;t++)(function(i){m[i]=function(f,s){var d=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[i].call(v,f))}),this;if(this.length>1){for(i!=="sumrow"&&(v=f===!0?this:this.transpose());h<v.length;h++)d[h]=e[i](v[h]);return f===!0?e[i](e.utils.toVector(d)):d}return e[i](this[0],f)}})(u[t])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(u){for(var t=0;t<u.length;t++)(function(i){m[i]=function(){var f=[],s=0,d=this,h=Array.prototype.slice.call(arguments),v;if(a(h[h.length-1])){v=h[h.length-1];var y=h.slice(0,h.length-1);return setTimeout(function(){v.call(d,m[i].apply(d,y))}),this}else{v=void 0;var _=function(b){return e[i].apply(d,[b].concat(h))}}if(this.length>1){for(d=d.transpose();s<d.length;s++)f[s]=_(d[s]);return f}return _(this[0])}})(u[t])}("quantiles percentileOfScore".split(" "))}(l,Math),function(e,o){e.gammaln=function(c){var g=0,m=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,t,i,f;for(f=(i=t=c)+5.5,f-=(t+.5)*o.log(f);g<6;g++)u+=m[g]/++i;return o.log(2.5066282746310007*u/t)-f},e.loggam=function(c){var g,m,u,t,i,f,s,d=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(g=c,s=0,c==1||c==2)return 0;for(c<=7&&(s=o.floor(7-c),g=c+s),m=1/(g*g),u=2*o.PI,i=d[9],f=8;f>=0;f--)i*=m,i+=d[f];if(t=i/g+.5*o.log(u)+(g-.5)*o.log(g)-g,c<=7)for(f=1;f<=s;f++)t-=o.log(g-1),g-=1;return t},e.gammafn=function(c){var g=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],m=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,t=0,i=0,f=0,s=c,d,h,v,y;if(c>171.6243769536076)return 1/0;if(s<=0)if(y=s%1+36e-17,y)u=(s&1?-1:1)*o.PI/o.sin(o.PI*y),s=1-s;else return 1/0;for(v=s,s<1?h=s++:h=(s-=t=(s|0)-1)-1,d=0;d<8;++d)f=(f+g[d])*h,i=i*h+m[d];if(y=f/i+1,v<s)y/=v;else if(v>s)for(d=0;d<t;++d)y*=s,s++;return u&&(y=u/y),y},e.gammap=function(c,g){return e.lowRegGamma(c,g)*e.gammafn(c)},e.lowRegGamma=function(c,g){var m=e.gammaln(c),u=c,t=1/c,i=t,f=g+1-c,s=1/1e-30,d=1/f,h=d,v=1,y=-~(o.log(c>=1?c:1/c)*8.5+c*.4+17),_;if(g<0||c<=0)return NaN;if(g<c+1){for(;v<=y;v++)t+=i*=g/++u;return t*o.exp(-g+c*o.log(g)-m)}for(;v<=y;v++)_=-v*(v-c),f+=2,d=_*d+f,s=f+_/s,d=1/d,h*=d*s;return 1-h*o.exp(-g+c*o.log(g)-m)},e.factorialln=function(c){return c<0?NaN:e.gammaln(c+1)},e.factorial=function(c){return c<0?NaN:e.gammafn(c+1)},e.combination=function(c,g){return c>170||g>170?o.exp(e.combinationln(c,g)):e.factorial(c)/e.factorial(g)/e.factorial(c-g)},e.combinationln=function(c,g){return e.factorialln(c)-e.factorialln(g)-e.factorialln(c-g)},e.permutation=function(c,g){return e.factorial(c)/e.factorial(c-g)},e.betafn=function(c,g){if(!(c<=0||g<=0))return c+g>170?o.exp(e.betaln(c,g)):e.gammafn(c)*e.gammafn(g)/e.gammafn(c+g)},e.betaln=function(c,g){return e.gammaln(c)+e.gammaln(g)-e.gammaln(c+g)},e.betacf=function(c,g,m){var u=1e-30,t=1,i=g+m,f=g+1,s=g-1,d=1,h=1-i*c/f,v,y,_,p;for(o.abs(h)<u&&(h=u),h=1/h,p=h;t<=100&&(v=2*t,y=t*(m-t)*c/((s+v)*(g+v)),h=1+y*h,o.abs(h)<u&&(h=u),d=1+y/d,o.abs(d)<u&&(d=u),h=1/h,p*=h*d,y=-(g+t)*(i+t)*c/((g+v)*(f+v)),h=1+y*h,o.abs(h)<u&&(h=u),d=1+y/d,o.abs(d)<u&&(d=u),h=1/h,_=h*d,p*=_,!(o.abs(_-1)<3e-7));t++);return p},e.gammapinv=function(c,g){var m=0,u=g-1,t=1e-8,i=e.gammaln(g),f,s,d,h,v,y,_;if(c>=1)return o.max(100,g+100*o.sqrt(g));if(c<=0)return 0;for(g>1?(y=o.log(u),_=o.exp(u*(y-1)-i),v=c<.5?c:1-c,d=o.sqrt(-2*o.log(v)),f=(2.30753+d*.27061)/(1+d*(.99229+d*.04481))-d,c<.5&&(f=-f),f=o.max(.001,g*o.pow(1-1/(9*g)-f/(3*o.sqrt(g)),3))):(d=1-g*(.253+g*.12),c<d?f=o.pow(c/d,1/g):f=1-o.log(1-(c-d)/(1-d)));m<12;m++){if(f<=0)return 0;if(s=e.lowRegGamma(g,f)-c,g>1?d=_*o.exp(-(f-u)+u*(o.log(f)-y)):d=o.exp(-f+u*o.log(f)-i),h=s/d,f-=d=h/(1-.5*o.min(1,h*((g-1)/f-1))),f<=0&&(f=.5*(f+d)),o.abs(d)<t*f)break}return f},e.erf=function(c){var g=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],m=g.length-1,u=!1,t=0,i=0,f,s,d,h;for(c<0&&(c=-c,u=!0),f=2/(2+c),s=4*f-2;m>0;m--)d=t,t=s*t-i+g[m],i=d;return h=f*o.exp(-c*c+.5*(g[0]+s*t)-i),u?h-1:1-h},e.erfc=function(c){return 1-e.erf(c)},e.erfcinv=function(c){var g=0,m,u,t,i;if(c>=2)return-100;if(c<=0)return 100;for(i=c<1?c:2-c,t=o.sqrt(-2*o.log(i/2)),m=-.70711*((2.30753+t*.27061)/(1+t*(.99229+t*.04481))-t);g<2;g++)u=e.erfc(m)-i,m+=u/(1.1283791670955126*o.exp(-m*m)-m*u);return c<1?m:-m},e.ibetainv=function(c,g,m){var u=1e-8,t=g-1,i=m-1,f=0,s,d,h,v,y,_,p,b,w,N,R;if(c<=0)return 0;if(c>=1)return 1;for(g>=1&&m>=1?(h=c<.5?c:1-c,v=o.sqrt(-2*o.log(h)),p=(2.30753+v*.27061)/(1+v*(.99229+v*.04481))-v,c<.5&&(p=-p),b=(p*p-3)/6,w=2/(1/(2*g-1)+1/(2*m-1)),N=p*o.sqrt(b+w)/w-(1/(2*m-1)-1/(2*g-1))*(b+5/6-2/(3*w)),p=g/(g+m*o.exp(2*N))):(s=o.log(g/(g+m)),d=o.log(m/(g+m)),v=o.exp(g*s)/g,y=o.exp(m*d)/m,N=v+y,c<v/N?p=o.pow(g*N*c,1/g):p=1-o.pow(m*N*(1-c),1/m)),R=-e.gammaln(g)-e.gammaln(m)+e.gammaln(g+m);f<10;f++){if(p===0||p===1)return p;if(_=e.ibeta(p,g,m)-c,v=o.exp(t*o.log(p)+i*o.log(1-p)+R),y=_/v,p-=v=y/(1-.5*o.min(1,y*(t/p-i/(1-p)))),p<=0&&(p=.5*(p+v)),p>=1&&(p=.5*(p+v+1)),o.abs(v)<u*p&&f>0)break}return p},e.ibeta=function(c,g,m){var u=c===0||c===1?0:o.exp(e.gammaln(g+m)-e.gammaln(g)-e.gammaln(m)+g*o.log(c)+m*o.log(1-c));return c<0||c>1?!1:c<(g+1)/(g+m+2)?u*e.betacf(c,g,m)/g:1-u*e.betacf(1-c,m,g)/m},e.randn=function(c,g){var m,u,t,i,f;if(g||(g=c),c)return e.create(c,g,function(){return e.randn()});do m=e._random_fn(),u=1.7156*(e._random_fn()-.5),t=m-.449871,i=o.abs(u)+.386595,f=t*t+i*(.196*i-.25472*t);while(f>.27597&&(f>.27846||u*u>-4*o.log(m)*m*m));return u/m},e.randg=function(c,g,m){var u=c,t,i,f,s,d,h;if(m||(m=g),c||(c=1),g)return h=e.zeros(g,m),h.alter(function(){return e.randg(c)}),h;c<1&&(c+=1),t=c-1/3,i=1/o.sqrt(9*t);do{do d=e.randn(),s=1+i*d;while(s<=0);s=s*s*s,f=e._random_fn()}while(f>1-.331*o.pow(d,4)&&o.log(f)>.5*d*d+t*(1-s+o.log(s)));if(c==u)return t*s;do f=e._random_fn();while(f===0);return o.pow(f,1/u)*t*s},function(a){for(var c=0;c<a.length;c++)(function(g){e.fn[g]=function(){return e(e.map(this,function(m){return e[g](m)}))}})(a[c])}("gammaln gammafn factorial factorialln".split(" ")),function(a){for(var c=0;c<a.length;c++)(function(g){e.fn[g]=function(){return e(e[g].apply(null,arguments))}})(a[c])}("randn".split(" "))}(l,Math),function(e,o){(function(u){for(var t=0;t<u.length;t++)(function(i){e[i]=function f(s,d,h){return this instanceof f?(this._a=s,this._b=d,this._c=h,this):new f(s,d,h)},e.fn[i]=function(f,s,d){var h=e[i](f,s,d);return h.data=this,h},e[i].prototype.sample=function(f){var s=this._a,d=this._b,h=this._c;return f?e.alter(f,function(){return e[i].sample(s,d,h)}):e[i].sample(s,d,h)},function(f){for(var s=0;s<f.length;s++)(function(d){e[i].prototype[d]=function(h){var v=this._a,y=this._b,_=this._c;return!h&&h!==0&&(h=this.data),typeof h!="number"?e.fn.map.call(h,function(p){return e[i][d](p,v,y,_)}):e[i][d](h,v,y,_)}})(f[s])}("pdf cdf inv".split(" ")),function(f){for(var s=0;s<f.length;s++)(function(d){e[i].prototype[d]=function(){return e[i][d](this._a,this._b,this._c)}})(f[s])}("mean median mode variance".split(" "))})(u[t])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(t,i,f){return t>1||t<0?0:i==1&&f==1?1:i<512&&f<512?o.pow(t,i-1)*o.pow(1-t,f-1)/e.betafn(i,f):o.exp((i-1)*o.log(t)+(f-1)*o.log(1-t)-e.betaln(i,f))},cdf:function(t,i,f){return t>1||t<0?(t>1)*1:e.ibeta(t,i,f)},inv:function(t,i,f){return e.ibetainv(t,i,f)},mean:function(t,i){return t/(t+i)},median:function(t,i){return e.ibetainv(.5,t,i)},mode:function(t,i){return(t-1)/(t+i-2)},sample:function(t,i){var f=e.randg(t);return f/(f+e.randg(i))},variance:function(t,i){return t*i/(o.pow(t+i,2)*(t+i+1))}}),e.extend(e.centralF,{pdf:function(t,i,f){var s,d,h;return t<0?0:i<=2?t===0&&i<2?1/0:t===0&&i===2?1:1/e.betafn(i/2,f/2)*o.pow(i/f,i/2)*o.pow(t,i/2-1)*o.pow(1+i/f*t,-(i+f)/2):(s=i*t/(f+t*i),d=f/(f+t*i),h=i*d/2,h*e.binomial.pdf((i-2)/2,(i+f-2)/2,s))},cdf:function(t,i,f){return t<0?0:e.ibeta(i*t/(i*t+f),i/2,f/2)},inv:function(t,i,f){return f/(i*(1/e.ibetainv(t,i/2,f/2)-1))},mean:function(t,i){return i>2?i/(i-2):void 0},mode:function(t,i){return t>2?i*(t-2)/(t*(i+2)):void 0},sample:function(t,i){var f=e.randg(t/2)*2,s=e.randg(i/2)*2;return f/t/(s/i)},variance:function(t,i){if(!(i<=4))return 2*i*i*(t+i-2)/(t*(i-2)*(i-2)*(i-4))}}),e.extend(e.cauchy,{pdf:function(t,i,f){return f<0?0:f/(o.pow(t-i,2)+o.pow(f,2))/o.PI},cdf:function(t,i,f){return o.atan((t-i)/f)/o.PI+.5},inv:function(u,t,i){return t+i*o.tan(o.PI*(u-.5))},median:function(t){return t},mode:function(t){return t},sample:function(t,i){return e.randn()*o.sqrt(1/(2*e.randg(.5)))*i+t}}),e.extend(e.chisquare,{pdf:function(t,i){return t<0?0:t===0&&i===2?.5:o.exp((i/2-1)*o.log(t)-t/2-i/2*o.log(2)-e.gammaln(i/2))},cdf:function(t,i){return t<0?0:e.lowRegGamma(i/2,t/2)},inv:function(u,t){return 2*e.gammapinv(u,.5*t)},mean:function(u){return u},median:function(t){return t*o.pow(1-2/(9*t),3)},mode:function(t){return t-2>0?t-2:0},sample:function(t){return e.randg(t/2)*2},variance:function(t){return 2*t}}),e.extend(e.exponential,{pdf:function(t,i){return t<0?0:i*o.exp(-i*t)},cdf:function(t,i){return t<0?0:1-o.exp(-i*t)},inv:function(u,t){return-o.log(1-u)/t},mean:function(u){return 1/u},median:function(u){return 1/u*o.log(2)},mode:function(){return 0},sample:function(t){return-1/t*o.log(e._random_fn())},variance:function(u){return o.pow(u,-2)}}),e.extend(e.gamma,{pdf:function(t,i,f){return t<0?0:t===0&&i===1?1/f:o.exp((i-1)*o.log(t)-t/f-e.gammaln(i)-i*o.log(f))},cdf:function(t,i,f){return t<0?0:e.lowRegGamma(i,t/f)},inv:function(u,t,i){return e.gammapinv(u,t)*i},mean:function(u,t){return u*t},mode:function(t,i){if(t>1)return(t-1)*i},sample:function(t,i){return e.randg(t)*i},variance:function(t,i){return t*i*i}}),e.extend(e.invgamma,{pdf:function(t,i,f){return t<=0?0:o.exp(-(i+1)*o.log(t)-f/t-e.gammaln(i)+i*o.log(f))},cdf:function(t,i,f){return t<=0?0:1-e.lowRegGamma(i,f/t)},inv:function(u,t,i){return i/e.gammapinv(1-u,t)},mean:function(u,t){return u>1?t/(u-1):void 0},mode:function(t,i){return i/(t+1)},sample:function(t,i){return i/e.randg(t)},variance:function(t,i){if(!(t<=2))return i*i/((t-1)*(t-1)*(t-2))}}),e.extend(e.kumaraswamy,{pdf:function(t,i,f){return t===0&&i===1?f:t===1&&f===1?i:o.exp(o.log(i)+o.log(f)+(i-1)*o.log(t)+(f-1)*o.log(1-o.pow(t,i)))},cdf:function(t,i,f){return t<0?0:t>1?1:1-o.pow(1-o.pow(t,i),f)},inv:function(t,i,f){return o.pow(1-o.pow(1-t,1/f),1/i)},mean:function(u,t){return t*e.gammafn(1+1/u)*e.gammafn(t)/e.gammafn(1+1/u+t)},median:function(t,i){return o.pow(1-o.pow(2,-1/i),1/t)},mode:function(t,i){if(t>=1&&i>=1&&t!==1&&i!==1)return o.pow((t-1)/(t*i-1),1/t)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(t,i,f){return t<=0?0:o.exp(-o.log(t)-.5*o.log(2*o.PI)-o.log(f)-o.pow(o.log(t)-i,2)/(2*f*f))},cdf:function(t,i,f){return t<0?0:.5+.5*e.erf((o.log(t)-i)/o.sqrt(2*f*f))},inv:function(u,t,i){return o.exp(-1.4142135623730951*i*e.erfcinv(2*u)+t)},mean:function(t,i){return o.exp(t+i*i/2)},median:function(t){return o.exp(t)},mode:function(t,i){return o.exp(t-i*i)},sample:function(t,i){return o.exp(e.randn()*i+t)},variance:function(t,i){return(o.exp(i*i)-1)*o.exp(2*t+i*i)}}),e.extend(e.noncentralt,{pdf:function(t,i,f){var s=1e-14;return o.abs(f)<s?e.studentt.pdf(t,i):o.abs(t)<s?o.exp(e.gammaln((i+1)/2)-f*f/2-.5*o.log(o.PI*i)-e.gammaln(i/2)):i/t*(e.noncentralt.cdf(t*o.sqrt(1+2/i),i+2,f)-e.noncentralt.cdf(t,i,f))},cdf:function(t,i,f){var s=1e-14,d=200;if(o.abs(f)<s)return e.studentt.cdf(t,i);var h=!1;t<0&&(h=!0,f=-f);for(var v=e.normal.cdf(-f,0,1),y=s+1,_=y,p=t*t/(t*t+i),b=0,w=o.exp(-f*f/2),N=o.exp(-f*f/2-.5*o.log(2)-e.gammaln(3/2))*f;b<d||_>s||y>s;)_=y,b>0&&(w*=f*f/(2*b),N*=f*f/(2*(b+1/2))),y=w*e.beta.cdf(p,b+.5,i/2)+N*e.beta.cdf(p,b+1,i/2),v+=.5*y,b++;return h?1-v:v}}),e.extend(e.normal,{pdf:function(t,i,f){return o.exp(-.5*o.log(2*o.PI)-o.log(f)-o.pow(t-i,2)/(2*f*f))},cdf:function(t,i,f){return .5*(1+e.erf((t-i)/o.sqrt(2*f*f)))},inv:function(u,t,i){return-1.4142135623730951*i*e.erfcinv(2*u)+t},mean:function(u){return u},median:function(t){return t},mode:function(u){return u},sample:function(t,i){return e.randn()*i+t},variance:function(u,t){return t*t}}),e.extend(e.pareto,{pdf:function(t,i,f){return t<i?0:f*o.pow(i,f)/o.pow(t,f+1)},cdf:function(t,i,f){return t<i?0:1-o.pow(i/t,f)},inv:function(t,i,f){return i/o.pow(1-t,1/f)},mean:function(t,i){if(!(i<=1))return i*o.pow(t,i)/(i-1)},median:function(t,i){return t*(i*o.SQRT2)},mode:function(t){return t},variance:function(u,t){if(!(t<=2))return u*u*t/(o.pow(t-1,2)*(t-2))}}),e.extend(e.studentt,{pdf:function(t,i){return i=i>1e100?1e100:i,1/(o.sqrt(i)*e.betafn(.5,i/2))*o.pow(1+t*t/i,-((i+1)/2))},cdf:function(t,i){var f=i/2;return e.ibeta((t+o.sqrt(t*t+i))/(2*o.sqrt(t*t+i)),f,f)},inv:function(u,t){var i=e.ibetainv(2*o.min(u,1-u),.5*t,.5);return i=o.sqrt(t*(1-i)/i),u>.5?i:-i},mean:function(t){return t>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(t){return e.randn()*o.sqrt(t/(2*e.randg(t/2)))},variance:function(t){return t>2?t/(t-2):t>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(t,i,f){return t<0||i<0||f<0?0:f/i*o.pow(t/i,f-1)*o.exp(-o.pow(t/i,f))},cdf:function(t,i,f){return t<0?0:1-o.exp(-o.pow(t/i,f))},inv:function(u,t,i){return t*o.pow(-o.log(1-u),1/i)},mean:function(u,t){return u*e.gammafn(1+1/t)},median:function(t,i){return t*o.pow(o.log(2),1/i)},mode:function(t,i){return i<=1?0:t*o.pow((i-1)/i,1/i)},sample:function(t,i){return t*o.pow(-o.log(e._random_fn()),1/i)},variance:function(t,i){return t*t*e.gammafn(1+2/i)-o.pow(e.weibull.mean(t,i),2)}}),e.extend(e.uniform,{pdf:function(t,i,f){return t<i||t>f?0:1/(f-i)},cdf:function(t,i,f){return t<i?0:t<f?(t-i)/(f-i):1},inv:function(u,t,i){return t+u*(i-t)},mean:function(t,i){return .5*(t+i)},median:function(t,i){return e.mean(t,i)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,i){return t/2+i/2+(i/2-t/2)*(2*e._random_fn()-1)},variance:function(t,i){return o.pow(i-t,2)/12}});function a(u,t,i,f){for(var s=0,d=1,h=1,v=1,y=0,_=0,p;o.abs((h-_)/h)>f;)_=h,p=-(t+y)*(t+i+y)*u/(t+2*y)/(t+2*y+1),s=h+p*s,d=v+p*d,y=y+1,p=y*(i-y)*u/(t+2*y-1)/(t+2*y),h=s+p*h,v=d+p*v,s=s/v,d=d/v,h=h/v,v=1;return h/t}e.extend(e.binomial,{pdf:function(t,i,f){return f===0||f===1?i*f===t?1:0:e.combination(i,t)*o.pow(f,t)*o.pow(1-f,i-t)},cdf:function(t,i,f){var s,d=1e-10;if(t<0)return 0;if(t>=i)return 1;if(f<0||f>1||i<=0)return NaN;t=o.floor(t);var h=f,v=t+1,y=i-t,_=v+y,p=o.exp(e.gammaln(_)-e.gammaln(y)-e.gammaln(v)+v*o.log(h)+y*o.log(1-h));return h<(v+1)/(_+2)?s=p*a(h,v,y,d):s=1-p*a(1-h,y,v,d),o.round((1-s)*(1/d))/(1/d)}}),e.extend(e.negbin,{pdf:function(t,i,f){return t!==t>>>0?!1:t<0?0:e.combination(t+i-1,i-1)*o.pow(1-f,t)*o.pow(f,i)},cdf:function(t,i,f){var s=0,d=0;if(t<0)return 0;for(;d<=t;d++)s+=e.negbin.pdf(d,i,f);return s}}),e.extend(e.hypgeom,{pdf:function(t,i,f,s){if(t!==t|0)return!1;if(t<0||t<f-(i-s))return 0;if(t>s||t>f)return 0;if(f*2>i)return s*2>i?e.hypgeom.pdf(i-f-s+t,i,i-f,i-s):e.hypgeom.pdf(s-t,i,i-f,s);if(s*2>i)return e.hypgeom.pdf(f-t,i,f,i-s);if(f<s)return e.hypgeom.pdf(t,i,s,f);for(var d=1,h=0,v=0;v<t;v++){for(;d>1&&h<s;)d*=1-f/(i-h),h++;d*=(s-v)*(f-v)/((v+1)*(i-f-s+v+1))}for(;h<s;h++)d*=1-f/(i-h);return o.min(1,o.max(0,d))},cdf:function(t,i,f,s){if(t<0||t<f-(i-s))return 0;if(t>=s||t>=f)return 1;if(f*2>i)return s*2>i?e.hypgeom.cdf(i-f-s+t,i,i-f,i-s):1-e.hypgeom.cdf(s-t-1,i,i-f,s);if(s*2>i)return 1-e.hypgeom.cdf(f-t-1,i,f,i-s);if(f<s)return e.hypgeom.cdf(t,i,s,f);for(var d=1,h=1,v=0,y=0;y<t;y++){for(;d>1&&v<s;){var _=1-f/(i-v);h*=_,d*=_,v++}h*=(s-y)*(f-y)/((y+1)*(i-f-s+y+1)),d+=h}for(;v<s;v++)d*=1-f/(i-v);return o.min(1,o.max(0,d))}}),e.extend(e.poisson,{pdf:function(t,i){return i<0||t%1!==0||t<0?0:o.pow(i,t)*o.exp(-i)/e.factorial(t)},cdf:function(t,i){var f=[],s=0;if(t<0)return 0;for(;s<=t;s++)f.push(e.poisson.pdf(s,i));return e.sum(f)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(t){var i=1,f=0,s=o.exp(-t);do f++,i*=e._random_fn();while(i>s);return f-1},sampleLarge:function(t){var i=t,f,s,d,h,v,y,_,p,b,w;for(h=o.sqrt(i),v=o.log(i),_=.931+2.53*h,y=-.059+.02483*_,p=1.1239+1.1328/(_-3.4),b=.9277-3.6224/(_-2);;){if(s=o.random()-.5,d=o.random(),w=.5-o.abs(s),f=o.floor((2*y/w+_)*s+i+.43),w>=.07&&d<=b)return f;if(!(f<0||w<.013&&d>w)&&o.log(d)+o.log(p)-o.log(y/(w*w)+_)<=-i+f*v-e.loggam(f+1))return f}},sample:function(t){return t<10?this.sampleSmall(t):this.sampleLarge(t)}}),e.extend(e.triangular,{pdf:function(t,i,f,s){return f<=i||s<i||s>f?NaN:t<i||t>f?0:t<s?2*(t-i)/((f-i)*(s-i)):t===s?2/(f-i):2*(f-t)/((f-i)*(f-s))},cdf:function(t,i,f,s){return f<=i||s<i||s>f?NaN:t<=i?0:t>=f?1:t<=s?o.pow(t-i,2)/((f-i)*(s-i)):1-o.pow(f-t,2)/((f-i)*(f-s))},inv:function(t,i,f,s){return f<=i||s<i||s>f?NaN:t<=(s-i)/(f-i)?i+(f-i)*o.sqrt(t*((s-i)/(f-i))):i+(f-i)*(1-o.sqrt((1-t)*(1-(s-i)/(f-i))))},mean:function(t,i,f){return(t+i+f)/3},median:function(t,i,f){if(f<=(t+i)/2)return i-o.sqrt((i-t)*(i-f))/o.sqrt(2);if(f>(t+i)/2)return t+o.sqrt((i-t)*(f-t))/o.sqrt(2)},mode:function(t,i,f){return f},sample:function(t,i,f){var s=e._random_fn();return s<(f-t)/(i-t)?t+o.sqrt(s*(i-t)*(f-t)):i-o.sqrt((1-s)*(i-t)*(i-f))},variance:function(t,i,f){return(t*t+i*i+f*f-t*i-t*f-i*f)/18}}),e.extend(e.arcsine,{pdf:function(t,i,f){return f<=i?NaN:t<=i||t>=f?0:2/o.PI*o.pow(o.pow(f-i,2)-o.pow(2*t-i-f,2),-.5)},cdf:function(t,i,f){return t<i?0:t<f?2/o.PI*o.asin(o.sqrt((t-i)/(f-i))):1},inv:function(u,t,i){return t+(.5-.5*o.cos(o.PI*u))*(i-t)},mean:function(t,i){return i<=t?NaN:(t+i)/2},median:function(t,i){return i<=t?NaN:(t+i)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,i){return(t+i)/2+(i-t)/2*o.sin(2*o.PI*e.uniform.sample(0,1))},variance:function(t,i){return i<=t?NaN:o.pow(i-t,2)/8}});function c(u){return u/o.abs(u)}e.extend(e.laplace,{pdf:function(t,i,f){return f<=0?0:o.exp(-o.abs(t-i)/f)/(2*f)},cdf:function(t,i,f){return f<=0?0:t<i?.5*o.exp((t-i)/f):1-.5*o.exp(-(t-i)/f)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,t){return 2*t*t},sample:function(t,i){var f=e._random_fn()-.5;return t-i*c(f)*o.log(1-2*o.abs(f))}});function g(u,t,i){var f=12,s=6,d=-30,h=-50,v=60,y=8,_=3,p=2,b=3,w=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],N=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],R=u*.5;if(R>=y)return 1;var T=2*e.normal.cdf(R,0,1,1,0)-1;T>=o.exp(h/i)?T=o.pow(T,i):T=0;var O;u>_?O=p:O=b;for(var L=R,q=(y-R)/O,Q=L+q,B=0,Z=i-1,ne=1;ne<=O;ne++){for(var re=0,J=.5*(Q+L),le=.5*(Q-L),ee=1;ee<=f;ee++){var se,ae;s<ee?(se=f-ee+1,ae=w[se-1]):(se=ee,ae=-w[se-1]);var ge=le*ae,ue=J+ge,ke=ue*ue;if(ke>v)break;var Y=2*e.normal.cdf(ue,0,1,1,0),he=2*e.normal.cdf(ue,u,1,1,0),pe=Y*.5-he*.5;pe>=o.exp(d/Z)&&(pe=N[se-1]*o.exp(-(.5*ke))*o.pow(pe,Z),re+=pe)}re*=2*le*i/o.sqrt(2*o.PI),B+=re,L=Q,Q+=q}return T+=B,T<=o.exp(d/t)?0:(T=o.pow(T,t),T>=1?1:T)}function m(u,t,i){var f=.322232421088,s=.099348462606,d=-1,h=.588581570495,v=-.342242088547,y=.531103462366,_=-.204231210125,p=.10353775285,b=-453642210148e-16,w=.0038560700634,N=.8832,R=.2368,T=1.214,O=1.208,L=1.4142,q=120,Q=.5-.5*u,B=o.sqrt(o.log(1/(Q*Q))),Z=B+((((B*b+_)*B+v)*B+d)*B+f)/((((B*w+p)*B+y)*B+h)*B+s);i<q&&(Z+=(Z*Z*Z+Z)/i/4);var ne=N-R*Z;return i<q&&(ne+=-T/i+O*Z/i),Z*(ne*o.log(t-1)+L)}e.extend(e.tukey,{cdf:function(t,i,f){var s=1,d=i,h=16,v=8,y=-30,_=1e-14,p=100,b=800,w=5e3,N=25e3,R=1,T=.5,O=.25,L=.125,q=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],Q=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(t<=0)return 0;if(f<2||s<1||d<2)return NaN;if(!Number.isFinite(t))return 1;if(f>N)return g(t,s,d);var B=f*.5,Z=B*o.log(f)-f*o.log(2)-e.gammaln(B),ne=B-1,re=f*.25,J;f<=p?J=R:f<=b?J=T:f<=w?J=O:J=L,Z+=o.log(J);for(var le=0,ee=1;ee<=50;ee++){for(var se=0,ae=(2*ee-1)*J,ge=1;ge<=h;ge++){var ue,ke;v<ge?(ue=ge-v-1,ke=Z+ne*o.log(ae+q[ue]*J)-(q[ue]*J+ae)*re):(ue=ge-1,ke=Z+ne*o.log(ae-q[ue]*J)+(q[ue]*J-ae)*re);var Y;if(ke>=y){v<ge?Y=t*o.sqrt((q[ue]*J+ae)*.5):Y=t*o.sqrt((-(q[ue]*J)+ae)*.5);var he=g(Y,s,d),pe=he*Q[ue]*o.exp(ke);se+=pe}}if(ee*J>=1&&se<=_)break;le+=se}if(se>_)throw new Error("tukey.cdf failed to converge");return le>1&&(le=1),le},inv:function(u,t,i){var f=1,s=t,d=1e-4,h=50;if(i<2||f<1||s<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var v=m(u,s,i),y=e.tukey.cdf(v,t,i)-u,_;y>0?_=o.max(0,v-1):_=v+1;for(var p=e.tukey.cdf(_,t,i)-u,b,w=1;w<h;w++){b=_-p*(_-v)/(p-y),y=p,v=_,b<0&&(b=0,p=-u),p=e.tukey.cdf(b,t,i)-u,_=b;var N=o.abs(_-v);if(N<d)return b}throw new Error("tukey.inv failed to converge")}})}(l,Math),function(e,o){var a=Array.prototype.push,c=e.utils.isArray;function g(m){return c(m)||m instanceof e}e.extend({add:function(u,t){return g(t)?(g(t[0])||(t=[t]),e.map(u,function(i,f,s){return i+t[f][s]})):e.map(u,function(i){return i+t})},subtract:function(u,t){return g(t)?(g(t[0])||(t=[t]),e.map(u,function(i,f,s){return i-t[f][s]||0})):e.map(u,function(i){return i-t})},divide:function(u,t){return g(t)?(g(t[0])||(t=[t]),e.multiply(u,e.inv(t))):e.map(u,function(i){return i/t})},multiply:function(u,t){var i,f,s,d,h,v,y,_;if(u.length===void 0&&t.length===void 0)return u*t;if(h=u.length,v=u[0].length,y=e.zeros(h,s=g(t)?t[0].length:v),_=0,g(t)){for(;_<s;_++)for(i=0;i<h;i++){for(d=0,f=0;f<v;f++)d+=u[i][f]*t[f][_];y[i][_]=d}return h===1&&_===1?y[0][0]:y}return e.map(u,function(p){return p*t})},outer:function(u,t){return e.multiply(u.map(function(i){return[i]}),[t])},dot:function(u,t){g(u[0])||(u=[u]),g(t[0])||(t=[t]);for(var i=u[0].length===1&&u.length!==1?e.transpose(u):u,f=t[0].length===1&&t.length!==1?e.transpose(t):t,s=[],d=0,h=i.length,v=i[0].length,y,_;d<h;d++){for(s[d]=[],y=0,_=0;_<v;_++)y+=i[d][_]*f[d][_];s[d]=y}return s.length===1?s[0]:s},pow:function(u,t){return e.map(u,function(i){return o.pow(i,t)})},exp:function(u){return e.map(u,function(t){return o.exp(t)})},log:function(u){return e.map(u,function(t){return o.log(t)})},abs:function(u){return e.map(u,function(t){return o.abs(t)})},norm:function(u,t){var i=0,f=0;for(isNaN(t)&&(t=2),g(u[0])&&(u=u[0]);f<u.length;f++)i+=o.pow(o.abs(u[f]),t);return o.pow(i,1/t)},angle:function(u,t){return o.acos(e.dot(u,t)/(e.norm(u)*e.norm(t)))},aug:function(u,t){var i=[],f;for(f=0;f<u.length;f++)i.push(u[f].slice());for(f=0;f<i.length;f++)a.apply(i[f],t[f]);return i},inv:function(u){for(var t=u.length,i=u[0].length,f=e.identity(t,i),s=e.gauss_jordan(u,f),d=[],h=0,v;h<t;h++)for(d[h]=[],v=i;v<s[0].length;v++)d[h][v-i]=s[h][v];return d},det:function m(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var t=0,i=0;i<u.length;i++){for(var f=[],s=1;s<u.length;s++){f[s-1]=[];for(var d=0;d<u.length;d++)d<i?f[s-1][d]=u[s][d]:d>i&&(f[s-1][d-1]=u[s][d])}var h=i%2?-1:1;t+=m(f)*u[0][i]*h}return t},gauss_elimination:function(u,t){var i=0,f=0,s=u.length,d=u[0].length,h=1,v=0,y=[],_,p,b,w;for(u=e.aug(u,t),_=u[0].length,i=0;i<s;i++){for(p=u[i][i],f=i,w=i+1;w<d;w++)p<o.abs(u[w][i])&&(p=u[w][i],f=w);if(f!=i)for(w=0;w<_;w++)b=u[i][w],u[i][w]=u[f][w],u[f][w]=b;for(f=i+1;f<s;f++)for(h=u[f][i]/u[i][i],w=i;w<_;w++)u[f][w]=u[f][w]-h*u[i][w]}for(i=s-1;i>=0;i--){for(v=0,f=i+1;f<=s-1;f++)v=v+y[f]*u[i][f];y[i]=(u[i][_-1]-v)/u[i][i]}return y},gauss_jordan:function(u,t){var i=e.aug(u,t),f=i.length,s=i[0].length,d=0,h,v,y;for(v=0;v<f;v++){var _=v;for(y=v+1;y<f;y++)o.abs(i[y][v])>o.abs(i[_][v])&&(_=y);var p=i[v];for(i[v]=i[_],i[_]=p,y=v+1;y<f;y++)for(d=i[y][v]/i[v][v],h=v;h<s;h++)i[y][h]-=i[v][h]*d}for(v=f-1;v>=0;v--){for(d=i[v][v],y=0;y<v;y++)for(h=s-1;h>v-1;h--)i[y][h]-=i[v][h]*i[y][v]/d;for(i[v][v]/=d,h=f;h<s;h++)i[v][h]/=d}return i},triaUpSolve:function(u,t){var i=u[0].length,f=e.zeros(1,i)[0],s,d=!1;return t[0].length!=null&&(t=t.map(function(h){return h[0]}),d=!0),e.arange(i-1,-1,-1).forEach(function(h){s=e.arange(h+1,i).map(function(v){return f[v]*u[h][v]}),f[h]=(t[h]-e.sum(s))/u[h][h]}),d?f.map(function(h){return[h]}):f},triaLowSolve:function(u,t){var i=u[0].length,f=e.zeros(1,i)[0],s,d=!1;return t[0].length!=null&&(t=t.map(function(h){return h[0]}),d=!0),e.arange(i).forEach(function(h){s=e.arange(h).map(function(v){return u[h][v]*f[v]}),f[h]=(t[h]-e.sum(s))/u[h][h]}),d?f.map(function(h){return[h]}):f},lu:function(u){var t=u.length,i=e.identity(t),f=e.zeros(u.length,u[0].length),s;return e.arange(t).forEach(function(d){f[0][d]=u[0][d]}),e.arange(1,t).forEach(function(d){e.arange(d).forEach(function(h){s=e.arange(h).map(function(v){return i[d][v]*f[v][h]}),i[d][h]=(u[d][h]-e.sum(s))/f[h][h]}),e.arange(d,t).forEach(function(h){s=e.arange(d).map(function(v){return i[d][v]*f[v][h]}),f[d][h]=u[s.length][h]-e.sum(s)})}),[i,f]},cholesky:function(u){var t=u.length,i=e.zeros(u.length,u[0].length),f;return e.arange(t).forEach(function(s){f=e.arange(s).map(function(d){return o.pow(i[s][d],2)}),i[s][s]=o.sqrt(u[s][s]-e.sum(f)),e.arange(s+1,t).forEach(function(d){f=e.arange(s).map(function(h){return i[s][h]*i[d][h]}),i[d][s]=(u[s][d]-e.sum(f))/i[s][s]})}),i},gauss_jacobi:function(u,t,i,f){for(var s=0,d=0,h=u.length,v=[],y=[],_=[],p,b,w,N;s<h;s++)for(v[s]=[],y[s]=[],_[s]=[],d=0;d<h;d++)s>d?(v[s][d]=u[s][d],y[s][d]=_[s][d]=0):s<d?(y[s][d]=u[s][d],v[s][d]=_[s][d]=0):(_[s][d]=u[s][d],v[s][d]=y[s][d]=0);for(w=e.multiply(e.multiply(e.inv(_),e.add(v,y)),-1),b=e.multiply(e.inv(_),t),p=i,N=e.add(e.multiply(w,i),b),s=2;o.abs(e.norm(e.subtract(N,p)))>f;)p=N,N=e.add(e.multiply(w,p),b),s++;return N},gauss_seidel:function(u,t,i,f){for(var s=0,d=u.length,h=[],v=[],y=[],_,p,b,w,N;s<d;s++)for(h[s]=[],v[s]=[],y[s]=[],_=0;_<d;_++)s>_?(h[s][_]=u[s][_],v[s][_]=y[s][_]=0):s<_?(v[s][_]=u[s][_],h[s][_]=y[s][_]=0):(y[s][_]=u[s][_],h[s][_]=v[s][_]=0);for(w=e.multiply(e.multiply(e.inv(e.add(y,h)),v),-1),b=e.multiply(e.inv(e.add(y,h)),t),p=i,N=e.add(e.multiply(w,i),b),s=2;o.abs(e.norm(e.subtract(N,p)))>f;)p=N,N=e.add(e.multiply(w,p),b),s=s+1;return N},SOR:function(u,t,i,f,s){for(var d=0,h=u.length,v=[],y=[],_=[],p,b,w,N,R;d<h;d++)for(v[d]=[],y[d]=[],_[d]=[],p=0;p<h;p++)d>p?(v[d][p]=u[d][p],y[d][p]=_[d][p]=0):d<p?(y[d][p]=u[d][p],v[d][p]=_[d][p]=0):(_[d][p]=u[d][p],v[d][p]=y[d][p]=0);for(N=e.multiply(e.inv(e.add(_,e.multiply(v,s))),e.subtract(e.multiply(_,1-s),e.multiply(y,s))),w=e.multiply(e.multiply(e.inv(e.add(_,e.multiply(v,s))),t),s),b=i,R=e.add(e.multiply(N,i),w),d=2;o.abs(e.norm(e.subtract(R,b)))>f;)b=R,R=e.add(e.multiply(N,b),w),d++;return R},householder:function(u){for(var t=u.length,i=u[0].length,f=0,s=[],d=[],h,v,y,_,p;f<t-1;f++){for(h=0,_=f+1;_<i;_++)h+=u[_][f]*u[_][f];for(p=u[f+1][f]>0?-1:1,h=p*o.sqrt(h),v=o.sqrt((h*h-u[f+1][f]*h)/2),s=e.zeros(t,1),s[f+1][0]=(u[f+1][f]-h)/(2*v),y=f+2;y<t;y++)s[y][0]=u[y][f]/(2*v);d=e.subtract(e.identity(t,i),e.multiply(e.multiply(s,e.transpose(s)),2)),u=e.multiply(d,e.multiply(u,d))}return u},QR:function(){var m=e.sum,u=e.arange;function t(i){var f=i.length,s=i[0].length,d=e.zeros(s,s);i=e.copy(i);var h,v,y;for(v=0;v<s;v++){for(d[v][v]=o.sqrt(m(u(f).map(function(_){return i[_][v]*i[_][v]}))),h=0;h<f;h++)i[h][v]=i[h][v]/d[v][v];for(y=v+1;y<s;y++)for(d[v][y]=m(u(f).map(function(_){return i[_][v]*i[_][y]})),h=0;h<f;h++)i[h][y]=i[h][y]-i[h][v]*d[v][y]}return[i,d]}return t}(),lstsq:function(){function m(t){t=e.copy(t);var i=t.length,f=e.identity(i);return e.arange(i-1,-1,-1).forEach(function(s){e.sliceAssign(f,{row:s},e.divide(e.slice(f,{row:s}),t[s][s])),e.sliceAssign(t,{row:s},e.divide(e.slice(t,{row:s}),t[s][s])),e.arange(s).forEach(function(d){var h=e.multiply(t[d][s],-1),v=e.slice(t,{row:d}),y=e.multiply(e.slice(t,{row:s}),h);e.sliceAssign(t,{row:d},e.add(v,y));var _=e.slice(f,{row:d}),p=e.multiply(e.slice(f,{row:s}),h);e.sliceAssign(f,{row:d},e.add(_,p))})}),f}function u(t,i){var f=!1;i[0].length===void 0&&(i=i.map(function(N){return[N]}),f=!0);var s=e.QR(t),d=s[0],h=s[1],v=t[0].length,y=e.slice(d,{col:{end:v}}),_=e.slice(h,{row:{end:v}}),p=m(_),b=e.transpose(y);b[0].length===void 0&&(b=[b]);var w=e.multiply(e.multiply(p,b),i);return w.length===void 0&&(w=[[w]]),f?w.map(function(N){return N[0]}):w}return u}(),jacobi:function(u){for(var t=1,i=u.length,f=e.identity(i,i),s=[],d,h,v,y,_,p,b,w;t===1;){for(p=u[0][1],y=0,_=1,h=0;h<i;h++)for(v=0;v<i;v++)h!=v&&p<o.abs(u[h][v])&&(p=o.abs(u[h][v]),y=h,_=v);for(u[y][y]===u[_][_]?b=u[y][_]>0?o.PI/4:-o.PI/4:b=o.atan(2*u[y][_]/(u[y][y]-u[_][_]))/2,w=e.identity(i,i),w[y][y]=o.cos(b),w[y][_]=-o.sin(b),w[_][y]=o.sin(b),w[_][_]=o.cos(b),f=e.multiply(f,w),d=e.multiply(e.multiply(e.inv(w),u),w),u=d,t=0,h=1;h<i;h++)for(v=1;v<i;v++)h!=v&&o.abs(u[h][v])>.001&&(t=1)}for(h=0;h<i;h++)s.push(u[h][h]);return[f,s]},rungekutta:function(u,t,i,f,s,d){var h,v,y,_,p;if(d===2)for(;f<=i;)h=t*u(f,s),v=t*u(f+t,s+h),y=s+(h+v)/2,s=y,f=f+t;if(d===4)for(;f<=i;)h=t*u(f,s),v=t*u(f+t/2,s+h/2),_=t*u(f+t/2,s+v/2),p=t*u(f+t,s+_),y=s+(h+2*v+2*_+p)/6,s=y,f=f+t;return s},romberg:function(u,t,i,f){for(var s=0,d=(i-t)/2,h=[],v=[],y=[],_,p,b,w,N;s<f/2;){for(N=u(t),b=t,w=0;b<=i;b=b+d,w++)h[w]=b;for(_=h.length,b=1;b<_-1;b++)N+=(b%2!==0?4:2)*u(h[b]);N=d/3*(N+u(i)),y[s]=N,d/=2,s++}for(p=y.length,_=1;p!==1;){for(b=0;b<p-1;b++)v[b]=(o.pow(4,_)*y[b+1]-y[b])/(o.pow(4,_)-1);p=v.length,y=v,v=[],_++}return y},richardson:function(u,t,i,f){function s(R,T){for(var O=0,L=R.length,q;O<L;O++)R[O]===T&&(q=O);return q}for(var d=o.abs(i-u[s(u,i)+1]),h=0,v=[],y=[],_,p,b,w,N;f>=d;)_=s(u,i+f),p=s(u,i),v[h]=(t[_]-2*t[p]+t[2*p-_])/(f*f),f/=2,h++;for(w=v.length,b=1;w!=1;){for(N=0;N<w-1;N++)y[N]=(o.pow(4,b)*v[N+1]-v[N])/(o.pow(4,b)-1);w=y.length,v=y,y=[],b++}return v},simpson:function(u,t,i,f){for(var s=(i-t)/f,d=u(t),h=[],v=t,y=0,_=1,p;v<=i;v=v+s,y++)h[y]=v;for(p=h.length;_<p-1;_++)d+=(_%2!==0?4:2)*u(h[_]);return s/3*(d+u(i))},hermite:function(u,t,i,f){for(var s=u.length,d=0,h=0,v=[],y=[],_=[],p=[],b;h<s;h++){for(v[h]=1,b=0;b<s;b++)h!=b&&(v[h]*=(f-u[b])/(u[h]-u[b]));for(y[h]=0,b=0;b<s;b++)h!=b&&(y[h]+=1/(u[h]-u[b]));_[h]=(1-2*(f-u[h])*y[h])*(v[h]*v[h]),p[h]=(f-u[h])*(v[h]*v[h]),d+=_[h]*t[h]+p[h]*i[h]}return d},lagrange:function(u,t,i){for(var f=0,s=0,d,h,v=u.length;s<v;s++){for(h=t[s],d=0;d<v;d++)s!=d&&(h*=(i-u[d])/(u[s]-u[d]));f+=h}return f},cubic_spline:function(u,t,i){for(var f=u.length,s=0,d,h=[],v=[],y=[],_=[],p=[],b=[],w=[];s<f-1;s++)p[s]=u[s+1]-u[s];for(y[0]=0,s=1;s<f-1;s++)y[s]=3/p[s]*(t[s+1]-t[s])-3/p[s-1]*(t[s]-t[s-1]);for(s=1;s<f-1;s++)h[s]=[],v[s]=[],h[s][s-1]=p[s-1],h[s][s]=2*(p[s-1]+p[s]),h[s][s+1]=p[s],v[s][0]=y[s];for(_=e.multiply(e.inv(h),v),d=0;d<f-1;d++)b[d]=(t[d+1]-t[d])/p[d]-p[d]*(_[d+1][0]+2*_[d][0])/3,w[d]=(_[d+1][0]-_[d][0])/(3*p[d]);for(d=0;d<f&&!(u[d]>i);d++);return d-=1,t[d]+(i-u[d])*b[d]+e.sq(i-u[d])*_[d]+(i-u[d])*e.sq(i-u[d])*w[d]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var t=u.length,i=u[0].length,f=0,s,d,h=[],v=[],y=[],_=[],p=[],b=[],w=[],N=[],R=[],T=[];for(f=0;f<t;f++)h[f]=e.sum(u[f])/i;for(f=0;f<i;f++)for(w[f]=[],s=0;s<t;s++)w[f][s]=u[s][f]-h[s];for(w=e.transpose(w),f=0;f<t;f++)for(N[f]=[],s=0;s<t;s++)N[f][s]=e.dot([w[f]],[w[s]])/(i-1);for(y=e.jacobi(N),R=y[0],v=y[1],T=e.transpose(R),f=0;f<v.length;f++)for(s=f;s<v.length;s++)v[f]<v[s]&&(d=v[f],v[f]=v[s],v[s]=d,_=T[f],T[f]=T[s],T[s]=_);for(b=e.transpose(w),f=0;f<t;f++)for(p[f]=[],s=0;s<b.length;s++)p[f][s]=e.dot([T[f]],[b[s]]);return[u,v,T,p]}}),function(m){for(var u=0;u<m.length;u++)(function(t){e.fn[t]=function(i,f){var s=this;return f?(setTimeout(function(){f.call(s,e.fn[t].call(s,i))},15),this):typeof e[t](this,i)=="number"?e[t](this,i):e(e[t](this,i))}})(m[u])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(l,Math),function(e,o){var a=[].slice,c=e.utils.isNumber,g=e.utils.isArray;e.extend({zscore:function(){var t=a.call(arguments);return c(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var t=a.call(arguments),i;return g(t[1])?(i=e.zscore(t[0],t[1],t[3]),t[2]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2):t.length>2?(i=e.zscore(t[0],t[1],t[2]),t[3]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2):(i=t[0],t[1]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2)}}),e.extend(e.fn,{zscore:function(t,i){return(t-this.mean())/this.stdev(i)},ztest:function(t,i,f){var s=o.abs(this.zscore(t,f));return i===1?e.normal.cdf(-s,0,1):e.normal.cdf(-s,0,1)*2}}),e.extend({tscore:function(){var t=a.call(arguments);return t.length===4?(t[0]-t[1])/(t[2]/o.sqrt(t[3])):(t[0]-e.mean(t[1]))/(e.stdev(t[1],!0)/o.sqrt(t[1].length))},ttest:function(){var t=a.call(arguments),i;return t.length===5?(i=o.abs(e.tscore(t[0],t[1],t[2],t[3])),t[4]===1?e.studentt.cdf(-i,t[3]-1):e.studentt.cdf(-i,t[3]-1)*2):c(t[1])?(i=o.abs(t[0]),t[2]==1?e.studentt.cdf(-i,t[1]-1):e.studentt.cdf(-i,t[1]-1)*2):(i=o.abs(e.tscore(t[0],t[1])),t[2]==1?e.studentt.cdf(-i,t[1].length-1):e.studentt.cdf(-i,t[1].length-1)*2)}}),e.extend(e.fn,{tscore:function(t){return(t-this.mean())/(this.stdev(!0)/o.sqrt(this.cols()))},ttest:function(t,i){return i===1?1-e.studentt.cdf(o.abs(this.tscore(t)),this.cols()-1):e.studentt.cdf(-o.abs(this.tscore(t)),this.cols()-1)*2}}),e.extend({anovafscore:function(){var t=a.call(arguments),i,f,s,d,h,v,y,_;if(t.length===1){for(h=new Array(t[0].length),y=0;y<t[0].length;y++)h[y]=t[0][y];t=h}for(f=new Array,y=0;y<t.length;y++)f=f.concat(t[y]);for(s=e.mean(f),i=0,y=0;y<t.length;y++)i=i+t[y].length*o.pow(e.mean(t[y])-s,2);for(i/=t.length-1,v=0,y=0;y<t.length;y++)for(d=e.mean(t[y]),_=0;_<t[y].length;_++)v+=o.pow(t[y][_]-d,2);return v/=f.length-t.length,i/v},anovaftest:function(){var t=a.call(arguments),i,f,s,d;if(c(t[0]))return 1-e.centralF.cdf(t[0],t[1],t[2]);var h=e.anovafscore(t);for(i=t.length-1,s=0,d=0;d<t.length;d++)s=s+t[d].length;return f=s-i-1,1-e.centralF.cdf(h,i,f)},ftest:function(t,i,f){return 1-e.centralF.cdf(t,i,f)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t=0,i;for(i=0;i<this.length;i++)t=t+this[i].length;return e.ftest(this.anovafscore(),this.length-1,t-this.length)}}),e.extend({qscore:function(){var t=a.call(arguments),i,f,s,d,h;return c(t[0])?(i=t[0],f=t[1],s=t[2],d=t[3],h=t[4]):(i=e.mean(t[0]),f=e.mean(t[1]),s=t[0].length,d=t[1].length,h=t[2]),o.abs(i-f)/(h*o.sqrt((1/s+1/d)/2))},qtest:function(){var t=a.call(arguments),i;t.length===3?(i=t[0],t=t.slice(1)):t.length===7?(i=e.qscore(t[0],t[1],t[2],t[3],t[4]),t=t.slice(5)):(i=e.qscore(t[0],t[1],t[2]),t=t.slice(3));var f=t[0],s=t[1];return 1-e.tukey.cdf(i,s,f-s)},tukeyhsd:function(t){for(var i=e.pooledstdev(t),f=t.map(function(_){return e.mean(_)}),s=t.reduce(function(_,p){return _+p.length},0),d=[],h=0;h<t.length;++h)for(var v=h+1;v<t.length;++v){var y=e.qtest(f[h],f[v],t[h].length,t[v].length,i,s,t.length);d.push([[h,v],y])}return d}}),e.extend({normalci:function(){var t=a.call(arguments),i=new Array(2),f;return t.length===4?f=o.abs(e.normal.inv(t[1]/2,0,1)*t[2]/o.sqrt(t[3])):f=o.abs(e.normal.inv(t[1]/2,0,1)*e.stdev(t[2])/o.sqrt(t[2].length)),i[0]=t[0]-f,i[1]=t[0]+f,i},tci:function(){var t=a.call(arguments),i=new Array(2),f;return t.length===4?f=o.abs(e.studentt.inv(t[1]/2,t[3]-1)*t[2]/o.sqrt(t[3])):f=o.abs(e.studentt.inv(t[1]/2,t[2].length-1)*e.stdev(t[2],!0)/o.sqrt(t[2].length)),i[0]=t[0]-f,i[1]=t[0]+f,i},significant:function(t,i){return t<i}}),e.extend(e.fn,{normalci:function(t,i){return e.normalci(t,i,this.toArray())},tci:function(t,i){return e.tci(t,i,this.toArray())}});function m(u,t,i,f){if(u>1||i>1||u<=0||i<=0)throw new Error("Proportions should be greater than 0 and less than 1");var s=(u*t+i*f)/(t+f),d=o.sqrt(s*(1-s)*(1/t+1/f));return(u-i)/d}e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,i,f,s){var d=m(t,i,f,s);return e.ztest(d,1)},twoSidedDifferenceOfProportions:function(t,i,f,s){var d=m(t,i,f,s);return e.ztest(d,2)}})}(l,Math),l.models=function(){function e(m){var u=m[0].length,t=l.arange(u).map(function(i){var f=l.arange(u).filter(function(s){return s!==i});return o(l.col(m,i).map(function(s){return s[0]}),l.col(m,f))});return t}function o(m,u){var t=m.length,i=u[0].length-1,f=t-i-1,s=l.lstsq(u,m),d=l.multiply(u,s.map(function(w){return[w]})).map(function(w){return w[0]}),h=l.subtract(m,d),v=l.mean(m),y=l.sum(d.map(function(w){return Math.pow(w-v,2)})),_=l.sum(m.map(function(w,N){return Math.pow(w-d[N],2)})),p=y+_,b=y/p;return{exog:u,endog:m,nobs:t,df_model:i,df_resid:f,coef:s,predict:d,resid:h,ybar:v,SST:p,SSE:y,SSR:_,R2:b}}function a(m){var u=e(m.exog),t=Math.sqrt(m.SSR/m.df_resid),i=u.map(function(v){var y=v.SST,_=v.R2;return t/Math.sqrt(y*(1-_))}),f=m.coef.map(function(v,y){return(v-0)/i[y]}),s=f.map(function(v){var y=l.studentt.cdf(v,m.df_resid);return(y>.5?1-y:y)*2}),d=l.studentt.inv(.975,m.df_resid),h=m.coef.map(function(v,y){var _=d*i[y];return[v-_,v+_]});return{se:i,t:f,p:s,sigmaHat:t,interval95:h}}function c(m){var u=m.R2/m.df_model/((1-m.R2)/m.df_resid),t=function(f,s,d){return l.beta.cdf(f/(d/s+f),s/2,d/2)},i=1-t(u,m.df_model,m.df_resid);return{F_statistic:u,pvalue:i}}function g(m,u){var t=o(m,u),i=a(t),f=c(t),s=1-(1-t.R2)*((t.nobs-1)/t.df_resid);return t.t=i,t.f=f,t.adjust_R2=s,t}return{ols:g}}(),l.extend({buildxmatrix:function(){for(var o=new Array(arguments.length),a=0;a<arguments.length;a++){var c=[1];o[a]=c.concat(arguments[a])}return l(o)},builddxmatrix:function(){for(var o=new Array(arguments[0].length),a=0;a<arguments[0].length;a++){var c=[1];o[a]=c.concat(arguments[0][a])}return l(o)},buildjxmatrix:function(o){for(var a=new Array(o.length),c=0;c<o.length;c++)a[c]=o[c];return l.builddxmatrix(a)},buildymatrix:function(o){return l(o).transpose()},buildjymatrix:function(o){return o.transpose()},matrixmult:function(o,a){var c,g,m,u,t;if(o.cols()==a.rows()){if(a.rows()>1){for(u=[],c=0;c<o.rows();c++)for(u[c]=[],g=0;g<a.cols();g++){for(t=0,m=0;m<o.cols();m++)t+=o.toArray()[c][m]*a.toArray()[m][g];u[c][g]=t}return l(u)}for(u=[],c=0;c<o.rows();c++)for(u[c]=[],g=0;g<a.cols();g++){for(t=0,m=0;m<o.cols();m++)t+=o.toArray()[c][m]*a.toArray()[g];u[c][g]=t}return l(u)}},regress:function(o,a){var c=l.xtranspxinv(o),g=o.transpose(),m=l.matrixmult(l(c),g);return l.matrixmult(m,a)},regresst:function(o,a,c){var g=l.regress(o,a),m={};m.anova={};var u=l.jMatYBar(o,g);m.yBar=u;var t=a.mean();m.anova.residuals=l.residuals(a,u),m.anova.ssr=l.ssr(u,t),m.anova.msr=m.anova.ssr/(o[0].length-1),m.anova.sse=l.sse(a,u),m.anova.mse=m.anova.sse/(a.length-(o[0].length-1)-1),m.anova.sst=l.sst(a,t),m.anova.mst=m.anova.sst/(a.length-1),m.anova.r2=1-m.anova.sse/m.anova.sst,m.anova.r2<0&&(m.anova.r2=0),m.anova.fratio=m.anova.msr/m.anova.mse,m.anova.pvalue=l.anovaftest(m.anova.fratio,o[0].length-1,a.length-(o[0].length-1)-1),m.anova.rmse=Math.sqrt(m.anova.mse),m.anova.r2adj=1-m.anova.mse/m.anova.mst,m.anova.r2adj<0&&(m.anova.r2adj=0),m.stats=new Array(o[0].length);for(var i=l.xtranspxinv(o),f,s,d,h=0;h<g.length;h++)f=Math.sqrt(m.anova.mse*Math.abs(i[h][h])),s=Math.abs(g[h]/f),d=l.ttest(s,a.length-o[0].length-1,c),m.stats[h]=[g[h],f,s,d];return m.regress=g,m},xtranspx:function(o){return l.matrixmult(o.transpose(),o)},xtranspxinv:function(o){var a=l.matrixmult(o.transpose(),o),c=l.inv(a);return c},jMatYBar:function(o,a){var c=l.matrixmult(o,a);return new l(c)},residuals:function(o,a){return l.matrixsubtract(o,a)},ssr:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a,2);return c},sse:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a[g],2);return c},sst:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a,2);return c},matrixsubtract:function(o,a){for(var c=new Array(o.length),g=0;g<o.length;g++){c[g]=new Array(o[g].length);for(var m=0;m<o[g].length;m++)c[g][m]=o[g][m]-a[g][m]}return l(c)}}),l.jStat=l,l})})(lf);const of=Dr,ff=(r,n,l)=>{const o=1/l;l=o,n=n/1e3*(1/o);let a=[];return r.forEach(c=>{const g=Array(8).fill(c.maxWell.length);let m=Array(g.length).fill(0);for(var u=0;u<g.length;u++)m[u]=n*o*l**u;const t=[-1*Math.log10(m[0]*10),-1*Math.log10(m[m.length-1]/10)];let i=Array(g[0]).fill(0);for(var u=0;u<g.length;u++)i[u]=c.maxWell.filter(h=>h>=u).length;let f=0;i[0]!=0&&(f=rf.local_min(d=>-1*uf(d,m,g,i),t[0],t[1],1e-4).x);let s={sample:c.name,nrep:c.maxWell.length,titer:f,titer_ul:10**f/1e3};s.titer==0&&(s.titer_ul=0),a=[s,...a]}),a},uf=(r,n,l,e)=>{let o=1;for(var a=0;a<n.length;a++){let c=-1*Math.expm1(10**r*-1*n[a]);o=o*of.binomial.pdf(e[a],l[a],c)}return o},sf=r=>{let n=[],l=[],e;return r.forEach(o=>{if(o.added)for(var a=0;a<o.maxWell.length;a++)n.includes(o.colNames[a])?(e=l.find(c=>c.name==o.colNames[a]),e.maxWell=[o.maxWell[a],...e.maxWell]):(e={name:o.colNames[a],maxWell:[o.maxWell[a]]},n=[e.name,...n],l=[e,...l])}),l},af=(r,n,l)=>{if(n==null|l==null)return null;const e=sf(r);let o=[];const a=ef(e,n,l),c=ff(e,n,l);for(var g=0;g<a.length;g++)o=[{sample:a[g].sample,nrep:a[g].nrep,rm_titer:a[g].titer,ms_titer:c[g].titer,ms_titer_ul:c[g].titer_ul},...o];return o};function xi(r,n,l){const e=r.slice();return e[3]=n[l],e}function Ni(r,n,l){const e=r.slice();return e[6]=n[l],e}function Ri(r){let n,l,e,o,a,c,g,m,u,t,i,f,s,d,h,v,y,_,p,b,w,N=r[0],R=[];for(let T=0;T<N.length;T+=1)R[T]=Ti(xi(r,N,T));return b=new qn({props:{type:"secondary",$$slots:{default:[cf]},$$scope:{ctx:r}}}),b.$on("click",r[2]),{c(){n=D("table"),l=D("tr"),e=D("th"),o=H("Sample"),a=F(),c=D("th"),g=H("TCID50/µL"),m=F(),u=D("th"),t=H("SIN/µL"),i=F(),f=D("th"),s=H("Log10 SIN/mL"),d=F(),h=D("th"),v=H("# Replicates"),y=F();for(let T=0;T<R.length;T+=1)R[T].c();_=F(),p=D("div"),M(b.$$.fragment),this.h()},l(T){n=I(T,"TABLE",{class:!0});var O=P(n);l=I(O,"TR",{});var L=P(l);e=I(L,"TH",{class:!0});var q=P(e);o=G(q,"Sample"),q.forEach(k),a=U(L),c=I(L,"TH",{class:!0});var Q=P(c);g=G(Q,"TCID50/µL"),Q.forEach(k),m=U(L),u=I(L,"TH",{class:!0});var B=P(u);t=G(B,"SIN/µL"),B.forEach(k),i=U(L),f=I(L,"TH",{class:!0});var Z=P(f);s=G(Z,"Log10 SIN/mL"),Z.forEach(k),d=U(L),h=I(L,"TH",{class:!0});var ne=P(h);v=G(ne,"# Replicates"),ne.forEach(k),L.forEach(k),y=U(O);for(let J=0;J<R.length;J+=1)R[J].l(O);O.forEach(k),_=U(T),p=I(T,"DIV",{class:!0});var re=P(p);$(b.$$.fragment,re),re.forEach(k),this.h()},h(){x(e,"class","svelte-hzsd5o"),x(c,"class","titer svelte-hzsd5o"),x(u,"class","titer svelte-hzsd5o"),x(f,"class","titer svelte-hzsd5o"),x(h,"class","titer svelte-hzsd5o"),x(n,"class","titer-table svelte-hzsd5o"),x(p,"class","dl_button svelte-hzsd5o")},m(T,O){A(T,n,O),z(n,l),z(l,e),z(e,o),z(l,a),z(l,c),z(c,g),z(l,m),z(l,u),z(u,t),z(l,i),z(l,f),z(f,s),z(l,d),z(l,h),z(h,v),z(n,y);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(n,null);A(T,_,O),A(T,p,O),S(b,p,null),w=!0},p(T,O){if(O&3){N=T[0];let q;for(q=0;q<N.length;q+=1){const Q=xi(T,N,q);R[q]?R[q].p(Q,O):(R[q]=Ti(Q),R[q].c(),R[q].m(n,null))}for(;q<R.length;q+=1)R[q].d(1);R.length=N.length}const L={};O&512&&(L.$$scope={dirty:O,ctx:T}),b.$set(L)},i(T){w||(C(b.$$.fragment,T),w=!0)},o(T){W(b.$$.fragment,T),w=!1},d(T){T&&k(n),Pe(R,T),T&&k(_),T&&k(p),j(b)}}}function zi(r){let n,l=r[3][r[6]].toFixed(2)+"",e;return{c(){n=D("td"),e=H(l),this.h()},l(o){n=I(o,"TD",{class:!0});var a=P(n);e=G(a,l),a.forEach(k),this.h()},h(){x(n,"class","titer svelte-hzsd5o")},m(o,a){A(o,n,a),z(n,e)},p(o,a){a&1&&l!==(l=o[3][o[6]].toFixed(2)+"")&&Ne(e,l)},d(o){o&&k(n)}}}function Ti(r){let n,l,e=r[3].sampleName+"",o,a,c,g,m=r[3].nrep+"",u,t,i=r[1],f=[];for(let s=0;s<i.length;s+=1)f[s]=zi(Ni(r,i,s));return{c(){n=D("tr"),l=D("td"),o=H(e),a=F();for(let s=0;s<f.length;s+=1)f[s].c();c=F(),g=D("td"),u=H(m),t=F(),this.h()},l(s){n=I(s,"TR",{});var d=P(n);l=I(d,"TD",{class:!0});var h=P(l);o=G(h,e),h.forEach(k),a=U(d);for(let y=0;y<f.length;y+=1)f[y].l(d);c=U(d),g=I(d,"TD",{class:!0});var v=P(g);u=G(v,m),v.forEach(k),t=U(d),d.forEach(k),this.h()},h(){x(l,"class","svelte-hzsd5o"),x(g,"class","titer svelte-hzsd5o")},m(s,d){A(s,n,d),z(n,l),z(l,o),z(n,a);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(n,null);z(n,c),z(n,g),z(g,u),z(n,t)},p(s,d){if(d&1&&e!==(e=s[3].sampleName+"")&&Ne(o,e),d&3){i=s[1];let h;for(h=0;h<i.length;h+=1){const v=Ni(s,i,h);f[h]?f[h].p(v,d):(f[h]=zi(v),f[h].c(),f[h].m(n,c))}for(;h<f.length;h+=1)f[h].d(1);f.length=i.length}d&1&&m!==(m=s[3].nrep+"")&&Ne(u,m)},d(s){s&&k(n),Pe(f,s)}}}function cf(r){let n;return{c(){n=H("Download CSV")},l(l){n=G(l,"Download CSV")},m(l,e){A(l,n,e)},d(l){l&&k(n)}}}function df(r){let n,l,e=r[0]!=null&&Ri(r);return{c(){e&&e.c(),n=_e()},l(o){e&&e.l(o),n=_e()},m(o,a){e&&e.m(o,a),A(o,n,a),l=!0},p(o,[a]){o[0]!=null?e?(e.p(o,a),a&1&&C(e,1)):(e=Ri(o),e.c(),C(e,1),e.m(n.parentNode,n)):e&&(Re(),W(e,1,1,()=>{e=null}),ze())},i(o){l||(C(e),l=!0)},o(o){W(e),l=!1},d(o){e&&e.d(o),o&&k(n)}}}function mf(r,n,l){let{data:e}=n,o=["rm_titer","ms_titer_ul","ms_titer"];const a=()=>{let c=[["sample","ReedMuench_titer","MidSin_titer_uL","MidSin_titer_log10mL","nrep"]];e.forEach(i=>{c=[...c,[i.sampleName,i.rm_titer,i.ms_titer_ul,i.ms_titer,i.nrep]]});let g="data:text/csv;charset=utf-8,"+c.map(i=>i.join(",")).join(`
`);var m=encodeURI(g),u=document.createElement("a");u.setAttribute("href",m);let t=new Date().toISOString().slice(0,10);u.setAttribute("download",t+"_titers.csv"),document.body.appendChild(u),u.click()};return r.$$set=c=>{"data"in c&&l(0,e=c.data)},[e,o,a]}class gf extends ce{constructor(n){super(),de(this,n,mf,df,me,{data:0})}}function hf(r){return r===0?!0:r}function Qe(r){return hf(r)?Array.isArray(r)?n=>r.map(l=>typeof l!="function"?n[l]:l(n)):typeof r!="function"?n=>n[r]:r:null}function vf(r){const n={};for(const l of r){if(Object(l)!==l)throw new TypeError("iterable for fromEntries should yield objects");const{"0":e,"1":o}=l;Object.defineProperty(n,e,{configurable:!0,enumerable:!0,writable:!0,value:o})}return n}function zr(r,n={}){return vf(Object.entries(r).filter(([l,e])=>e!==void 0&&n[l]===void 0))}function _f(r,n=300){let l;return(...e)=>{clearTimeout(l),l=setTimeout(()=>{r.apply(this,e)},n)}}function pf(r,n,{sort:l=!1}={}){if(!Array.isArray(r))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof r}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(n)||n===void 0||n===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const e={},o=Object.keys(n),a=o.length;let c,g,m,u,t,i,f;const s=r.length;for(c=0;c<a;c+=1){for(f=new Set,u=o[c],t=n[u],g=0;g<s;g+=1)if(i=t(r[g]),Array.isArray(i)){const h=i.length;for(m=0;m<h;m+=1)f.add(i[m])}else f.add(i);const d=Array.from(f);e[u]=l===!0?d.sort():d}return e}function yf(r,n){if(!Array.isArray(r))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof r}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(n)||n===void 0||n===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const l={},e=Object.keys(n),o=e.length;let a,c,g,m,u,t,i,f;const s=r.length;for(a=0;a<o;a+=1){for(m=e[a],i=n[m],u=null,t=null,c=0;c<s;c+=1)if(f=i(r[c]),Array.isArray(f)){const d=f.length;for(g=0;g<d;g+=1)f[g]!==!1&&f[g]!==void 0&&f[g]!==null&&Number.isNaN(f[g])===!1&&((u===null||f[g]<u)&&(u=f[g]),(t===null||f[g]>t)&&(t=f[g]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((u===null||f<u)&&(u=f),(t===null||f>t)&&(t=f));l[m]=[u,t]}return l}function rt(r,n){return r.length!==n.length?!1:r.every(l=>n.includes(l))}function Nl(r){return!!(typeof r.bandwidth=="function"||rt(Object.keys(r),["domain","range","unknown","copy"]))}function bf(r,n,l){const e=Object.keys(l).reduce((a,c)=>{const g=Nl(l[c])===!0?"ordinal":"other";return a[g]||(a[g]={}),a[g][c]=n[c],a},{ordinal:!1,other:!1});let o={};return e.ordinal&&(o=pf(r,e.ordinal)),e.other&&(o={...o,...yf(r,e.other)}),o}function wf(r=[],n){return Array.isArray(n)===!0?n.map((l,e)=>l===null?r[e]:l):r}function jt(r){return function([l,e]){return typeof e=="function"&&(e=e(l[r])),l?wf(l[r],e):e}}function fr(r,n){return r==null||n==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function kf(r,n){return r==null||n==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function Rl(r){let n,l,e;r.length!==2?(n=fr,l=(g,m)=>fr(r(g),m),e=(g,m)=>r(g)-m):(n=r===fr||r===kf?r:Ef,l=r,e=r);function o(g,m,u=0,t=g.length){if(u<t){if(n(m,m)!==0)return t;do{const i=u+t>>>1;l(g[i],m)<0?u=i+1:t=i}while(u<t)}return u}function a(g,m,u=0,t=g.length){if(u<t){if(n(m,m)!==0)return t;do{const i=u+t>>>1;l(g[i],m)<=0?u=i+1:t=i}while(u<t)}return u}function c(g,m,u=0,t=g.length){const i=o(g,m,u,t-1);return i>u&&e(g[i-1],m)>-e(g[i],m)?i-1:i}return{left:o,center:c,right:a}}function Ef(){return 0}function xf(r){return r===null?NaN:+r}const Nf=Rl(fr),Rf=Nf.right;Rl(xf).center;const zf=Rf;class qi extends Map{constructor(n,l=Pf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:l}}),n!=null)for(const[e,o]of n)this.set(e,o)}get(n){return super.get(Pi(this,n))}has(n){return super.has(Pi(this,n))}set(n,l){return super.set(Tf(this,n),l)}delete(n){return super.delete(qf(this,n))}}function Pi({_intern:r,_key:n},l){const e=n(l);return r.has(e)?r.get(e):l}function Tf({_intern:r,_key:n},l){const e=n(l);return r.has(e)?r.get(e):(r.set(e,l),l)}function qf({_intern:r,_key:n},l){const e=n(l);return r.has(e)&&(l=r.get(e),r.delete(e)),l}function Pf(r){return r!==null&&typeof r=="object"?r.valueOf():r}const Df=Math.sqrt(50),If=Math.sqrt(10),Af=Math.sqrt(2);function cr(r,n,l){const e=(n-r)/Math.max(0,l),o=Math.floor(Math.log10(e)),a=e/Math.pow(10,o),c=a>=Df?10:a>=If?5:a>=Af?2:1;let g,m,u;return o<0?(u=Math.pow(10,-o)/c,g=Math.round(r*u),m=Math.round(n*u),g/u<r&&++g,m/u>n&&--m,u=-u):(u=Math.pow(10,o)*c,g=Math.round(r/u),m=Math.round(n/u),g*u<r&&++g,m*u>n&&--m),m<g&&.5<=l&&l<2?cr(r,n,l*2):[g,m,u]}function Ir(r,n,l){if(n=+n,r=+r,l=+l,!(l>0))return[];if(r===n)return[r];const e=n<r,[o,a,c]=e?cr(n,r,l):cr(r,n,l);if(!(a>=o))return[];const g=a-o+1,m=new Array(g);if(e)if(c<0)for(let u=0;u<g;++u)m[u]=(a-u)/-c;else for(let u=0;u<g;++u)m[u]=(a-u)*c;else if(c<0)for(let u=0;u<g;++u)m[u]=(o+u)/-c;else for(let u=0;u<g;++u)m[u]=(o+u)*c;return m}function Ar(r,n,l){return n=+n,r=+r,l=+l,cr(r,n,l)[2]}function Lf(r,n,l){n=+n,r=+r,l=+l;const e=n<r,o=e?Ar(n,r,l):Ar(r,n,l);return(e?-1:1)*(o<0?1/-o:o)}function Cf(r,n,l){r=+r,n=+n,l=(o=arguments.length)<2?(n=r,r=0,1):o<3?1:+l;for(var e=-1,o=Math.max(0,Math.ceil((n-r)/l))|0,a=new Array(o);++e<o;)a[e]=r+e*l;return a}function mt(r,n){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(n).domain(r);break}return this}const Di=Symbol("implicit");function gt(){var r=new qi,n=[],l=[],e=Di;function o(a){let c=r.get(a);if(c===void 0){if(e!==Di)return e;r.set(a,c=n.push(a)-1)}return l[c%l.length]}return o.domain=function(a){if(!arguments.length)return n.slice();n=[],r=new qi;for(const c of a)r.has(c)||r.set(c,n.push(c)-1);return o},o.range=function(a){return arguments.length?(l=Array.from(a),o):l.slice()},o.unknown=function(a){return arguments.length?(e=a,o):e},o.copy=function(){return gt(n,l).unknown(e)},mt.apply(o,arguments),o}function zl(){var r=gt().unknown(void 0),n=r.domain,l=r.range,e=0,o=1,a,c,g=!1,m=0,u=0,t=.5;delete r.unknown;function i(){var f=n().length,s=o<e,d=s?o:e,h=s?e:o;a=(h-d)/Math.max(1,f-m+u*2),g&&(a=Math.floor(a)),d+=(h-d-a*(f-m))*t,c=a*(1-m),g&&(d=Math.round(d),c=Math.round(c));var v=Cf(f).map(function(y){return d+a*y});return l(s?v.reverse():v)}return r.domain=function(f){return arguments.length?(n(f),i()):n()},r.range=function(f){return arguments.length?([e,o]=f,e=+e,o=+o,i()):[e,o]},r.rangeRound=function(f){return[e,o]=f,e=+e,o=+o,g=!0,i()},r.bandwidth=function(){return c},r.step=function(){return a},r.round=function(f){return arguments.length?(g=!!f,i()):g},r.padding=function(f){return arguments.length?(m=Math.min(1,u=+f),i()):m},r.paddingInner=function(f){return arguments.length?(m=Math.min(1,f),i()):m},r.paddingOuter=function(f){return arguments.length?(u=+f,i()):u},r.align=function(f){return arguments.length?(t=Math.max(0,Math.min(1,f)),i()):t},r.copy=function(){return zl(n(),[e,o]).round(g).paddingInner(m).paddingOuter(u).align(t)},mt.apply(i(),arguments)}function Tl(r){var n=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return Tl(n())},r}function ql(){return Tl(zl.apply(null,arguments).paddingInner(1))}function Gr(r,n,l){r.prototype=n.prototype=l,l.constructor=r}function Pl(r,n){var l=Object.create(r.prototype);for(var e in n)l[e]=n[e];return l}function ht(){}var ot=.7,dr=1/ot,zn="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Of=/^#([0-9a-f]{3,8})$/,Vf=new RegExp(`^rgb\\(${zn},${zn},${zn}\\)$`),Wf=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),Hf=new RegExp(`^rgba\\(${zn},${zn},${zn},${ft}\\)$`),Gf=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${ft}\\)$`),Bf=new RegExp(`^hsl\\(${ft},${Ve},${Ve}\\)$`),Ff=new RegExp(`^hsla\\(${ft},${Ve},${Ve},${ft}\\)$`),Ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gr(ht,ut,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHex8:Uf,formatHsl:Qf,formatRgb:Li,toString:Li});function Ai(){return this.rgb().formatHex()}function Uf(){return this.rgb().formatHex8()}function Qf(){return Dl(this).formatHsl()}function Li(){return this.rgb().formatRgb()}function ut(r){var n,l;return r=(r+"").trim().toLowerCase(),(n=Of.exec(r))?(l=n[1].length,n=parseInt(n[1],16),l===6?Ci(n):l===3?new xe(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?er(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?er(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Vf.exec(r))?new xe(n[1],n[2],n[3],1):(n=Wf.exec(r))?new xe(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Hf.exec(r))?er(n[1],n[2],n[3],n[4]):(n=Gf.exec(r))?er(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Bf.exec(r))?Wi(n[1],n[2]/100,n[3]/100,1):(n=Ff.exec(r))?Wi(n[1],n[2]/100,n[3]/100,n[4]):Ii.hasOwnProperty(r)?Ci(Ii[r]):r==="transparent"?new xe(NaN,NaN,NaN,0):null}function Ci(r){return new xe(r>>16&255,r>>8&255,r&255,1)}function er(r,n,l,e){return e<=0&&(r=n=l=NaN),new xe(r,n,l,e)}function Kf(r){return r instanceof ht||(r=ut(r)),r?(r=r.rgb(),new xe(r.r,r.g,r.b,r.opacity)):new xe}function mr(r,n,l,e){return arguments.length===1?Kf(r):new xe(r,n,l,e??1)}function xe(r,n,l,e){this.r=+r,this.g=+n,this.b=+l,this.opacity=+e}Gr(xe,mr,Pl(ht,{brighter(r){return r=r==null?dr:Math.pow(dr,r),new xe(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?ot:Math.pow(ot,r),new xe(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new xe(tn(this.r),tn(this.g),tn(this.b),gr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oi,formatHex:Oi,formatHex8:Zf,formatRgb:Vi,toString:Vi}));function Oi(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function Zf(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vi(){const r=gr(this.opacity);return`${r===1?"rgb(":"rgba("}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${r===1?")":`, ${r})`}`}function gr(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function tn(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function en(r){return r=tn(r),(r<16?"0":"")+r.toString(16)}function Wi(r,n,l,e){return e<=0?r=n=l=NaN:l<=0||l>=1?r=n=NaN:n<=0&&(r=NaN),new qe(r,n,l,e)}function Dl(r){if(r instanceof qe)return new qe(r.h,r.s,r.l,r.opacity);if(r instanceof ht||(r=ut(r)),!r)return new qe;if(r instanceof qe)return r;r=r.rgb();var n=r.r/255,l=r.g/255,e=r.b/255,o=Math.min(n,l,e),a=Math.max(n,l,e),c=NaN,g=a-o,m=(a+o)/2;return g?(n===a?c=(l-e)/g+(l<e)*6:l===a?c=(e-n)/g+2:c=(n-l)/g+4,g/=m<.5?a+o:2-a-o,c*=60):g=m>0&&m<1?0:c,new qe(c,g,m,r.opacity)}function Yf(r,n,l,e){return arguments.length===1?Dl(r):new qe(r,n,l,e??1)}function qe(r,n,l,e){this.h=+r,this.s=+n,this.l=+l,this.opacity=+e}Gr(qe,Yf,Pl(ht,{brighter(r){return r=r==null?dr:Math.pow(dr,r),new qe(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?ot:Math.pow(ot,r),new qe(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,n=isNaN(r)||isNaN(this.s)?0:this.s,l=this.l,e=l+(l<.5?l:1-l)*n,o=2*l-e;return new xe(Tr(r>=240?r-240:r+120,o,e),Tr(r,o,e),Tr(r<120?r+240:r-120,o,e),this.opacity)},clamp(){return new qe(Hi(this.h),nr(this.s),nr(this.l),gr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=gr(this.opacity);return`${r===1?"hsl(":"hsla("}${Hi(this.h)}, ${nr(this.s)*100}%, ${nr(this.l)*100}%${r===1?")":`, ${r})`}`}}));function Hi(r){return r=(r||0)%360,r<0?r+360:r}function nr(r){return Math.max(0,Math.min(1,r||0))}function Tr(r,n,l){return(r<60?n+(l-n)*r/60:r<180?l:r<240?n+(l-n)*(240-r)/60:n)*255}const Br=r=>()=>r;function Jf(r,n){return function(l){return r+l*n}}function Xf(r,n,l){return r=Math.pow(r,l),n=Math.pow(n,l)-r,l=1/l,function(e){return Math.pow(r+e*n,l)}}function Mf(r){return(r=+r)==1?Il:function(n,l){return l-n?Xf(n,l,r):Br(isNaN(n)?l:n)}}function Il(r,n){var l=n-r;return l?Jf(r,l):Br(isNaN(r)?n:r)}const Gi=function r(n){var l=Mf(n);function e(o,a){var c=l((o=mr(o)).r,(a=mr(a)).r),g=l(o.g,a.g),m=l(o.b,a.b),u=Il(o.opacity,a.opacity);return function(t){return o.r=c(t),o.g=g(t),o.b=m(t),o.opacity=u(t),o+""}}return e.gamma=r,e}(1);function $f(r,n){n||(n=[]);var l=r?Math.min(n.length,r.length):0,e=n.slice(),o;return function(a){for(o=0;o<l;++o)e[o]=r[o]*(1-a)+n[o]*a;return e}}function Sf(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function jf(r,n){var l=n?n.length:0,e=r?Math.min(l,r.length):0,o=new Array(e),a=new Array(l),c;for(c=0;c<e;++c)o[c]=Fr(r[c],n[c]);for(;c<l;++c)a[c]=n[c];return function(g){for(c=0;c<e;++c)a[c]=o[c](g);return a}}function eu(r,n){var l=new Date;return r=+r,n=+n,function(e){return l.setTime(r*(1-e)+n*e),l}}function hr(r,n){return r=+r,n=+n,function(l){return r*(1-l)+n*l}}function nu(r,n){var l={},e={},o;(r===null||typeof r!="object")&&(r={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in r?l[o]=Fr(r[o],n[o]):e[o]=n[o];return function(a){for(o in l)e[o]=l[o](a);return e}}var Lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qr=new RegExp(Lr.source,"g");function tu(r){return function(){return r}}function ru(r){return function(n){return r(n)+""}}function iu(r,n){var l=Lr.lastIndex=qr.lastIndex=0,e,o,a,c=-1,g=[],m=[];for(r=r+"",n=n+"";(e=Lr.exec(r))&&(o=qr.exec(n));)(a=o.index)>l&&(a=n.slice(l,a),g[c]?g[c]+=a:g[++c]=a),(e=e[0])===(o=o[0])?g[c]?g[c]+=o:g[++c]=o:(g[++c]=null,m.push({i:c,x:hr(e,o)})),l=qr.lastIndex;return l<n.length&&(a=n.slice(l),g[c]?g[c]+=a:g[++c]=a),g.length<2?m[0]?ru(m[0].x):tu(n):(n=m.length,function(u){for(var t=0,i;t<n;++t)g[(i=m[t]).i]=i.x(u);return g.join("")})}function Fr(r,n){var l=typeof n,e;return n==null||l==="boolean"?Br(n):(l==="number"?hr:l==="string"?(e=ut(n))?(n=e,Gi):iu:n instanceof ut?Gi:n instanceof Date?eu:Sf(n)?$f:Array.isArray(n)?jf:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?nu:hr)(r,n)}function lu(r,n){return r=+r,n=+n,function(l){return Math.round(r*(1-l)+n*l)}}function ou(r){return function(){return r}}function fu(r){return+r}var Bi=[0,1];function Oe(r){return r}function Cr(r,n){return(n-=r=+r)?function(l){return(l-r)/n}:ou(isNaN(n)?NaN:.5)}function uu(r,n){var l;return r>n&&(l=r,r=n,n=l),function(e){return Math.max(r,Math.min(n,e))}}function su(r,n,l){var e=r[0],o=r[1],a=n[0],c=n[1];return o<e?(e=Cr(o,e),a=l(c,a)):(e=Cr(e,o),a=l(a,c)),function(g){return a(e(g))}}function au(r,n,l){var e=Math.min(r.length,n.length)-1,o=new Array(e),a=new Array(e),c=-1;for(r[e]<r[0]&&(r=r.slice().reverse(),n=n.slice().reverse());++c<e;)o[c]=Cr(r[c],r[c+1]),a[c]=l(n[c],n[c+1]);return function(g){var m=zf(r,g,1,e)-1;return a[m](o[m](g))}}function Ur(r,n){return n.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Qr(){var r=Bi,n=Bi,l=Fr,e,o,a,c=Oe,g,m,u;function t(){var f=Math.min(r.length,n.length);return c!==Oe&&(c=uu(r[0],r[f-1])),g=f>2?au:su,m=u=null,i}function i(f){return f==null||isNaN(f=+f)?a:(m||(m=g(r.map(e),n,l)))(e(c(f)))}return i.invert=function(f){return c(o((u||(u=g(n,r.map(e),hr)))(f)))},i.domain=function(f){return arguments.length?(r=Array.from(f,fu),t()):r.slice()},i.range=function(f){return arguments.length?(n=Array.from(f),t()):n.slice()},i.rangeRound=function(f){return n=Array.from(f),l=lu,t()},i.clamp=function(f){return arguments.length?(c=f?!0:Oe,t()):c!==Oe},i.interpolate=function(f){return arguments.length?(l=f,t()):l},i.unknown=function(f){return arguments.length?(a=f,i):a},function(f,s){return e=f,o=s,t()}}function cu(){return Qr()(Oe,Oe)}function du(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function vr(r,n){if((l=(r=n?r.toExponential(n-1):r.toExponential()).indexOf("e"))<0)return null;var l,e=r.slice(0,l);return[e.length>1?e[0]+e.slice(2):e,+r.slice(l+1)]}function Pn(r){return r=vr(Math.abs(r)),r?r[1]:NaN}function mu(r,n){return function(l,e){for(var o=l.length,a=[],c=0,g=r[0],m=0;o>0&&g>0&&(m+g+1>e&&(g=Math.max(1,e-m)),a.push(l.substring(o-=g,o+g)),!((m+=g+1)>e));)g=r[c=(c+1)%r.length];return a.reverse().join(n)}}function gu(r){return function(n){return n.replace(/[0-9]/g,function(l){return r[+l]})}}var hu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function st(r){if(!(n=hu.exec(r)))throw new Error("invalid format: "+r);var n;return new Kr({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}st.prototype=Kr.prototype;function Kr(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Kr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vu(r){e:for(var n=r.length,l=1,e=-1,o;l<n;++l)switch(r[l]){case".":e=o=l;break;case"0":e===0&&(e=l),o=l;break;default:if(!+r[l])break e;e>0&&(e=0);break}return e>0?r.slice(0,e)+r.slice(o+1):r}var Al;function _u(r,n){var l=vr(r,n);if(!l)return r+"";var e=l[0],o=l[1],a=o-(Al=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,c=e.length;return a===c?e:a>c?e+new Array(a-c+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+vr(r,Math.max(0,n+a-1))[0]}function Fi(r,n){var l=vr(r,n);if(!l)return r+"";var e=l[0],o=l[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}const Ui={"%":(r,n)=>(r*100).toFixed(n),b:r=>Math.round(r).toString(2),c:r=>r+"",d:du,e:(r,n)=>r.toExponential(n),f:(r,n)=>r.toFixed(n),g:(r,n)=>r.toPrecision(n),o:r=>Math.round(r).toString(8),p:(r,n)=>Fi(r*100,n),r:Fi,s:_u,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function Qi(r){return r}var Ki=Array.prototype.map,Zi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pu(r){var n=r.grouping===void 0||r.thousands===void 0?Qi:mu(Ki.call(r.grouping,Number),r.thousands+""),l=r.currency===void 0?"":r.currency[0]+"",e=r.currency===void 0?"":r.currency[1]+"",o=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?Qi:gu(Ki.call(r.numerals,String)),c=r.percent===void 0?"%":r.percent+"",g=r.minus===void 0?"−":r.minus+"",m=r.nan===void 0?"NaN":r.nan+"";function u(i){i=st(i);var f=i.fill,s=i.align,d=i.sign,h=i.symbol,v=i.zero,y=i.width,_=i.comma,p=i.precision,b=i.trim,w=i.type;w==="n"?(_=!0,w="g"):Ui[w]||(p===void 0&&(p=12),b=!0,w="g"),(v||f==="0"&&s==="=")&&(v=!0,f="0",s="=");var N=h==="$"?l:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",R=h==="$"?e:/[%p]/.test(w)?c:"",T=Ui[w],O=/[defgprs%]/.test(w);p=p===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function L(q){var Q=N,B=R,Z,ne,re;if(w==="c")B=T(q)+B,q="";else{q=+q;var J=q<0||1/q<0;if(q=isNaN(q)?m:T(Math.abs(q),p),b&&(q=vu(q)),J&&+q==0&&d!=="+"&&(J=!1),Q=(J?d==="("?d:g:d==="-"||d==="("?"":d)+Q,B=(w==="s"?Zi[8+Al/3]:"")+B+(J&&d==="("?")":""),O){for(Z=-1,ne=q.length;++Z<ne;)if(re=q.charCodeAt(Z),48>re||re>57){B=(re===46?o+q.slice(Z+1):q.slice(Z))+B,q=q.slice(0,Z);break}}}_&&!v&&(q=n(q,1/0));var le=Q.length+q.length+B.length,ee=le<y?new Array(y-le+1).join(f):"";switch(_&&v&&(q=n(ee+q,ee.length?y-B.length:1/0),ee=""),s){case"<":q=Q+q+B+ee;break;case"=":q=Q+ee+q+B;break;case"^":q=ee.slice(0,le=ee.length>>1)+Q+q+B+ee.slice(le);break;default:q=ee+Q+q+B;break}return a(q)}return L.toString=function(){return i+""},L}function t(i,f){var s=u((i=st(i),i.type="f",i)),d=Math.max(-8,Math.min(8,Math.floor(Pn(f)/3)))*3,h=Math.pow(10,-d),v=Zi[8+d/3];return function(y){return s(h*y)+v}}return{format:u,formatPrefix:t}}var tr,Zr,Ll;yu({thousands:",",grouping:[3],currency:["$",""]});function yu(r){return tr=pu(r),Zr=tr.format,Ll=tr.formatPrefix,tr}function bu(r){return Math.max(0,-Pn(Math.abs(r)))}function wu(r,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pn(n)/3)))*3-Pn(Math.abs(r)))}function ku(r,n){return r=Math.abs(r),n=Math.abs(n)-r,Math.max(0,Pn(n)-Pn(r))+1}function Eu(r,n,l,e){var o=Lf(r,n,l),a;switch(e=st(e??",f"),e.type){case"s":{var c=Math.max(Math.abs(r),Math.abs(n));return e.precision==null&&!isNaN(a=wu(o,c))&&(e.precision=a),Ll(e,c)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=ku(o,Math.max(Math.abs(r),Math.abs(n))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=bu(o))&&(e.precision=a-(e.type==="%")*2);break}}return Zr(e)}function Cl(r){var n=r.domain;return r.ticks=function(l){var e=n();return Ir(e[0],e[e.length-1],l??10)},r.tickFormat=function(l,e){var o=n();return Eu(o[0],o[o.length-1],l??10,e)},r.nice=function(l){l==null&&(l=10);var e=n(),o=0,a=e.length-1,c=e[o],g=e[a],m,u,t=10;for(g<c&&(u=c,c=g,g=u,u=o,o=a,a=u);t-- >0;){if(u=Ar(c,g,l),u===m)return e[o]=c,e[a]=g,n(e);if(u>0)c=Math.floor(c/u)*u,g=Math.ceil(g/u)*u;else if(u<0)c=Math.ceil(c*u)/u,g=Math.floor(g*u)/u;else break;m=u}return r},r}function ur(){var r=cu();return r.copy=function(){return Ur(r,ur())},mt.apply(r,arguments),Cl(r)}function xu(r,n){r=r.slice();var l=0,e=r.length-1,o=r[l],a=r[e],c;return a<o&&(c=l,l=e,e=c,c=o,o=a,a=c),r[l]=n.floor(o),r[e]=n.ceil(a),r}function Yi(r){return Math.log(r)}function Ji(r){return Math.exp(r)}function Nu(r){return-Math.log(-r)}function Ru(r){return-Math.exp(-r)}function zu(r){return isFinite(r)?+("1e"+r):r<0?0:r}function Tu(r){return r===10?zu:r===Math.E?Math.exp:n=>Math.pow(r,n)}function qu(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),n=>Math.log(n)/r)}function Xi(r){return(n,l)=>-r(-n,l)}function Pu(r){const n=r(Yi,Ji),l=n.domain;let e=10,o,a;function c(){return o=qu(e),a=Tu(e),l()[0]<0?(o=Xi(o),a=Xi(a),r(Nu,Ru)):r(Yi,Ji),n}return n.base=function(g){return arguments.length?(e=+g,c()):e},n.domain=function(g){return arguments.length?(l(g),c()):l()},n.ticks=g=>{const m=l();let u=m[0],t=m[m.length-1];const i=t<u;i&&([u,t]=[t,u]);let f=o(u),s=o(t),d,h;const v=g==null?10:+g;let y=[];if(!(e%1)&&s-f<v){if(f=Math.floor(f),s=Math.ceil(s),u>0){for(;f<=s;++f)for(d=1;d<e;++d)if(h=f<0?d/a(-f):d*a(f),!(h<u)){if(h>t)break;y.push(h)}}else for(;f<=s;++f)for(d=e-1;d>=1;--d)if(h=f>0?d/a(-f):d*a(f),!(h<u)){if(h>t)break;y.push(h)}y.length*2<v&&(y=Ir(u,t,v))}else y=Ir(f,s,Math.min(s-f,v)).map(a);return i?y.reverse():y},n.tickFormat=(g,m)=>{if(g==null&&(g=10),m==null&&(m=e===10?"s":","),typeof m!="function"&&(!(e%1)&&(m=st(m)).precision==null&&(m.trim=!0),m=Zr(m)),g===1/0)return m;const u=Math.max(1,e*g/n.ticks().length);return t=>{let i=t/a(Math.round(o(t)));return i*e<e-.5&&(i*=e),i<=u?m(t):""}},n.nice=()=>l(xu(l(),{floor:g=>a(Math.floor(o(g))),ceil:g=>a(Math.ceil(o(g)))})),n}function Yr(){const r=Pu(Qr()).domain([1,10]);return r.copy=()=>Ur(r,Yr()).base(r.base()),mt.apply(r,arguments),r}function Mi(r){return function(n){return n<0?-Math.pow(-n,r):Math.pow(n,r)}}function Du(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function Iu(r){return r<0?-r*r:r*r}function Au(r){var n=r(Oe,Oe),l=1;function e(){return l===1?r(Oe,Oe):l===.5?r(Du,Iu):r(Mi(l),Mi(1/l))}return n.exponent=function(o){return arguments.length?(l=+o,e()):l},Cl(n)}function Ol(){var r=Au(Qr());return r.copy=function(){return Ur(r,Ol()).exponent(r.exponent())},mt.apply(r,arguments),r}function Lu(){return Ol.apply(null,arguments).exponent(.5)}const it={x:ur,y:ur,z:ur,r:Lu};function Cu(r){return r.constant?"symlog":r.base?"log":r.exponent?r.exponent()===.5?"sqrt":"pow":"other"}function $i(r){return r}function Ou(r){return n=>Math.log(r*n)}function Vu(r){return n=>r*Math.exp(n)}function Wu(r){return n=>Math.sign(n)*Math.log1p(Math.abs(n/r))}function Hu(r){return n=>Math.sign(n)*Math.expm1(Math.abs(n))*r}function rr(r){return function(l){return l<0?-Math.pow(-l,r):Math.pow(l,r)}}function Gu(r){const n=Cu(r);if(n==="log"){const l=Math.sign(r.domain()[0]);return{lift:Ou(l),ground:Vu(l),scaleType:n}}return n==="pow"?{lift:rr(1),ground:rr(1/1),scaleType:n}:n==="sqrt"?{lift:rr(.5),ground:rr(1/.5),scaleType:n}:n==="symlog"?{lift:Wu(1),ground:Hu(1),scaleType:n}:{lift:$i,ground:$i,scaleType:n}}function _r(r){return r.replace(/^\w/,n=>n.toUpperCase())}function Ee(r,n=""){return`scale${_r(n)}${_r(r)}`}function Vl(r){if(typeof r.bandwidth=="function")return typeof r.paddingInner=="function"?Ee("band"):Ee("point");if(rt(Object.keys(r),["domain","range","unknown","copy"]))return Ee("ordinal");let n="";if(r.interpolator&&(r.domain().length===3?n="diverging":n="sequential"),r.quantiles)return Ee("quantile",n);if(r.thresholds)return Ee("quantize",n);if(r.constant)return Ee("symlog",n);if(r.base)return Ee("log",n);if(r.exponent)return r.exponent()===.5?Ee("sqrt",n):Ee("pow",n);if(rt(Object.keys(r),["domain","range","invertExtent","unknown","copy"]))return Ee("threshold");if(rt(Object.keys(r),["invert","range","domain","unknown","copy","ticks","tickFormat","nice"]))return Ee("identity");if(rt(Object.keys(r),["invert","domain","range","rangeRound","round","clamp","unknown","copy","ticks","tickFormat","nice"]))return Ee("radial");if(n)return Ee(n);if(r.domain()[0]instanceof Date){const l=new Date;let e;return l.getDay=()=>e="time",l.getUTCDay=()=>e="utc",r.tickFormat(0,"%a")(l),Ee(e)}return Ee("linear")}const Bu=["scaleThreshold","scaleQuantile","scaleQuantize","scaleSequentialQuantile"];function Fu(r,n){if(typeof r.range!="function")throw console.log(r),new Error("Scale method `range` must be a function");if(typeof r.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(n)||Bu.includes(Vl(r))||Nl(r)===!0)return r.domain();const{lift:l,ground:e}=Gu(r),o=r.domain()[0],a=Object.prototype.toString.call(o)==="[object Date]",[c,g]=r.domain().map(s=>l(a?s.getTime():s)),[m,u]=r.range(),t=n[0]||0,i=n[1]||0,f=(g-c)/(Math.abs(u-m)-t-i);return[c-t*f,i*f+g].map(s=>e(a?new Date(s):s))}function Uu(r,n,l,e,o){let a,c;return o===!0?(a=0,c=100):(a=r==="r"?1:0,c=r==="y"?l:r==="r"?25:n),e===!0?[c,a]:[a,c]}function Qu(r,n,l,e,o,a){return o?typeof o=="function"?o({width:n,height:l}):o:Uu(r,n,l,e,a)}function ir(r){return function([l,e,o,a,c,g,m,u,t,i]){if(e===null)return null;const f=Qu(r,m,u,g,t,i),s=l===it[r]?l():l.copy();return s.domain(o),(!s.interpolator||typeof s.interpolator=="function"&&s.interpolator().name.startsWith("identity"))&&s.range(f),a&&s.domain(Fu(s,a)),(c===!0||typeof c=="number")&&(typeof s.nice=="function"?s.nice(typeof c=="number"?c:void 0):console.error(`[Layer Cake] You set \`${r}Nice: true\` but the ${r}Scale does not have a \`.nice\` method. Ignoring...`)),s}}function lr([r,n]){return l=>{const e=r(l);return Array.isArray(e)?e.map(o=>n(o)):n(e)}}function or([r]){if(typeof r=="function"){if(typeof r.range=="function")return r.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Ae="    ";function Ku(r){const{r:n,g:l,b:e,opacity:o}=mr(r);return[n,l,e].every(a=>a>=0&&a<=255)?{r:n,g:l,b:e,o}:!1}function Zu({r,g:n,b:l}){return(.2126*r+.7152*n+.0722*l)/255>.6?"black":"white"}function Yu(r){console.log("/********* LayerCake Debug ************/"),console.log("Bounding box:"),Ju(r.boundingBox),console.log(`Scales:
`),Object.keys(r.activeGetters).forEach(n=>{Xu(n,r[`${n}Scale`],r[n])}),console.log(`/************ End LayerCake Debug ***************/
`)}function Ju(r){Object.entries(r).forEach(([n,l])=>{console.log(`${Ae}${n}:`,l)})}function Xu(r,n,l){const e=Vl(n);console.log(`${Ae}${r}:`),console.log(`${Ae}${Ae}Accessor: "${l.toString()}"`),console.log(`${Ae}${Ae}Type: ${e}`),Si(n,"domain"),Si(n,"range"," ")}function Si(r,n,l=""){const e=r[n](),o=$u(e);o?Mu(o,n,e):console.log(`${Ae}${Ae}${_r(n)}:${l}`,e)}function Mu(r,n,l){console.log(`${Ae}${Ae}${_r(n)}:    %cArray%c(${l.length}) `+r[0]+"%c ]","color: #1377e4","color: #737373","color: #1478e4",...r[1],"color: #1478e4")}function $u(r){const n=[],l=r.map((e,o)=>{const a=Ku(e);if(a!==!1){n.push(a);const c=o===r.length-1?" ":"";return`%c ${e}${c}`}return e});return n.length?[`%c[ ${l.join(", ")}`,n.map(e=>`background-color: rgba(${e.r}, ${e.g}, ${e.b}, ${e.o}); color:${Zu(e)};`)]:null}const Su=r=>({element:r[0]&4,width:r[0]&256,height:r[0]&512,aspectRatio:r[0]&1024,containerWidth:r[0]&128,containerHeight:r[0]&64}),ji=r=>({element:r[2],width:r[8],height:r[9],aspectRatio:r[10],containerWidth:r[7],containerHeight:r[6]});function el(r){let n,l,e;const o=r[103].default,a=Ke(o,r,r[102],ji);return{c(){n=D("div"),a&&a.c(),this.h()},l(c){n=I(c,"DIV",{class:!0});var g=P(n);a&&a.l(g),g.forEach(k),this.h()},h(){x(n,"class","layercake-container svelte-1ll0j6t"),ct(()=>r[105].call(n)),ie(n,"position",r[5]),ie(n,"top",r[5]==="absolute"?"0":null),ie(n,"right",r[5]==="absolute"?"0":null),ie(n,"bottom",r[5]==="absolute"?"0":null),ie(n,"left",r[5]==="absolute"?"0":null),ie(n,"pointer-events",r[4]===!1?"none":null)},m(c,g){A(c,n,g),a&&a.m(n,null),r[104](n),l=mo(n,r[105].bind(n)),e=!0},p(c,g){a&&a.p&&(!e||g[0]&1988|g[3]&512)&&Ze(a,o,c,c[102],e?Je(o,c[102],g,Su):Ye(c[102]),ji),g[0]&32&&ie(n,"position",c[5]),g[0]&32&&ie(n,"top",c[5]==="absolute"?"0":null),g[0]&32&&ie(n,"right",c[5]==="absolute"?"0":null),g[0]&32&&ie(n,"bottom",c[5]==="absolute"?"0":null),g[0]&32&&ie(n,"left",c[5]==="absolute"?"0":null),g[0]&16&&ie(n,"pointer-events",c[4]===!1?"none":null)},i(c){e||(C(a,c),e=!0)},o(c){W(a,c),e=!1},d(c){c&&k(n),a&&a.d(c),r[104](null),l()}}}function ju(r){let n,l,e=(r[3]===!0||typeof window<"u")&&el(r);return{c(){e&&e.c(),n=_e()},l(o){e&&e.l(o),n=_e()},m(o,a){e&&e.m(o,a),A(o,n,a),l=!0},p(o,a){o[3]===!0||typeof window<"u"?e?(e.p(o,a),a[0]&8&&C(e,1)):(e=el(o),e.c(),C(e,1),e.m(n.parentNode,n)):e&&(Re(),W(e,1,1,()=>{e=null}),ze())},i(o){l||(C(e),l=!0)},o(o){W(e),l=!1},d(o){e&&e.d(o),o&&k(n)}}}function es(r,n,l){let e,o,a,c,g,m,u,t,i,f,s,d,h,v,y,_,p,b,w,N,R,T,O,L,q,Q,B,Z,ne,re,J,le,ee,se,ae,ge,ue,ke,Y,he,pe,Xe,Me,ln,Dn,$e,De,{$$slots:vt={},$$scope:In}=n;const _t=_f(Yu,200);let{ssr:Te=!1}=n,{pointerEvents:An=!0}=n,{position:Ln="relative"}=n,{percentRange:Se=!1}=n,{width:br=void 0}=n,{height:wr=void 0}=n,{containerWidth:on=br||100}=n,{containerHeight:fn=wr||100}=n,{element:pt=void 0}=n,{x:un=void 0}=n,{y:sn=void 0}=n,{z:an=void 0}=n,{r:cn=void 0}=n,{data:dn=[]}=n,{xDomain:mn=void 0}=n,{yDomain:gn=void 0}=n,{zDomain:hn=void 0}=n,{rDomain:vn=void 0}=n,{xNice:yt=!1}=n,{yNice:bt=!1}=n,{zNice:wt=!1}=n,{rNice:kt=!1}=n,{xPadding:Et=void 0}=n,{yPadding:xt=void 0}=n,{zPadding:Nt=void 0}=n,{rPadding:Rt=void 0}=n,{xScale:zt=it.x}=n,{yScale:Cn=it.y}=n,{zScale:Tt=it.z}=n,{rScale:qt=it.r}=n,{xRange:_n=void 0}=n,{yRange:pn=void 0}=n,{zRange:yn=void 0}=n,{rRange:bn=void 0}=n,{xReverse:Pt=!1}=n,{yReverse:Dt=typeof Cn.bandwidth!="function"}=n,{zReverse:It=!1}=n,{rReverse:At=!1}=n,{padding:Lt={}}=n,{extents:Ct={}}=n,{flatData:Ot=void 0}=n,{custom:Vt={}}=n,{debug:kr=!1}=n,Er=!1;ao(()=>{Er=!0});const te={},Be=K(Se);V(r,Be,E=>l(141,ln=E));const wn=K(on);V(r,wn,E=>l(7,Me=E));const kn=K(fn);V(r,kn,E=>l(6,Xe=E));const Wt=K(zr(Ct));V(r,Wt,E=>l(140,pe=E));const Ht=K(dn);V(r,Ht,E=>l(139,he=E));const On=K(Ot||dn);V(r,On,E=>l(138,Y=E));const Gt=K(Lt);V(r,Gt,E=>l(137,ke=E));const En=K(Qe(un));V(r,En,E=>l(136,ue=E));const xn=K(Qe(sn));V(r,xn,E=>l(135,ge=E));const Nn=K(Qe(an));V(r,Nn,E=>l(134,ae=E));const Rn=K(Qe(cn));V(r,Rn,E=>l(133,se=E));const Bt=K(mn);V(r,Bt,E=>l(132,ee=E));const Ft=K(gn);V(r,Ft,E=>l(131,le=E));const Ut=K(hn);V(r,Ut,E=>l(130,J=E));const Qt=K(vn);V(r,Qt,E=>l(129,re=E));const Vn=K(yt);V(r,Vn,E=>l(128,ne=E));const Wn=K(bt);V(r,Wn,E=>l(127,Z=E));const Hn=K(wt);V(r,Hn,E=>l(126,B=E));const Gn=K(kt);V(r,Gn,E=>l(125,Q=E));const Bn=K(Pt);V(r,Bn,E=>l(124,q=E));const Fn=K(Dt);V(r,Fn,E=>l(123,L=E));const Un=K(It);V(r,Un,E=>l(122,O=E));const Qn=K(At);V(r,Qn,E=>l(121,T=E));const Kn=K(Et);V(r,Kn,E=>l(120,R=E));const Zn=K(xt);V(r,Zn,E=>l(119,N=E));const Yn=K(Nt);V(r,Yn,E=>l(118,w=E));const Jn=K(Rt);V(r,Jn,E=>l(117,b=E));const Kt=K(_n);V(r,Kt,E=>l(116,p=E));const Zt=K(pn);V(r,Zt,E=>l(115,_=E));const Yt=K(yn);V(r,Yt,E=>l(114,y=E));const Jt=K(bn);V(r,Jt,E=>l(113,v=E));const Xn=K(zt);V(r,Xn,E=>l(112,h=E));const Mn=K(Cn);V(r,Mn,E=>l(111,d=E));const $n=K(Tt);V(r,$n,E=>l(110,s=E));const Sn=K(qt);V(r,Sn,E=>l(109,f=E));const Xt=K(te);V(r,Xt,E=>l(107,t=E));const Mt=K(Vt);V(r,Mt,E=>l(108,i=E));const $t=fe([En,xn,Nn,Rn],([E,Ge,Ie,ve])=>{const je={};return E&&(je.x=E),Ge&&(je.y=Ge),Ie&&(je.z=Ie),ve&&(je.r=ve),je});V(r,$t,E=>l(100,m=E));const Mr=fe([Gt,wn,kn],([E])=>Object.assign({top:0,right:0,bottom:0,left:0},E)),St=fe([wn,kn,Mr],([E,Ge,Ie])=>{const ve={};return ve.top=Ie.top,ve.right=E-Ie.right,ve.bottom=Ge-Ie.bottom,ve.left=Ie.left,ve.width=ve.right-ve.left,ve.height=ve.bottom-ve.top,ve.width<=0&&Er===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),ve.height<=0&&Er===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),ve});V(r,St,E=>l(101,u=E));const Fe=fe([St],([E])=>E.width);V(r,Fe,E=>l(8,Dn=E));const Ue=fe([St],([E])=>E.height);V(r,Ue,E=>l(9,$e=E));const He=fe([On,$t,Wt,Xn,Mn,Sn,$n],([E,Ge,Ie,ve,je,Sl,jl])=>{const eo={x:ve,y:je,r:Sl,z:jl},Nr=zr(Ge,Ie),no=Object.fromEntries(Object.keys(Nr).map(Rr=>[Rr,eo[Rr]]));return Object.keys(Nr).length>0?{...bf(E,Nr,no),...Ie}:{}}),$r=fe([He,Bt],jt("x")),Sr=fe([He,Ft],jt("y")),jr=fe([He,Ut],jt("z")),ei=fe([He,Qt],jt("r")),jn=fe([Xn,He,$r,Kn,Vn,Bn,Fe,Ue,Kt,Be],ir("x"));V(r,jn,E=>l(99,g=E));const Fl=fe([En,jn],lr),et=fe([Mn,He,Sr,Zn,Wn,Fn,Fe,Ue,Zt,Be],ir("y"));V(r,et,E=>l(98,c=E));const Ul=fe([xn,et],lr),nt=fe([$n,He,jr,Yn,Hn,Un,Fe,Ue,Yt,Be],ir("z"));V(r,nt,E=>l(97,a=E));const Ql=fe([Nn,nt],lr),tt=fe([Sn,He,ei,Jn,Gn,Qn,Fe,Ue,Jt,Be],ir("r"));V(r,tt,E=>l(96,o=E));const Kl=fe([Rn,tt],lr),Zl=fe([jn],or),Yl=fe([et],or),Jl=fe([nt],or),Xl=fe([tt],or),xr=fe([Fe,Ue],([E,Ge])=>E/Ge);V(r,xr,E=>l(10,De=E));function Ml(E){sr[E?"unshift":"push"](()=>{pt=E,l(2,pt)})}function $l(){on=this.clientWidth,fn=this.clientHeight,l(0,on),l(1,fn)}return r.$$set=E=>{"ssr"in E&&l(3,Te=E.ssr),"pointerEvents"in E&&l(4,An=E.pointerEvents),"position"in E&&l(5,Ln=E.position),"percentRange"in E&&l(57,Se=E.percentRange),"width"in E&&l(58,br=E.width),"height"in E&&l(59,wr=E.height),"containerWidth"in E&&l(0,on=E.containerWidth),"containerHeight"in E&&l(1,fn=E.containerHeight),"element"in E&&l(2,pt=E.element),"x"in E&&l(60,un=E.x),"y"in E&&l(61,sn=E.y),"z"in E&&l(62,an=E.z),"r"in E&&l(63,cn=E.r),"data"in E&&l(64,dn=E.data),"xDomain"in E&&l(65,mn=E.xDomain),"yDomain"in E&&l(66,gn=E.yDomain),"zDomain"in E&&l(67,hn=E.zDomain),"rDomain"in E&&l(68,vn=E.rDomain),"xNice"in E&&l(69,yt=E.xNice),"yNice"in E&&l(70,bt=E.yNice),"zNice"in E&&l(71,wt=E.zNice),"rNice"in E&&l(72,kt=E.rNice),"xPadding"in E&&l(73,Et=E.xPadding),"yPadding"in E&&l(74,xt=E.yPadding),"zPadding"in E&&l(75,Nt=E.zPadding),"rPadding"in E&&l(76,Rt=E.rPadding),"xScale"in E&&l(77,zt=E.xScale),"yScale"in E&&l(78,Cn=E.yScale),"zScale"in E&&l(79,Tt=E.zScale),"rScale"in E&&l(80,qt=E.rScale),"xRange"in E&&l(81,_n=E.xRange),"yRange"in E&&l(82,pn=E.yRange),"zRange"in E&&l(83,yn=E.zRange),"rRange"in E&&l(84,bn=E.rRange),"xReverse"in E&&l(85,Pt=E.xReverse),"yReverse"in E&&l(86,Dt=E.yReverse),"zReverse"in E&&l(87,It=E.zReverse),"rReverse"in E&&l(88,At=E.rReverse),"padding"in E&&l(89,Lt=E.padding),"extents"in E&&l(90,Ct=E.extents),"flatData"in E&&l(91,Ot=E.flatData),"custom"in E&&l(92,Vt=E.custom),"debug"in E&&l(93,kr=E.debug),"$$scope"in E&&l(102,In=E.$$scope)},r.$$.update=()=>{r.$$.dirty[1]&536870912&&un&&l(94,te.x=un,te),r.$$.dirty[1]&1073741824&&sn&&l(94,te.y=sn,te),r.$$.dirty[2]&1&&an&&l(94,te.z=an,te),r.$$.dirty[2]&2&&cn&&l(94,te.r=cn,te),r.$$.dirty[2]&8&&mn&&l(94,te.xDomain=mn,te),r.$$.dirty[2]&16&&gn&&l(94,te.yDomain=gn,te),r.$$.dirty[2]&32&&hn&&l(94,te.zDomain=hn,te),r.$$.dirty[2]&64&&vn&&l(94,te.rDomain=vn,te),r.$$.dirty[2]&524288&&_n&&l(94,te.xRange=_n,te),r.$$.dirty[2]&1048576&&pn&&l(94,te.yRange=pn,te),r.$$.dirty[2]&2097152&&yn&&l(94,te.zRange=yn,te),r.$$.dirty[2]&4194304&&bn&&l(94,te.rRange=bn,te),r.$$.dirty[1]&67108864&&X(Be,ln=Se,ln),r.$$.dirty[0]&1&&X(wn,Me=on,Me),r.$$.dirty[0]&2&&X(kn,Xe=fn,Xe),r.$$.dirty[2]&268435456&&X(Wt,pe=zr(Ct),pe),r.$$.dirty[2]&4&&X(Ht,he=dn,he),r.$$.dirty[2]&536870916&&X(On,Y=Ot||dn,Y),r.$$.dirty[2]&134217728&&X(Gt,ke=Lt,ke),r.$$.dirty[1]&536870912&&X(En,ue=Qe(un),ue),r.$$.dirty[1]&1073741824&&X(xn,ge=Qe(sn),ge),r.$$.dirty[2]&1&&X(Nn,ae=Qe(an),ae),r.$$.dirty[2]&2&&X(Rn,se=Qe(cn),se),r.$$.dirty[2]&8&&X(Bt,ee=mn,ee),r.$$.dirty[2]&16&&X(Ft,le=gn,le),r.$$.dirty[2]&32&&X(Ut,J=hn,J),r.$$.dirty[2]&64&&X(Qt,re=vn,re),r.$$.dirty[2]&128&&X(Vn,ne=yt,ne),r.$$.dirty[2]&256&&X(Wn,Z=bt,Z),r.$$.dirty[2]&512&&X(Hn,B=wt,B),r.$$.dirty[2]&1024&&X(Gn,Q=kt,Q),r.$$.dirty[2]&8388608&&X(Bn,q=Pt,q),r.$$.dirty[2]&16777216&&X(Fn,L=Dt,L),r.$$.dirty[2]&33554432&&X(Un,O=It,O),r.$$.dirty[2]&67108864&&X(Qn,T=At,T),r.$$.dirty[2]&2048&&X(Kn,R=Et,R),r.$$.dirty[2]&4096&&X(Zn,N=xt,N),r.$$.dirty[2]&8192&&X(Yn,w=Nt,w),r.$$.dirty[2]&16384&&X(Jn,b=Rt,b),r.$$.dirty[2]&524288&&X(Kt,p=_n,p),r.$$.dirty[2]&1048576&&X(Zt,_=pn,_),r.$$.dirty[2]&2097152&&X(Yt,y=yn,y),r.$$.dirty[2]&4194304&&X(Jt,v=bn,v),r.$$.dirty[2]&32768&&X(Xn,h=zt,h),r.$$.dirty[2]&65536&&X(Mn,d=Cn,d),r.$$.dirty[2]&131072&&X($n,s=Tt,s),r.$$.dirty[2]&262144&&X(Sn,f=qt,f),r.$$.dirty[2]&1073741824&&X(Mt,i=Vt,i),r.$$.dirty[3]&2&&X(Xt,t=te,t),r.$$.dirty[3]&4&&co("LayerCake",e),r.$$.dirty[0]&8|r.$$.dirty[3]&507&&u&&kr===!0&&(Te===!0||typeof window<"u")&&_t({boundingBox:u,activeGetters:m,x:te.x,y:te.y,z:te.z,r:te.r,xScale:g,yScale:c,zScale:a,rScale:o})},l(95,e={activeGetters:$t,width:Fe,height:Ue,percentRange:Be,aspectRatio:xr,containerWidth:wn,containerHeight:kn,x:En,y:xn,z:Nn,r:Rn,custom:Mt,data:Ht,xNice:Vn,yNice:Wn,zNice:Hn,rNice:Gn,xReverse:Bn,yReverse:Fn,zReverse:Un,rReverse:Qn,xPadding:Kn,yPadding:Zn,zPadding:Yn,rPadding:Jn,padding:Mr,flatData:On,extents:He,xDomain:$r,yDomain:Sr,zDomain:jr,rDomain:ei,xRange:Zl,yRange:Yl,zRange:Jl,rRange:Xl,config:Xt,xScale:jn,xGet:Fl,yScale:et,yGet:Ul,zScale:nt,zGet:Ql,rScale:tt,rGet:Kl}),[on,fn,pt,Te,An,Ln,Xe,Me,Dn,$e,De,Be,wn,kn,Wt,Ht,On,Gt,En,xn,Nn,Rn,Bt,Ft,Ut,Qt,Vn,Wn,Hn,Gn,Bn,Fn,Un,Qn,Kn,Zn,Yn,Jn,Kt,Zt,Yt,Jt,Xn,Mn,$n,Sn,Xt,Mt,$t,St,Fe,Ue,jn,et,nt,tt,xr,Se,br,wr,un,sn,an,cn,dn,mn,gn,hn,vn,yt,bt,wt,kt,Et,xt,Nt,Rt,zt,Cn,Tt,qt,_n,pn,yn,bn,Pt,Dt,It,At,Lt,Ct,Ot,Vt,kr,te,e,o,a,c,g,m,u,In,vt,Ml,$l]}class Jr extends ce{constructor(n){super(),de(this,n,es,ju,me,{ssr:3,pointerEvents:4,position:5,percentRange:57,width:58,height:59,containerWidth:0,containerHeight:1,element:2,x:60,y:61,z:62,r:63,data:64,xDomain:65,yDomain:66,zDomain:67,rDomain:68,xNice:69,yNice:70,zNice:71,rNice:72,xPadding:73,yPadding:74,zPadding:75,rPadding:76,xScale:77,yScale:78,zScale:79,rScale:80,xRange:81,yRange:82,zRange:83,rRange:84,xReverse:85,yReverse:86,zReverse:87,rReverse:88,padding:89,extents:90,flatData:91,custom:92,debug:93},null,[-1,-1,-1,-1,-1,-1])}}const ns=r=>({element:r&1}),nl=r=>({element:r[0]}),ts=r=>({element:r&1}),tl=r=>({element:r[0]});function rs(r){let n,l,e,o,a;const c=r[12].defs,g=Ke(c,r,r[11],tl),m=r[12].default,u=Ke(m,r,r[11],nl);return{c(){n=be("svg"),l=be("defs"),g&&g.c(),e=be("g"),u&&u.c(),this.h()},l(t){n=we(t,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var i=P(n);l=we(i,"defs",{});var f=P(l);g&&g.l(f),f.forEach(k),e=we(i,"g",{class:!0,transform:!0});var s=P(e);u&&u.l(s),s.forEach(k),i.forEach(k),this.h()},h(){x(e,"class","layercake-layout-svg_g"),x(e,"transform",o="translate("+r[7].left+", "+r[7].top+")"),x(n,"class","layercake-layout-svg svelte-17l4rdd"),x(n,"viewBox",r[4]),x(n,"width",r[5]),x(n,"height",r[6]),ie(n,"z-index",r[2]),ie(n,"pointer-events",r[3]===!1?"none":null)},m(t,i){A(t,n,i),z(n,l),g&&g.m(l,null),z(n,e),u&&u.m(e,null),r[13](e),r[14](n),a=!0},p(t,[i]){g&&g.p&&(!a||i&2049)&&Ze(g,c,t,t[11],a?Je(c,t[11],i,ts):Ye(t[11]),tl),u&&u.p&&(!a||i&2049)&&Ze(u,m,t,t[11],a?Je(m,t[11],i,ns):Ye(t[11]),nl),(!a||i&128&&o!==(o="translate("+t[7].left+", "+t[7].top+")"))&&x(e,"transform",o),(!a||i&16)&&x(n,"viewBox",t[4]),(!a||i&32)&&x(n,"width",t[5]),(!a||i&64)&&x(n,"height",t[6]),i&4&&ie(n,"z-index",t[2]),i&8&&ie(n,"pointer-events",t[3]===!1?"none":null)},i(t){a||(C(g,t),C(u,t),a=!0)},o(t){W(g,t),W(u,t),a=!1},d(t){t&&k(n),g&&g.d(t),u&&u.d(t),r[13](null),r[14](null)}}}function is(r,n,l){let e,o,a,{$$slots:c={},$$scope:g}=n,{element:m=void 0}=n,{innerElement:u=void 0}=n,{zIndex:t=void 0}=n,{pointerEvents:i=void 0}=n,{viewBox:f=void 0}=n;const{containerWidth:s,containerHeight:d,padding:h}=dt("LayerCake");V(r,s,_=>l(5,e=_)),V(r,d,_=>l(6,o=_)),V(r,h,_=>l(7,a=_));function v(_){sr[_?"unshift":"push"](()=>{u=_,l(1,u)})}function y(_){sr[_?"unshift":"push"](()=>{m=_,l(0,m)})}return r.$$set=_=>{"element"in _&&l(0,m=_.element),"innerElement"in _&&l(1,u=_.innerElement),"zIndex"in _&&l(2,t=_.zIndex),"pointerEvents"in _&&l(3,i=_.pointerEvents),"viewBox"in _&&l(4,f=_.viewBox),"$$scope"in _&&l(11,g=_.$$scope)},[m,u,t,i,f,e,o,a,s,d,h,g,c,v,y]}class pr extends ce{constructor(n){super(),de(this,n,is,rs,me,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function rl(r,n,l){const e=r.slice();return e[20]=n[l],e[22]=l,e}function il(r){let n,l;return{c(){n=be("line"),this.h()},l(e){n=we(e,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(n).forEach(k),this.h()},h(){x(n,"class","gridline svelte-1eat80j"),x(n,"y1",l=r[12]*-1),x(n,"y2","0"),x(n,"x1","0"),x(n,"x2","0")},m(e,o){A(e,n,o)},p(e,o){o&4096&&l!==(l=e[12]*-1)&&x(n,"y1",l)},d(e){e&&k(n)}}}function ll(r){let n,l,e;return{c(){n=be("line"),this.h()},l(o){n=we(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(n).forEach(k),this.h()},h(){x(n,"class","tick-mark svelte-1eat80j"),x(n,"y1",0),x(n,"y2",6),x(n,"x1",l=r[5]||r[8]?r[9].bandwidth()/2:0),x(n,"x2",e=r[5]||r[8]?r[9].bandwidth()/2:0)},m(o,a){A(o,n,a)},p(o,a){a&800&&l!==(l=o[5]||o[8]?o[9].bandwidth()/2:0)&&x(n,"x1",l),a&800&&e!==(e=o[5]||o[8]?o[9].bandwidth()/2:0)&&x(n,"x2",e)},d(o){o&&k(n)}}}function ol(r,n){let l,e,o,a=n[4](n[20])+"",c,g,m,u,t,i=n[0]!==!1&&il(n),f=n[1]===!0&&ll(n);return{key:r,first:null,c(){l=be("g"),i&&i.c(),e=_e(),f&&f.c(),o=be("text"),c=H(a),this.h()},l(s){l=we(s,"g",{class:!0,transform:!0});var d=P(l);i&&i.l(d),e=_e(),f&&f.l(d),o=we(d,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,class:!0});var h=P(o);c=G(h,a),h.forEach(k),d.forEach(k),this.h()},h(){x(o,"x",g=n[5]||n[8]?n[9].bandwidth()/2:0),x(o,"y",n[6]),x(o,"dx",""),x(o,"dy",""),x(o,"text-anchor",m=n[18](n[22])),x(o,"class","svelte-1eat80j"),x(l,"class",u="tick tick-"+n[22]+" svelte-1eat80j"),x(l,"transform",t="translate("+n[9](n[20])+","+Math.max(...n[11])+")"),this.first=l},m(s,d){A(s,l,d),i&&i.m(l,null),z(l,e),f&&f.m(l,null),z(l,o),z(o,c)},p(s,d){n=s,n[0]!==!1?i?i.p(n,d):(i=il(n),i.c(),i.m(l,e)):i&&(i.d(1),i=null),n[1]===!0?f?f.p(n,d):(f=ll(n),f.c(),f.m(l,o)):f&&(f.d(1),f=null),d&1040&&a!==(a=n[4](n[20])+"")&&Ne(c,a),d&800&&g!==(g=n[5]||n[8]?n[9].bandwidth()/2:0)&&x(o,"x",g),d&64&&x(o,"y",n[6]),d&1024&&m!==(m=n[18](n[22]))&&x(o,"text-anchor",m),d&1024&&u!==(u="tick tick-"+n[22]+" svelte-1eat80j")&&x(l,"class",u),d&3584&&t!==(t="translate("+n[9](n[20])+","+Math.max(...n[11])+")")&&x(l,"transform",t)},d(s){s&&k(l),i&&i.d(),f&&f.d()}}}function fl(r){let n,l,e;return{c(){n=be("line"),this.h()},l(o){n=we(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(n).forEach(k),this.h()},h(){x(n,"class","baseline svelte-1eat80j"),x(n,"y1",l=r[12]+.5),x(n,"y2",e=r[12]+.5),x(n,"x1","0"),x(n,"x2",r[13])},m(o,a){A(o,n,a)},p(o,a){a&4096&&l!==(l=o[12]+.5)&&x(n,"y1",l),a&4096&&e!==(e=o[12]+.5)&&x(n,"y2",e),a&8192&&x(n,"x2",o[13])},d(o){o&&k(n)}}}function ls(r){let n,l,e=[],o=new Map,a,c,g,m,u,t=r[10];const i=s=>s[20];for(let s=0;s<t.length;s+=1){let d=rl(r,t,s),h=i(d);o.set(h,e[s]=ol(h,d))}let f=r[2]===!0&&fl(r);return{c(){n=H(`Test

`),l=be("g");for(let s=0;s<e.length;s+=1)e[s].c();a=_e(),f&&f.c(),c=be("text"),g=H(r[7]),this.h()},l(s){n=G(s,`Test

`),l=we(s,"g",{class:!0});var d=P(l);for(let v=0;v<e.length;v+=1)e[v].l(d);a=_e(),f&&f.l(d),c=we(d,"text",{class:!0,y:!0,x:!0});var h=P(c);g=G(h,r[7]),h.forEach(k),d.forEach(k),this.h()},h(){x(c,"class","axis-label svelte-1eat80j"),x(c,"y",m=r[12]+35),x(c,"x",u=r[13]/2),x(l,"class","axis x-axis svelte-1eat80j"),Le(l,"snapTicks",r[3])},m(s,d){A(s,n,d),A(s,l,d);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(l,null);z(l,a),f&&f.m(l,null),z(l,c),z(c,g)},p(s,[d]){d&270195&&(t=s[10],e=Vr(e,d,i,1,s,t,o,l,wl,ol,a,rl)),s[2]===!0?f?f.p(s,d):(f=fl(s),f.c(),f.m(l,c)):f&&(f.d(1),f=null),d&128&&Ne(g,s[7]),d&4096&&m!==(m=s[12]+35)&&x(c,"y",m),d&8192&&u!==(u=s[13]/2)&&x(c,"x",u),d&8&&Le(l,"snapTicks",s[3])},i:oe,o:oe,d(s){s&&k(n),s&&k(l);for(let d=0;d<e.length;d+=1)e[d].d();f&&f.d()}}}function os(r,n,l){let e,o,a,c,g,m;const{width:u,height:t,xScale:i,yRange:f}=dt("LayerCake");V(r,u,R=>l(13,m=R)),V(r,t,R=>l(12,g=R)),V(r,i,R=>l(9,a=R)),V(r,f,R=>l(11,c=R));let{gridlines:s=!0}=n,{tickMarks:d=!1}=n,{baseline:h=!1}=n,{snapTicks:v=!1}=n,{formatTick:y=R=>R}=n,{ticks:_=void 0}=n,{xTick:p=0}=n,{yTick:b=16}=n,{xAxisTitle:w=""}=n;function N(R){if(v===!0){if(R===0)return"start";if(R===o.length-1)return"end"}return"middle"}return r.$$set=R=>{"gridlines"in R&&l(0,s=R.gridlines),"tickMarks"in R&&l(1,d=R.tickMarks),"baseline"in R&&l(2,h=R.baseline),"snapTicks"in R&&l(3,v=R.snapTicks),"formatTick"in R&&l(4,y=R.formatTick),"ticks"in R&&l(19,_=R.ticks),"xTick"in R&&l(5,p=R.xTick),"yTick"in R&&l(6,b=R.yTick),"xAxisTitle"in R&&l(7,w=R.xAxisTitle)},r.$$.update=()=>{r.$$.dirty&512&&l(8,e=typeof a.bandwidth=="function"),r.$$.dirty&525056&&l(10,o=Array.isArray(_)?_:e?a.domain():typeof _=="function"?_(a.ticks()):a.ticks(_))},[s,d,h,v,y,p,b,w,e,a,o,c,g,m,u,t,i,f,N,_]}class Wl extends ce{constructor(n){super(),de(this,n,os,ls,me,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:19,xTick:5,yTick:6,xAxisTitle:7})}}function ul(r,n,l){const e=r.slice();return e[17]=n[l],e}function sl(r){let n,l,e;return{c(){n=be("line"),this.h()},l(o){n=we(o,"line",{class:!0,x2:!0,y1:!0,y2:!0}),P(n).forEach(k),this.h()},h(){x(n,"class","gridline svelte-qjm35e"),x(n,"x2","100%"),x(n,"y1",l=r[4]+(r[8]?r[9].bandwidth()/2:0)),x(n,"y2",e=r[4]+(r[8]?r[9].bandwidth()/2:0))},m(o,a){A(o,n,a)},p(o,a){a&784&&l!==(l=o[4]+(o[8]?o[9].bandwidth()/2:0))&&x(n,"y1",l),a&784&&e!==(e=o[4]+(o[8]?o[9].bandwidth()/2:0))&&x(n,"y2",e)},d(o){o&&k(n)}}}function al(r){let n,l,e,o;return{c(){n=be("line"),this.h()},l(a){n=we(a,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),P(n).forEach(k),this.h()},h(){x(n,"class","tick-mark svelte-qjm35e"),x(n,"x1","0"),x(n,"x2",l=r[8]?-6:6),x(n,"y1",e=r[4]+(r[8]?r[9].bandwidth()/2:0)),x(n,"y2",o=r[4]+(r[8]?r[9].bandwidth()/2:0))},m(a,c){A(a,n,c)},p(a,c){c&256&&l!==(l=a[8]?-6:6)&&x(n,"x2",l),c&784&&e!==(e=a[4]+(a[8]?a[9].bandwidth()/2:0))&&x(n,"y1",e),c&784&&o!==(o=a[4]+(a[8]?a[9].bandwidth()/2:0))&&x(n,"y2",o)},d(a){a&&k(n)}}}function cl(r,n){let l,e,o,a=n[2](n[17])+"",c,g,m,u,t,i,f=n[0]!==!1&&sl(n),s=n[1]===!0&&al(n);return{key:r,first:null,c(){l=be("g"),f&&f.c(),e=_e(),s&&s.c(),o=be("text"),c=H(a),this.h()},l(d){l=we(d,"g",{class:!0,transform:!0});var h=P(l);f&&f.l(h),e=_e(),s&&s.l(h),o=we(h,"text",{x:!0,y:!0,dx:!0,dy:!0,style:!0,class:!0});var v=P(o);c=G(v,a),v.forEach(k),h.forEach(k),this.h()},h(){x(o,"x",n[3]),x(o,"y",g=n[4]+(n[8]?n[9].bandwidth()/2:0)),x(o,"dx",m=n[8]?-9:n[5]),x(o,"dy",u=n[8]?4:n[6]),ie(o,"text-anchor",n[8]?"end":n[7]),x(o,"class","svelte-qjm35e"),x(l,"class",t="tick tick-"+n[17]+" svelte-qjm35e"),x(l,"transform",i="translate("+(n[12][0]+(n[8]?n[11].left:0))+", "+n[9](n[17])+")"),this.first=l},m(d,h){A(d,l,h),f&&f.m(l,null),z(l,e),s&&s.m(l,null),z(l,o),z(o,c)},p(d,h){n=d,n[0]!==!1?f?f.p(n,h):(f=sl(n),f.c(),f.m(l,e)):f&&(f.d(1),f=null),n[1]===!0?s?s.p(n,h):(s=al(n),s.c(),s.m(l,o)):s&&(s.d(1),s=null),h&1028&&a!==(a=n[2](n[17])+"")&&Ne(c,a),h&8&&x(o,"x",n[3]),h&784&&g!==(g=n[4]+(n[8]?n[9].bandwidth()/2:0))&&x(o,"y",g),h&288&&m!==(m=n[8]?-9:n[5])&&x(o,"dx",m),h&320&&u!==(u=n[8]?4:n[6])&&x(o,"dy",u),h&384&&ie(o,"text-anchor",n[8]?"end":n[7]),h&1024&&t!==(t="tick tick-"+n[17]+" svelte-qjm35e")&&x(l,"class",t),h&7936&&i!==(i="translate("+(n[12][0]+(n[8]?n[11].left:0))+", "+n[9](n[17])+")")&&x(l,"transform",i)},d(d){d&&k(l),f&&f.d(),s&&s.d()}}}function fs(r){let n,l=[],e=new Map,o,a=r[10];const c=g=>g[17];for(let g=0;g<a.length;g+=1){let m=ul(r,a,g),u=c(m);e.set(u,l[g]=cl(u,m))}return{c(){n=be("g");for(let g=0;g<l.length;g+=1)l[g].c();this.h()},l(g){n=we(g,"g",{class:!0,transform:!0});var m=P(n);for(let u=0;u<l.length;u+=1)l[u].l(m);m.forEach(k),this.h()},h(){x(n,"class","axis y-axis"),x(n,"transform",o="translate("+-r[11].left+", 0)")},m(g,m){A(g,n,m);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(n,null)},p(g,[m]){m&8191&&(a=g[10],l=Vr(l,m,c,1,g,a,e,n,wl,cl,null,ul)),m&2048&&o!==(o="translate("+-g[11].left+", 0)")&&x(n,"transform",o)},i:oe,o:oe,d(g){g&&k(n);for(let m=0;m<l.length;m+=1)l[m].d()}}}function us(r,n,l){let e,o,a,c,g;const{padding:m,xRange:u,yScale:t}=dt("LayerCake");V(r,m,b=>l(11,c=b)),V(r,u,b=>l(12,g=b)),V(r,t,b=>l(9,a=b));let{gridlines:i=!0}=n,{tickMarks:f=!1}=n,{formatTick:s=b=>b}=n,{ticks:d=4}=n,{xTick:h=0}=n,{yTick:v=0}=n,{dxTick:y=0}=n,{dyTick:_=-4}=n,{textAnchor:p="start"}=n;return r.$$set=b=>{"gridlines"in b&&l(0,i=b.gridlines),"tickMarks"in b&&l(1,f=b.tickMarks),"formatTick"in b&&l(2,s=b.formatTick),"ticks"in b&&l(16,d=b.ticks),"xTick"in b&&l(3,h=b.xTick),"yTick"in b&&l(4,v=b.yTick),"dxTick"in b&&l(5,y=b.dxTick),"dyTick"in b&&l(6,_=b.dyTick),"textAnchor"in b&&l(7,p=b.textAnchor)},r.$$.update=()=>{r.$$.dirty&512&&l(8,e=typeof a.bandwidth=="function"),r.$$.dirty&66304&&l(10,o=Array.isArray(d)?d:e?a.domain():typeof d=="function"?d(a.ticks()):a.ticks(d))},[i,f,s,h,v,y,_,p,e,a,o,c,g,m,u,t,d]}class Hl extends ce{constructor(n){super(),de(this,n,us,fs,me,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function dl(r,n,l){const e=r.slice();return e[15]=n[l],e}function ml(r){let n,l,e,o;return{c(){n=be("circle"),this.h()},l(a){n=we(a,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(n).forEach(k),this.h()},h(){x(n,"cx",l=r[4](r[15])+(r[5].bandwidth?r[5].bandwidth()/2:0)),x(n,"cy",e=r[6](r[15])+(r[7].bandwidth?r[7].bandwidth()/2:0)),x(n,"r",r[0]),x(n,"fill",o=r[8](r[15])),x(n,"stroke",r[1]),x(n,"stroke-width",r[2])},m(a,c){A(a,n,c)},p(a,c){c&56&&l!==(l=a[4](a[15])+(a[5].bandwidth?a[5].bandwidth()/2:0))&&x(n,"cx",l),c&200&&e!==(e=a[6](a[15])+(a[7].bandwidth?a[7].bandwidth()/2:0))&&x(n,"cy",e),c&1&&x(n,"r",a[0]),c&264&&o!==(o=a[8](a[15]))&&x(n,"fill",o),c&2&&x(n,"stroke",a[1]),c&4&&x(n,"stroke-width",a[2])},d(a){a&&k(n)}}}function ss(r){let n,l=r[3],e=[];for(let o=0;o<l.length;o+=1)e[o]=ml(dl(r,l,o));return{c(){n=be("g");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){n=we(o,"g",{class:!0});var a=P(n);for(let c=0;c<e.length;c+=1)e[c].l(a);a.forEach(k),this.h()},h(){x(n,"class","scatter-group")},m(o,a){A(o,n,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,null)},p(o,[a]){if(a&511){l=o[3];let c;for(c=0;c<l.length;c+=1){const g=dl(o,l,c);e[c]?e[c].p(g,a):(e[c]=ml(g),e[c].c(),e[c].m(n,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=l.length}},i:oe,o:oe,d(o){o&&k(n),Pe(e,o)}}}function as(r,n,l){let e,o,a,c,g,m;const{data:u,xGet:t,yGet:i,zGet:f,xScale:s,yScale:d}=dt("LayerCake");V(r,u,_=>l(3,e=_)),V(r,t,_=>l(4,o=_)),V(r,i,_=>l(6,c=_)),V(r,f,_=>l(8,m=_)),V(r,s,_=>l(5,a=_)),V(r,d,_=>l(7,g=_));let{r:h=5}=n,{stroke:v="#000"}=n,{strokeWidth:y=0}=n;return r.$$set=_=>{"r"in _&&l(0,h=_.r),"stroke"in _&&l(1,v=_.stroke),"strokeWidth"in _&&l(2,y=_.strokeWidth)},[h,v,y,e,o,a,c,g,m,u,t,i,f,s,d]}class Gl extends ce{constructor(n){super(),de(this,n,as,ss,me,{r:0,stroke:1,strokeWidth:2})}}function gl(r,n,l){const e=r.slice();return e[9]=n[l],e}function hl(r){let n,l,e,o,a,c=r[6](r[9])+"",g,m;return{c(){n=D("div"),l=D("div"),o=F(),a=D("div"),g=H(c),m=F(),this.h()},l(u){n=I(u,"DIV",{class:!0});var t=P(n);l=I(t,"DIV",{class:!0,style:!0}),P(l).forEach(k),o=U(t),a=I(t,"DIV",{class:!0});var i=P(a);g=G(i,c),i.forEach(k),m=U(t),t.forEach(k),this.h()},h(){x(l,"class",e="chip chip__"+r[0]+" svelte-1vzpanm"),ie(l,"background",r[0]==="line"?`linear-gradient(-45deg, #ffffff 40%, ${r[3](r[9])} 41%, ${r[3](r[9])} 59%, #ffffff 60%)`:r[3](r[9])),x(a,"class","name svelte-1vzpanm"),x(n,"class","key-item svelte-1vzpanm")},m(u,t){A(u,n,t),z(n,l),z(n,o),z(n,a),z(a,g),z(n,m)},p(u,t){t&1&&e!==(e="chip chip__"+u[0]+" svelte-1vzpanm")&&x(l,"class",e),t&13&&ie(l,"background",u[0]==="line"?`linear-gradient(-45deg, #ffffff 40%, ${u[3](u[9])} 41%, ${u[3](u[9])} 59%, #ffffff 60%)`:u[3](u[9])),t&4&&c!==(c=u[6](u[9])+"")&&Ne(g,c)},d(u){u&&k(n)}}}function cs(r){let n,l=r[2],e=[];for(let o=0;o<l.length;o+=1)e[o]=hl(gl(r,l,o));return{c(){n=D("div");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){n=I(o,"DIV",{class:!0,style:!0});var a=P(n);for(let c=0;c<e.length;c+=1)e[c].l(a);a.forEach(k),this.h()},h(){x(n,"class","key grid-cols-1 svelte-1vzpanm"),ie(n,"justify-content",r[1]==="end"?"flex-end":r[1])},m(o,a){A(o,n,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,null)},p(o,[a]){if(a&77){l=o[2];let c;for(c=0;c<l.length;c+=1){const g=gl(o,l,c);e[c]?e[c].p(g,a):(e[c]=hl(g),e[c].c(),e[c].m(n,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=l.length}a&2&&ie(n,"justify-content",o[1]==="end"?"flex-end":o[1])},i:oe,o:oe,d(o){o&&k(n),Pe(e,o)}}}function ds(r){return String(r).replace(/^\w/,n=>n.toUpperCase())}function ms(r,n,l){let e,o,{shape:a="square"}=n,{align:c="start"}=n,{lookup:g=void 0}=n,{capitalize:m=!0}=n;const{zDomain:u,zScale:t}=dt("LayerCake");V(r,u,f=>l(2,e=f)),V(r,t,f=>l(3,o=f));function i(f){return g?typeof g=="function"?g(f):g[f]||f:m===!0?ds(f):f}return r.$$set=f=>{"shape"in f&&l(0,a=f.shape),"align"in f&&l(1,c=f.align),"lookup"in f&&l(7,g=f.lookup),"capitalize"in f&&l(8,m=f.capitalize)},[a,c,e,o,u,t,i,g,m]}class gs extends ce{constructor(n){super(),de(this,n,ms,cs,me,{shape:0,align:1,lookup:7,capitalize:8})}}function hs(r){let n,l,e;return l=new Jr({props:{x:r[3],y:Bl,z:Xr,yScale:ql(),yDomain:r[6],xScale:Yr(),xDomain:r[2],zScale:gt(),zRange:r[8],data:r[0],$$slots:{default:[ys]},$$scope:{ctx:r}}}),{c(){n=D("div"),M(l.$$.fragment),this.h()},l(o){n=I(o,"DIV",{class:!0,style:!0});var a=P(n);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){x(n,"class","chart-container col-span-6 svelte-b6xev8"),ie(n,"height",r[7]+"px")},m(o,a){A(o,n,a),S(l,n,null),e=!0},p(o,a){const c={};a&8&&(c.x=o[3]),a&64&&(c.yDomain=o[6]),a&4&&(c.xDomain=o[2]),a&1&&(c.data=o[0]),a&32786&&(c.$$scope={dirty:a,ctx:o}),l.$set(c),(!e||a&128)&&ie(n,"height",o[7]+"px")},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(n),j(l)}}}function vs(r){let n,l,e;return l=new Jr({props:{x:r[3],y:Bl,z:Xr,yScale:ql(),yDomain:r[6],xScale:Yr(),xDomain:r[2],zScale:gt(),zRange:r[8],data:r[0],$$slots:{default:[ks]},$$scope:{ctx:r}}}),{c(){n=D("div"),M(l.$$.fragment),this.h()},l(o){n=I(o,"DIV",{class:!0,style:!0});var a=P(n);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){x(n,"class","chart-container col-span-5 svelte-b6xev8"),ie(n,"height",r[7]+"px")},m(o,a){A(o,n,a),S(l,n,null),e=!0},p(o,a){const c={};a&8&&(c.x=o[3]),a&64&&(c.yDomain=o[6]),a&4&&(c.xDomain=o[2]),a&1&&(c.data=o[0]),a&32786&&(c.$$scope={dirty:a,ctx:o}),l.$set(c),(!e||a&128)&&ie(n,"height",o[7]+"px")},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(n),j(l)}}}function _s(r){let n,l,e,o;return n=new Wl({props:{ticks:r[1],formatTick:r[14],xAxisTitle:r[4]+"/µL"}}),e=new Hl({}),{c(){M(n.$$.fragment),l=F(),M(e.$$.fragment)},l(a){$(n.$$.fragment,a),l=U(a),$(e.$$.fragment,a)},m(a,c){S(n,a,c),A(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&2&&(g.ticks=a[1]),c&16&&(g.xAxisTitle=a[4]+"/µL"),n.$set(g)},i(a){o||(C(n.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(n.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(n,a),a&&k(l),j(e,a)}}}function ps(r){let n,l;return n=new Gl({props:{r:"6.5"}}),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function ys(r){let n,l,e,o;return n=new pr({props:{$$slots:{default:[_s]},$$scope:{ctx:r}}}),e=new pr({props:{$$slots:{default:[ps]},$$scope:{ctx:r}}}),{c(){M(n.$$.fragment),l=F(),M(e.$$.fragment)},l(a){$(n.$$.fragment,a),l=U(a),$(e.$$.fragment,a)},m(a,c){S(n,a,c),A(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&32786&&(g.$$scope={dirty:c,ctx:a}),n.$set(g);const m={};c&32768&&(m.$$scope={dirty:c,ctx:a}),e.$set(m)},i(a){o||(C(n.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(n.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(n,a),a&&k(l),j(e,a)}}}function bs(r){let n,l,e,o;return n=new Wl({props:{ticks:r[1],formatTick:r[13],xAxisTitle:r[4]+"/µL"}}),e=new Hl({}),{c(){M(n.$$.fragment),l=F(),M(e.$$.fragment)},l(a){$(n.$$.fragment,a),l=U(a),$(e.$$.fragment,a)},m(a,c){S(n,a,c),A(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&2&&(g.ticks=a[1]),c&16&&(g.xAxisTitle=a[4]+"/µL"),n.$set(g)},i(a){o||(C(n.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(n.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(n,a),a&&k(l),j(e,a)}}}function ws(r){let n,l;return n=new Gl({props:{r:"6.5"}}),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function ks(r){let n,l,e,o;return n=new pr({props:{$$slots:{default:[bs]},$$scope:{ctx:r}}}),e=new pr({props:{$$slots:{default:[ws]},$$scope:{ctx:r}}}),{c(){M(n.$$.fragment),l=F(),M(e.$$.fragment)},l(a){$(n.$$.fragment,a),l=U(a),$(e.$$.fragment,a)},m(a,c){S(n,a,c),A(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&32786&&(g.$$scope={dirty:c,ctx:a}),n.$set(g);const m={};c&32768&&(m.$$scope={dirty:c,ctx:a}),e.$set(m)},i(a){o||(C(n.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(n.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(n,a),a&&k(l),j(e,a)}}}function vl(r){let n,l,e;return l=new Jr({props:{z:Xr,zScale:gt(),zRange:r[8],data:r[0],$$slots:{default:[Es]},$$scope:{ctx:r}}}),{c(){n=D("div"),M(l.$$.fragment),this.h()},l(o){n=I(o,"DIV",{class:!0});var a=P(n);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){x(n,"class","col-span-1")},m(o,a){A(o,n,a),S(l,n,null),e=!0},p(o,a){const c={};a&1&&(c.data=o[0]),a&32768&&(c.$$scope={dirty:a,ctx:o}),l.$set(c)},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(n),j(l)}}}function Es(r){let n,l;return n=new gs({props:{align:"center",shape:"circle"}}),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function xs(r){let n,l,e,o,a;const c=[vs,hs],g=[];function m(t,i){return t[5]?0:1}l=m(r),e=g[l]=c[l](r);let u=r[5]&&vl(r);return{c(){n=D("div"),e.c(),o=F(),u&&u.c(),this.h()},l(t){n=I(t,"DIV",{class:!0});var i=P(n);e.l(i),o=U(i),u&&u.l(i),i.forEach(k),this.h()},h(){x(n,"class","grid-container grid grid-cols-6")},m(t,i){A(t,n,i),g[l].m(n,null),z(n,o),u&&u.m(n,null),a=!0},p(t,[i]){let f=l;l=m(t),l===f?g[l].p(t,i):(Re(),W(g[f],1,1,()=>{g[f]=null}),ze(),e=g[l],e?e.p(t,i):(e=g[l]=c[l](t),e.c()),C(e,1),e.m(n,o)),t[5]?u?(u.p(t,i),i&32&&C(u,1)):(u=vl(t),u.c(),C(u,1),u.m(n,null)):u&&(Re(),W(u,1,1,()=>{u=null}),ze())},i(t){a||(C(e),C(u),a=!0)},o(t){W(e),W(u),a=!1},d(t){t&&k(n),g[l].d(),u&&u.d()}}}const Bl="sampleName",Xr="group";function Ns(r,n,l){let e,o,{plotData:a}=n,{titerMethod:c}=n;const g=["#56B4E9","#E69F00","#009E73","#F0E442","#0072B2","#D55E00","#CC79A7","#000000"];let m,u,t,i,f,s,d,h;const v=_=>"1e"+Math.log10(_),y=_=>"1e"+Math.log10(_);return r.$$set=_=>{"plotData"in _&&l(0,a=_.plotData),"titerMethod"in _&&l(9,c=_.titerMethod)},r.$$.update=()=>{if(r.$$.dirty&7683){l(1,t=[]),l(3,f=c),l(11,u=0),l(10,m=1/0),l(12,d=[]),a.forEach(_=>{_[c]<m&&l(10,m=_[c]),_[c]>u&&l(11,u=_[c]),!d.includes(_.group)&_.group!=" "&&d.push(_.group)}),l(5,h=d.length>0),l(0,a=a.sort((_,p)=>_.group===p.group?_.sampleName.localeCompare(p.sampleName):_.group.localeCompare(p.group)));for(let _=String(m).split(".")[0].length-2;_<String(u).split(".")[0].length+1;_++)l(1,t=[10**_,...t]);l(1,t=t.reverse()),l(2,i=[t[0],t[t.length-1]]),l(4,s="TCID50"),c=="ms_titer_ul"&&l(4,s="SIN")}r.$$.dirty&1&&l(7,e=a.length*50+100),r.$$.dirty&1&&l(6,o=a.map(_=>_.sampleName))},[a,t,i,f,s,h,o,e,g,c,m,u,d,v,y]}class Rs extends ce{constructor(n){super(),de(this,n,Ns,xs,me,{plotData:0,titerMethod:9})}}const zs=r=>({}),_l=r=>({});function Ts(r){let n,l,e,o,a,c,g,m,u,t;const i=r[4].header,f=Ke(i,r,r[3],_l),s=r[4].default,d=Ke(s,r,r[3],null);return{c(){n=D("div"),l=F(),e=D("div"),o=D("div"),a=H("✕"),c=F(),f&&f.c(),g=F(),d&&d.c(),this.h()},l(h){n=I(h,"DIV",{class:!0}),P(n).forEach(k),l=U(h),e=I(h,"DIV",{class:!0,role:!0,"aria-modal":!0});var v=P(e);o=I(v,"DIV",{class:!0,autofocus:!0});var y=P(o);a=G(y,"✕"),y.forEach(k),c=U(v),f&&f.l(v),g=U(v),d&&d.l(v),v.forEach(k),this.h()},h(){x(n,"class","modal-background svelte-3wiyh3"),x(o,"class","xclose svelte-3wiyh3"),x(o,"autofocus",""),x(e,"class","modal svelte-3wiyh3"),x(e,"role","dialog"),x(e,"aria-modal","true")},m(h,v){A(h,n,v),A(h,l,v),A(h,e,v),z(e,o),z(o,a),z(e,c),f&&f.m(e,null),z(e,g),d&&d.m(e,null),r[5](e),m=!0,o.focus(),u||(t=[ye(window,"keydown",r[2]),ye(n,"click",r[1]),ye(o,"click",r[1])],u=!0)},p(h,[v]){f&&f.p&&(!m||v&8)&&Ze(f,i,h,h[3],m?Je(i,h[3],v,zs):Ye(h[3]),_l),d&&d.p&&(!m||v&8)&&Ze(d,s,h,h[3],m?Je(s,h[3],v,null):Ye(h[3]),null)},i(h){m||(C(f,h),C(d,h),m=!0)},o(h){W(f,h),W(d,h),m=!1},d(h){h&&k(n),h&&k(l),h&&k(e),f&&f.d(h),d&&d.d(h),r[5](null),u=!1,yr(t)}}}function qs(r,n,l){let{$$slots:e={},$$scope:o}=n;const a=at(),c=()=>a("close");let g;const m=i=>{if(i.key==="Escape"){c();return}if(i.key==="Tab"){const f=g.querySelectorAll("*"),s=Array.from(f).filter(h=>h.tabIndex>=0);let d=s.indexOf(document.activeElement);d===-1&&i.shiftKey&&(d=0),d+=s.length+(i.shiftKey?-1:1),d%=s.length,s[d].focus(),i.preventDefault()}},u=typeof document<"u"&&document.activeElement;u&&go(()=>{u.focus()});function t(i){sr[i?"unshift":"push"](()=>{g=i,l(0,g)})}return r.$$set=i=>{"$$scope"in i&&l(3,o=i.$$scope)},[g,c,m,o,e,t]}class Ps extends ce{constructor(n){super(),de(this,n,qs,Ts,me,{})}}function pl(r){let n,l;return n=new Ps({props:{$$slots:{default:[Ds]},$$scope:{ctx:r}}}),n.$on("close",r[14]),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p(e,o){const a={};o&32768&&(a.$$scope={dirty:o,ctx:e}),n.$set(a)},i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Ds(r){let n,l,e,o,a,c,g,m,u,t,i,f,s,d,h,v,y,_,p,b,w,N,R,T,O,L,q,Q,B,Z,ne,re,J,le,ee,se,ae,ge,ue,ke;return{c(){n=D("h1"),l=H("Titer Calculator Settings:"),e=H(`

			The following settings can be adjusted to match the experimental parameters.
			`),o=D("ul"),a=D("li"),c=H("Volume (µL): Specify the infection volume in the first row (row A)."),g=F(),m=D("li"),u=H("Dilution: Specify the dilution factor between successive rows."),t=F(),i=D("li"),f=H("Method: Specify the method for computing the viral titers."),s=F(),d=D("br"),h=F(),v=D("h1"),y=H("Method references:"),_=F(),p=D("ul"),b=D("li"),w=D("strong"),N=H("Reed-Meunch"),R=H(": The Reed-Muench calculation is based off the Bloom Lab "),T=D("a"),O=H("implementation"),L=H(", originally described in "),q=D("a"),Q=H("Reed and Meunch, 1938"),B=H("."),Z=F(),ne=D("li"),re=D("strong"),J=H("MidSin"),le=H(": The MidSin calculation is based off the original "),ee=D("a"),se=H("implementation"),ae=H(", described in detail in "),ge=D("a"),ue=H("Cresta et al, 2021"),ke=H("."),this.h()},l(Y){n=I(Y,"H1",{class:!0});var he=P(n);l=G(he,"Titer Calculator Settings:"),he.forEach(k),e=G(Y,`

			The following settings can be adjusted to match the experimental parameters.
			`),o=I(Y,"UL",{class:!0});var pe=P(o);a=I(pe,"LI",{});var Xe=P(a);c=G(Xe,"Volume (µL): Specify the infection volume in the first row (row A)."),Xe.forEach(k),g=U(pe),m=I(pe,"LI",{});var Me=P(m);u=G(Me,"Dilution: Specify the dilution factor between successive rows."),Me.forEach(k),t=U(pe),i=I(pe,"LI",{});var ln=P(i);f=G(ln,"Method: Specify the method for computing the viral titers."),ln.forEach(k),pe.forEach(k),s=U(Y),d=I(Y,"BR",{}),h=U(Y),v=I(Y,"H1",{class:!0});var Dn=P(v);y=G(Dn,"Method references:"),Dn.forEach(k),_=U(Y),p=I(Y,"UL",{class:!0});var $e=P(p);b=I($e,"LI",{});var De=P(b);w=I(De,"STRONG",{});var vt=P(w);N=G(vt,"Reed-Meunch"),vt.forEach(k),R=G(De,": The Reed-Muench calculation is based off the Bloom Lab "),T=I(De,"A",{href:!0,class:!0});var In=P(T);O=G(In,"implementation"),In.forEach(k),L=G(De,", originally described in "),q=I(De,"A",{href:!0,class:!0});var _t=P(q);Q=G(_t,"Reed and Meunch, 1938"),_t.forEach(k),B=G(De,"."),De.forEach(k),Z=U($e),ne=I($e,"LI",{});var Te=P(ne);re=I(Te,"STRONG",{});var An=P(re);J=G(An,"MidSin"),An.forEach(k),le=G(Te,": The MidSin calculation is based off the original "),ee=I(Te,"A",{href:!0,class:!0});var Ln=P(ee);se=G(Ln,"implementation"),Ln.forEach(k),ae=G(Te,", described in detail in "),ge=I(Te,"A",{href:!0,class:!0});var Se=P(ge);ue=G(Se,"Cresta et al, 2021"),Se.forEach(k),ke=G(Te,"."),Te.forEach(k),$e.forEach(k),this.h()},h(){x(n,"class","svelte-1d76pqs"),x(o,"class","list-disc svelte-1d76pqs"),x(v,"class","svelte-1d76pqs"),x(T,"href","https://github.com/jbloomlab/reedmuenchcalculator"),x(T,"class","svelte-1d76pqs"),x(q,"href","https://doi.org/10.1093/oxfordjournals.aje.a118408"),x(q,"class","svelte-1d76pqs"),x(ee,"href","https://github.com/cbeauc/midSIN"),x(ee,"class","svelte-1d76pqs"),x(ge,"href","https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1009480"),x(ge,"class","svelte-1d76pqs"),x(p,"class","list-disc svelte-1d76pqs")},m(Y,he){A(Y,n,he),z(n,l),A(Y,e,he),A(Y,o,he),z(o,a),z(a,c),z(o,g),z(o,m),z(m,u),z(o,t),z(o,i),z(i,f),A(Y,s,he),A(Y,d,he),A(Y,h,he),A(Y,v,he),z(v,y),A(Y,_,he),A(Y,p,he),z(p,b),z(b,w),z(w,N),z(b,R),z(b,T),z(T,O),z(b,L),z(b,q),z(q,Q),z(b,B),z(p,Z),z(p,ne),z(ne,re),z(re,J),z(ne,le),z(ne,ee),z(ee,se),z(ne,ae),z(ne,ge),z(ge,ue),z(ne,ke)},p:oe,d(Y){Y&&k(n),Y&&k(e),Y&&k(o),Y&&k(s),Y&&k(d),Y&&k(h),Y&&k(v),Y&&k(_),Y&&k(p)}}}function yl(r){let n,l,e,o,a,c;n=new Rs({props:{plotData:r[6],titerMethod:r[5]}}),e=new gf({props:{data:r[0]}});let g=r[1].length>0&&bl(r);return{c(){M(n.$$.fragment),l=F(),M(e.$$.fragment),o=F(),g&&g.c(),a=_e()},l(m){$(n.$$.fragment,m),l=U(m),$(e.$$.fragment,m),o=U(m),g&&g.l(m),a=_e()},m(m,u){S(n,m,u),A(m,l,u),S(e,m,u),A(m,o,u),g&&g.m(m,u),A(m,a,u),c=!0},p(m,u){const t={};u&64&&(t.plotData=m[6]),u&32&&(t.titerMethod=m[5]),n.$set(t);const i={};u&1&&(i.data=m[0]),e.$set(i),m[1].length>0?g?g.p(m,u):(g=bl(m),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(m){c||(C(n.$$.fragment,m),C(e.$$.fragment,m),c=!0)},o(m){W(n.$$.fragment,m),W(e.$$.fragment,m),c=!1},d(m){j(n,m),m&&k(l),j(e,m),m&&k(o),g&&g.d(m),m&&k(a)}}}function bl(r){let n,l,e,o,a;return{c(){n=D("h3"),l=H("Warnings"),e=H(`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=H(r[7]),a=H("."),this.h()},l(c){n=I(c,"H3",{class:!0});var g=P(n);l=G(g,"Warnings"),g.forEach(k),e=G(c,`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=G(c,r[7]),a=G(c,"."),this.h()},h(){x(n,"class","warning svelte-1d76pqs")},m(c,g){A(c,n,g),z(n,l),A(c,e,g),A(c,o,g),A(c,a,g)},p(c,g){g&128&&Ne(o,c[7])},d(c){c&&k(n),c&&k(e),c&&k(o),c&&k(a)}}}function Is(r){let n,l,e,o,a,c,g,m,u,t,i,f,s,d,h,v,y,_,p,b,w,N,R,T,O,L=r[8]&&pl(r),q=r[2]!=null&&yl(r);return{c(){n=D("div"),l=D("div"),e=D("div"),o=H(`Volume (µL):
			`),a=D("input"),c=F(),g=D("div"),m=H(`Dilution:
			`),u=D("input"),t=F(),i=D("div"),f=H(`Method:
			`),s=D("select"),d=D("option"),h=H("Reed-Meunch"),v=D("option"),y=H("MidSin"),_=F(),p=D("div"),b=H("ⓘ"),w=F(),L&&L.c(),N=F(),q&&q.c(),this.h()},l(Q){n=I(Q,"DIV",{class:!0});var B=P(n);l=I(B,"DIV",{class:!0});var Z=P(l);e=I(Z,"DIV",{class:!0});var ne=P(e);o=G(ne,`Volume (µL):
			`),a=I(ne,"INPUT",{class:!0,type:!0,id:!0,min:!0}),ne.forEach(k),c=U(Z),g=I(Z,"DIV",{class:!0});var re=P(g);m=G(re,`Dilution:
			`),u=I(re,"INPUT",{class:!0,type:!0,id:!0,min:!0}),re.forEach(k),t=U(Z),i=I(Z,"DIV",{class:!0});var J=P(i);f=G(J,`Method:
			`),s=I(J,"SELECT",{class:!0,name:!0,id:!0});var le=P(s);d=I(le,"OPTION",{});var ee=P(d);h=G(ee,"Reed-Meunch"),ee.forEach(k),v=I(le,"OPTION",{});var se=P(v);y=G(se,"MidSin"),se.forEach(k),le.forEach(k),_=U(J),p=I(J,"DIV",{class:!0});var ae=P(p);b=G(ae,"ⓘ"),ae.forEach(k),J.forEach(k),Z.forEach(k),w=U(B),L&&L.l(B),N=U(B),q&&q.l(B),B.forEach(k),this.h()},h(){x(a,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),x(a,"type","number"),x(a,"id","volume"),x(a,"min","1"),x(e,"class","CalcOpts"),x(u,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),x(u,"type","number"),x(u,"id","dilution"),x(u,"min","1"),x(g,"class","CalcOpts"),d.__value="rm_titer",d.value=d.__value,v.__value="ms_titer_ul",v.value=v.__value,x(s,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),x(s,"name","method"),x(s,"id","method"),r[5]===void 0&&ct(()=>r[12].call(s)),x(p,"class","info svelte-1d76pqs"),x(i,"class","CalcOpts"),x(l,"class","calcmenu grid 1opt:grid-cols-1 2opt:grid-cols-2 3opt:grid-cols-3 gap-2 svelte-1d76pqs"),x(n,"class","container svelte-1d76pqs")},m(Q,B){A(Q,n,B),z(n,l),z(l,e),z(e,o),z(e,a),Ce(a,r[4]),z(l,c),z(l,g),z(g,m),z(g,u),Ce(u,r[3]),z(l,t),z(l,i),z(i,f),z(i,s),z(s,d),z(d,h),z(s,v),z(v,y),Tn(s,r[5],!0),z(i,_),z(i,p),z(p,b),z(n,w),L&&L.m(n,null),z(n,N),q&&q.m(n,null),R=!0,T||(O=[ye(a,"input",r[10]),ye(u,"input",r[11]),ye(s,"change",r[12]),ye(p,"click",r[13])],T=!0)},p(Q,[B]){B&16&&ar(a.value)!==Q[4]&&Ce(a,Q[4]),B&8&&ar(u.value)!==Q[3]&&Ce(u,Q[3]),B&32&&Tn(s,Q[5]),Q[8]?L?(L.p(Q,B),B&256&&C(L,1)):(L=pl(Q),L.c(),C(L,1),L.m(n,N)):L&&(Re(),W(L,1,1,()=>{L=null}),ze()),Q[2]!=null?q?(q.p(Q,B),B&4&&C(q,1)):(q=yl(Q),q.c(),C(q,1),q.m(n,null)):q&&(Re(),W(q,1,1,()=>{q=null}),ze())},i(Q){R||(C(L),C(q),R=!0)},o(Q){W(L),W(q),R=!1},d(Q){Q&&k(n),L&&L.d(),q&&q.d(),T=!1,yr(O)}}}function As(r,n,l){let e,o,a,c;V(r,ri,_=>l(3,o=_)),V(r,ti,_=>l(4,a=_)),V(r,We,_=>l(9,c=_));let g="rm_titer",m,u,t,i,f=!1;function s(){a=ar(this.value),ti.set(a)}function d(){o=ar(this.value),ri.set(o)}function h(){g=Wr(this),l(5,g)}const v=()=>l(8,f=!0),y=()=>l(8,f=!1);return r.$$.update=()=>{r.$$.dirty&536&&l(2,e=af(c,a,o)),r.$$.dirty&7&&e!=null&&(l(0,m=e.filter(_=>_.nrep>1)),l(1,u=e.filter(_=>_.nrep<2)),l(6,t=m.filter(_=>_.rm_titer>0)),l(7,i=u.map(_=>_.sample).join(", ")),e.forEach(_=>{let p=_.sample.toString().split("-");p.length>1?(_.group=p[0],_.sampleName=p[1]):(_.group=" ",_.sampleName=_.sample)}))},[m,u,e,o,a,g,t,i,f,c,s,d,h,v,y]}class Ls extends ce{constructor(n){super(),de(this,n,As,Is,me,{})}}const Cs=""+new URL("../assets/github-mark.7a0dd11e.svg",import.meta.url).href;function Os(r){let n,l;return n=new Ls({}),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Vs(r){let n,l;return n=new jo({}),n.$on("add",r[3]),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Ws(r){let n,l;return n=new Yo({}),n.$on("add",r[3]),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Hs(r){let n,l;return n=new Wo({}),n.$on("edit",r[4]),{c(){M(n.$$.fragment)},l(e){$(n.$$.fragment,e)},m(e,o){S(n,e,o),l=!0},p:oe,i(e){l||(C(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){j(n,e)}}}function Gs(r){let n,l,e,o,a,c,g,m,u,t;c=new Bo({props:{activeItem:r[0],items:r[1]}}),c.$on("tabChange",r[2]);const i=[Hs,Ws,Vs,Os],f=[];function s(d,h){return d[0]==="All Plates"?0:d[0]==="Add New Plate"?1:d[0]==="Edit Plate"?2:d[0]==="Results"?3:-1}return~(m=s(r))&&(u=f[m]=i[m](r)),{c(){n=D("main"),l=D("a"),e=D("img"),a=F(),M(c.$$.fragment),g=F(),u&&u.c(),this.h()},l(d){n=I(d,"MAIN",{class:!0});var h=P(n);l=I(h,"A",{href:!0});var v=P(l);e=I(v,"IMG",{class:!0,src:!0}),v.forEach(k),a=U(h),$(c.$$.fragment,h),g=U(h),u&&u.l(h),h.forEach(k),this.h()},h(){x(e,"class","github svelte-y2284r"),ho(e.src,o=Cs)||x(e,"src",o),x(l,"href","https://github.com/andrewwbutler/titercalculator/"),x(n,"class","svelte-y2284r")},m(d,h){A(d,n,h),z(n,l),z(l,e),z(n,a),S(c,n,null),z(n,g),~m&&f[m].m(n,null),t=!0},p(d,[h]){const v={};h&1&&(v.activeItem=d[0]),c.$set(v);let y=m;m=s(d),m===y?~m&&f[m].p(d,h):(u&&(Re(),W(f[y],1,1,()=>{f[y]=null}),ze()),~m?(u=f[m],u?u.p(d,h):(u=f[m]=i[m](d),u.c()),C(u,1),u.m(n,null)):u=null)},i(d){t||(C(c.$$.fragment,d),C(u),t=!0)},o(d){W(c.$$.fragment,d),W(u),t=!1},d(d){d&&k(n),j(c),~m&&f[m].d()}}}function Bs(r,n,l){let e,o;V(r,We,t=>l(5,e=t)),V(r,nn,t=>l(6,o=t));let a=["All Plates","Add New Plate","Edit Plate","Results"],c="All Plates";return[c,a,t=>{if(t.detail.currentTab=="Edit Plate"&t.detail.newTab!="EditPlate"&&o!=-1){let i=e.find(f=>f.id==o);i.added=!0,nn.set(-1)}t.detail.newTab=="Results"&e.length<2||t.detail.newTab=="Edit Plate"&e.length<2?l(0,c=t.detail.currentTab):l(0,c=t.detail.newTab)},t=>{l(0,c="All Plates")},t=>{l(0,c="Edit Plate"),nn.set(t.detail.plate.id)}]}class Qs extends ce{constructor(n){super(),de(this,n,Bs,Gs,me,{})}}export{Qs as default};
