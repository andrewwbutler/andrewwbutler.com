import{S as de,i as me,s as ge,C as Ye,k as I,q as H,a as U,l as A,m as P,r as G,h as k,c as F,n as E,J as Ae,b as D,G as T,K as pe,u as Ne,D as Ze,E as Je,F as Xe,g as C,d as W,L as kr,M as Fr,v as Re,f as Te,N as Pe,H as oe,y as M,z as $,A as S,B as j,O as et,P as Bl,Q as Ul,R as Er,I as V,T as Fl,U as Kl,V as Ql,W as nt,X as Yl,Y as Zl,Z as Jl,_ as xn,$ as rr,e as _e,a0 as De,a1 as xr,o as Xl,a2 as X,a3 as Ml,p as ie,a4 as $l,w as Xt,a5 as ye,a6 as be,a7 as tt,a8 as ul,a9 as Sl,aa as Mt,ab as jl}from"../chunks/index.accbaf4b.js";import{w as Q,d as ue}from"../chunks/index.b5bb39db.js";function eo(r){let t,l,e,o,a,c,g,m;const u=r[4].default,n=Ye(u,r,r[3],null);return{c(){t=I("div"),l=I("div"),e=H(r[2]),o=U(),a=I("button"),n&&n.c(),this.h()},l(i){t=A(i,"DIV",{class:!0});var f=P(t);l=A(f,"DIV",{class:!0});var s=P(l);e=G(s,r[2]),s.forEach(k),o=F(f),a=A(f,"BUTTON",{class:!0});var d=P(a);n&&n.l(d),d.forEach(k),f.forEach(k),this.h()},h(){E(l,"class","letter-label svelte-180z40v"),E(a,"class","svelte-180z40v"),Ae(a,"selected",r[0]),Ae(a,"added",r[1]),E(t,"class","button-row")},m(i,f){D(i,t,f),T(t,l),T(l,e),T(t,o),T(t,a),n&&n.m(a,null),c=!0,g||(m=pe(a,"click",r[5]),g=!0)},p(i,[f]){(!c||f&4)&&Ne(e,i[2]),n&&n.p&&(!c||f&8)&&Ze(n,u,i,i[3],c?Xe(u,i[3],f,null):Je(i[3]),null),(!c||f&1)&&Ae(a,"selected",i[0]),(!c||f&2)&&Ae(a,"added",i[1])},i(i){c||(C(n,i),c=!0)},o(i){W(n,i),c=!1},d(i){i&&k(t),n&&n.d(i),g=!1,m()}}}function no(r,t,l){let{$$slots:e={},$$scope:o}=t,{selected:a=!1}=t,{added:c=!1}=t,{rowLetter:g=""}=t;function m(u){kr.call(this,r,u)}return r.$$set=u=>{"selected"in u&&l(0,a=u.selected),"added"in u&&l(1,c=u.added),"rowLetter"in u&&l(2,g=u.rowLetter),"$$scope"in u&&l(3,o=u.$$scope)},[a,c,g,o,e,m]}class to extends de{constructor(t){super(),me(this,t,no,eo,ge,{selected:0,added:1,rowLetter:2})}}function ro(r){let t,l,e,o,a;const c=r[2].default,g=Ye(c,r,r[1],null);return{c(){t=I("div"),l=I("div"),e=H(r[0]),o=U(),g&&g.c(),this.h()},l(m){t=A(m,"DIV",{class:!0});var u=P(t);l=A(u,"DIV",{class:!0});var n=P(l);e=G(n,r[0]),n.forEach(k),o=F(u),g&&g.l(u),u.forEach(k),this.h()},h(){E(l,"class","title text-xl text-center"),E(t,"class","card shadow-lg min-w-min svelte-qzs6n9")},m(m,u){D(m,t,u),T(t,l),T(l,e),T(t,o),g&&g.m(t,null),a=!0},p(m,[u]){(!a||u&1)&&Ne(e,m[0]),g&&g.p&&(!a||u&2)&&Ze(g,c,m,m[1],a?Xe(c,m[1],u,null):Je(m[1]),null)},i(m){a||(C(g,m),a=!0)},o(m){W(g,m),a=!1},d(m){m&&k(t),g&&g.d(m)}}}function io(r,t,l){let{$$slots:e={},$$scope:o}=t,{cardTitle:a}=t;return r.$$set=c=>{"cardTitle"in c&&l(0,a=c.cardTitle),"$$scope"in c&&l(1,o=c.$$scope)},[a,o,e]}class lo extends de{constructor(t){super(),me(this,t,io,ro,ge,{cardTitle:0})}}function oo(r){let t,l,e,o,a;const c=r[3].default,g=Ye(c,r,r[2],null);return{c(){t=I("button"),g&&g.c(),this.h()},l(m){t=A(m,"BUTTON",{class:!0});var u=P(t);g&&g.l(u),u.forEach(k),this.h()},h(){E(t,"class",l=Fr(r[0])+" svelte-1x31uai"),Ae(t,"flat",r[1])},m(m,u){D(m,t,u),g&&g.m(t,null),e=!0,o||(a=pe(t,"click",r[4]),o=!0)},p(m,[u]){g&&g.p&&(!e||u&4)&&Ze(g,c,m,m[2],e?Xe(c,m[2],u,null):Je(m[2]),null),(!e||u&1&&l!==(l=Fr(m[0])+" svelte-1x31uai"))&&E(t,"class",l),(!e||u&3)&&Ae(t,"flat",m[1])},i(m){e||(C(g,m),e=!0)},o(m){W(g,m),e=!1},d(m){m&&k(t),g&&g.d(m),o=!1,a()}}}function fo(r,t,l){let{$$slots:e={},$$scope:o}=t,{type:a="primary"}=t,{flat:c=!0}=t;function g(m){kr.call(this,r,m)}return r.$$set=m=>{"type"in m&&l(0,a=m.type),"flat"in m&&l(1,c=m.flat),"$$scope"in m&&l(2,o=m.$$scope)},[a,c,o,e,g]}class Nn extends de{constructor(t){super(),me(this,t,fo,oo,ge,{type:0,flat:1})}}const Xn=r=>{let t=Array(12).fill(-1),l=Array(12).fill("Neg");for(var e=1;e<11;e++)l[e]=e;return{id:r,name:"Plate "+r,maxWell:t,colNames:l,added:!1}},Oe=Q([Xn(1)]),hr=Q(1),en=Q(-1),Kr=Q(10),Qr=Q(10),tn=[Xn(3),Xn(2),Xn(1)];tn[1].maxWell=[-1,4,4,3,4,3,5,6,5,5,6,-1];tn[1].colNames=["Neg"].concat(Array(5).fill("1-A"),Array(5).fill("2-B"),["Neg"]);tn[1].added=!0;tn[2].maxWell=[-1,2,2,2,3,2,4,4,4,5,4,-1];tn[2].colNames=["Neg"].concat(Array(5).fill("1-C"),Array(5).fill("2-D"),["Neg"]);tn[2].added=!0;function Yr(r,t,l){const e=r.slice();return e[6]=t[l],e[8]=l,e}function Zr(r,t,l){const e=r.slice();return e[9]=t[l],e[11]=l,e}function Jr(r,t,l){const e=r.slice();return e[12]=t[l],e}function Xr(r){let t,l=r[12]+"",e;return{c(){t=I("td"),e=H(l),this.h()},l(o){t=A(o,"TD",{class:!0});var a=P(t);e=G(a,l),a.forEach(k),this.h()},h(){E(t,"class","svelte-1oiezpb")},m(o,a){D(o,t,a),T(t,e)},p:oe,d(o){o&&k(t)}}}function Mr(r){let t,l,e;function o(){return r[4](r[11],r[8])}return l=new to({props:{selected:r[8]<=r[9],added:r[0].added}}),l.$on("click",o),{c(){t=I("td"),M(l.$$.fragment),this.h()},l(a){t=A(a,"TD",{class:!0});var c=P(t);$(l.$$.fragment,c),c.forEach(k),this.h()},h(){E(t,"class","svelte-1oiezpb")},m(a,c){D(a,t,c),S(l,t,null),e=!0},p(a,c){r=a;const g={};c&1&&(g.selected=r[8]<=r[9]),c&1&&(g.added=r[0].added),l.$set(g)},i(a){e||(C(l.$$.fragment,a),e=!0)},o(a){W(l.$$.fragment,a),e=!1},d(a){a&&k(t),j(l)}}}function $r(r){let t,l,e=r[6]+"",o,a,c,g,m=r[0].maxWell,u=[];for(let i=0;i<m.length;i+=1)u[i]=Mr(Zr(r,m,i));const n=i=>W(u[i],1,1,()=>{u[i]=null});return{c(){t=I("tr"),l=I("td"),o=H(e),a=U();for(let i=0;i<u.length;i+=1)u[i].c();c=U(),this.h()},l(i){t=A(i,"TR",{});var f=P(t);l=A(f,"TD",{class:!0});var s=P(l);o=G(s,e),s.forEach(k),a=F(f);for(let d=0;d<u.length;d+=1)u[d].l(f);c=F(f),f.forEach(k),this.h()},h(){E(l,"class","svelte-1oiezpb")},m(i,f){D(i,t,f),T(t,l),T(l,o),T(t,a);for(let s=0;s<u.length;s+=1)u[s]&&u[s].m(t,null);T(t,c),g=!0},p(i,f){if(f&9){m=i[0].maxWell;let s;for(s=0;s<m.length;s+=1){const d=Zr(i,m,s);u[s]?(u[s].p(d,f),C(u[s],1)):(u[s]=Mr(d),u[s].c(),C(u[s],1),u[s].m(t,c))}for(Re(),s=m.length;s<u.length;s+=1)n(s);Te()}},i(i){if(!g){for(let f=0;f<m.length;f+=1)C(u[f]);g=!0}},o(i){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)W(u[f]);g=!1},d(i){i&&k(t),Pe(u,i)}}}function uo(r){let t,l,e,o,a,c,g=r[2],m=[];for(let f=0;f<g.length;f+=1)m[f]=Xr(Jr(r,g,f));let u=r[1],n=[];for(let f=0;f<u.length;f+=1)n[f]=$r(Yr(r,u,f));const i=f=>W(n[f],1,1,()=>{n[f]=null});return{c(){t=I("table"),l=I("tr"),e=I("td"),o=U();for(let f=0;f<m.length;f+=1)m[f].c();a=U();for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){t=A(f,"TABLE",{class:!0});var s=P(t);l=A(s,"TR",{});var d=P(l);e=A(d,"TD",{class:!0}),P(e).forEach(k),o=F(d);for(let h=0;h<m.length;h+=1)m[h].l(d);d.forEach(k),a=F(s);for(let h=0;h<n.length;h+=1)n[h].l(s);s.forEach(k),this.h()},h(){E(e,"class","svelte-1oiezpb"),E(t,"class","svelte-1oiezpb")},m(f,s){D(f,t,s),T(t,l),T(l,e),T(l,o);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(l,null);T(t,a);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(t,null);c=!0},p(f,[s]){if(s&4){g=f[2];let d;for(d=0;d<g.length;d+=1){const h=Jr(f,g,d);m[d]?m[d].p(h,s):(m[d]=Xr(h),m[d].c(),m[d].m(l,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=g.length}if(s&11){u=f[1];let d;for(d=0;d<u.length;d+=1){const h=Yr(f,u,d);n[d]?(n[d].p(h,s),C(n[d],1)):(n[d]=$r(h),n[d].c(),C(n[d],1),n[d].m(t,null))}for(Re(),d=u.length;d<n.length;d+=1)i(d);Te()}},i(f){if(!c){for(let s=0;s<u.length;s+=1)C(n[s]);c=!0}},o(f){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)W(n[s]);c=!1},d(f){f&&k(t),Pe(m,f),Pe(n,f)}}}function so(r,t,l){let{plate:e}=t;e.maxWell.length;let o=["A","B","C","D","E","F","G","H"],a=Array.from({length:12},(m,u)=>u+1);const c=(m,u,n)=>{e.added||(e.maxWell[u]==n?l(0,e.maxWell[u]=-1,e):l(0,e.maxWell[u]=n,e),Oe.update(i=>{let f=[...i];return f.find(s=>s.id===m),f}))},g=(m,u)=>c(e.id,m,u);return r.$$set=m=>{"plate"in m&&l(0,e=m.plate)},[e,o,a,c,g]}class Nr extends de{constructor(t){super(),me(this,t,so,uo,ge,{plate:0})}}function ao(r){let t;return{c(){t=H("Delete")},l(l){t=G(l,"Delete")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function co(r){let t;return{c(){t=H("Edit")},l(l){t=G(l,"Edit")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function mo(r){let t,l,e,o,a,c,g,m,u;return t=new Nr({props:{plate:r[0]}}),a=new Nn({props:{type:"primary",$$slots:{default:[ao]},$$scope:{ctx:r}}}),a.$on("click",r[3]),m=new Nn({props:{type:"secondary",$$slots:{default:[co]},$$scope:{ctx:r}}}),m.$on("click",r[4]),{c(){M(t.$$.fragment),l=U(),e=I("div"),o=I("div"),M(a.$$.fragment),c=U(),g=I("div"),M(m.$$.fragment),this.h()},l(n){$(t.$$.fragment,n),l=F(n),e=A(n,"DIV",{class:!0});var i=P(e);o=A(i,"DIV",{class:!0});var f=P(o);$(a.$$.fragment,f),f.forEach(k),c=F(i),g=A(i,"DIV",{class:!0});var s=P(g);$(m.$$.fragment,s),s.forEach(k),i.forEach(k),this.h()},h(){E(o,"class","absolute bottom-0 right-0"),E(g,"class","absolute bottom-0 left-0"),E(e,"class","button-footer relative svelte-x2uown")},m(n,i){S(t,n,i),D(n,l,i),D(n,e,i),T(e,o),S(a,o,null),T(e,c),T(e,g),S(m,g,null),u=!0},p(n,i){const f={};i&1&&(f.plate=n[0]),t.$set(f);const s={};i&64&&(s.$$scope={dirty:i,ctx:n}),a.$set(s);const d={};i&64&&(d.$$scope={dirty:i,ctx:n}),m.$set(d)},i(n){u||(C(t.$$.fragment,n),C(a.$$.fragment,n),C(m.$$.fragment,n),u=!0)},o(n){W(t.$$.fragment,n),W(a.$$.fragment,n),W(m.$$.fragment,n),u=!1},d(n){j(t,n),n&&k(l),n&&k(e),j(a),j(m)}}}function go(r){let t,l;return t=new lo({props:{cardTitle:r[0].name,$$slots:{default:[mo]},$$scope:{ctx:r}}}),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p(e,[o]){const a={};o&1&&(a.cardTitle=e[0].name),o&65&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function ho(r,t,l){let{plate:e}=t,o=et();const a=u=>{Oe.update(n=>n.filter(i=>i.id!=u))},c=u=>{en.set(u.id),o("edit",{plate:u})},g=()=>a(e.id),m=()=>c(e);return r.$$set=u=>{"plate"in u&&l(0,e=u.plate)},[e,a,c,g,m]}class vo extends de{constructor(t){super(),me(this,t,ho,go,ge,{plate:0})}}function sl(r){const t=r-1;return t*t*t+1}function _o(r,{delay:t=0,duration:l=400,easing:e=Bl}={}){const o=+getComputedStyle(r).opacity;return{delay:t,duration:l,easing:e,css:a=>`opacity: ${a*o}`}}function po(r,{delay:t=0,duration:l=400,easing:e=sl,start:o=0,opacity:a=0}={}){const c=getComputedStyle(r),g=+c.opacity,m=c.transform==="none"?"":c.transform,u=1-o,n=g*(1-a);return{delay:t,duration:l,easing:e,css:(i,f)=>`
			transform: ${m} scale(${1-u*f});
			opacity: ${g-n*f}
		`}}function yo(r,{from:t,to:l},e={}){const o=getComputedStyle(r),a=o.transform==="none"?"":o.transform,[c,g]=o.transformOrigin.split(" ").map(parseFloat),m=t.left+t.width*c/l.width-(l.left+c),u=t.top+t.height*g/l.height-(l.top+g),{delay:n=0,duration:i=s=>Math.sqrt(s)*120,easing:f=sl}=e;return{delay:n,duration:Ul(i)?i(Math.sqrt(m*m+u*u)):i,easing:f,css:(s,d)=>{const h=d*m,v=d*u,y=s+d*t.width/l.width,_=s+d*t.height/l.height;return`transform: ${a} translate(${h}px, ${v}px) scale(${y}, ${_});`}}}function Sr(r,t,l){const e=r.slice();return e[6]=t[l],e}function jr(r){let t,l;return t=new vo({props:{plate:r[6]}}),t.$on("edit",r[4]),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p(e,o){const a={};o&1&&(a.plate=e[6]),t.$set(a)},i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function ei(r,t){let l,e,o,a,c,g=oe,m,u=t[6].added&&jr(t);return{key:r,first:null,c(){l=I("div"),u&&u.c(),e=U(),this.h()},l(n){l=A(n,"DIV",{});var i=P(l);u&&u.l(i),e=F(i),i.forEach(k),this.h()},h(){this.first=l},m(n,i){D(n,l,i),u&&u.m(l,null),T(l,e),m=!0},p(n,i){t=n,t[6].added?u?(u.p(t,i),i&1&&C(u,1)):(u=jr(t),u.c(),C(u,1),u.m(l,e)):u&&(Re(),W(u,1,1,()=>{u=null}),Te())},r(){c=l.getBoundingClientRect()},f(){Fl(l),g(),Kl(l,c)},a(){g(),g=Ql(l,c,yo,{duration:500})},i(n){m||(C(u),nt(()=>{a&&a.end(1),o=Yl(l,_o,{}),o.start()}),m=!0)},o(n){W(u),o&&o.invalidate(),n&&(a=Zl(l,po,{})),m=!1},d(n){n&&k(l),u&&u.d(),n&&a&&a.end()}}}function ni(r){let t,l,e,o,a,c,g;return c=new Nn({props:{type:"secondary",$$slots:{default:[bo]},$$scope:{ctx:r}}}),c.$on("click",r[5]),{c(){t=I("p"),l=H("Please add a plate to continue"),e=U(),o=I("br"),a=U(),M(c.$$.fragment)},l(m){t=A(m,"P",{});var u=P(t);l=G(u,"Please add a plate to continue"),u.forEach(k),e=F(m),o=A(m,"BR",{}),a=F(m),$(c.$$.fragment,m)},m(m,u){D(m,t,u),T(t,l),D(m,e,u),D(m,o,u),D(m,a,u),S(c,m,u),g=!0},p(m,u){const n={};u&512&&(n.$$scope={dirty:u,ctx:m}),c.$set(n)},i(m){g||(C(c.$$.fragment,m),g=!0)},o(m){W(c.$$.fragment,m),g=!1},d(m){m&&k(t),m&&k(e),m&&k(o),m&&k(a),j(c,m)}}}function bo(r){let t;return{c(){t=H("Load Demo data")},l(l){t=G(l,"Load Demo data")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function wo(r){let t,l,e=[],o=new Map,a,c,g,m=r[0];const u=i=>i[6].id;for(let i=0;i<m.length;i+=1){let f=Sr(r,m,i),s=u(f);o.set(s,e[i]=ei(s,f))}let n=r[1]&&ni(r);return{c(){t=I("div"),l=I("div");for(let i=0;i<e.length;i+=1)e[i].c();a=U(),c=I("div"),n&&n.c(),this.h()},l(i){t=A(i,"DIV",{class:!0});var f=P(t);l=A(f,"DIV",{class:!0});var s=P(l);for(let h=0;h<e.length;h+=1)e[h].l(s);s.forEach(k),a=F(f),c=A(f,"DIV",{class:!0});var d=P(c);n&&n.l(d),d.forEach(k),f.forEach(k),this.h()},h(){E(l,"class","grid 1plate:grid-cols-1 2plate:grid-cols-2 3plate:grid-cols-3 gap-2"),E(c,"class","emptyMessage svelte-1gvfhfz"),E(t,"class","container svelte-1gvfhfz")},m(i,f){D(i,t,f),T(t,l);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(l,null);T(t,a),T(t,c),n&&n.m(c,null),g=!0},p(i,[f]){if(f&1){m=i[0],Re();for(let s=0;s<e.length;s+=1)e[s].r();e=Er(e,f,u,1,i,m,o,l,Jl,ei,null,Sr);for(let s=0;s<e.length;s+=1)e[s].a();Te()}i[1]?n?(n.p(i,f),f&2&&C(n,1)):(n=ni(i),n.c(),C(n,1),n.m(c,null)):n&&(Re(),W(n,1,1,()=>{n=null}),Te())},i(i){if(!g){for(let f=0;f<m.length;f+=1)C(e[f]);C(n),g=!0}},o(i){for(let f=0;f<e.length;f+=1)W(e[f]);W(n),g=!1},d(i){i&&k(t);for(let f=0;f<e.length;f+=1)e[f].d();n&&n.d()}}}function ko(r,t,l){let e,o,a;V(r,Oe,u=>l(3,a=u));const c=()=>{Oe.set(tn),hr.set(3)};function g(u){kr.call(this,r,u)}const m=()=>c();return r.$$.update=()=>{r.$$.dirty&8&&l(1,e=a.length==1),r.$$.dirty&8&&l(0,o=a.slice(1).reverse())},[o,e,c,a,g,m]}class Eo extends de{constructor(t){super(),me(this,t,ko,wo,ge,{})}}function ti(r,t,l){const e=r.slice();return e[4]=t[l],e}function ri(r){let t,l,e=r[4]+"",o,a,c,g;function m(){return r[3](r[4])}return{c(){t=I("li"),l=I("div"),o=H(e),a=U(),this.h()},l(u){t=A(u,"LI",{class:!0});var n=P(t);l=A(n,"DIV",{class:!0});var i=P(l);o=G(i,e),i.forEach(k),a=F(n),n.forEach(k),this.h()},h(){E(l,"class","svelte-aio21l"),Ae(l,"active",r[4]===r[1]),E(t,"class","svelte-aio21l")},m(u,n){D(u,t,n),T(t,l),T(l,o),T(t,a),c||(g=pe(t,"click",m),c=!0)},p(u,n){r=u,n&1&&e!==(e=r[4]+"")&&Ne(o,e),n&3&&Ae(l,"active",r[4]===r[1])},d(u){u&&k(t),c=!1,g()}}}function xo(r){let t,l,e=r[0],o=[];for(let a=0;a<e.length;a+=1)o[a]=ri(ti(r,e,a));return{c(){t=I("div"),l=I("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){t=A(a,"DIV",{class:!0});var c=P(t);l=A(c,"UL",{class:!0});var g=P(l);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(k),c.forEach(k),this.h()},h(){E(l,"class","svelte-aio21l"),E(t,"class","tabs svelte-aio21l")},m(a,c){D(a,t,c),T(t,l);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(l,null)},p(a,[c]){if(c&7){e=a[0];let g;for(g=0;g<e.length;g+=1){const m=ti(a,e,g);o[g]?o[g].p(m,c):(o[g]=ri(m),o[g].c(),o[g].m(l,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=e.length}},i:oe,o:oe,d(a){a&&k(t),Pe(o,a)}}}function No(r,t,l){let{items:e}=t,{activeItem:o}=t;const a=et(),c=g=>a("tabChange",{currentTab:o,newTab:g});return r.$$set=g=>{"items"in g&&l(0,e=g.items),"activeItem"in g&&l(1,o=g.activeItem)},[e,o,a,c]}class Ro extends de{constructor(t){super(),me(this,t,No,xo,ge,{items:0,activeItem:1})}}function ii(r,t,l){const e=r.slice();return e[7]=t[l],e[8]=t,e[9]=l,e}function li(r,t,l){const e=r.slice();return e[0]=t[l],e}function oi(r){let t,l=r[0].name+"",e,o;return{c(){t=I("option"),e=H(l),this.h()},l(a){t=A(a,"OPTION",{});var c=P(t);e=G(c,l),c.forEach(k),this.h()},h(){t.__value=o=r[0].name,t.value=t.__value},m(a,c){D(a,t,c),T(t,e)},p(a,c){c&4&&l!==(l=a[0].name+"")&&Ne(e,l),c&4&&o!==(o=a[0].name)&&(t.__value=o,t.value=t.__value)},d(a){a&&k(t)}}}function fi(r){let t,l=r[0].added===!0&&oi(r);return{c(){l&&l.c(),t=_e()},l(e){l&&l.l(e),t=_e()},m(e,o){l&&l.m(e,o),D(e,t,o)},p(e,o){e[0].added===!0?l?l.p(e,o):(l=oi(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&k(t)}}}function ui(r){let t,l,e,o=r[9]+1+"",a,c,g,m,u,n,i;function f(){r[6].call(m,r[8],r[9])}return{c(){t=I("form"),l=I("label"),e=H("Column "),a=H(o),c=H(" Sample Name:"),g=U(),m=I("input"),u=U(),this.h()},l(s){t=A(s,"FORM",{});var d=P(t);l=A(d,"LABEL",{for:!0});var h=P(l);e=G(h,"Column "),a=G(h,o),c=G(h," Sample Name:"),h.forEach(k),g=F(d),m=A(d,"INPUT",{class:!0,id:!0,type:!0}),u=F(d),d.forEach(k),this.h()},h(){E(l,"for","question"),E(m,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white colinput svelte-5rwbji"),E(m,"id","question"),E(m,"type","text")},m(s,d){D(s,t,d),T(t,l),T(l,e),T(l,a),T(l,c),T(t,g),T(t,m),De(m,r[7]),T(t,u),n||(i=pe(m,"input",f),n=!0)},p(s,d){r=s,d&1&&m.value!==r[7]&&De(m,r[7])},d(s){s&&k(t),n=!1,i()}}}function To(r){let t,l,e,o,a,c,g,m,u=r[2],n=[];for(let s=0;s<u.length;s+=1)n[s]=fi(li(r,u,s));let i=r[0].colNames,f=[];for(let s=0;s<i.length;s+=1)f[s]=ui(ii(r,i,s));return{c(){t=I("div"),l=H(`Copy column labels of exiting plate:
	`),e=I("select"),o=I("option");for(let s=0;s<n.length;s+=1)n[s].c();a=U(),c=I("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){t=A(s,"DIV",{class:!0});var d=P(t);l=G(d,`Copy column labels of exiting plate:
	`),e=A(d,"SELECT",{class:!0,name:!0,id:!0});var h=P(e);o=A(h,"OPTION",{});var v=P(o);v.forEach(k);for(let _=0;_<n.length;_+=1)n[_].l(h);h.forEach(k),d.forEach(k),a=F(s),c=A(s,"DIV",{class:!0});var y=P(c);for(let _=0;_<f.length;_+=1)f[_].l(y);y.forEach(k),this.h()},h(){o.__value="none",o.value=o.__value,o.selected=!0,o.disabled=!0,o.hidden=!0,E(e,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"name","plates"),E(e,"id","plates"),r[1]===void 0&&nt(()=>r[4].call(e)),E(t,"class","CopySelect svelte-5rwbji"),E(c,"class","grid 1form:grid-cols-1 2form:grid-cols-2 3form:grid-cols-3 gap-x-8 gap-y-4")},m(s,d){D(s,t,d),T(t,l),T(t,e),T(e,o);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);xn(e,r[1]),D(s,a,d),D(s,c,d);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(c,null);g||(m=[pe(e,"change",r[4]),pe(e,"change",r[5])],g=!0)},p(s,[d]){if(d&4){u=s[2];let h;for(h=0;h<u.length;h+=1){const v=li(s,u,h);n[h]?n[h].p(v,d):(n[h]=fi(v),n[h].c(),n[h].m(e,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=u.length}if(d&6&&xn(e,s[1]),d&1){i=s[0].colNames;let h;for(h=0;h<i.length;h+=1){const v=ii(s,i,h);f[h]?f[h].p(v,d):(f[h]=ui(v),f[h].c(),f[h].m(c,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=i.length}},i:oe,o:oe,d(s){s&&k(t),Pe(n,s),s&&k(a),s&&k(c),Pe(f,s),g=!1,rr(m)}}}function zo(r,t,l){let e;V(r,Oe,n=>l(2,e=n));let{plate:o}=t,a;const c=n=>{const i=e.find(f=>f.name==n).colNames;l(0,o.colNames=[...i],o)};function g(){a=xr(this),l(1,a)}const m=()=>c(a);function u(n,i){n[i]=this.value,l(0,o)}return r.$$set=n=>{"plate"in n&&l(0,o=n.plate)},[o,a,e,c,g,m,u]}class al extends de{constructor(t){super(),me(this,t,zo,To,ge,{plate:0})}}function qo(r){let t;return{c(){t=H("Add Plate")},l(l){t=G(l,"Add Plate")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function Po(r){let t,l,e,o,a,c,g,m,u,n,i,f,s;return a=new Nr({props:{plate:r[0]}}),m=new Nn({props:{type:"secondary",$$slots:{default:[qo]},$$scope:{ctx:r}}}),m.$on("click",r[5]),n=new al({props:{plate:r[0]}}),{c(){t=I("form"),l=H("Plate Name: "),e=I("input"),o=U(),M(a.$$.fragment),c=U(),g=I("div"),M(m.$$.fragment),u=U(),M(n.$$.fragment),this.h()},l(d){t=A(d,"FORM",{class:!0});var h=P(t);l=G(h,"Plate Name: "),e=A(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),o=F(d),$(a.$$.fragment,d),c=F(d),g=A(d,"DIV",{class:!0});var v=P(g);$(m.$$.fragment,v),v.forEach(k),u=F(d),$(n.$$.fragment,d),this.h()},h(){E(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"id","question"),E(e,"type","text"),E(t,"class","NameForm svelte-1vsm84v"),E(g,"class","ButtonContainer svelte-1vsm84v")},m(d,h){D(d,t,h),T(t,l),T(t,e),De(e,r[0].name),D(d,o,h),S(a,d,h),D(d,c,h),D(d,g,h),S(m,g,null),D(d,u,h),S(n,d,h),i=!0,f||(s=pe(e,"input",r[4]),f=!0)},p(d,[h]){h&1&&e.value!==d[0].name&&De(e,d[0].name);const v={};h&1&&(v.plate=d[0]),a.$set(v);const y={};h&128&&(y.$$scope={dirty:h,ctx:d}),m.$set(y);const _={};h&1&&(_.plate=d[0]),n.$set(_)},i(d){i||(C(a.$$.fragment,d),C(m.$$.fragment,d),C(n.$$.fragment,d),i=!0)},o(d){W(a.$$.fragment,d),W(m.$$.fragment,d),W(n.$$.fragment,d),i=!1},d(d){d&&k(t),d&&k(o),j(a,d),d&&k(c),d&&k(g),j(m),d&&k(u),j(n,d),f=!1,s()}}}function Io(r,t,l){let e,o,a;V(r,hr,n=>l(2,o=n)),V(r,Oe,n=>l(3,a=n));let c=et();const g=n=>{Oe.update(i=>{let f=[...i],s=f.find(h=>h.id==n);return s.added=!0,f=[Xn(o+1),...f],f}),hr.update(i=>i+1),c("add")};function m(){e.name=this.value,l(0,e),l(3,a),l(2,o)}const u=()=>g(e.id);return r.$$.update=()=>{r.$$.dirty&12&&l(0,e=a.find(n=>n.id==o))},[e,g,o,a,m,u]}class Ao extends de{constructor(t){super(),me(this,t,Io,Po,ge,{})}}function si(r,t,l){const e=r.slice();return e[11]=t[l],e}function Do(r){let t,l,e,o,a,c=r[2],g=[];for(let m=0;m<c.length;m+=1)g[m]=ci(si(r,c,m));return{c(){t=H(`Plate to edit:
	`),l=I("select"),e=I("option");for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){t=G(m,`Plate to edit:
	`),l=A(m,"SELECT",{class:!0,name:!0,id:!0});var u=P(l);e=A(u,"OPTION",{});var n=P(e);n.forEach(k);for(let i=0;i<g.length;i+=1)g[i].l(u);u.forEach(k),this.h()},h(){e.__value="none",e.value=e.__value,e.selected=!0,e.disabled=!0,e.hidden=!0,E(l,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(l,"name","plates"),E(l,"id","plates"),r[1]===void 0&&nt(()=>r[7].call(l))},m(m,u){D(m,t,u),D(m,l,u),T(l,e);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(l,null);xn(l,r[1]),o||(a=[pe(l,"change",r[7]),pe(l,"change",r[8])],o=!0)},p(m,u){if(u&4){c=m[2];let n;for(n=0;n<c.length;n+=1){const i=si(m,c,n);g[n]?g[n].p(i,u):(g[n]=ci(i),g[n].c(),g[n].m(l,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=c.length}u&6&&xn(l,m[1])},i:oe,o:oe,d(m){m&&k(t),m&&k(l),Pe(g,m),o=!1,rr(a)}}}function Lo(r){let t,l,e,o,a,c,g,m,u,n,i,f,s;return a=new Nr({props:{plate:r[0]}}),m=new Nn({props:{type:"secondary",$$slots:{default:[Co]},$$scope:{ctx:r}}}),m.$on("click",r[6]),n=new al({props:{plate:r[0]}}),{c(){t=I("form"),l=H("Plate Name: "),e=I("input"),o=U(),M(a.$$.fragment),c=U(),g=I("div"),M(m.$$.fragment),u=U(),M(n.$$.fragment),this.h()},l(d){t=A(d,"FORM",{class:!0});var h=P(t);l=G(h,"Plate Name: "),e=A(h,"INPUT",{class:!0,id:!0,type:!0}),h.forEach(k),o=F(d),$(a.$$.fragment,d),c=F(d),g=A(d,"DIV",{class:!0});var v=P(g);$(m.$$.fragment,v),v.forEach(k),u=F(d),$(n.$$.fragment,d),this.h()},h(){E(e,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(e,"id","question"),E(e,"type","text"),E(t,"class","NameForm svelte-1hrsnk0"),E(g,"class","ButtonContainer svelte-1hrsnk0")},m(d,h){D(d,t,h),T(t,l),T(t,e),De(e,r[0].name),D(d,o,h),S(a,d,h),D(d,c,h),D(d,g,h),S(m,g,null),D(d,u,h),S(n,d,h),i=!0,f||(s=pe(e,"input",r[5]),f=!0)},p(d,h){h&1&&e.value!==d[0].name&&De(e,d[0].name);const v={};h&1&&(v.plate=d[0]),a.$set(v);const y={};h&16384&&(y.$$scope={dirty:h,ctx:d}),m.$set(y);const _={};h&1&&(_.plate=d[0]),n.$set(_)},i(d){i||(C(a.$$.fragment,d),C(m.$$.fragment,d),C(n.$$.fragment,d),i=!0)},o(d){W(a.$$.fragment,d),W(m.$$.fragment,d),W(n.$$.fragment,d),i=!1},d(d){d&&k(t),d&&k(o),j(a,d),d&&k(c),d&&k(g),j(m),d&&k(u),j(n,d),f=!1,s()}}}function ai(r){let t,l=r[11].name+"",e,o;return{c(){t=I("option"),e=H(l),this.h()},l(a){t=A(a,"OPTION",{});var c=P(t);e=G(c,l),c.forEach(k),this.h()},h(){t.__value=o=r[11].name,t.value=t.__value},m(a,c){D(a,t,c),T(t,e)},p(a,c){c&4&&l!==(l=a[11].name+"")&&Ne(e,l),c&4&&o!==(o=a[11].name)&&(t.__value=o,t.value=t.__value)},d(a){a&&k(t)}}}function ci(r){let t,l=r[11].added===!0&&ai(r);return{c(){l&&l.c(),t=_e()},l(e){l&&l.l(e),t=_e()},m(e,o){l&&l.m(e,o),D(e,t,o)},p(e,o){e[11].added===!0?l?l.p(e,o):(l=ai(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&k(t)}}}function Co(r){let t;return{c(){t=H("Update Plate")},l(l){t=G(l,"Update Plate")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function Oo(r){let t,l,e,o;const a=[Lo,Do],c=[];function g(m,u){return m[0]!=null?0:1}return t=g(r),l=c[t]=a[t](r),{c(){l.c(),e=_e()},l(m){l.l(m),e=_e()},m(m,u){c[t].m(m,u),D(m,e,u),o=!0},p(m,[u]){let n=t;t=g(m),t===n?c[t].p(m,u):(Re(),W(c[n],1,1,()=>{c[n]=null}),Te(),l=c[t],l?l.p(m,u):(l=c[t]=a[t](m),l.c()),C(l,1),l.m(e.parentNode,e))},i(m){o||(C(l),o=!0)},o(m){W(l),o=!1},d(m){c[t].d(m),m&&k(e)}}}function Vo(r,t,l){let e,o;V(r,Oe,d=>l(2,e=d)),V(r,en,d=>l(9,o=d));let a=et(),{plate:c=e.find(d=>d.id==o)}=t,g;c!=null&&(c.added=!1);const m=d=>{l(0,c=e.find(h=>h.name==d)),l(0,c.added=!1,c),en.set(c.id)},u=d=>{l(0,c.added=!0,c),en.set(-1),a("add")};function n(){c.name=this.value,l(0,c)}const i=()=>u(c.name);function f(){g=xr(this),l(1,g)}const s=()=>m(g);return r.$$set=d=>{"plate"in d&&l(0,c=d.plate)},[c,g,e,m,u,n,i,f,s]}class Wo extends de{constructor(t){super(),me(this,t,Vo,Oo,ge,{plate:0})}}const Ho=(r,t,l)=>{let e=8,o=[];return r.forEach(a=>{let c=Array(e).fill(0),g=0;for(var m=0;m<c.length;m++)c[m]=g+a.maxWell.filter(v=>v<m).length,g=c[m];let u=Array(e).fill(0);g=0;for(var m=u.length-1;m>=0;m--)u[m]=g+a.maxWell.filter(y=>y>=m).length,g=u[m];let n=Array(e).fill(0);for(var m=0;m<n.length;m++)n[m]=100*u[m]/(u[m]+c[m]);let i,f,s;for(var m=0;m<n.length;m++)if(n[m]<50){i=n[m-1],f=n[m],s=m-1;break}let d=(i-50)/(i-f),h=l**(s+d)/t;isNaN(h)&&(h=0),o=[{sample:a.name,nrep:a.maxWell.length,titer:h},...o]}),o};var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function*cl(r,t,l=0,e=2*Number.EPSILON){const o=(3-Math.sqrt(5))/2;let a=r+o*(t-r),c=a,g=c,m=0,u=yield a,n=u,i=n,f,s;for(;;){const d=.5*(r+t),h=e*Math.abs(a)+l,v=2*h;if(Math.abs(a-d)<=v-.5*(t-r))return{x:a,fx:u};let y=0,_=y,p=_;Math.abs(m)>h&&(y=(a-c)*(u-i),_=(a-g)*(u-n),p=(a-g)*_-(a-c)*y,_=2*(_-y),_>0?p=-p:_=-_,y=m,m=f),Math.abs(p)<Math.abs(.5*_*y)&&p>_*(r-a)&&p<_*(t-a)?(f=p/_,s=a+f,(s-r<v||t-s<v)&&(f=a<d?h:-h)):(m=(a<d?t:r)-a,f=o*m),s=a+(Math.abs(f)>=h?f:f>0?h:-h);const b=yield s;b<=u?(s<a?t=a:r=a,g=c,i=n,c=a,n=u,a=s,u=b):(s<a?r=s:t=s,b<=n||c==a?(g=c,i=n,c=s,n=b):(b<=i||g==a||g==c)&&(g=s,i=b))}}function Bo(r,t,l,e=0,o=Number.EPSILON){const a=cl(t,l,e,o);let c=a.next();for(;!c.done;){const g=c.value,m=r(g);c=a.next(m)}return c.value}var Uo={local_min_generator:cl,local_min:Bo},vr={},Fo={get exports(){return vr},set exports(r){vr=r}};(function(r,t){(function(l,e){r.exports=e()})(Go,function(){var l=function(e,o){var a=Array.prototype.concat,c=Array.prototype.slice,g=Object.prototype.toString;function m(_,p){var b=_>p?_:p;return e.pow(10,17-~~(e.log(b>0?b:-b)*e.LOG10E))}var u=Array.isArray||function(p){return g.call(p)==="[object Array]"};function n(_){return g.call(_)==="[object Function]"}function i(_){return typeof _=="number"?_-_===0:!1}function f(_){return a.apply([],_)}function s(){return new s._init(arguments)}s.fn=s.prototype,s._init=function(p){if(u(p[0]))if(u(p[0][0])){n(p[1])&&(p[0]=s.map(p[0],p[1]));for(var b=0;b<p[0].length;b++)this[b]=p[0][b];this.length=p[0].length}else this[0]=n(p[1])?s.map(p[0],p[1]):p[0],this.length=1;else if(i(p[0]))this[0]=s.seq.apply(null,p),this.length=1;else{if(p[0]instanceof s)return s(p[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:m,isArray:u,isFunction:n,isNumber:i,toVector:f},s._random_fn=e.random,s.setRandom=function(p){if(typeof p!="function")throw new TypeError("fn is not a function");s._random_fn=p},s.extend=function(p){var b,w;if(arguments.length===1){for(w in p)s[w]=p[w];return this}for(b=1;b<arguments.length;b++)for(w in arguments[b])p[w]=arguments[b][w];return p},s.rows=function(p){return p.length||1},s.cols=function(p){return p[0].length||1},s.dimensions=function(p){return{rows:s.rows(p),cols:s.cols(p)}},s.row=function(p,b){return u(b)?b.map(function(w){return s.row(p,w)}):p[b]},s.rowa=function(p,b){return s.row(p,b)},s.col=function(p,b){if(u(b)){var w=s.arange(p.length).map(function(){return new Array(b.length)});return b.forEach(function(z,O){s.arange(p.length).forEach(function(L){w[L][O]=p[L][z]})}),w}for(var N=new Array(p.length),R=0;R<p.length;R++)N[R]=[p[R][b]];return N},s.cola=function(p,b){return s.col(p,b).map(function(w){return w[0]})},s.diag=function(p){for(var b=s.rows(p),w=new Array(b),N=0;N<b;N++)w[N]=[p[N][N]];return w},s.antidiag=function(p){for(var b=s.rows(p)-1,w=new Array(b),N=0;b>=0;b--,N++)w[N]=[p[N][b]];return w},s.transpose=function(p){var b=[],w,N,R,z,O;for(u(p[0])||(p=[p]),N=p.length,R=p[0].length,O=0;O<R;O++){for(w=new Array(N),z=0;z<N;z++)w[z]=p[z][O];b.push(w)}return b.length===1?b[0]:b},s.map=function(p,b,w){var N,R,z,O,L;for(u(p[0])||(p=[p]),R=p.length,z=p[0].length,O=w?p:new Array(R),N=0;N<R;N++)for(O[N]||(O[N]=new Array(z)),L=0;L<z;L++)O[N][L]=b(p[N][L],N,L);return O.length===1?O[0]:O},s.cumreduce=function(p,b,w){var N,R,z,O,L;for(u(p[0])||(p=[p]),R=p.length,z=p[0].length,O=w?p:new Array(R),N=0;N<R;N++)for(O[N]||(O[N]=new Array(z)),z>0&&(O[N][0]=p[N][0]),L=1;L<z;L++)O[N][L]=b(O[N][L-1],p[N][L]);return O.length===1?O[0]:O},s.alter=function(p,b){return s.map(p,b,!0)},s.create=function(p,b,w){var N=new Array(p),R,z;for(n(b)&&(w=b,b=p),R=0;R<p;R++)for(N[R]=new Array(b),z=0;z<b;z++)N[R][z]=w(R,z);return N};function d(){return 0}s.zeros=function(p,b){return i(b)||(b=p),s.create(p,b,d)};function h(){return 1}s.ones=function(p,b){return i(b)||(b=p),s.create(p,b,h)},s.rand=function(p,b){return i(b)||(b=p),s.create(p,b,s._random_fn)};function v(_,p){return _===p?1:0}s.identity=function(p,b){return i(b)||(b=p),s.create(p,b,v)},s.symmetric=function(p){var b=p.length,w,N;if(p.length!==p[0].length)return!1;for(w=0;w<b;w++)for(N=0;N<b;N++)if(p[N][w]!==p[w][N])return!1;return!0},s.clear=function(p){return s.alter(p,d)},s.seq=function(p,b,w,N){n(N)||(N=!1);var R=[],z=m(p,b),O=(b*z-p*z)/((w-1)*z),L=p,q;for(q=0;L<=b&&q<w;q++,L=(p*z+O*z*q)/z)R.push(N?N(L,q):L);return R},s.arange=function(p,b,w){var N=[],R;if(w=w||1,b===o&&(b=p,p=0),p===b||w===0)return[];if(p<b&&w<0)return[];if(p>b&&w>0)return[];if(w>0)for(R=p;R<b;R+=w)N.push(R);else for(R=p;R>b;R+=w)N.push(R);return N},s.slice=function(){function _(b,w,N,R){var z,O=[],L=b.length;if(w===o&&N===o&&R===o)return s.copy(b);if(w=w||0,N=N||b.length,w=w>=0?w:L+w,N=N>=0?N:L+N,R=R||1,w===N||R===0)return[];if(w<N&&R<0)return[];if(w>N&&R>0)return[];if(R>0)for(z=w;z<N;z+=R)O.push(b[z]);else for(z=w;z>N;z+=R)O.push(b[z]);return O}function p(b,w){var N,R;if(w=w||{},i(w.row)){if(i(w.col))return b[w.row][w.col];var z=s.rowa(b,w.row);return N=w.col||{},_(z,N.start,N.end,N.step)}if(i(w.col)){var O=s.cola(b,w.col);return R=w.row||{},_(O,R.start,R.end,R.step)}R=w.row||{},N=w.col||{};var L=_(b,R.start,R.end,R.step);return L.map(function(q){return _(q,N.start,N.end,N.step)})}return p}(),s.sliceAssign=function(p,b,w){var N,R;if(i(b.row)){if(i(b.col))return p[b.row][b.col]=w;b.col=b.col||{},b.col.start=b.col.start||0,b.col.end=b.col.end||p[0].length,b.col.step=b.col.step||1,N=s.arange(b.col.start,e.min(p.length,b.col.end),b.col.step);var z=b.row;return N.forEach(function(L,q){p[z][L]=w[q]}),p}if(i(b.col)){b.row=b.row||{},b.row.start=b.row.start||0,b.row.end=b.row.end||p.length,b.row.step=b.row.step||1,R=s.arange(b.row.start,e.min(p[0].length,b.row.end),b.row.step);var O=b.col;return R.forEach(function(L,q){p[L][O]=w[q]}),p}return w[0].length===o&&(w=[w]),b.row.start=b.row.start||0,b.row.end=b.row.end||p.length,b.row.step=b.row.step||1,b.col.start=b.col.start||0,b.col.end=b.col.end||p[0].length,b.col.step=b.col.step||1,R=s.arange(b.row.start,e.min(p.length,b.row.end),b.row.step),N=s.arange(b.col.start,e.min(p[0].length,b.col.end),b.col.step),R.forEach(function(L,q){N.forEach(function(K,B){p[L][K]=w[q][B]})}),p},s.diagonal=function(p){var b=s.zeros(p.length,p.length);return p.forEach(function(w,N){b[N][N]=w}),b},s.copy=function(p){return p.map(function(b){return i(b)?b:b.map(function(w){return w})})};var y=s.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?c.call(this):c.call(this)[0]},y.map=function(p,b){return s(s.map(this,p,b))},y.cumreduce=function(p,b){return s(s.cumreduce(this,p,b))},y.alter=function(p){return s.alter(this,p),this},function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(w){var N=this,R;return w?(setTimeout(function(){w.call(N,y[b].call(N))}),this):(R=s[b](this),u(R)?s(R):R)}})(_[p])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(w,N){var R=this;return N?(setTimeout(function(){N.call(R,y[b].call(R,w))}),this):s(s[b](this,w))}})(_[p])}("row col".split(" ")),function(_){for(var p=0;p<_.length;p++)(function(b){y[b]=function(){return s(s[b].apply(null,arguments))}})(_[p])}("create zeros ones rand identity".split(" ")),s}(Math);return function(e,o){var a=e.utils.isFunction;function c(u,n){return u-n}function g(u,n,i){return o.max(n,o.min(u,i))}e.sum=function(n){for(var i=0,f=n.length;--f>=0;)i+=n[f];return i},e.sumsqrd=function(n){for(var i=0,f=n.length;--f>=0;)i+=n[f]*n[f];return i},e.sumsqerr=function(n){for(var i=e.mean(n),f=0,s=n.length,d;--s>=0;)d=n[s]-i,f+=d*d;return f},e.sumrow=function(n){for(var i=0,f=n.length;--f>=0;)i+=n[f];return i},e.product=function(n){for(var i=1,f=n.length;--f>=0;)i*=n[f];return i},e.min=function(n){for(var i=n[0],f=0;++f<n.length;)n[f]<i&&(i=n[f]);return i},e.max=function(n){for(var i=n[0],f=0;++f<n.length;)n[f]>i&&(i=n[f]);return i},e.unique=function(n){for(var i={},f=[],s=0;s<n.length;s++)i[n[s]]||(i[n[s]]=!0,f.push(n[s]));return f},e.mean=function(n){return e.sum(n)/n.length},e.meansqerr=function(n){return e.sumsqerr(n)/n.length},e.geomean=function(n){var i=n.map(o.log),f=e.mean(i);return o.exp(f)},e.median=function(n){var i=n.length,f=n.slice().sort(c);return i&1?f[i/2|0]:(f[i/2-1]+f[i/2])/2},e.cumsum=function(n){return e.cumreduce(n,function(i,f){return i+f})},e.cumprod=function(n){return e.cumreduce(n,function(i,f){return i*f})},e.diff=function(n){var i=[],f=n.length,s;for(s=1;s<f;s++)i.push(n[s]-n[s-1]);return i},e.rank=function(u){var n,i=[],f={};for(n=0;n<u.length;n++){var s=u[n];f[s]?f[s]++:(f[s]=1,i.push(s))}var d=i.sort(c),h={},v=1;for(n=0;n<d.length;n++){var s=d[n],y=f[s],_=v,p=v+y-1,b=(_+p)/2;h[s]=b,v+=y}return u.map(function(w){return h[w]})},e.mode=function(n){var i=n.length,f=n.slice().sort(c),s=1,d=0,h=0,v=[],y;for(y=0;y<i;y++)f[y]===f[y+1]?s++:(s>d?(v=[f[y]],d=s,h=0):s===d&&(v.push(f[y]),h++),s=1);return h===0?v[0]:v},e.range=function(n){return e.max(n)-e.min(n)},e.variance=function(n,i){return e.sumsqerr(n)/(n.length-(i?1:0))},e.pooledvariance=function(n){var i=n.reduce(function(s,d){return s+e.sumsqerr(d)},0),f=n.reduce(function(s,d){return s+d.length},0);return i/(f-n.length)},e.deviation=function(u){for(var n=e.mean(u),i=u.length,f=new Array(i),s=0;s<i;s++)f[s]=u[s]-n;return f},e.stdev=function(n,i){return o.sqrt(e.variance(n,i))},e.pooledstdev=function(n){return o.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var i=e.mean(n),f=[],s=n.length-1;s>=0;s--)f.push(o.abs(n[s]-i));return e.mean(f)},e.meddev=function(n){for(var i=e.median(n),f=[],s=n.length-1;s>=0;s--)f.push(o.abs(n[s]-i));return e.median(f)},e.coeffvar=function(n){return e.stdev(n)/e.mean(n)},e.quartiles=function(n){var i=n.length,f=n.slice().sort(c);return[f[o.round(i/4)-1],f[o.round(i/2)-1],f[o.round(i*3/4)-1]]},e.quantiles=function(n,i,f,s){var d=n.slice().sort(c),h=[i.length],v=n.length,y,_,p,b,w,N;for(typeof f>"u"&&(f=3/8),typeof s>"u"&&(s=3/8),y=0;y<i.length;y++)_=i[y],p=f+_*(1-f-s),b=v*_+p,w=o.floor(g(b,1,v-1)),N=g(b-w,0,1),h[y]=(1-N)*d[w-1]+N*d[w];return h},e.percentile=function(n,i,f){var s=n.slice().sort(c),d=i*(s.length+(f?1:-1))+(f?0:1),h=parseInt(d),v=d-h;return h+1<s.length?s[h-1]+v*(s[h]-s[h-1]):s[h-1]},e.percentileOfScore=function(n,i,f){var s=0,d=n.length,h=!1,v,y;for(f==="strict"&&(h=!0),y=0;y<d;y++)v=n[y],(h&&v<i||!h&&v<=i)&&s++;return s/d},e.histogram=function(n,i){i=i||4;var f=e.min(n),s=(e.max(n)-f)/i,d=n.length,h=[],v;for(v=0;v<i;v++)h[v]=0;for(v=0;v<d;v++)h[o.min(o.floor((n[v]-f)/s),i-1)]+=1;return h},e.covariance=function(n,i){var f=e.mean(n),s=e.mean(i),d=n.length,h=new Array(d),v;for(v=0;v<d;v++)h[v]=(n[v]-f)*(i[v]-s);return e.sum(h)/(d-1)},e.corrcoeff=function(n,i){return e.covariance(n,i)/e.stdev(n,1)/e.stdev(i,1)},e.spearmancoeff=function(u,n){return u=e.rank(u),n=e.rank(n),e.corrcoeff(u,n)},e.stanMoment=function(n,i){for(var f=e.mean(n),s=e.stdev(n),d=n.length,h=0,v=0;v<d;v++)h+=o.pow((n[v]-f)/s,i);return h/n.length},e.skewness=function(n){return e.stanMoment(n,3)},e.kurtosis=function(n){return e.stanMoment(n,4)-3};var m=e.prototype;(function(u){for(var n=0;n<u.length;n++)(function(i){m[i]=function(f,s){var d=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[i].call(v,f))}),this;if(this.length>1){for(v=f===!0?this:this.transpose();h<v.length;h++)d[h]=e[i](v[h]);return d}return e[i](this[0],f)}})(u[n])})("cumsum cumprod".split(" ")),function(u){for(var n=0;n<u.length;n++)(function(i){m[i]=function(f,s){var d=[],h=0,v=this;if(a(f)&&(s=f,f=!1),s)return setTimeout(function(){s.call(v,m[i].call(v,f))}),this;if(this.length>1){for(i!=="sumrow"&&(v=f===!0?this:this.transpose());h<v.length;h++)d[h]=e[i](v[h]);return f===!0?e[i](e.utils.toVector(d)):d}return e[i](this[0],f)}})(u[n])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(u){for(var n=0;n<u.length;n++)(function(i){m[i]=function(){var f=[],s=0,d=this,h=Array.prototype.slice.call(arguments),v;if(a(h[h.length-1])){v=h[h.length-1];var y=h.slice(0,h.length-1);return setTimeout(function(){v.call(d,m[i].apply(d,y))}),this}else{v=void 0;var _=function(b){return e[i].apply(d,[b].concat(h))}}if(this.length>1){for(d=d.transpose();s<d.length;s++)f[s]=_(d[s]);return f}return _(this[0])}})(u[n])}("quantiles percentileOfScore".split(" "))}(l,Math),function(e,o){e.gammaln=function(c){var g=0,m=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,n,i,f;for(f=(i=n=c)+5.5,f-=(n+.5)*o.log(f);g<6;g++)u+=m[g]/++i;return o.log(2.5066282746310007*u/n)-f},e.loggam=function(c){var g,m,u,n,i,f,s,d=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(g=c,s=0,c==1||c==2)return 0;for(c<=7&&(s=o.floor(7-c),g=c+s),m=1/(g*g),u=2*o.PI,i=d[9],f=8;f>=0;f--)i*=m,i+=d[f];if(n=i/g+.5*o.log(u)+(g-.5)*o.log(g)-g,c<=7)for(f=1;f<=s;f++)n-=o.log(g-1),g-=1;return n},e.gammafn=function(c){var g=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],m=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,n=0,i=0,f=0,s=c,d,h,v,y;if(c>171.6243769536076)return 1/0;if(s<=0)if(y=s%1+36e-17,y)u=(s&1?-1:1)*o.PI/o.sin(o.PI*y),s=1-s;else return 1/0;for(v=s,s<1?h=s++:h=(s-=n=(s|0)-1)-1,d=0;d<8;++d)f=(f+g[d])*h,i=i*h+m[d];if(y=f/i+1,v<s)y/=v;else if(v>s)for(d=0;d<n;++d)y*=s,s++;return u&&(y=u/y),y},e.gammap=function(c,g){return e.lowRegGamma(c,g)*e.gammafn(c)},e.lowRegGamma=function(c,g){var m=e.gammaln(c),u=c,n=1/c,i=n,f=g+1-c,s=1/1e-30,d=1/f,h=d,v=1,y=-~(o.log(c>=1?c:1/c)*8.5+c*.4+17),_;if(g<0||c<=0)return NaN;if(g<c+1){for(;v<=y;v++)n+=i*=g/++u;return n*o.exp(-g+c*o.log(g)-m)}for(;v<=y;v++)_=-v*(v-c),f+=2,d=_*d+f,s=f+_/s,d=1/d,h*=d*s;return 1-h*o.exp(-g+c*o.log(g)-m)},e.factorialln=function(c){return c<0?NaN:e.gammaln(c+1)},e.factorial=function(c){return c<0?NaN:e.gammafn(c+1)},e.combination=function(c,g){return c>170||g>170?o.exp(e.combinationln(c,g)):e.factorial(c)/e.factorial(g)/e.factorial(c-g)},e.combinationln=function(c,g){return e.factorialln(c)-e.factorialln(g)-e.factorialln(c-g)},e.permutation=function(c,g){return e.factorial(c)/e.factorial(c-g)},e.betafn=function(c,g){if(!(c<=0||g<=0))return c+g>170?o.exp(e.betaln(c,g)):e.gammafn(c)*e.gammafn(g)/e.gammafn(c+g)},e.betaln=function(c,g){return e.gammaln(c)+e.gammaln(g)-e.gammaln(c+g)},e.betacf=function(c,g,m){var u=1e-30,n=1,i=g+m,f=g+1,s=g-1,d=1,h=1-i*c/f,v,y,_,p;for(o.abs(h)<u&&(h=u),h=1/h,p=h;n<=100&&(v=2*n,y=n*(m-n)*c/((s+v)*(g+v)),h=1+y*h,o.abs(h)<u&&(h=u),d=1+y/d,o.abs(d)<u&&(d=u),h=1/h,p*=h*d,y=-(g+n)*(i+n)*c/((g+v)*(f+v)),h=1+y*h,o.abs(h)<u&&(h=u),d=1+y/d,o.abs(d)<u&&(d=u),h=1/h,_=h*d,p*=_,!(o.abs(_-1)<3e-7));n++);return p},e.gammapinv=function(c,g){var m=0,u=g-1,n=1e-8,i=e.gammaln(g),f,s,d,h,v,y,_;if(c>=1)return o.max(100,g+100*o.sqrt(g));if(c<=0)return 0;for(g>1?(y=o.log(u),_=o.exp(u*(y-1)-i),v=c<.5?c:1-c,d=o.sqrt(-2*o.log(v)),f=(2.30753+d*.27061)/(1+d*(.99229+d*.04481))-d,c<.5&&(f=-f),f=o.max(.001,g*o.pow(1-1/(9*g)-f/(3*o.sqrt(g)),3))):(d=1-g*(.253+g*.12),c<d?f=o.pow(c/d,1/g):f=1-o.log(1-(c-d)/(1-d)));m<12;m++){if(f<=0)return 0;if(s=e.lowRegGamma(g,f)-c,g>1?d=_*o.exp(-(f-u)+u*(o.log(f)-y)):d=o.exp(-f+u*o.log(f)-i),h=s/d,f-=d=h/(1-.5*o.min(1,h*((g-1)/f-1))),f<=0&&(f=.5*(f+d)),o.abs(d)<n*f)break}return f},e.erf=function(c){var g=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],m=g.length-1,u=!1,n=0,i=0,f,s,d,h;for(c<0&&(c=-c,u=!0),f=2/(2+c),s=4*f-2;m>0;m--)d=n,n=s*n-i+g[m],i=d;return h=f*o.exp(-c*c+.5*(g[0]+s*n)-i),u?h-1:1-h},e.erfc=function(c){return 1-e.erf(c)},e.erfcinv=function(c){var g=0,m,u,n,i;if(c>=2)return-100;if(c<=0)return 100;for(i=c<1?c:2-c,n=o.sqrt(-2*o.log(i/2)),m=-.70711*((2.30753+n*.27061)/(1+n*(.99229+n*.04481))-n);g<2;g++)u=e.erfc(m)-i,m+=u/(1.1283791670955126*o.exp(-m*m)-m*u);return c<1?m:-m},e.ibetainv=function(c,g,m){var u=1e-8,n=g-1,i=m-1,f=0,s,d,h,v,y,_,p,b,w,N,R;if(c<=0)return 0;if(c>=1)return 1;for(g>=1&&m>=1?(h=c<.5?c:1-c,v=o.sqrt(-2*o.log(h)),p=(2.30753+v*.27061)/(1+v*(.99229+v*.04481))-v,c<.5&&(p=-p),b=(p*p-3)/6,w=2/(1/(2*g-1)+1/(2*m-1)),N=p*o.sqrt(b+w)/w-(1/(2*m-1)-1/(2*g-1))*(b+5/6-2/(3*w)),p=g/(g+m*o.exp(2*N))):(s=o.log(g/(g+m)),d=o.log(m/(g+m)),v=o.exp(g*s)/g,y=o.exp(m*d)/m,N=v+y,c<v/N?p=o.pow(g*N*c,1/g):p=1-o.pow(m*N*(1-c),1/m)),R=-e.gammaln(g)-e.gammaln(m)+e.gammaln(g+m);f<10;f++){if(p===0||p===1)return p;if(_=e.ibeta(p,g,m)-c,v=o.exp(n*o.log(p)+i*o.log(1-p)+R),y=_/v,p-=v=y/(1-.5*o.min(1,y*(n/p-i/(1-p)))),p<=0&&(p=.5*(p+v)),p>=1&&(p=.5*(p+v+1)),o.abs(v)<u*p&&f>0)break}return p},e.ibeta=function(c,g,m){var u=c===0||c===1?0:o.exp(e.gammaln(g+m)-e.gammaln(g)-e.gammaln(m)+g*o.log(c)+m*o.log(1-c));return c<0||c>1?!1:c<(g+1)/(g+m+2)?u*e.betacf(c,g,m)/g:1-u*e.betacf(1-c,m,g)/m},e.randn=function(c,g){var m,u,n,i,f;if(g||(g=c),c)return e.create(c,g,function(){return e.randn()});do m=e._random_fn(),u=1.7156*(e._random_fn()-.5),n=m-.449871,i=o.abs(u)+.386595,f=n*n+i*(.196*i-.25472*n);while(f>.27597&&(f>.27846||u*u>-4*o.log(m)*m*m));return u/m},e.randg=function(c,g,m){var u=c,n,i,f,s,d,h;if(m||(m=g),c||(c=1),g)return h=e.zeros(g,m),h.alter(function(){return e.randg(c)}),h;c<1&&(c+=1),n=c-1/3,i=1/o.sqrt(9*n);do{do d=e.randn(),s=1+i*d;while(s<=0);s=s*s*s,f=e._random_fn()}while(f>1-.331*o.pow(d,4)&&o.log(f)>.5*d*d+n*(1-s+o.log(s)));if(c==u)return n*s;do f=e._random_fn();while(f===0);return o.pow(f,1/u)*n*s},function(a){for(var c=0;c<a.length;c++)(function(g){e.fn[g]=function(){return e(e.map(this,function(m){return e[g](m)}))}})(a[c])}("gammaln gammafn factorial factorialln".split(" ")),function(a){for(var c=0;c<a.length;c++)(function(g){e.fn[g]=function(){return e(e[g].apply(null,arguments))}})(a[c])}("randn".split(" "))}(l,Math),function(e,o){(function(u){for(var n=0;n<u.length;n++)(function(i){e[i]=function f(s,d,h){return this instanceof f?(this._a=s,this._b=d,this._c=h,this):new f(s,d,h)},e.fn[i]=function(f,s,d){var h=e[i](f,s,d);return h.data=this,h},e[i].prototype.sample=function(f){var s=this._a,d=this._b,h=this._c;return f?e.alter(f,function(){return e[i].sample(s,d,h)}):e[i].sample(s,d,h)},function(f){for(var s=0;s<f.length;s++)(function(d){e[i].prototype[d]=function(h){var v=this._a,y=this._b,_=this._c;return!h&&h!==0&&(h=this.data),typeof h!="number"?e.fn.map.call(h,function(p){return e[i][d](p,v,y,_)}):e[i][d](h,v,y,_)}})(f[s])}("pdf cdf inv".split(" ")),function(f){for(var s=0;s<f.length;s++)(function(d){e[i].prototype[d]=function(){return e[i][d](this._a,this._b,this._c)}})(f[s])}("mean median mode variance".split(" "))})(u[n])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,i,f){return n>1||n<0?0:i==1&&f==1?1:i<512&&f<512?o.pow(n,i-1)*o.pow(1-n,f-1)/e.betafn(i,f):o.exp((i-1)*o.log(n)+(f-1)*o.log(1-n)-e.betaln(i,f))},cdf:function(n,i,f){return n>1||n<0?(n>1)*1:e.ibeta(n,i,f)},inv:function(n,i,f){return e.ibetainv(n,i,f)},mean:function(n,i){return n/(n+i)},median:function(n,i){return e.ibetainv(.5,n,i)},mode:function(n,i){return(n-1)/(n+i-2)},sample:function(n,i){var f=e.randg(n);return f/(f+e.randg(i))},variance:function(n,i){return n*i/(o.pow(n+i,2)*(n+i+1))}}),e.extend(e.centralF,{pdf:function(n,i,f){var s,d,h;return n<0?0:i<=2?n===0&&i<2?1/0:n===0&&i===2?1:1/e.betafn(i/2,f/2)*o.pow(i/f,i/2)*o.pow(n,i/2-1)*o.pow(1+i/f*n,-(i+f)/2):(s=i*n/(f+n*i),d=f/(f+n*i),h=i*d/2,h*e.binomial.pdf((i-2)/2,(i+f-2)/2,s))},cdf:function(n,i,f){return n<0?0:e.ibeta(i*n/(i*n+f),i/2,f/2)},inv:function(n,i,f){return f/(i*(1/e.ibetainv(n,i/2,f/2)-1))},mean:function(n,i){return i>2?i/(i-2):void 0},mode:function(n,i){return n>2?i*(n-2)/(n*(i+2)):void 0},sample:function(n,i){var f=e.randg(n/2)*2,s=e.randg(i/2)*2;return f/n/(s/i)},variance:function(n,i){if(!(i<=4))return 2*i*i*(n+i-2)/(n*(i-2)*(i-2)*(i-4))}}),e.extend(e.cauchy,{pdf:function(n,i,f){return f<0?0:f/(o.pow(n-i,2)+o.pow(f,2))/o.PI},cdf:function(n,i,f){return o.atan((n-i)/f)/o.PI+.5},inv:function(u,n,i){return n+i*o.tan(o.PI*(u-.5))},median:function(n){return n},mode:function(n){return n},sample:function(n,i){return e.randn()*o.sqrt(1/(2*e.randg(.5)))*i+n}}),e.extend(e.chisquare,{pdf:function(n,i){return n<0?0:n===0&&i===2?.5:o.exp((i/2-1)*o.log(n)-n/2-i/2*o.log(2)-e.gammaln(i/2))},cdf:function(n,i){return n<0?0:e.lowRegGamma(i/2,n/2)},inv:function(u,n){return 2*e.gammapinv(u,.5*n)},mean:function(u){return u},median:function(n){return n*o.pow(1-2/(9*n),3)},mode:function(n){return n-2>0?n-2:0},sample:function(n){return e.randg(n/2)*2},variance:function(n){return 2*n}}),e.extend(e.exponential,{pdf:function(n,i){return n<0?0:i*o.exp(-i*n)},cdf:function(n,i){return n<0?0:1-o.exp(-i*n)},inv:function(u,n){return-o.log(1-u)/n},mean:function(u){return 1/u},median:function(u){return 1/u*o.log(2)},mode:function(){return 0},sample:function(n){return-1/n*o.log(e._random_fn())},variance:function(u){return o.pow(u,-2)}}),e.extend(e.gamma,{pdf:function(n,i,f){return n<0?0:n===0&&i===1?1/f:o.exp((i-1)*o.log(n)-n/f-e.gammaln(i)-i*o.log(f))},cdf:function(n,i,f){return n<0?0:e.lowRegGamma(i,n/f)},inv:function(u,n,i){return e.gammapinv(u,n)*i},mean:function(u,n){return u*n},mode:function(n,i){if(n>1)return(n-1)*i},sample:function(n,i){return e.randg(n)*i},variance:function(n,i){return n*i*i}}),e.extend(e.invgamma,{pdf:function(n,i,f){return n<=0?0:o.exp(-(i+1)*o.log(n)-f/n-e.gammaln(i)+i*o.log(f))},cdf:function(n,i,f){return n<=0?0:1-e.lowRegGamma(i,f/n)},inv:function(u,n,i){return i/e.gammapinv(1-u,n)},mean:function(u,n){return u>1?n/(u-1):void 0},mode:function(n,i){return i/(n+1)},sample:function(n,i){return i/e.randg(n)},variance:function(n,i){if(!(n<=2))return i*i/((n-1)*(n-1)*(n-2))}}),e.extend(e.kumaraswamy,{pdf:function(n,i,f){return n===0&&i===1?f:n===1&&f===1?i:o.exp(o.log(i)+o.log(f)+(i-1)*o.log(n)+(f-1)*o.log(1-o.pow(n,i)))},cdf:function(n,i,f){return n<0?0:n>1?1:1-o.pow(1-o.pow(n,i),f)},inv:function(n,i,f){return o.pow(1-o.pow(1-n,1/f),1/i)},mean:function(u,n){return n*e.gammafn(1+1/u)*e.gammafn(n)/e.gammafn(1+1/u+n)},median:function(n,i){return o.pow(1-o.pow(2,-1/i),1/n)},mode:function(n,i){if(n>=1&&i>=1&&n!==1&&i!==1)return o.pow((n-1)/(n*i-1),1/n)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(n,i,f){return n<=0?0:o.exp(-o.log(n)-.5*o.log(2*o.PI)-o.log(f)-o.pow(o.log(n)-i,2)/(2*f*f))},cdf:function(n,i,f){return n<0?0:.5+.5*e.erf((o.log(n)-i)/o.sqrt(2*f*f))},inv:function(u,n,i){return o.exp(-1.4142135623730951*i*e.erfcinv(2*u)+n)},mean:function(n,i){return o.exp(n+i*i/2)},median:function(n){return o.exp(n)},mode:function(n,i){return o.exp(n-i*i)},sample:function(n,i){return o.exp(e.randn()*i+n)},variance:function(n,i){return(o.exp(i*i)-1)*o.exp(2*n+i*i)}}),e.extend(e.noncentralt,{pdf:function(n,i,f){var s=1e-14;return o.abs(f)<s?e.studentt.pdf(n,i):o.abs(n)<s?o.exp(e.gammaln((i+1)/2)-f*f/2-.5*o.log(o.PI*i)-e.gammaln(i/2)):i/n*(e.noncentralt.cdf(n*o.sqrt(1+2/i),i+2,f)-e.noncentralt.cdf(n,i,f))},cdf:function(n,i,f){var s=1e-14,d=200;if(o.abs(f)<s)return e.studentt.cdf(n,i);var h=!1;n<0&&(h=!0,f=-f);for(var v=e.normal.cdf(-f,0,1),y=s+1,_=y,p=n*n/(n*n+i),b=0,w=o.exp(-f*f/2),N=o.exp(-f*f/2-.5*o.log(2)-e.gammaln(3/2))*f;b<d||_>s||y>s;)_=y,b>0&&(w*=f*f/(2*b),N*=f*f/(2*(b+1/2))),y=w*e.beta.cdf(p,b+.5,i/2)+N*e.beta.cdf(p,b+1,i/2),v+=.5*y,b++;return h?1-v:v}}),e.extend(e.normal,{pdf:function(n,i,f){return o.exp(-.5*o.log(2*o.PI)-o.log(f)-o.pow(n-i,2)/(2*f*f))},cdf:function(n,i,f){return .5*(1+e.erf((n-i)/o.sqrt(2*f*f)))},inv:function(u,n,i){return-1.4142135623730951*i*e.erfcinv(2*u)+n},mean:function(u){return u},median:function(n){return n},mode:function(u){return u},sample:function(n,i){return e.randn()*i+n},variance:function(u,n){return n*n}}),e.extend(e.pareto,{pdf:function(n,i,f){return n<i?0:f*o.pow(i,f)/o.pow(n,f+1)},cdf:function(n,i,f){return n<i?0:1-o.pow(i/n,f)},inv:function(n,i,f){return i/o.pow(1-n,1/f)},mean:function(n,i){if(!(i<=1))return i*o.pow(n,i)/(i-1)},median:function(n,i){return n*(i*o.SQRT2)},mode:function(n){return n},variance:function(u,n){if(!(n<=2))return u*u*n/(o.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,i){return i=i>1e100?1e100:i,1/(o.sqrt(i)*e.betafn(.5,i/2))*o.pow(1+n*n/i,-((i+1)/2))},cdf:function(n,i){var f=i/2;return e.ibeta((n+o.sqrt(n*n+i))/(2*o.sqrt(n*n+i)),f,f)},inv:function(u,n){var i=e.ibetainv(2*o.min(u,1-u),.5*n,.5);return i=o.sqrt(n*(1-i)/i),u>.5?i:-i},mean:function(n){return n>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*o.sqrt(n/(2*e.randg(n/2)))},variance:function(n){return n>2?n/(n-2):n>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(n,i,f){return n<0||i<0||f<0?0:f/i*o.pow(n/i,f-1)*o.exp(-o.pow(n/i,f))},cdf:function(n,i,f){return n<0?0:1-o.exp(-o.pow(n/i,f))},inv:function(u,n,i){return n*o.pow(-o.log(1-u),1/i)},mean:function(u,n){return u*e.gammafn(1+1/n)},median:function(n,i){return n*o.pow(o.log(2),1/i)},mode:function(n,i){return i<=1?0:n*o.pow((i-1)/i,1/i)},sample:function(n,i){return n*o.pow(-o.log(e._random_fn()),1/i)},variance:function(n,i){return n*n*e.gammafn(1+2/i)-o.pow(e.weibull.mean(n,i),2)}}),e.extend(e.uniform,{pdf:function(n,i,f){return n<i||n>f?0:1/(f-i)},cdf:function(n,i,f){return n<i?0:n<f?(n-i)/(f-i):1},inv:function(u,n,i){return n+u*(i-n)},mean:function(n,i){return .5*(n+i)},median:function(n,i){return e.mean(n,i)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,i){return n/2+i/2+(i/2-n/2)*(2*e._random_fn()-1)},variance:function(n,i){return o.pow(i-n,2)/12}});function a(u,n,i,f){for(var s=0,d=1,h=1,v=1,y=0,_=0,p;o.abs((h-_)/h)>f;)_=h,p=-(n+y)*(n+i+y)*u/(n+2*y)/(n+2*y+1),s=h+p*s,d=v+p*d,y=y+1,p=y*(i-y)*u/(n+2*y-1)/(n+2*y),h=s+p*h,v=d+p*v,s=s/v,d=d/v,h=h/v,v=1;return h/n}e.extend(e.binomial,{pdf:function(n,i,f){return f===0||f===1?i*f===n?1:0:e.combination(i,n)*o.pow(f,n)*o.pow(1-f,i-n)},cdf:function(n,i,f){var s,d=1e-10;if(n<0)return 0;if(n>=i)return 1;if(f<0||f>1||i<=0)return NaN;n=o.floor(n);var h=f,v=n+1,y=i-n,_=v+y,p=o.exp(e.gammaln(_)-e.gammaln(y)-e.gammaln(v)+v*o.log(h)+y*o.log(1-h));return h<(v+1)/(_+2)?s=p*a(h,v,y,d):s=1-p*a(1-h,y,v,d),o.round((1-s)*(1/d))/(1/d)}}),e.extend(e.negbin,{pdf:function(n,i,f){return n!==n>>>0?!1:n<0?0:e.combination(n+i-1,i-1)*o.pow(1-f,n)*o.pow(f,i)},cdf:function(n,i,f){var s=0,d=0;if(n<0)return 0;for(;d<=n;d++)s+=e.negbin.pdf(d,i,f);return s}}),e.extend(e.hypgeom,{pdf:function(n,i,f,s){if(n!==n|0)return!1;if(n<0||n<f-(i-s))return 0;if(n>s||n>f)return 0;if(f*2>i)return s*2>i?e.hypgeom.pdf(i-f-s+n,i,i-f,i-s):e.hypgeom.pdf(s-n,i,i-f,s);if(s*2>i)return e.hypgeom.pdf(f-n,i,f,i-s);if(f<s)return e.hypgeom.pdf(n,i,s,f);for(var d=1,h=0,v=0;v<n;v++){for(;d>1&&h<s;)d*=1-f/(i-h),h++;d*=(s-v)*(f-v)/((v+1)*(i-f-s+v+1))}for(;h<s;h++)d*=1-f/(i-h);return o.min(1,o.max(0,d))},cdf:function(n,i,f,s){if(n<0||n<f-(i-s))return 0;if(n>=s||n>=f)return 1;if(f*2>i)return s*2>i?e.hypgeom.cdf(i-f-s+n,i,i-f,i-s):1-e.hypgeom.cdf(s-n-1,i,i-f,s);if(s*2>i)return 1-e.hypgeom.cdf(f-n-1,i,f,i-s);if(f<s)return e.hypgeom.cdf(n,i,s,f);for(var d=1,h=1,v=0,y=0;y<n;y++){for(;d>1&&v<s;){var _=1-f/(i-v);h*=_,d*=_,v++}h*=(s-y)*(f-y)/((y+1)*(i-f-s+y+1)),d+=h}for(;v<s;v++)d*=1-f/(i-v);return o.min(1,o.max(0,d))}}),e.extend(e.poisson,{pdf:function(n,i){return i<0||n%1!==0||n<0?0:o.pow(i,n)*o.exp(-i)/e.factorial(n)},cdf:function(n,i){var f=[],s=0;if(n<0)return 0;for(;s<=n;s++)f.push(e.poisson.pdf(s,i));return e.sum(f)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(n){var i=1,f=0,s=o.exp(-n);do f++,i*=e._random_fn();while(i>s);return f-1},sampleLarge:function(n){var i=n,f,s,d,h,v,y,_,p,b,w;for(h=o.sqrt(i),v=o.log(i),_=.931+2.53*h,y=-.059+.02483*_,p=1.1239+1.1328/(_-3.4),b=.9277-3.6224/(_-2);;){if(s=o.random()-.5,d=o.random(),w=.5-o.abs(s),f=o.floor((2*y/w+_)*s+i+.43),w>=.07&&d<=b)return f;if(!(f<0||w<.013&&d>w)&&o.log(d)+o.log(p)-o.log(y/(w*w)+_)<=-i+f*v-e.loggam(f+1))return f}},sample:function(n){return n<10?this.sampleSmall(n):this.sampleLarge(n)}}),e.extend(e.triangular,{pdf:function(n,i,f,s){return f<=i||s<i||s>f?NaN:n<i||n>f?0:n<s?2*(n-i)/((f-i)*(s-i)):n===s?2/(f-i):2*(f-n)/((f-i)*(f-s))},cdf:function(n,i,f,s){return f<=i||s<i||s>f?NaN:n<=i?0:n>=f?1:n<=s?o.pow(n-i,2)/((f-i)*(s-i)):1-o.pow(f-n,2)/((f-i)*(f-s))},inv:function(n,i,f,s){return f<=i||s<i||s>f?NaN:n<=(s-i)/(f-i)?i+(f-i)*o.sqrt(n*((s-i)/(f-i))):i+(f-i)*(1-o.sqrt((1-n)*(1-(s-i)/(f-i))))},mean:function(n,i,f){return(n+i+f)/3},median:function(n,i,f){if(f<=(n+i)/2)return i-o.sqrt((i-n)*(i-f))/o.sqrt(2);if(f>(n+i)/2)return n+o.sqrt((i-n)*(f-n))/o.sqrt(2)},mode:function(n,i,f){return f},sample:function(n,i,f){var s=e._random_fn();return s<(f-n)/(i-n)?n+o.sqrt(s*(i-n)*(f-n)):i-o.sqrt((1-s)*(i-n)*(i-f))},variance:function(n,i,f){return(n*n+i*i+f*f-n*i-n*f-i*f)/18}}),e.extend(e.arcsine,{pdf:function(n,i,f){return f<=i?NaN:n<=i||n>=f?0:2/o.PI*o.pow(o.pow(f-i,2)-o.pow(2*n-i-f,2),-.5)},cdf:function(n,i,f){return n<i?0:n<f?2/o.PI*o.asin(o.sqrt((n-i)/(f-i))):1},inv:function(u,n,i){return n+(.5-.5*o.cos(o.PI*u))*(i-n)},mean:function(n,i){return i<=n?NaN:(n+i)/2},median:function(n,i){return i<=n?NaN:(n+i)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,i){return(n+i)/2+(i-n)/2*o.sin(2*o.PI*e.uniform.sample(0,1))},variance:function(n,i){return i<=n?NaN:o.pow(i-n,2)/8}});function c(u){return u/o.abs(u)}e.extend(e.laplace,{pdf:function(n,i,f){return f<=0?0:o.exp(-o.abs(n-i)/f)/(2*f)},cdf:function(n,i,f){return f<=0?0:n<i?.5*o.exp((n-i)/f):1-.5*o.exp(-(n-i)/f)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,n){return 2*n*n},sample:function(n,i){var f=e._random_fn()-.5;return n-i*c(f)*o.log(1-2*o.abs(f))}});function g(u,n,i){var f=12,s=6,d=-30,h=-50,v=60,y=8,_=3,p=2,b=3,w=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],N=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],R=u*.5;if(R>=y)return 1;var z=2*e.normal.cdf(R,0,1,1,0)-1;z>=o.exp(h/i)?z=o.pow(z,i):z=0;var O;u>_?O=p:O=b;for(var L=R,q=(y-R)/O,K=L+q,B=0,Y=i-1,ne=1;ne<=O;ne++){for(var te=0,Z=.5*(K+L),le=.5*(K-L),ee=1;ee<=f;ee++){var se,ae;s<ee?(se=f-ee+1,ae=w[se-1]):(se=ee,ae=-w[se-1]);var ce=le*ae,fe=Z+ce,ke=fe*fe;if(ke>v)break;var J=2*e.normal.cdf(fe,0,1,1,0),he=2*e.normal.cdf(fe,u,1,1,0),we=J*.5-he*.5;we>=o.exp(d/Y)&&(we=N[se-1]*o.exp(-(.5*ke))*o.pow(we,Y),te+=we)}te*=2*le*i/o.sqrt(2*o.PI),B+=te,L=K,K+=q}return z+=B,z<=o.exp(d/n)?0:(z=o.pow(z,n),z>=1?1:z)}function m(u,n,i){var f=.322232421088,s=.099348462606,d=-1,h=.588581570495,v=-.342242088547,y=.531103462366,_=-.204231210125,p=.10353775285,b=-453642210148e-16,w=.0038560700634,N=.8832,R=.2368,z=1.214,O=1.208,L=1.4142,q=120,K=.5-.5*u,B=o.sqrt(o.log(1/(K*K))),Y=B+((((B*b+_)*B+v)*B+d)*B+f)/((((B*w+p)*B+y)*B+h)*B+s);i<q&&(Y+=(Y*Y*Y+Y)/i/4);var ne=N-R*Y;return i<q&&(ne+=-z/i+O*Y/i),Y*(ne*o.log(n-1)+L)}e.extend(e.tukey,{cdf:function(n,i,f){var s=1,d=i,h=16,v=8,y=-30,_=1e-14,p=100,b=800,w=5e3,N=25e3,R=1,z=.5,O=.25,L=.125,q=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],K=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(f<2||s<1||d<2)return NaN;if(!Number.isFinite(n))return 1;if(f>N)return g(n,s,d);var B=f*.5,Y=B*o.log(f)-f*o.log(2)-e.gammaln(B),ne=B-1,te=f*.25,Z;f<=p?Z=R:f<=b?Z=z:f<=w?Z=O:Z=L,Y+=o.log(Z);for(var le=0,ee=1;ee<=50;ee++){for(var se=0,ae=(2*ee-1)*Z,ce=1;ce<=h;ce++){var fe,ke;v<ce?(fe=ce-v-1,ke=Y+ne*o.log(ae+q[fe]*Z)-(q[fe]*Z+ae)*te):(fe=ce-1,ke=Y+ne*o.log(ae-q[fe]*Z)+(q[fe]*Z-ae)*te);var J;if(ke>=y){v<ce?J=n*o.sqrt((q[fe]*Z+ae)*.5):J=n*o.sqrt((-(q[fe]*Z)+ae)*.5);var he=g(J,s,d),we=he*K[fe]*o.exp(ke);se+=we}}if(ee*Z>=1&&se<=_)break;le+=se}if(se>_)throw new Error("tukey.cdf failed to converge");return le>1&&(le=1),le},inv:function(u,n,i){var f=1,s=n,d=1e-4,h=50;if(i<2||f<1||s<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var v=m(u,s,i),y=e.tukey.cdf(v,n,i)-u,_;y>0?_=o.max(0,v-1):_=v+1;for(var p=e.tukey.cdf(_,n,i)-u,b,w=1;w<h;w++){b=_-p*(_-v)/(p-y),y=p,v=_,b<0&&(b=0,p=-u),p=e.tukey.cdf(b,n,i)-u,_=b;var N=o.abs(_-v);if(N<d)return b}throw new Error("tukey.inv failed to converge")}})}(l,Math),function(e,o){var a=Array.prototype.push,c=e.utils.isArray;function g(m){return c(m)||m instanceof e}e.extend({add:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.map(u,function(i,f,s){return i+n[f][s]})):e.map(u,function(i){return i+n})},subtract:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.map(u,function(i,f,s){return i-n[f][s]||0})):e.map(u,function(i){return i-n})},divide:function(u,n){return g(n)?(g(n[0])||(n=[n]),e.multiply(u,e.inv(n))):e.map(u,function(i){return i/n})},multiply:function(u,n){var i,f,s,d,h,v,y,_;if(u.length===void 0&&n.length===void 0)return u*n;if(h=u.length,v=u[0].length,y=e.zeros(h,s=g(n)?n[0].length:v),_=0,g(n)){for(;_<s;_++)for(i=0;i<h;i++){for(d=0,f=0;f<v;f++)d+=u[i][f]*n[f][_];y[i][_]=d}return h===1&&_===1?y[0][0]:y}return e.map(u,function(p){return p*n})},outer:function(u,n){return e.multiply(u.map(function(i){return[i]}),[n])},dot:function(u,n){g(u[0])||(u=[u]),g(n[0])||(n=[n]);for(var i=u[0].length===1&&u.length!==1?e.transpose(u):u,f=n[0].length===1&&n.length!==1?e.transpose(n):n,s=[],d=0,h=i.length,v=i[0].length,y,_;d<h;d++){for(s[d]=[],y=0,_=0;_<v;_++)y+=i[d][_]*f[d][_];s[d]=y}return s.length===1?s[0]:s},pow:function(u,n){return e.map(u,function(i){return o.pow(i,n)})},exp:function(u){return e.map(u,function(n){return o.exp(n)})},log:function(u){return e.map(u,function(n){return o.log(n)})},abs:function(u){return e.map(u,function(n){return o.abs(n)})},norm:function(u,n){var i=0,f=0;for(isNaN(n)&&(n=2),g(u[0])&&(u=u[0]);f<u.length;f++)i+=o.pow(o.abs(u[f]),n);return o.pow(i,1/n)},angle:function(u,n){return o.acos(e.dot(u,n)/(e.norm(u)*e.norm(n)))},aug:function(u,n){var i=[],f;for(f=0;f<u.length;f++)i.push(u[f].slice());for(f=0;f<i.length;f++)a.apply(i[f],n[f]);return i},inv:function(u){for(var n=u.length,i=u[0].length,f=e.identity(n,i),s=e.gauss_jordan(u,f),d=[],h=0,v;h<n;h++)for(d[h]=[],v=i;v<s[0].length;v++)d[h][v-i]=s[h][v];return d},det:function m(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var n=0,i=0;i<u.length;i++){for(var f=[],s=1;s<u.length;s++){f[s-1]=[];for(var d=0;d<u.length;d++)d<i?f[s-1][d]=u[s][d]:d>i&&(f[s-1][d-1]=u[s][d])}var h=i%2?-1:1;n+=m(f)*u[0][i]*h}return n},gauss_elimination:function(u,n){var i=0,f=0,s=u.length,d=u[0].length,h=1,v=0,y=[],_,p,b,w;for(u=e.aug(u,n),_=u[0].length,i=0;i<s;i++){for(p=u[i][i],f=i,w=i+1;w<d;w++)p<o.abs(u[w][i])&&(p=u[w][i],f=w);if(f!=i)for(w=0;w<_;w++)b=u[i][w],u[i][w]=u[f][w],u[f][w]=b;for(f=i+1;f<s;f++)for(h=u[f][i]/u[i][i],w=i;w<_;w++)u[f][w]=u[f][w]-h*u[i][w]}for(i=s-1;i>=0;i--){for(v=0,f=i+1;f<=s-1;f++)v=v+y[f]*u[i][f];y[i]=(u[i][_-1]-v)/u[i][i]}return y},gauss_jordan:function(u,n){var i=e.aug(u,n),f=i.length,s=i[0].length,d=0,h,v,y;for(v=0;v<f;v++){var _=v;for(y=v+1;y<f;y++)o.abs(i[y][v])>o.abs(i[_][v])&&(_=y);var p=i[v];for(i[v]=i[_],i[_]=p,y=v+1;y<f;y++)for(d=i[y][v]/i[v][v],h=v;h<s;h++)i[y][h]-=i[v][h]*d}for(v=f-1;v>=0;v--){for(d=i[v][v],y=0;y<v;y++)for(h=s-1;h>v-1;h--)i[y][h]-=i[v][h]*i[y][v]/d;for(i[v][v]/=d,h=f;h<s;h++)i[v][h]/=d}return i},triaUpSolve:function(u,n){var i=u[0].length,f=e.zeros(1,i)[0],s,d=!1;return n[0].length!=null&&(n=n.map(function(h){return h[0]}),d=!0),e.arange(i-1,-1,-1).forEach(function(h){s=e.arange(h+1,i).map(function(v){return f[v]*u[h][v]}),f[h]=(n[h]-e.sum(s))/u[h][h]}),d?f.map(function(h){return[h]}):f},triaLowSolve:function(u,n){var i=u[0].length,f=e.zeros(1,i)[0],s,d=!1;return n[0].length!=null&&(n=n.map(function(h){return h[0]}),d=!0),e.arange(i).forEach(function(h){s=e.arange(h).map(function(v){return u[h][v]*f[v]}),f[h]=(n[h]-e.sum(s))/u[h][h]}),d?f.map(function(h){return[h]}):f},lu:function(u){var n=u.length,i=e.identity(n),f=e.zeros(u.length,u[0].length),s;return e.arange(n).forEach(function(d){f[0][d]=u[0][d]}),e.arange(1,n).forEach(function(d){e.arange(d).forEach(function(h){s=e.arange(h).map(function(v){return i[d][v]*f[v][h]}),i[d][h]=(u[d][h]-e.sum(s))/f[h][h]}),e.arange(d,n).forEach(function(h){s=e.arange(d).map(function(v){return i[d][v]*f[v][h]}),f[d][h]=u[s.length][h]-e.sum(s)})}),[i,f]},cholesky:function(u){var n=u.length,i=e.zeros(u.length,u[0].length),f;return e.arange(n).forEach(function(s){f=e.arange(s).map(function(d){return o.pow(i[s][d],2)}),i[s][s]=o.sqrt(u[s][s]-e.sum(f)),e.arange(s+1,n).forEach(function(d){f=e.arange(s).map(function(h){return i[s][h]*i[d][h]}),i[d][s]=(u[s][d]-e.sum(f))/i[s][s]})}),i},gauss_jacobi:function(u,n,i,f){for(var s=0,d=0,h=u.length,v=[],y=[],_=[],p,b,w,N;s<h;s++)for(v[s]=[],y[s]=[],_[s]=[],d=0;d<h;d++)s>d?(v[s][d]=u[s][d],y[s][d]=_[s][d]=0):s<d?(y[s][d]=u[s][d],v[s][d]=_[s][d]=0):(_[s][d]=u[s][d],v[s][d]=y[s][d]=0);for(w=e.multiply(e.multiply(e.inv(_),e.add(v,y)),-1),b=e.multiply(e.inv(_),n),p=i,N=e.add(e.multiply(w,i),b),s=2;o.abs(e.norm(e.subtract(N,p)))>f;)p=N,N=e.add(e.multiply(w,p),b),s++;return N},gauss_seidel:function(u,n,i,f){for(var s=0,d=u.length,h=[],v=[],y=[],_,p,b,w,N;s<d;s++)for(h[s]=[],v[s]=[],y[s]=[],_=0;_<d;_++)s>_?(h[s][_]=u[s][_],v[s][_]=y[s][_]=0):s<_?(v[s][_]=u[s][_],h[s][_]=y[s][_]=0):(y[s][_]=u[s][_],h[s][_]=v[s][_]=0);for(w=e.multiply(e.multiply(e.inv(e.add(y,h)),v),-1),b=e.multiply(e.inv(e.add(y,h)),n),p=i,N=e.add(e.multiply(w,i),b),s=2;o.abs(e.norm(e.subtract(N,p)))>f;)p=N,N=e.add(e.multiply(w,p),b),s=s+1;return N},SOR:function(u,n,i,f,s){for(var d=0,h=u.length,v=[],y=[],_=[],p,b,w,N,R;d<h;d++)for(v[d]=[],y[d]=[],_[d]=[],p=0;p<h;p++)d>p?(v[d][p]=u[d][p],y[d][p]=_[d][p]=0):d<p?(y[d][p]=u[d][p],v[d][p]=_[d][p]=0):(_[d][p]=u[d][p],v[d][p]=y[d][p]=0);for(N=e.multiply(e.inv(e.add(_,e.multiply(v,s))),e.subtract(e.multiply(_,1-s),e.multiply(y,s))),w=e.multiply(e.multiply(e.inv(e.add(_,e.multiply(v,s))),n),s),b=i,R=e.add(e.multiply(N,i),w),d=2;o.abs(e.norm(e.subtract(R,b)))>f;)b=R,R=e.add(e.multiply(N,b),w),d++;return R},householder:function(u){for(var n=u.length,i=u[0].length,f=0,s=[],d=[],h,v,y,_,p;f<n-1;f++){for(h=0,_=f+1;_<i;_++)h+=u[_][f]*u[_][f];for(p=u[f+1][f]>0?-1:1,h=p*o.sqrt(h),v=o.sqrt((h*h-u[f+1][f]*h)/2),s=e.zeros(n,1),s[f+1][0]=(u[f+1][f]-h)/(2*v),y=f+2;y<n;y++)s[y][0]=u[y][f]/(2*v);d=e.subtract(e.identity(n,i),e.multiply(e.multiply(s,e.transpose(s)),2)),u=e.multiply(d,e.multiply(u,d))}return u},QR:function(){var m=e.sum,u=e.arange;function n(i){var f=i.length,s=i[0].length,d=e.zeros(s,s);i=e.copy(i);var h,v,y;for(v=0;v<s;v++){for(d[v][v]=o.sqrt(m(u(f).map(function(_){return i[_][v]*i[_][v]}))),h=0;h<f;h++)i[h][v]=i[h][v]/d[v][v];for(y=v+1;y<s;y++)for(d[v][y]=m(u(f).map(function(_){return i[_][v]*i[_][y]})),h=0;h<f;h++)i[h][y]=i[h][y]-i[h][v]*d[v][y]}return[i,d]}return n}(),lstsq:function(){function m(n){n=e.copy(n);var i=n.length,f=e.identity(i);return e.arange(i-1,-1,-1).forEach(function(s){e.sliceAssign(f,{row:s},e.divide(e.slice(f,{row:s}),n[s][s])),e.sliceAssign(n,{row:s},e.divide(e.slice(n,{row:s}),n[s][s])),e.arange(s).forEach(function(d){var h=e.multiply(n[d][s],-1),v=e.slice(n,{row:d}),y=e.multiply(e.slice(n,{row:s}),h);e.sliceAssign(n,{row:d},e.add(v,y));var _=e.slice(f,{row:d}),p=e.multiply(e.slice(f,{row:s}),h);e.sliceAssign(f,{row:d},e.add(_,p))})}),f}function u(n,i){var f=!1;i[0].length===void 0&&(i=i.map(function(N){return[N]}),f=!0);var s=e.QR(n),d=s[0],h=s[1],v=n[0].length,y=e.slice(d,{col:{end:v}}),_=e.slice(h,{row:{end:v}}),p=m(_),b=e.transpose(y);b[0].length===void 0&&(b=[b]);var w=e.multiply(e.multiply(p,b),i);return w.length===void 0&&(w=[[w]]),f?w.map(function(N){return N[0]}):w}return u}(),jacobi:function(u){for(var n=1,i=u.length,f=e.identity(i,i),s=[],d,h,v,y,_,p,b,w;n===1;){for(p=u[0][1],y=0,_=1,h=0;h<i;h++)for(v=0;v<i;v++)h!=v&&p<o.abs(u[h][v])&&(p=o.abs(u[h][v]),y=h,_=v);for(u[y][y]===u[_][_]?b=u[y][_]>0?o.PI/4:-o.PI/4:b=o.atan(2*u[y][_]/(u[y][y]-u[_][_]))/2,w=e.identity(i,i),w[y][y]=o.cos(b),w[y][_]=-o.sin(b),w[_][y]=o.sin(b),w[_][_]=o.cos(b),f=e.multiply(f,w),d=e.multiply(e.multiply(e.inv(w),u),w),u=d,n=0,h=1;h<i;h++)for(v=1;v<i;v++)h!=v&&o.abs(u[h][v])>.001&&(n=1)}for(h=0;h<i;h++)s.push(u[h][h]);return[f,s]},rungekutta:function(u,n,i,f,s,d){var h,v,y,_,p;if(d===2)for(;f<=i;)h=n*u(f,s),v=n*u(f+n,s+h),y=s+(h+v)/2,s=y,f=f+n;if(d===4)for(;f<=i;)h=n*u(f,s),v=n*u(f+n/2,s+h/2),_=n*u(f+n/2,s+v/2),p=n*u(f+n,s+_),y=s+(h+2*v+2*_+p)/6,s=y,f=f+n;return s},romberg:function(u,n,i,f){for(var s=0,d=(i-n)/2,h=[],v=[],y=[],_,p,b,w,N;s<f/2;){for(N=u(n),b=n,w=0;b<=i;b=b+d,w++)h[w]=b;for(_=h.length,b=1;b<_-1;b++)N+=(b%2!==0?4:2)*u(h[b]);N=d/3*(N+u(i)),y[s]=N,d/=2,s++}for(p=y.length,_=1;p!==1;){for(b=0;b<p-1;b++)v[b]=(o.pow(4,_)*y[b+1]-y[b])/(o.pow(4,_)-1);p=v.length,y=v,v=[],_++}return y},richardson:function(u,n,i,f){function s(R,z){for(var O=0,L=R.length,q;O<L;O++)R[O]===z&&(q=O);return q}for(var d=o.abs(i-u[s(u,i)+1]),h=0,v=[],y=[],_,p,b,w,N;f>=d;)_=s(u,i+f),p=s(u,i),v[h]=(n[_]-2*n[p]+n[2*p-_])/(f*f),f/=2,h++;for(w=v.length,b=1;w!=1;){for(N=0;N<w-1;N++)y[N]=(o.pow(4,b)*v[N+1]-v[N])/(o.pow(4,b)-1);w=y.length,v=y,y=[],b++}return v},simpson:function(u,n,i,f){for(var s=(i-n)/f,d=u(n),h=[],v=n,y=0,_=1,p;v<=i;v=v+s,y++)h[y]=v;for(p=h.length;_<p-1;_++)d+=(_%2!==0?4:2)*u(h[_]);return s/3*(d+u(i))},hermite:function(u,n,i,f){for(var s=u.length,d=0,h=0,v=[],y=[],_=[],p=[],b;h<s;h++){for(v[h]=1,b=0;b<s;b++)h!=b&&(v[h]*=(f-u[b])/(u[h]-u[b]));for(y[h]=0,b=0;b<s;b++)h!=b&&(y[h]+=1/(u[h]-u[b]));_[h]=(1-2*(f-u[h])*y[h])*(v[h]*v[h]),p[h]=(f-u[h])*(v[h]*v[h]),d+=_[h]*n[h]+p[h]*i[h]}return d},lagrange:function(u,n,i){for(var f=0,s=0,d,h,v=u.length;s<v;s++){for(h=n[s],d=0;d<v;d++)s!=d&&(h*=(i-u[d])/(u[s]-u[d]));f+=h}return f},cubic_spline:function(u,n,i){for(var f=u.length,s=0,d,h=[],v=[],y=[],_=[],p=[],b=[],w=[];s<f-1;s++)p[s]=u[s+1]-u[s];for(y[0]=0,s=1;s<f-1;s++)y[s]=3/p[s]*(n[s+1]-n[s])-3/p[s-1]*(n[s]-n[s-1]);for(s=1;s<f-1;s++)h[s]=[],v[s]=[],h[s][s-1]=p[s-1],h[s][s]=2*(p[s-1]+p[s]),h[s][s+1]=p[s],v[s][0]=y[s];for(_=e.multiply(e.inv(h),v),d=0;d<f-1;d++)b[d]=(n[d+1]-n[d])/p[d]-p[d]*(_[d+1][0]+2*_[d][0])/3,w[d]=(_[d+1][0]-_[d][0])/(3*p[d]);for(d=0;d<f&&!(u[d]>i);d++);return d-=1,n[d]+(i-u[d])*b[d]+e.sq(i-u[d])*_[d]+(i-u[d])*e.sq(i-u[d])*w[d]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var n=u.length,i=u[0].length,f=0,s,d,h=[],v=[],y=[],_=[],p=[],b=[],w=[],N=[],R=[],z=[];for(f=0;f<n;f++)h[f]=e.sum(u[f])/i;for(f=0;f<i;f++)for(w[f]=[],s=0;s<n;s++)w[f][s]=u[s][f]-h[s];for(w=e.transpose(w),f=0;f<n;f++)for(N[f]=[],s=0;s<n;s++)N[f][s]=e.dot([w[f]],[w[s]])/(i-1);for(y=e.jacobi(N),R=y[0],v=y[1],z=e.transpose(R),f=0;f<v.length;f++)for(s=f;s<v.length;s++)v[f]<v[s]&&(d=v[f],v[f]=v[s],v[s]=d,_=z[f],z[f]=z[s],z[s]=_);for(b=e.transpose(w),f=0;f<n;f++)for(p[f]=[],s=0;s<b.length;s++)p[f][s]=e.dot([z[f]],[b[s]]);return[u,v,z,p]}}),function(m){for(var u=0;u<m.length;u++)(function(n){e.fn[n]=function(i,f){var s=this;return f?(setTimeout(function(){f.call(s,e.fn[n].call(s,i))},15),this):typeof e[n](this,i)=="number"?e[n](this,i):e(e[n](this,i))}})(m[u])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(l,Math),function(e,o){var a=[].slice,c=e.utils.isNumber,g=e.utils.isArray;e.extend({zscore:function(){var n=a.call(arguments);return c(n[1])?(n[0]-n[1])/n[2]:(n[0]-e.mean(n[1]))/e.stdev(n[1],n[2])},ztest:function(){var n=a.call(arguments),i;return g(n[1])?(i=e.zscore(n[0],n[1],n[3]),n[2]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2):n.length>2?(i=e.zscore(n[0],n[1],n[2]),n[3]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2):(i=n[0],n[1]===1?e.normal.cdf(-o.abs(i),0,1):e.normal.cdf(-o.abs(i),0,1)*2)}}),e.extend(e.fn,{zscore:function(n,i){return(n-this.mean())/this.stdev(i)},ztest:function(n,i,f){var s=o.abs(this.zscore(n,f));return i===1?e.normal.cdf(-s,0,1):e.normal.cdf(-s,0,1)*2}}),e.extend({tscore:function(){var n=a.call(arguments);return n.length===4?(n[0]-n[1])/(n[2]/o.sqrt(n[3])):(n[0]-e.mean(n[1]))/(e.stdev(n[1],!0)/o.sqrt(n[1].length))},ttest:function(){var n=a.call(arguments),i;return n.length===5?(i=o.abs(e.tscore(n[0],n[1],n[2],n[3])),n[4]===1?e.studentt.cdf(-i,n[3]-1):e.studentt.cdf(-i,n[3]-1)*2):c(n[1])?(i=o.abs(n[0]),n[2]==1?e.studentt.cdf(-i,n[1]-1):e.studentt.cdf(-i,n[1]-1)*2):(i=o.abs(e.tscore(n[0],n[1])),n[2]==1?e.studentt.cdf(-i,n[1].length-1):e.studentt.cdf(-i,n[1].length-1)*2)}}),e.extend(e.fn,{tscore:function(n){return(n-this.mean())/(this.stdev(!0)/o.sqrt(this.cols()))},ttest:function(n,i){return i===1?1-e.studentt.cdf(o.abs(this.tscore(n)),this.cols()-1):e.studentt.cdf(-o.abs(this.tscore(n)),this.cols()-1)*2}}),e.extend({anovafscore:function(){var n=a.call(arguments),i,f,s,d,h,v,y,_;if(n.length===1){for(h=new Array(n[0].length),y=0;y<n[0].length;y++)h[y]=n[0][y];n=h}for(f=new Array,y=0;y<n.length;y++)f=f.concat(n[y]);for(s=e.mean(f),i=0,y=0;y<n.length;y++)i=i+n[y].length*o.pow(e.mean(n[y])-s,2);for(i/=n.length-1,v=0,y=0;y<n.length;y++)for(d=e.mean(n[y]),_=0;_<n[y].length;_++)v+=o.pow(n[y][_]-d,2);return v/=f.length-n.length,i/v},anovaftest:function(){var n=a.call(arguments),i,f,s,d;if(c(n[0]))return 1-e.centralF.cdf(n[0],n[1],n[2]);var h=e.anovafscore(n);for(i=n.length-1,s=0,d=0;d<n.length;d++)s=s+n[d].length;return f=s-i-1,1-e.centralF.cdf(h,i,f)},ftest:function(n,i,f){return 1-e.centralF.cdf(n,i,f)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var n=0,i;for(i=0;i<this.length;i++)n=n+this[i].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var n=a.call(arguments),i,f,s,d,h;return c(n[0])?(i=n[0],f=n[1],s=n[2],d=n[3],h=n[4]):(i=e.mean(n[0]),f=e.mean(n[1]),s=n[0].length,d=n[1].length,h=n[2]),o.abs(i-f)/(h*o.sqrt((1/s+1/d)/2))},qtest:function(){var n=a.call(arguments),i;n.length===3?(i=n[0],n=n.slice(1)):n.length===7?(i=e.qscore(n[0],n[1],n[2],n[3],n[4]),n=n.slice(5)):(i=e.qscore(n[0],n[1],n[2]),n=n.slice(3));var f=n[0],s=n[1];return 1-e.tukey.cdf(i,s,f-s)},tukeyhsd:function(n){for(var i=e.pooledstdev(n),f=n.map(function(_){return e.mean(_)}),s=n.reduce(function(_,p){return _+p.length},0),d=[],h=0;h<n.length;++h)for(var v=h+1;v<n.length;++v){var y=e.qtest(f[h],f[v],n[h].length,n[v].length,i,s,n.length);d.push([[h,v],y])}return d}}),e.extend({normalci:function(){var n=a.call(arguments),i=new Array(2),f;return n.length===4?f=o.abs(e.normal.inv(n[1]/2,0,1)*n[2]/o.sqrt(n[3])):f=o.abs(e.normal.inv(n[1]/2,0,1)*e.stdev(n[2])/o.sqrt(n[2].length)),i[0]=n[0]-f,i[1]=n[0]+f,i},tci:function(){var n=a.call(arguments),i=new Array(2),f;return n.length===4?f=o.abs(e.studentt.inv(n[1]/2,n[3]-1)*n[2]/o.sqrt(n[3])):f=o.abs(e.studentt.inv(n[1]/2,n[2].length-1)*e.stdev(n[2],!0)/o.sqrt(n[2].length)),i[0]=n[0]-f,i[1]=n[0]+f,i},significant:function(n,i){return n<i}}),e.extend(e.fn,{normalci:function(n,i){return e.normalci(n,i,this.toArray())},tci:function(n,i){return e.tci(n,i,this.toArray())}});function m(u,n,i,f){if(u>1||i>1||u<=0||i<=0)throw new Error("Proportions should be greater than 0 and less than 1");var s=(u*n+i*f)/(n+f),d=o.sqrt(s*(1-s)*(1/n+1/f));return(u-i)/d}e.extend(e.fn,{oneSidedDifferenceOfProportions:function(n,i,f,s){var d=m(n,i,f,s);return e.ztest(d,1)},twoSidedDifferenceOfProportions:function(n,i,f,s){var d=m(n,i,f,s);return e.ztest(d,2)}})}(l,Math),l.models=function(){function e(m){var u=m[0].length,n=l.arange(u).map(function(i){var f=l.arange(u).filter(function(s){return s!==i});return o(l.col(m,i).map(function(s){return s[0]}),l.col(m,f))});return n}function o(m,u){var n=m.length,i=u[0].length-1,f=n-i-1,s=l.lstsq(u,m),d=l.multiply(u,s.map(function(w){return[w]})).map(function(w){return w[0]}),h=l.subtract(m,d),v=l.mean(m),y=l.sum(d.map(function(w){return Math.pow(w-v,2)})),_=l.sum(m.map(function(w,N){return Math.pow(w-d[N],2)})),p=y+_,b=y/p;return{exog:u,endog:m,nobs:n,df_model:i,df_resid:f,coef:s,predict:d,resid:h,ybar:v,SST:p,SSE:y,SSR:_,R2:b}}function a(m){var u=e(m.exog),n=Math.sqrt(m.SSR/m.df_resid),i=u.map(function(v){var y=v.SST,_=v.R2;return n/Math.sqrt(y*(1-_))}),f=m.coef.map(function(v,y){return(v-0)/i[y]}),s=f.map(function(v){var y=l.studentt.cdf(v,m.df_resid);return(y>.5?1-y:y)*2}),d=l.studentt.inv(.975,m.df_resid),h=m.coef.map(function(v,y){var _=d*i[y];return[v-_,v+_]});return{se:i,t:f,p:s,sigmaHat:n,interval95:h}}function c(m){var u=m.R2/m.df_model/((1-m.R2)/m.df_resid),n=function(f,s,d){return l.beta.cdf(f/(d/s+f),s/2,d/2)},i=1-n(u,m.df_model,m.df_resid);return{F_statistic:u,pvalue:i}}function g(m,u){var n=o(m,u),i=a(n),f=c(n),s=1-(1-n.R2)*((n.nobs-1)/n.df_resid);return n.t=i,n.f=f,n.adjust_R2=s,n}return{ols:g}}(),l.extend({buildxmatrix:function(){for(var o=new Array(arguments.length),a=0;a<arguments.length;a++){var c=[1];o[a]=c.concat(arguments[a])}return l(o)},builddxmatrix:function(){for(var o=new Array(arguments[0].length),a=0;a<arguments[0].length;a++){var c=[1];o[a]=c.concat(arguments[0][a])}return l(o)},buildjxmatrix:function(o){for(var a=new Array(o.length),c=0;c<o.length;c++)a[c]=o[c];return l.builddxmatrix(a)},buildymatrix:function(o){return l(o).transpose()},buildjymatrix:function(o){return o.transpose()},matrixmult:function(o,a){var c,g,m,u,n;if(o.cols()==a.rows()){if(a.rows()>1){for(u=[],c=0;c<o.rows();c++)for(u[c]=[],g=0;g<a.cols();g++){for(n=0,m=0;m<o.cols();m++)n+=o.toArray()[c][m]*a.toArray()[m][g];u[c][g]=n}return l(u)}for(u=[],c=0;c<o.rows();c++)for(u[c]=[],g=0;g<a.cols();g++){for(n=0,m=0;m<o.cols();m++)n+=o.toArray()[c][m]*a.toArray()[g];u[c][g]=n}return l(u)}},regress:function(o,a){var c=l.xtranspxinv(o),g=o.transpose(),m=l.matrixmult(l(c),g);return l.matrixmult(m,a)},regresst:function(o,a,c){var g=l.regress(o,a),m={};m.anova={};var u=l.jMatYBar(o,g);m.yBar=u;var n=a.mean();m.anova.residuals=l.residuals(a,u),m.anova.ssr=l.ssr(u,n),m.anova.msr=m.anova.ssr/(o[0].length-1),m.anova.sse=l.sse(a,u),m.anova.mse=m.anova.sse/(a.length-(o[0].length-1)-1),m.anova.sst=l.sst(a,n),m.anova.mst=m.anova.sst/(a.length-1),m.anova.r2=1-m.anova.sse/m.anova.sst,m.anova.r2<0&&(m.anova.r2=0),m.anova.fratio=m.anova.msr/m.anova.mse,m.anova.pvalue=l.anovaftest(m.anova.fratio,o[0].length-1,a.length-(o[0].length-1)-1),m.anova.rmse=Math.sqrt(m.anova.mse),m.anova.r2adj=1-m.anova.mse/m.anova.mst,m.anova.r2adj<0&&(m.anova.r2adj=0),m.stats=new Array(o[0].length);for(var i=l.xtranspxinv(o),f,s,d,h=0;h<g.length;h++)f=Math.sqrt(m.anova.mse*Math.abs(i[h][h])),s=Math.abs(g[h]/f),d=l.ttest(s,a.length-o[0].length-1,c),m.stats[h]=[g[h],f,s,d];return m.regress=g,m},xtranspx:function(o){return l.matrixmult(o.transpose(),o)},xtranspxinv:function(o){var a=l.matrixmult(o.transpose(),o),c=l.inv(a);return c},jMatYBar:function(o,a){var c=l.matrixmult(o,a);return new l(c)},residuals:function(o,a){return l.matrixsubtract(o,a)},ssr:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a,2);return c},sse:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a[g],2);return c},sst:function(o,a){for(var c=0,g=0;g<o.length;g++)c+=Math.pow(o[g]-a,2);return c},matrixsubtract:function(o,a){for(var c=new Array(o.length),g=0;g<o.length;g++){c[g]=new Array(o[g].length);for(var m=0;m<o[g].length;m++)c[g][m]=o[g][m]-a[g][m]}return l(c)}}),l.jStat=l,l})})(Fo);const Ko=vr,Qo=(r,t,l)=>{const o=1/l;l=o,t=t/1e3*(1/o);let a=[];return r.forEach(c=>{const g=Array(8).fill(c.maxWell.length);let m=Array(g.length).fill(0);for(var u=0;u<g.length;u++)m[u]=t*o*l**u;const n=[-1*Math.log10(m[0]*10),-1*Math.log10(m[m.length-1]/10)];let i=Array(g[0]).fill(0);for(var u=0;u<g.length;u++)i[u]=c.maxWell.filter(h=>h>=u).length;let f=0;i[0]!=0&&(f=Uo.local_min(d=>-1*Yo(d,m,g,i),n[0],n[1],1e-4).x);let s={sample:c.name,nrep:c.maxWell.length,titer:f,titer_ul:10**f/1e3};s.titer==0&&(s.titer_ul=0),a=[s,...a]}),a},Yo=(r,t,l,e)=>{let o=1;for(var a=0;a<t.length;a++){let c=-1*Math.expm1(10**r*-1*t[a]);o=o*Ko.binomial.pdf(e[a],l[a],c)}return o},Zo=r=>{let t=[],l=[],e;return r.forEach(o=>{if(o.added)for(var a=0;a<o.maxWell.length;a++)t.includes(o.colNames[a])?(e=l.find(c=>c.name==o.colNames[a]),e.maxWell=[o.maxWell[a],...e.maxWell]):(e={name:o.colNames[a],maxWell:[o.maxWell[a]]},t=[e.name,...t],l=[e,...l])}),l},Jo=(r,t,l)=>{if(t==null|l==null)return null;const e=Zo(r);let o=[];const a=Ho(e,t,l),c=Qo(e,t,l);for(var g=0;g<a.length;g++)o=[{sample:a[g].sample,nrep:a[g].nrep,rm_titer:a[g].titer,ms_titer:c[g].titer,ms_titer_ul:c[g].titer_ul},...o];return console.log(o),o};function di(r,t,l){const e=r.slice();return e[3]=t[l],e}function mi(r,t,l){const e=r.slice();return e[6]=t[l],e}function gi(r){let t,l,e,o,a,c,g,m,u,n,i,f,s,d,h,v,y,_,p,b,w,N=r[0],R=[];for(let z=0;z<N.length;z+=1)R[z]=vi(di(r,N,z));return b=new Nn({props:{type:"secondary",$$slots:{default:[Xo]},$$scope:{ctx:r}}}),b.$on("click",r[2]),{c(){t=I("table"),l=I("tr"),e=I("th"),o=H("Sample"),a=U(),c=I("th"),g=H("TCID50/L"),m=U(),u=I("th"),n=H("SIN/L"),i=U(),f=I("th"),s=H("Log10 SIN/mL"),d=U(),h=I("th"),v=H("# Replicates"),y=U();for(let z=0;z<R.length;z+=1)R[z].c();_=U(),p=I("div"),M(b.$$.fragment),this.h()},l(z){t=A(z,"TABLE",{class:!0});var O=P(t);l=A(O,"TR",{});var L=P(l);e=A(L,"TH",{class:!0});var q=P(e);o=G(q,"Sample"),q.forEach(k),a=F(L),c=A(L,"TH",{class:!0});var K=P(c);g=G(K,"TCID50/L"),K.forEach(k),m=F(L),u=A(L,"TH",{class:!0});var B=P(u);n=G(B,"SIN/L"),B.forEach(k),i=F(L),f=A(L,"TH",{class:!0});var Y=P(f);s=G(Y,"Log10 SIN/mL"),Y.forEach(k),d=F(L),h=A(L,"TH",{class:!0});var ne=P(h);v=G(ne,"# Replicates"),ne.forEach(k),L.forEach(k),y=F(O);for(let Z=0;Z<R.length;Z+=1)R[Z].l(O);O.forEach(k),_=F(z),p=A(z,"DIV",{class:!0});var te=P(p);$(b.$$.fragment,te),te.forEach(k),this.h()},h(){E(e,"class","svelte-hzsd5o"),E(c,"class","titer svelte-hzsd5o"),E(u,"class","titer svelte-hzsd5o"),E(f,"class","titer svelte-hzsd5o"),E(h,"class","titer svelte-hzsd5o"),E(t,"class","titer-table svelte-hzsd5o"),E(p,"class","dl_button svelte-hzsd5o")},m(z,O){D(z,t,O),T(t,l),T(l,e),T(e,o),T(l,a),T(l,c),T(c,g),T(l,m),T(l,u),T(u,n),T(l,i),T(l,f),T(f,s),T(l,d),T(l,h),T(h,v),T(t,y);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(t,null);D(z,_,O),D(z,p,O),S(b,p,null),w=!0},p(z,O){if(O&3){N=z[0];let q;for(q=0;q<N.length;q+=1){const K=di(z,N,q);R[q]?R[q].p(K,O):(R[q]=vi(K),R[q].c(),R[q].m(t,null))}for(;q<R.length;q+=1)R[q].d(1);R.length=N.length}const L={};O&512&&(L.$$scope={dirty:O,ctx:z}),b.$set(L)},i(z){w||(C(b.$$.fragment,z),w=!0)},o(z){W(b.$$.fragment,z),w=!1},d(z){z&&k(t),Pe(R,z),z&&k(_),z&&k(p),j(b)}}}function hi(r){let t,l=r[3][r[6]].toFixed(2)+"",e;return{c(){t=I("td"),e=H(l),this.h()},l(o){t=A(o,"TD",{class:!0});var a=P(t);e=G(a,l),a.forEach(k),this.h()},h(){E(t,"class","titer svelte-hzsd5o")},m(o,a){D(o,t,a),T(t,e)},p(o,a){a&1&&l!==(l=o[3][o[6]].toFixed(2)+"")&&Ne(e,l)},d(o){o&&k(t)}}}function vi(r){let t,l,e=r[3].sampleName+"",o,a,c,g,m=r[3].nrep+"",u,n,i=r[1],f=[];for(let s=0;s<i.length;s+=1)f[s]=hi(mi(r,i,s));return{c(){t=I("tr"),l=I("td"),o=H(e),a=U();for(let s=0;s<f.length;s+=1)f[s].c();c=U(),g=I("td"),u=H(m),n=U(),this.h()},l(s){t=A(s,"TR",{});var d=P(t);l=A(d,"TD",{class:!0});var h=P(l);o=G(h,e),h.forEach(k),a=F(d);for(let y=0;y<f.length;y+=1)f[y].l(d);c=F(d),g=A(d,"TD",{class:!0});var v=P(g);u=G(v,m),v.forEach(k),n=F(d),d.forEach(k),this.h()},h(){E(l,"class","svelte-hzsd5o"),E(g,"class","titer svelte-hzsd5o")},m(s,d){D(s,t,d),T(t,l),T(l,o),T(t,a);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(t,null);T(t,c),T(t,g),T(g,u),T(t,n)},p(s,d){if(d&1&&e!==(e=s[3].sampleName+"")&&Ne(o,e),d&3){i=s[1];let h;for(h=0;h<i.length;h+=1){const v=mi(s,i,h);f[h]?f[h].p(v,d):(f[h]=hi(v),f[h].c(),f[h].m(t,c))}for(;h<f.length;h+=1)f[h].d(1);f.length=i.length}d&1&&m!==(m=s[3].nrep+"")&&Ne(u,m)},d(s){s&&k(t),Pe(f,s)}}}function Xo(r){let t;return{c(){t=H("Download CSV")},l(l){t=G(l,"Download CSV")},m(l,e){D(l,t,e)},d(l){l&&k(t)}}}function Mo(r){let t,l,e=r[0]!=null&&gi(r);return{c(){e&&e.c(),t=_e()},l(o){e&&e.l(o),t=_e()},m(o,a){e&&e.m(o,a),D(o,t,a),l=!0},p(o,[a]){o[0]!=null?e?(e.p(o,a),a&1&&C(e,1)):(e=gi(o),e.c(),C(e,1),e.m(t.parentNode,t)):e&&(Re(),W(e,1,1,()=>{e=null}),Te())},i(o){l||(C(e),l=!0)},o(o){W(e),l=!1},d(o){e&&e.d(o),o&&k(t)}}}function $o(r,t,l){let{data:e}=t,o=["rm_titer","ms_titer_ul","ms_titer"];const a=()=>{let c=[["sample","ReedMuench_titer","MidSin_titer_uL","MidSin_titer_log10mL","nrep"]];e.forEach(i=>{c=[...c,[i.sampleName,i.rm_titer,i.ms_titer_ul,i.ms_titer,i.nrep]]});let g="data:text/csv;charset=utf-8,"+c.map(i=>i.join(",")).join(`
`);var m=encodeURI(g),u=document.createElement("a");u.setAttribute("href",m);let n=new Date().toISOString().slice(0,10);u.setAttribute("download",n+"_titers.csv"),document.body.appendChild(u),u.click()};return r.$$set=c=>{"data"in c&&l(0,e=c.data)},[e,o,a]}class So extends de{constructor(t){super(),me(this,t,$o,Mo,ge,{data:0})}}function jo(r){return r===0?!0:r}function Qe(r){return jo(r)?Array.isArray(r)?t=>r.map(l=>typeof l!="function"?t[l]:l(t)):typeof r!="function"?t=>t[r]:r:null}function ef(r){const t={};for(const l of r){if(Object(l)!==l)throw new TypeError("iterable for fromEntries should yield objects");const{"0":e,"1":o}=l;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:o})}return t}function dr(r,t={}){return ef(Object.entries(r).filter(([l,e])=>e!==void 0&&t[l]===void 0))}function nf(r,t,{sort:l=!1}={}){if(!Array.isArray(r))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof r}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const e={},o=Object.keys(t),a=o.length;let c,g,m,u,n,i,f;const s=r.length;for(c=0;c<a;c+=1){for(f=new Set,u=o[c],n=t[u],g=0;g<s;g+=1)if(i=n(r[g]),Array.isArray(i)){const h=i.length;for(m=0;m<h;m+=1)f.add(i[m])}else f.add(i);const d=Array.from(f);e[u]=l===!0?d.sort():d}return e}function tf(r,t){if(!Array.isArray(r))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof r}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const l={},e=Object.keys(t),o=e.length;let a,c,g,m,u,n,i,f;const s=r.length;for(a=0;a<o;a+=1){for(m=e[a],i=t[m],u=null,n=null,c=0;c<s;c+=1)if(f=i(r[c]),Array.isArray(f)){const d=f.length;for(g=0;g<d;g+=1)f[g]!==!1&&f[g]!==void 0&&f[g]!==null&&Number.isNaN(f[g])===!1&&((u===null||f[g]<u)&&(u=f[g]),(n===null||f[g]>n)&&(n=f[g]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((u===null||f<u)&&(u=f),(n===null||f>n)&&(n=f));l[m]=[u,n]}return l}function rf(r){return typeof r.bandwidth=="function"||lf(Object.keys(r),["domain","range","unknown","copy"])?"ordinal":"other"}function lf(r,t){return r.length!==t.length?!1:r.every(l=>t.includes(l))}function of(r,t,l){const e=Object.keys(l).reduce((a,c)=>{const g=rf(l[c]);return a[g]||(a[g]={}),a[g][c]=t[c],a},{ordinal:!1,other:!1});let o={};return e.ordinal&&(o=nf(r,e.ordinal)),e.other&&(o={...o,...tf(r,e.other)}),o}function ff(r=[],t){return Array.isArray(t)===!0?t.map((l,e)=>l===null?r[e]:l):r}function Ht(r){return function([l,e]){return typeof e=="function"&&(e=e(l[r])),l?ff(l[r],e):e}}function Zt(r,t){return r==null||t==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function uf(r,t){return r==null||t==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function dl(r){let t,l,e;r.length!==2?(t=Zt,l=(g,m)=>Zt(r(g),m),e=(g,m)=>r(g)-m):(t=r===Zt||r===uf?r:sf,l=r,e=r);function o(g,m,u=0,n=g.length){if(u<n){if(t(m,m)!==0)return n;do{const i=u+n>>>1;l(g[i],m)<0?u=i+1:n=i}while(u<n)}return u}function a(g,m,u=0,n=g.length){if(u<n){if(t(m,m)!==0)return n;do{const i=u+n>>>1;l(g[i],m)<=0?u=i+1:n=i}while(u<n)}return u}function c(g,m,u=0,n=g.length){const i=o(g,m,u,n-1);return i>u&&e(g[i-1],m)>-e(g[i],m)?i-1:i}return{left:o,center:c,right:a}}function sf(){return 0}function af(r){return r===null?NaN:+r}const cf=dl(Zt),df=cf.right;dl(af).center;const mf=df;class _i extends Map{constructor(t,l=vf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:l}}),t!=null)for(const[e,o]of t)this.set(e,o)}get(t){return super.get(pi(this,t))}has(t){return super.has(pi(this,t))}set(t,l){return super.set(gf(this,t),l)}delete(t){return super.delete(hf(this,t))}}function pi({_intern:r,_key:t},l){const e=t(l);return r.has(e)?r.get(e):l}function gf({_intern:r,_key:t},l){const e=t(l);return r.has(e)?r.get(e):(r.set(e,l),l)}function hf({_intern:r,_key:t},l){const e=t(l);return r.has(e)&&(l=r.get(e),r.delete(e)),l}function vf(r){return r!==null&&typeof r=="object"?r.valueOf():r}const _f=Math.sqrt(50),pf=Math.sqrt(10),yf=Math.sqrt(2);function $t(r,t,l){const e=(t-r)/Math.max(0,l),o=Math.floor(Math.log10(e)),a=e/Math.pow(10,o),c=a>=_f?10:a>=pf?5:a>=yf?2:1;let g,m,u;return o<0?(u=Math.pow(10,-o)/c,g=Math.round(r*u),m=Math.round(t*u),g/u<r&&++g,m/u>t&&--m,u=-u):(u=Math.pow(10,o)*c,g=Math.round(r/u),m=Math.round(t/u),g*u<r&&++g,m*u>t&&--m),m<g&&.5<=l&&l<2?$t(r,t,l*2):[g,m,u]}function _r(r,t,l){if(t=+t,r=+r,l=+l,!(l>0))return[];if(r===t)return[r];const e=t<r,[o,a,c]=e?$t(t,r,l):$t(r,t,l);if(!(a>=o))return[];const g=a-o+1,m=new Array(g);if(e)if(c<0)for(let u=0;u<g;++u)m[u]=(a-u)/-c;else for(let u=0;u<g;++u)m[u]=(a-u)*c;else if(c<0)for(let u=0;u<g;++u)m[u]=(o+u)/-c;else for(let u=0;u<g;++u)m[u]=(o+u)*c;return m}function pr(r,t,l){return t=+t,r=+r,l=+l,$t(r,t,l)[2]}function bf(r,t,l){t=+t,r=+r,l=+l;const e=t<r,o=e?pr(t,r,l):pr(r,t,l);return(e?-1:1)*(o<0?1/-o:o)}function wf(r,t,l){r=+r,t=+t,l=(o=arguments.length)<2?(t=r,r=0,1):o<3?1:+l;for(var e=-1,o=Math.max(0,Math.ceil((t-r)/l))|0,a=new Array(o);++e<o;)a[e]=r+e*l;return a}function rt(r,t){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(t).domain(r);break}return this}const yi=Symbol("implicit");function it(){var r=new _i,t=[],l=[],e=yi;function o(a){let c=r.get(a);if(c===void 0){if(e!==yi)return e;r.set(a,c=t.push(a)-1)}return l[c%l.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],r=new _i;for(const c of a)r.has(c)||r.set(c,t.push(c)-1);return o},o.range=function(a){return arguments.length?(l=Array.from(a),o):l.slice()},o.unknown=function(a){return arguments.length?(e=a,o):e},o.copy=function(){return it(t,l).unknown(e)},rt.apply(o,arguments),o}function ml(){var r=it().unknown(void 0),t=r.domain,l=r.range,e=0,o=1,a,c,g=!1,m=0,u=0,n=.5;delete r.unknown;function i(){var f=t().length,s=o<e,d=s?o:e,h=s?e:o;a=(h-d)/Math.max(1,f-m+u*2),g&&(a=Math.floor(a)),d+=(h-d-a*(f-m))*n,c=a*(1-m),g&&(d=Math.round(d),c=Math.round(c));var v=wf(f).map(function(y){return d+a*y});return l(s?v.reverse():v)}return r.domain=function(f){return arguments.length?(t(f),i()):t()},r.range=function(f){return arguments.length?([e,o]=f,e=+e,o=+o,i()):[e,o]},r.rangeRound=function(f){return[e,o]=f,e=+e,o=+o,g=!0,i()},r.bandwidth=function(){return c},r.step=function(){return a},r.round=function(f){return arguments.length?(g=!!f,i()):g},r.padding=function(f){return arguments.length?(m=Math.min(1,u=+f),i()):m},r.paddingInner=function(f){return arguments.length?(m=Math.min(1,f),i()):m},r.paddingOuter=function(f){return arguments.length?(u=+f,i()):u},r.align=function(f){return arguments.length?(n=Math.max(0,Math.min(1,f)),i()):n},r.copy=function(){return ml(t(),[e,o]).round(g).paddingInner(m).paddingOuter(u).align(n)},rt.apply(i(),arguments)}function gl(r){var t=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return gl(t())},r}function hl(){return gl(ml.apply(null,arguments).paddingInner(1))}function Rr(r,t,l){r.prototype=t.prototype=l,l.constructor=r}function vl(r,t){var l=Object.create(r.prototype);for(var e in t)l[e]=t[e];return l}function lt(){}var Mn=.7,St=1/Mn,En="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kf=/^#([0-9a-f]{3,8})$/,Ef=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),xf=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Nf=new RegExp(`^rgba\\(${En},${En},${En},${$n}\\)$`),Rf=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${$n}\\)$`),Tf=new RegExp(`^hsl\\(${$n},${Ce},${Ce}\\)$`),zf=new RegExp(`^hsla\\(${$n},${Ce},${Ce},${$n}\\)$`),bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rr(lt,Sn,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:wi,formatHex:wi,formatHex8:qf,formatHsl:Pf,formatRgb:ki,toString:ki});function wi(){return this.rgb().formatHex()}function qf(){return this.rgb().formatHex8()}function Pf(){return _l(this).formatHsl()}function ki(){return this.rgb().formatRgb()}function Sn(r){var t,l;return r=(r+"").trim().toLowerCase(),(t=kf.exec(r))?(l=t[1].length,t=parseInt(t[1],16),l===6?Ei(t):l===3?new xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):l===8?Gt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):l===4?Gt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ef.exec(r))?new xe(t[1],t[2],t[3],1):(t=xf.exec(r))?new xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nf.exec(r))?Gt(t[1],t[2],t[3],t[4]):(t=Rf.exec(r))?Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tf.exec(r))?Ri(t[1],t[2]/100,t[3]/100,1):(t=zf.exec(r))?Ri(t[1],t[2]/100,t[3]/100,t[4]):bi.hasOwnProperty(r)?Ei(bi[r]):r==="transparent"?new xe(NaN,NaN,NaN,0):null}function Ei(r){return new xe(r>>16&255,r>>8&255,r&255,1)}function Gt(r,t,l,e){return e<=0&&(r=t=l=NaN),new xe(r,t,l,e)}function If(r){return r instanceof lt||(r=Sn(r)),r?(r=r.rgb(),new xe(r.r,r.g,r.b,r.opacity)):new xe}function yr(r,t,l,e){return arguments.length===1?If(r):new xe(r,t,l,e??1)}function xe(r,t,l,e){this.r=+r,this.g=+t,this.b=+l,this.opacity=+e}Rr(xe,yr,vl(lt,{brighter(r){return r=r==null?St:Math.pow(St,r),new xe(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Mn:Math.pow(Mn,r),new xe(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new xe(nn(this.r),nn(this.g),nn(this.b),jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xi,formatHex:xi,formatHex8:Af,formatRgb:Ni,toString:Ni}));function xi(){return`#${je(this.r)}${je(this.g)}${je(this.b)}`}function Af(){return`#${je(this.r)}${je(this.g)}${je(this.b)}${je((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ni(){const r=jt(this.opacity);return`${r===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${r===1?")":`, ${r})`}`}function jt(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function nn(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function je(r){return r=nn(r),(r<16?"0":"")+r.toString(16)}function Ri(r,t,l,e){return e<=0?r=t=l=NaN:l<=0||l>=1?r=t=NaN:t<=0&&(r=NaN),new qe(r,t,l,e)}function _l(r){if(r instanceof qe)return new qe(r.h,r.s,r.l,r.opacity);if(r instanceof lt||(r=Sn(r)),!r)return new qe;if(r instanceof qe)return r;r=r.rgb();var t=r.r/255,l=r.g/255,e=r.b/255,o=Math.min(t,l,e),a=Math.max(t,l,e),c=NaN,g=a-o,m=(a+o)/2;return g?(t===a?c=(l-e)/g+(l<e)*6:l===a?c=(e-t)/g+2:c=(t-l)/g+4,g/=m<.5?a+o:2-a-o,c*=60):g=m>0&&m<1?0:c,new qe(c,g,m,r.opacity)}function Df(r,t,l,e){return arguments.length===1?_l(r):new qe(r,t,l,e??1)}function qe(r,t,l,e){this.h=+r,this.s=+t,this.l=+l,this.opacity=+e}Rr(qe,Df,vl(lt,{brighter(r){return r=r==null?St:Math.pow(St,r),new qe(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Mn:Math.pow(Mn,r),new qe(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,l=this.l,e=l+(l<.5?l:1-l)*t,o=2*l-e;return new xe(mr(r>=240?r-240:r+120,o,e),mr(r,o,e),mr(r<120?r+240:r-120,o,e),this.opacity)},clamp(){return new qe(Ti(this.h),Bt(this.s),Bt(this.l),jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=jt(this.opacity);return`${r===1?"hsl(":"hsla("}${Ti(this.h)}, ${Bt(this.s)*100}%, ${Bt(this.l)*100}%${r===1?")":`, ${r})`}`}}));function Ti(r){return r=(r||0)%360,r<0?r+360:r}function Bt(r){return Math.max(0,Math.min(1,r||0))}function mr(r,t,l){return(r<60?t+(l-t)*r/60:r<180?l:r<240?t+(l-t)*(240-r)/60:t)*255}const Tr=r=>()=>r;function Lf(r,t){return function(l){return r+l*t}}function Cf(r,t,l){return r=Math.pow(r,l),t=Math.pow(t,l)-r,l=1/l,function(e){return Math.pow(r+e*t,l)}}function Of(r){return(r=+r)==1?pl:function(t,l){return l-t?Cf(t,l,r):Tr(isNaN(t)?l:t)}}function pl(r,t){var l=t-r;return l?Lf(r,l):Tr(isNaN(r)?t:r)}const zi=function r(t){var l=Of(t);function e(o,a){var c=l((o=yr(o)).r,(a=yr(a)).r),g=l(o.g,a.g),m=l(o.b,a.b),u=pl(o.opacity,a.opacity);return function(n){return o.r=c(n),o.g=g(n),o.b=m(n),o.opacity=u(n),o+""}}return e.gamma=r,e}(1);function Vf(r,t){t||(t=[]);var l=r?Math.min(t.length,r.length):0,e=t.slice(),o;return function(a){for(o=0;o<l;++o)e[o]=r[o]*(1-a)+t[o]*a;return e}}function Wf(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Hf(r,t){var l=t?t.length:0,e=r?Math.min(l,r.length):0,o=new Array(e),a=new Array(l),c;for(c=0;c<e;++c)o[c]=zr(r[c],t[c]);for(;c<l;++c)a[c]=t[c];return function(g){for(c=0;c<e;++c)a[c]=o[c](g);return a}}function Gf(r,t){var l=new Date;return r=+r,t=+t,function(e){return l.setTime(r*(1-e)+t*e),l}}function er(r,t){return r=+r,t=+t,function(l){return r*(1-l)+t*l}}function Bf(r,t){var l={},e={},o;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in r?l[o]=zr(r[o],t[o]):e[o]=t[o];return function(a){for(o in l)e[o]=l[o](a);return e}}var br=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gr=new RegExp(br.source,"g");function Uf(r){return function(){return r}}function Ff(r){return function(t){return r(t)+""}}function Kf(r,t){var l=br.lastIndex=gr.lastIndex=0,e,o,a,c=-1,g=[],m=[];for(r=r+"",t=t+"";(e=br.exec(r))&&(o=gr.exec(t));)(a=o.index)>l&&(a=t.slice(l,a),g[c]?g[c]+=a:g[++c]=a),(e=e[0])===(o=o[0])?g[c]?g[c]+=o:g[++c]=o:(g[++c]=null,m.push({i:c,x:er(e,o)})),l=gr.lastIndex;return l<t.length&&(a=t.slice(l),g[c]?g[c]+=a:g[++c]=a),g.length<2?m[0]?Ff(m[0].x):Uf(t):(t=m.length,function(u){for(var n=0,i;n<t;++n)g[(i=m[n]).i]=i.x(u);return g.join("")})}function zr(r,t){var l=typeof t,e;return t==null||l==="boolean"?Tr(t):(l==="number"?er:l==="string"?(e=Sn(t))?(t=e,zi):Kf:t instanceof Sn?zi:t instanceof Date?Gf:Wf(t)?Vf:Array.isArray(t)?Hf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bf:er)(r,t)}function Qf(r,t){return r=+r,t=+t,function(l){return Math.round(r*(1-l)+t*l)}}function Yf(r){return function(){return r}}function Zf(r){return+r}var qi=[0,1];function Le(r){return r}function wr(r,t){return(t-=r=+r)?function(l){return(l-r)/t}:Yf(isNaN(t)?NaN:.5)}function Jf(r,t){var l;return r>t&&(l=r,r=t,t=l),function(e){return Math.max(r,Math.min(t,e))}}function Xf(r,t,l){var e=r[0],o=r[1],a=t[0],c=t[1];return o<e?(e=wr(o,e),a=l(c,a)):(e=wr(e,o),a=l(a,c)),function(g){return a(e(g))}}function Mf(r,t,l){var e=Math.min(r.length,t.length)-1,o=new Array(e),a=new Array(e),c=-1;for(r[e]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++c<e;)o[c]=wr(r[c],r[c+1]),a[c]=l(t[c],t[c+1]);return function(g){var m=mf(r,g,1,e)-1;return a[m](o[m](g))}}function qr(r,t){return t.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Pr(){var r=qi,t=qi,l=zr,e,o,a,c=Le,g,m,u;function n(){var f=Math.min(r.length,t.length);return c!==Le&&(c=Jf(r[0],r[f-1])),g=f>2?Mf:Xf,m=u=null,i}function i(f){return f==null||isNaN(f=+f)?a:(m||(m=g(r.map(e),t,l)))(e(c(f)))}return i.invert=function(f){return c(o((u||(u=g(t,r.map(e),er)))(f)))},i.domain=function(f){return arguments.length?(r=Array.from(f,Zf),n()):r.slice()},i.range=function(f){return arguments.length?(t=Array.from(f),n()):t.slice()},i.rangeRound=function(f){return t=Array.from(f),l=Qf,n()},i.clamp=function(f){return arguments.length?(c=f?!0:Le,n()):c!==Le},i.interpolate=function(f){return arguments.length?(l=f,n()):l},i.unknown=function(f){return arguments.length?(a=f,i):a},function(f,s){return e=f,o=s,n()}}function $f(){return Pr()(Le,Le)}function Sf(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function nr(r,t){if((l=(r=t?r.toExponential(t-1):r.toExponential()).indexOf("e"))<0)return null;var l,e=r.slice(0,l);return[e.length>1?e[0]+e.slice(2):e,+r.slice(l+1)]}function Rn(r){return r=nr(Math.abs(r)),r?r[1]:NaN}function jf(r,t){return function(l,e){for(var o=l.length,a=[],c=0,g=r[0],m=0;o>0&&g>0&&(m+g+1>e&&(g=Math.max(1,e-m)),a.push(l.substring(o-=g,o+g)),!((m+=g+1)>e));)g=r[c=(c+1)%r.length];return a.reverse().join(t)}}function eu(r){return function(t){return t.replace(/[0-9]/g,function(l){return r[+l]})}}var nu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jn(r){if(!(t=nu.exec(r)))throw new Error("invalid format: "+r);var t;return new Ir({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jn.prototype=Ir.prototype;function Ir(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tu(r){e:for(var t=r.length,l=1,e=-1,o;l<t;++l)switch(r[l]){case".":e=o=l;break;case"0":e===0&&(e=l),o=l;break;default:if(!+r[l])break e;e>0&&(e=0);break}return e>0?r.slice(0,e)+r.slice(o+1):r}var yl;function ru(r,t){var l=nr(r,t);if(!l)return r+"";var e=l[0],o=l[1],a=o-(yl=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,c=e.length;return a===c?e:a>c?e+new Array(a-c+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+nr(r,Math.max(0,t+a-1))[0]}function Pi(r,t){var l=nr(r,t);if(!l)return r+"";var e=l[0],o=l[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}const Ii={"%":(r,t)=>(r*100).toFixed(t),b:r=>Math.round(r).toString(2),c:r=>r+"",d:Sf,e:(r,t)=>r.toExponential(t),f:(r,t)=>r.toFixed(t),g:(r,t)=>r.toPrecision(t),o:r=>Math.round(r).toString(8),p:(r,t)=>Pi(r*100,t),r:Pi,s:ru,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function Ai(r){return r}var Di=Array.prototype.map,Li=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function iu(r){var t=r.grouping===void 0||r.thousands===void 0?Ai:jf(Di.call(r.grouping,Number),r.thousands+""),l=r.currency===void 0?"":r.currency[0]+"",e=r.currency===void 0?"":r.currency[1]+"",o=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?Ai:eu(Di.call(r.numerals,String)),c=r.percent===void 0?"%":r.percent+"",g=r.minus===void 0?"":r.minus+"",m=r.nan===void 0?"NaN":r.nan+"";function u(i){i=jn(i);var f=i.fill,s=i.align,d=i.sign,h=i.symbol,v=i.zero,y=i.width,_=i.comma,p=i.precision,b=i.trim,w=i.type;w==="n"?(_=!0,w="g"):Ii[w]||(p===void 0&&(p=12),b=!0,w="g"),(v||f==="0"&&s==="=")&&(v=!0,f="0",s="=");var N=h==="$"?l:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",R=h==="$"?e:/[%p]/.test(w)?c:"",z=Ii[w],O=/[defgprs%]/.test(w);p=p===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function L(q){var K=N,B=R,Y,ne,te;if(w==="c")B=z(q)+B,q="";else{q=+q;var Z=q<0||1/q<0;if(q=isNaN(q)?m:z(Math.abs(q),p),b&&(q=tu(q)),Z&&+q==0&&d!=="+"&&(Z=!1),K=(Z?d==="("?d:g:d==="-"||d==="("?"":d)+K,B=(w==="s"?Li[8+yl/3]:"")+B+(Z&&d==="("?")":""),O){for(Y=-1,ne=q.length;++Y<ne;)if(te=q.charCodeAt(Y),48>te||te>57){B=(te===46?o+q.slice(Y+1):q.slice(Y))+B,q=q.slice(0,Y);break}}}_&&!v&&(q=t(q,1/0));var le=K.length+q.length+B.length,ee=le<y?new Array(y-le+1).join(f):"";switch(_&&v&&(q=t(ee+q,ee.length?y-B.length:1/0),ee=""),s){case"<":q=K+q+B+ee;break;case"=":q=K+ee+q+B;break;case"^":q=ee.slice(0,le=ee.length>>1)+K+q+B+ee.slice(le);break;default:q=ee+K+q+B;break}return a(q)}return L.toString=function(){return i+""},L}function n(i,f){var s=u((i=jn(i),i.type="f",i)),d=Math.max(-8,Math.min(8,Math.floor(Rn(f)/3)))*3,h=Math.pow(10,-d),v=Li[8+d/3];return function(y){return s(h*y)+v}}return{format:u,formatPrefix:n}}var Ut,Ar,bl;lu({thousands:",",grouping:[3],currency:["$",""]});function lu(r){return Ut=iu(r),Ar=Ut.format,bl=Ut.formatPrefix,Ut}function ou(r){return Math.max(0,-Rn(Math.abs(r)))}function fu(r,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rn(t)/3)))*3-Rn(Math.abs(r)))}function uu(r,t){return r=Math.abs(r),t=Math.abs(t)-r,Math.max(0,Rn(t)-Rn(r))+1}function su(r,t,l,e){var o=bf(r,t,l),a;switch(e=jn(e??",f"),e.type){case"s":{var c=Math.max(Math.abs(r),Math.abs(t));return e.precision==null&&!isNaN(a=fu(o,c))&&(e.precision=a),bl(e,c)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=uu(o,Math.max(Math.abs(r),Math.abs(t))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=ou(o))&&(e.precision=a-(e.type==="%")*2);break}}return Ar(e)}function wl(r){var t=r.domain;return r.ticks=function(l){var e=t();return _r(e[0],e[e.length-1],l??10)},r.tickFormat=function(l,e){var o=t();return su(o[0],o[o.length-1],l??10,e)},r.nice=function(l){l==null&&(l=10);var e=t(),o=0,a=e.length-1,c=e[o],g=e[a],m,u,n=10;for(g<c&&(u=c,c=g,g=u,u=o,o=a,a=u);n-- >0;){if(u=pr(c,g,l),u===m)return e[o]=c,e[a]=g,t(e);if(u>0)c=Math.floor(c/u)*u,g=Math.ceil(g/u)*u;else if(u<0)c=Math.ceil(c*u)/u,g=Math.floor(g*u)/u;else break;m=u}return r},r}function Jt(){var r=$f();return r.copy=function(){return qr(r,Jt())},rt.apply(r,arguments),wl(r)}function au(r,t){r=r.slice();var l=0,e=r.length-1,o=r[l],a=r[e],c;return a<o&&(c=l,l=e,e=c,c=o,o=a,a=c),r[l]=t.floor(o),r[e]=t.ceil(a),r}function Ci(r){return Math.log(r)}function Oi(r){return Math.exp(r)}function cu(r){return-Math.log(-r)}function du(r){return-Math.exp(-r)}function mu(r){return isFinite(r)?+("1e"+r):r<0?0:r}function gu(r){return r===10?mu:r===Math.E?Math.exp:t=>Math.pow(r,t)}function hu(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),t=>Math.log(t)/r)}function Vi(r){return(t,l)=>-r(-t,l)}function vu(r){const t=r(Ci,Oi),l=t.domain;let e=10,o,a;function c(){return o=hu(e),a=gu(e),l()[0]<0?(o=Vi(o),a=Vi(a),r(cu,du)):r(Ci,Oi),t}return t.base=function(g){return arguments.length?(e=+g,c()):e},t.domain=function(g){return arguments.length?(l(g),c()):l()},t.ticks=g=>{const m=l();let u=m[0],n=m[m.length-1];const i=n<u;i&&([u,n]=[n,u]);let f=o(u),s=o(n),d,h;const v=g==null?10:+g;let y=[];if(!(e%1)&&s-f<v){if(f=Math.floor(f),s=Math.ceil(s),u>0){for(;f<=s;++f)for(d=1;d<e;++d)if(h=f<0?d/a(-f):d*a(f),!(h<u)){if(h>n)break;y.push(h)}}else for(;f<=s;++f)for(d=e-1;d>=1;--d)if(h=f>0?d/a(-f):d*a(f),!(h<u)){if(h>n)break;y.push(h)}y.length*2<v&&(y=_r(u,n,v))}else y=_r(f,s,Math.min(s-f,v)).map(a);return i?y.reverse():y},t.tickFormat=(g,m)=>{if(g==null&&(g=10),m==null&&(m=e===10?"s":","),typeof m!="function"&&(!(e%1)&&(m=jn(m)).precision==null&&(m.trim=!0),m=Ar(m)),g===1/0)return m;const u=Math.max(1,e*g/t.ticks().length);return n=>{let i=n/a(Math.round(o(n)));return i*e<e-.5&&(i*=e),i<=u?m(n):""}},t.nice=()=>l(au(l(),{floor:g=>a(Math.floor(o(g))),ceil:g=>a(Math.ceil(o(g)))})),t}function Dr(){const r=vu(Pr()).domain([1,10]);return r.copy=()=>qr(r,Dr()).base(r.base()),rt.apply(r,arguments),r}function Wi(r){return function(t){return t<0?-Math.pow(-t,r):Math.pow(t,r)}}function _u(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function pu(r){return r<0?-r*r:r*r}function yu(r){var t=r(Le,Le),l=1;function e(){return l===1?r(Le,Le):l===.5?r(_u,pu):r(Wi(l),Wi(1/l))}return t.exponent=function(o){return arguments.length?(l=+o,e()):l},wl(t)}function kl(){var r=yu(Pr());return r.copy=function(){return qr(r,kl()).exponent(r.exponent())},rt.apply(r,arguments),r}function bu(){return kl.apply(null,arguments).exponent(.5)}const Jn={x:Jt,y:Jt,z:Jt,r:bu};function wu(r){return r.constant?"symlog":r.base?"log":r.exponent?r.exponent()===.5?"sqrt":"pow":"other"}function Hi(r){return r}function ku(r){return t=>Math.log(r*t)}function Eu(r){return t=>r*Math.exp(t)}function xu(r){return t=>Math.sign(t)*Math.log1p(Math.abs(t/r))}function Nu(r){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*r}function Ft(r){return function(l){return l<0?-Math.pow(-l,r):Math.pow(l,r)}}function Ru(r){const t=wu(r);if(t==="log"){const l=Math.sign(r.domain()[0]);return{lift:ku(l),ground:Eu(l),scaleType:t}}return t==="pow"?{lift:Ft(1),ground:Ft(1/1),scaleType:t}:t==="sqrt"?{lift:Ft(.5),ground:Ft(1/.5),scaleType:t}:t==="symlog"?{lift:xu(1),ground:Nu(1),scaleType:t}:{lift:Hi,ground:Hi,scaleType:t}}function Tu(r,t){if(typeof r.range!="function")throw new Error("Scale method `range` must be a function");if(typeof r.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return r.domain();r.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",r.domain()),r.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",r.range());const{lift:l,ground:e}=Ru(r),o=r.domain()[0],a=Object.prototype.toString.call(o)==="[object Date]",[c,g]=r.domain().map(s=>l(a?s.getTime():s)),[m,u]=r.range(),n=t[0]||0,i=t[1]||0,f=(g-c)/(Math.abs(u-m)-n-i);return[c-n*f,i*f+g].map(s=>e(a?new Date(s):s))}function zu(r,t,l,e,o){let a,c;return o===!0?(a=0,c=100):(a=r==="r"?1:0,c=r==="y"?l:r==="r"?25:t),e===!0?[c,a]:[a,c]}function qu(r,t,l,e,o,a){return o?typeof o=="function"?o({width:t,height:l}):o:zu(r,t,l,e,a)}function Kt(r){return function([l,e,o,a,c,g,m,u,n,i]){if(e===null)return null;const f=qu(r,m,u,g,n,i),s=l===Jn[r]?l():l.copy();return s.domain(o),(!s.interpolator||typeof s.interpolator=="function"&&s.interpolator().name.startsWith("identity"))&&s.range(f),a&&s.domain(Tu(s,a)),(c===!0||typeof c=="number")&&(typeof s.nice=="function"?s.nice(typeof c=="number"?c:void 0):console.error(`[Layer Cake] You set \`${r}Nice: true\` but the ${r}Scale does not have a \`.nice\` method. Ignoring...`)),s}}function Qt([r,t]){return l=>{const e=r(l);return Array.isArray(e)?e.map(o=>t(o)):t(e)}}function Yt([r]){if(typeof r=="function"){if(typeof r.range=="function")return r.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Pu=r=>({element:r[0]&4,width:r[0]&256,height:r[0]&512,aspectRatio:r[0]&1024,containerWidth:r[0]&128,containerHeight:r[0]&64}),Gi=r=>({element:r[2],width:r[8],height:r[9],aspectRatio:r[10],containerWidth:r[7],containerHeight:r[6]});function Bi(r){let t,l,e;const o=r[90].default,a=Ye(o,r,r[89],Gi);return{c(){t=I("div"),a&&a.c(),this.h()},l(c){t=A(c,"DIV",{class:!0});var g=P(t);a&&a.l(g),g.forEach(k),this.h()},h(){E(t,"class","layercake-container svelte-1ll0j6t"),nt(()=>r[92].call(t)),ie(t,"position",r[5]),ie(t,"top",r[5]==="absolute"?"0":null),ie(t,"right",r[5]==="absolute"?"0":null),ie(t,"bottom",r[5]==="absolute"?"0":null),ie(t,"left",r[5]==="absolute"?"0":null),ie(t,"pointer-events",r[4]===!1?"none":null)},m(c,g){D(c,t,g),a&&a.m(t,null),r[91](t),l=$l(t,r[92].bind(t)),e=!0},p(c,g){a&&a.p&&(!e||g[0]&1988|g[2]&134217728)&&Ze(a,o,c,c[89],e?Xe(o,c[89],g,Pu):Je(c[89]),Gi),g[0]&32&&ie(t,"position",c[5]),g[0]&32&&ie(t,"top",c[5]==="absolute"?"0":null),g[0]&32&&ie(t,"right",c[5]==="absolute"?"0":null),g[0]&32&&ie(t,"bottom",c[5]==="absolute"?"0":null),g[0]&32&&ie(t,"left",c[5]==="absolute"?"0":null),g[0]&16&&ie(t,"pointer-events",c[4]===!1?"none":null)},i(c){e||(C(a,c),e=!0)},o(c){W(a,c),e=!1},d(c){c&&k(t),a&&a.d(c),r[91](null),l()}}}function Iu(r){let t,l,e=(r[3]===!0||typeof window<"u")&&Bi(r);return{c(){e&&e.c(),t=_e()},l(o){e&&e.l(o),t=_e()},m(o,a){e&&e.m(o,a),D(o,t,a),l=!0},p(o,a){o[3]===!0||typeof window<"u"?e?(e.p(o,a),a[0]&8&&C(e,1)):(e=Bi(o),e.c(),C(e,1),e.m(t.parentNode,t)):e&&(Re(),W(e,1,1,()=>{e=null}),Te())},i(o){l||(C(e),l=!0)},o(o){W(e),l=!1},d(o){e&&e.d(o),o&&k(t)}}}function Au(r,t,l){let e,o,a,c,g,m,u,n,i,f,s,d,h,v,y,_,p,b,w,N,R,z,O,L,q,K,B,Y,ne,te,Z,le,ee,se,ae,ce,fe,ke,J,he,we,{$$slots:ot={},$$scope:Tn}=t,{ssr:zn=!1}=t,{pointerEvents:qn=!0}=t,{position:Me="relative"}=t,{percentRange:ze=!1}=t,{width:rn=void 0}=t,{height:ln=void 0}=t,{containerWidth:Ve=rn||100}=t,{containerHeight:Ee=ln||100}=t,{element:$e=void 0}=t,{x:We=void 0}=t,{y:He=void 0}=t,{z:on=void 0}=t,{r:fn=void 0}=t,{data:un=[]}=t,{xDomain:sn=void 0}=t,{yDomain:an=void 0}=t,{zDomain:cn=void 0}=t,{rDomain:dn=void 0}=t,{xNice:ft=!1}=t,{yNice:ut=!1}=t,{zNice:st=!1}=t,{rNice:at=!1}=t,{xPadding:ct=void 0}=t,{yPadding:dt=void 0}=t,{zPadding:mt=void 0}=t,{rPadding:gt=void 0}=t,{xScale:ht=Jn.x}=t,{yScale:Pn=Jn.y}=t,{zScale:vt=Jn.z}=t,{rScale:_t=Jn.r}=t,{xRange:mn=void 0}=t,{yRange:gn=void 0}=t,{zRange:hn=void 0}=t,{rRange:vn=void 0}=t,{xReverse:pt=!1}=t,{yReverse:yt=typeof Pn.bandwidth!="function"}=t,{zReverse:bt=!1}=t,{rReverse:wt=!1}=t,{padding:kt={}}=t,{extents:Et={}}=t,{flatData:xt=void 0}=t,{custom:Nt={}}=t,ir=!1;Xl(()=>{ir=!0});const re={},Ue=Q(ze);V(r,Ue,x=>l(128,ke=x));const _n=Q(Ve);V(r,_n,x=>l(7,fe=x));const pn=Q(Ee);V(r,pn,x=>l(6,ce=x));const Rt=Q(dr(Et));V(r,Rt,x=>l(127,ae=x));const Tt=Q(un);V(r,Tt,x=>l(126,se=x));const In=Q(xt||un);V(r,In,x=>l(125,ee=x));const zt=Q(kt);V(r,zt,x=>l(124,le=x));const yn=Q(Qe(We));V(r,yn,x=>l(123,Z=x));const bn=Q(Qe(He));V(r,bn,x=>l(122,te=x));const wn=Q(Qe(on));V(r,wn,x=>l(121,ne=x));const kn=Q(Qe(fn));V(r,kn,x=>l(120,Y=x));const qt=Q(sn);V(r,qt,x=>l(119,B=x));const Pt=Q(an);V(r,Pt,x=>l(118,K=x));const It=Q(cn);V(r,It,x=>l(117,q=x));const At=Q(dn);V(r,At,x=>l(116,L=x));const An=Q(ft);V(r,An,x=>l(115,O=x));const Dn=Q(ut);V(r,Dn,x=>l(114,z=x));const Ln=Q(st);V(r,Ln,x=>l(113,R=x));const Cn=Q(at);V(r,Cn,x=>l(112,N=x));const On=Q(pt);V(r,On,x=>l(111,w=x));const Vn=Q(yt);V(r,Vn,x=>l(110,b=x));const Wn=Q(bt);V(r,Wn,x=>l(109,p=x));const Hn=Q(wt);V(r,Hn,x=>l(108,_=x));const Gn=Q(ct);V(r,Gn,x=>l(107,y=x));const Bn=Q(dt);V(r,Bn,x=>l(106,v=x));const Un=Q(mt);V(r,Un,x=>l(105,h=x));const Fn=Q(gt);V(r,Fn,x=>l(104,d=x));const Dt=Q(mn);V(r,Dt,x=>l(103,s=x));const Lt=Q(gn);V(r,Lt,x=>l(102,f=x));const Ct=Q(hn);V(r,Ct,x=>l(101,i=x));const Ot=Q(vn);V(r,Ot,x=>l(100,n=x));const Kn=Q(ht);V(r,Kn,x=>l(99,u=x));const Qn=Q(Pn);V(r,Qn,x=>l(98,m=x));const Yn=Q(vt);V(r,Yn,x=>l(97,g=x));const Zn=Q(_t);V(r,Zn,x=>l(96,c=x));const Vt=Q(re);V(r,Vt,x=>l(94,o=x));const Wt=Q(Nt);V(r,Wt,x=>l(95,a=x));const Or=ue([yn,bn,wn,kn],([x,Be,Ie,ve])=>{const Se={};return x&&(Se.x=x),Be&&(Se.y=Be),Ie&&(Se.z=Ie),ve&&(Se.r=ve),Se}),Vr=ue([zt,_n,pn],([x])=>Object.assign({top:0,right:0,bottom:0,left:0},x)),Wr=ue([_n,pn,Vr],([x,Be,Ie])=>{const ve={};return ve.top=Ie.top,ve.right=x-Ie.right,ve.bottom=Be-Ie.bottom,ve.left=Ie.left,ve.width=ve.right-ve.left,ve.height=ve.bottom-ve.top,ve.width<=0&&ir===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),ve.height<=0&&ir===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),ve}),Fe=ue([Wr],([x])=>x.width);V(r,Fe,x=>l(8,J=x));const Ke=ue([Wr],([x])=>x.height);V(r,Ke,x=>l(9,he=x));const Ge=ue([In,Or,Rt,Kn,Qn,Zn,Yn],([x,Be,Ie,ve,Se,Vl,Wl])=>{const Hl={x:ve,y:Se,r:Vl,z:Wl},ar=dr(Be,Ie),Gl=Object.fromEntries(Object.keys(ar).map(cr=>[cr,Hl[cr]]));return Object.keys(ar).length>0?{...of(x,ar,Gl),...Ie}:{}}),Hr=ue([Ge,qt],Ht("x")),Gr=ue([Ge,Pt],Ht("y")),Br=ue([Ge,It],Ht("z")),Ur=ue([Ge,At],Ht("r")),lr=ue([Kn,Ge,Hr,Gn,An,On,Fe,Ke,Dt,Ue],Kt("x")),Tl=ue([yn,lr],Qt),or=ue([Qn,Ge,Gr,Bn,Dn,Vn,Fe,Ke,Lt,Ue],Kt("y")),zl=ue([bn,or],Qt),fr=ue([Yn,Ge,Br,Un,Ln,Wn,Fe,Ke,Ct,Ue],Kt("z")),ql=ue([wn,fr],Qt),ur=ue([Zn,Ge,Ur,Fn,Cn,Hn,Fe,Ke,Ot,Ue],Kt("r")),Pl=ue([kn,ur],Qt),Il=ue([lr],Yt),Al=ue([or],Yt),Dl=ue([fr],Yt),Ll=ue([ur],Yt),sr=ue([Fe,Ke],([x,Be])=>x/Be);V(r,sr,x=>l(10,we=x));function Cl(x){Xt[x?"unshift":"push"](()=>{$e=x,l(2,$e)})}function Ol(){Ve=this.clientWidth,Ee=this.clientHeight,l(0,Ve),l(1,Ee)}return r.$$set=x=>{"ssr"in x&&l(3,zn=x.ssr),"pointerEvents"in x&&l(4,qn=x.pointerEvents),"position"in x&&l(5,Me=x.position),"percentRange"in x&&l(51,ze=x.percentRange),"width"in x&&l(52,rn=x.width),"height"in x&&l(53,ln=x.height),"containerWidth"in x&&l(0,Ve=x.containerWidth),"containerHeight"in x&&l(1,Ee=x.containerHeight),"element"in x&&l(2,$e=x.element),"x"in x&&l(54,We=x.x),"y"in x&&l(55,He=x.y),"z"in x&&l(56,on=x.z),"r"in x&&l(57,fn=x.r),"data"in x&&l(58,un=x.data),"xDomain"in x&&l(59,sn=x.xDomain),"yDomain"in x&&l(60,an=x.yDomain),"zDomain"in x&&l(61,cn=x.zDomain),"rDomain"in x&&l(62,dn=x.rDomain),"xNice"in x&&l(63,ft=x.xNice),"yNice"in x&&l(64,ut=x.yNice),"zNice"in x&&l(65,st=x.zNice),"rNice"in x&&l(66,at=x.rNice),"xPadding"in x&&l(67,ct=x.xPadding),"yPadding"in x&&l(68,dt=x.yPadding),"zPadding"in x&&l(69,mt=x.zPadding),"rPadding"in x&&l(70,gt=x.rPadding),"xScale"in x&&l(71,ht=x.xScale),"yScale"in x&&l(72,Pn=x.yScale),"zScale"in x&&l(73,vt=x.zScale),"rScale"in x&&l(74,_t=x.rScale),"xRange"in x&&l(75,mn=x.xRange),"yRange"in x&&l(76,gn=x.yRange),"zRange"in x&&l(77,hn=x.zRange),"rRange"in x&&l(78,vn=x.rRange),"xReverse"in x&&l(79,pt=x.xReverse),"yReverse"in x&&l(80,yt=x.yReverse),"zReverse"in x&&l(81,bt=x.zReverse),"rReverse"in x&&l(82,wt=x.rReverse),"padding"in x&&l(83,kt=x.padding),"extents"in x&&l(84,Et=x.extents),"flatData"in x&&l(85,xt=x.flatData),"custom"in x&&l(86,Nt=x.custom),"$$scope"in x&&l(89,Tn=x.$$scope)},r.$$.update=()=>{r.$$.dirty[1]&8388608&&We&&l(87,re.x=We,re),r.$$.dirty[1]&16777216&&He&&l(87,re.y=He,re),r.$$.dirty[1]&33554432&&on&&l(87,re.z=on,re),r.$$.dirty[1]&67108864&&fn&&l(87,re.r=fn,re),r.$$.dirty[1]&268435456&&sn&&l(87,re.xDomain=sn,re),r.$$.dirty[1]&536870912&&an&&l(87,re.yDomain=an,re),r.$$.dirty[1]&1073741824&&cn&&l(87,re.zDomain=cn,re),r.$$.dirty[2]&1&&dn&&l(87,re.rDomain=dn,re),r.$$.dirty[2]&8192&&mn&&l(87,re.xRange=mn,re),r.$$.dirty[2]&16384&&gn&&l(87,re.yRange=gn,re),r.$$.dirty[2]&32768&&hn&&l(87,re.zRange=hn,re),r.$$.dirty[2]&65536&&vn&&l(87,re.rRange=vn,re),r.$$.dirty[1]&1048576&&X(Ue,ke=ze,ke),r.$$.dirty[0]&1&&X(_n,fe=Ve,fe),r.$$.dirty[0]&2&&X(pn,ce=Ee,ce),r.$$.dirty[2]&4194304&&X(Rt,ae=dr(Et),ae),r.$$.dirty[1]&134217728&&X(Tt,se=un,se),r.$$.dirty[1]&134217728|r.$$.dirty[2]&8388608&&X(In,ee=xt||un,ee),r.$$.dirty[2]&2097152&&X(zt,le=kt,le),r.$$.dirty[1]&8388608&&X(yn,Z=Qe(We),Z),r.$$.dirty[1]&16777216&&X(bn,te=Qe(He),te),r.$$.dirty[1]&33554432&&X(wn,ne=Qe(on),ne),r.$$.dirty[1]&67108864&&X(kn,Y=Qe(fn),Y),r.$$.dirty[1]&268435456&&X(qt,B=sn,B),r.$$.dirty[1]&536870912&&X(Pt,K=an,K),r.$$.dirty[1]&1073741824&&X(It,q=cn,q),r.$$.dirty[2]&1&&X(At,L=dn,L),r.$$.dirty[2]&2&&X(An,O=ft,O),r.$$.dirty[2]&4&&X(Dn,z=ut,z),r.$$.dirty[2]&8&&X(Ln,R=st,R),r.$$.dirty[2]&16&&X(Cn,N=at,N),r.$$.dirty[2]&131072&&X(On,w=pt,w),r.$$.dirty[2]&262144&&X(Vn,b=yt,b),r.$$.dirty[2]&524288&&X(Wn,p=bt,p),r.$$.dirty[2]&1048576&&X(Hn,_=wt,_),r.$$.dirty[2]&32&&X(Gn,y=ct,y),r.$$.dirty[2]&64&&X(Bn,v=dt,v),r.$$.dirty[2]&128&&X(Un,h=mt,h),r.$$.dirty[2]&256&&X(Fn,d=gt,d),r.$$.dirty[2]&8192&&X(Dt,s=mn,s),r.$$.dirty[2]&16384&&X(Lt,f=gn,f),r.$$.dirty[2]&32768&&X(Ct,i=hn,i),r.$$.dirty[2]&65536&&X(Ot,n=vn,n),r.$$.dirty[2]&512&&X(Kn,u=ht,u),r.$$.dirty[2]&1024&&X(Qn,m=Pn,m),r.$$.dirty[2]&2048&&X(Yn,g=vt,g),r.$$.dirty[2]&4096&&X(Zn,c=_t,c),r.$$.dirty[2]&16777216&&X(Wt,a=Nt,a),r.$$.dirty[2]&33554432&&X(Vt,o=re,o),r.$$.dirty[2]&67108864&&Ml("LayerCake",e)},e={activeGetters:Or,width:Fe,height:Ke,percentRange:Ue,aspectRatio:sr,containerWidth:_n,containerHeight:pn,x:yn,y:bn,z:wn,r:kn,custom:Wt,data:Tt,xNice:An,yNice:Dn,zNice:Ln,rNice:Cn,xReverse:On,yReverse:Vn,zReverse:Wn,rReverse:Hn,xPadding:Gn,yPadding:Bn,zPadding:Un,rPadding:Fn,padding:Vr,flatData:In,extents:Ge,xDomain:Hr,yDomain:Gr,zDomain:Br,rDomain:Ur,xRange:Il,yRange:Al,zRange:Dl,rRange:Ll,config:Vt,xScale:lr,xGet:Tl,yScale:or,yGet:zl,zScale:fr,zGet:ql,rScale:ur,rGet:Pl},[Ve,Ee,$e,zn,qn,Me,ce,fe,J,he,we,Ue,_n,pn,Rt,Tt,In,zt,yn,bn,wn,kn,qt,Pt,It,At,An,Dn,Ln,Cn,On,Vn,Wn,Hn,Gn,Bn,Un,Fn,Dt,Lt,Ct,Ot,Kn,Qn,Yn,Zn,Vt,Wt,Fe,Ke,sr,ze,rn,ln,We,He,on,fn,un,sn,an,cn,dn,ft,ut,st,at,ct,dt,mt,gt,ht,Pn,vt,_t,mn,gn,hn,vn,pt,yt,bt,wt,kt,Et,xt,Nt,re,e,Tn,ot,Cl,Ol]}class Lr extends de{constructor(t){super(),me(this,t,Au,Iu,ge,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Du=r=>({element:r&1}),Ui=r=>({element:r[0]}),Lu=r=>({element:r&1}),Fi=r=>({element:r[0]});function Cu(r){let t,l,e,o,a;const c=r[12].defs,g=Ye(c,r,r[11],Fi),m=r[12].default,u=Ye(m,r,r[11],Ui);return{c(){t=ye("svg"),l=ye("defs"),g&&g.c(),e=ye("g"),u&&u.c(),this.h()},l(n){t=be(n,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var i=P(t);l=be(i,"defs",{});var f=P(l);g&&g.l(f),f.forEach(k),e=be(i,"g",{class:!0,transform:!0});var s=P(e);u&&u.l(s),s.forEach(k),i.forEach(k),this.h()},h(){E(e,"class","layercake-layout-svg_g"),E(e,"transform",o="translate("+r[7].left+", "+r[7].top+")"),E(t,"class","layercake-layout-svg svelte-17l4rdd"),E(t,"viewBox",r[4]),E(t,"width",r[5]),E(t,"height",r[6]),ie(t,"z-index",r[2]),ie(t,"pointer-events",r[3]===!1?"none":null)},m(n,i){D(n,t,i),T(t,l),g&&g.m(l,null),T(t,e),u&&u.m(e,null),r[13](e),r[14](t),a=!0},p(n,[i]){g&&g.p&&(!a||i&2049)&&Ze(g,c,n,n[11],a?Xe(c,n[11],i,Lu):Je(n[11]),Fi),u&&u.p&&(!a||i&2049)&&Ze(u,m,n,n[11],a?Xe(m,n[11],i,Du):Je(n[11]),Ui),(!a||i&128&&o!==(o="translate("+n[7].left+", "+n[7].top+")"))&&E(e,"transform",o),(!a||i&16)&&E(t,"viewBox",n[4]),(!a||i&32)&&E(t,"width",n[5]),(!a||i&64)&&E(t,"height",n[6]),i&4&&ie(t,"z-index",n[2]),i&8&&ie(t,"pointer-events",n[3]===!1?"none":null)},i(n){a||(C(g,n),C(u,n),a=!0)},o(n){W(g,n),W(u,n),a=!1},d(n){n&&k(t),g&&g.d(n),u&&u.d(n),r[13](null),r[14](null)}}}function Ou(r,t,l){let e,o,a,{$$slots:c={},$$scope:g}=t,{element:m=void 0}=t,{innerElement:u=void 0}=t,{zIndex:n=void 0}=t,{pointerEvents:i=void 0}=t,{viewBox:f=void 0}=t;const{containerWidth:s,containerHeight:d,padding:h}=tt("LayerCake");V(r,s,_=>l(5,e=_)),V(r,d,_=>l(6,o=_)),V(r,h,_=>l(7,a=_));function v(_){Xt[_?"unshift":"push"](()=>{u=_,l(1,u)})}function y(_){Xt[_?"unshift":"push"](()=>{m=_,l(0,m)})}return r.$$set=_=>{"element"in _&&l(0,m=_.element),"innerElement"in _&&l(1,u=_.innerElement),"zIndex"in _&&l(2,n=_.zIndex),"pointerEvents"in _&&l(3,i=_.pointerEvents),"viewBox"in _&&l(4,f=_.viewBox),"$$scope"in _&&l(11,g=_.$$scope)},[m,u,n,i,f,e,o,a,s,d,h,g,c,v,y]}class tr extends de{constructor(t){super(),me(this,t,Ou,Cu,ge,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Ki(r,t,l){const e=r.slice();return e[20]=t[l],e[22]=l,e}function Qi(r){let t,l;return{c(){t=ye("line"),this.h()},l(e){t=be(e,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(t).forEach(k),this.h()},h(){E(t,"class","gridline svelte-1eat80j"),E(t,"y1",l=r[12]*-1),E(t,"y2","0"),E(t,"x1","0"),E(t,"x2","0")},m(e,o){D(e,t,o)},p(e,o){o&4096&&l!==(l=e[12]*-1)&&E(t,"y1",l)},d(e){e&&k(t)}}}function Yi(r){let t,l,e;return{c(){t=ye("line"),this.h()},l(o){t=be(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(t).forEach(k),this.h()},h(){E(t,"class","tick-mark svelte-1eat80j"),E(t,"y1",0),E(t,"y2",6),E(t,"x1",l=r[5]||r[8]?r[9].bandwidth()/2:0),E(t,"x2",e=r[5]||r[8]?r[9].bandwidth()/2:0)},m(o,a){D(o,t,a)},p(o,a){a&800&&l!==(l=o[5]||o[8]?o[9].bandwidth()/2:0)&&E(t,"x1",l),a&800&&e!==(e=o[5]||o[8]?o[9].bandwidth()/2:0)&&E(t,"x2",e)},d(o){o&&k(t)}}}function Zi(r,t){let l,e,o,a=t[4](t[20])+"",c,g,m,u,n,i=t[0]!==!1&&Qi(t),f=t[1]===!0&&Yi(t);return{key:r,first:null,c(){l=ye("g"),i&&i.c(),e=_e(),f&&f.c(),o=ye("text"),c=H(a),this.h()},l(s){l=be(s,"g",{class:!0,transform:!0});var d=P(l);i&&i.l(d),e=_e(),f&&f.l(d),o=be(d,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,class:!0});var h=P(o);c=G(h,a),h.forEach(k),d.forEach(k),this.h()},h(){E(o,"x",g=t[5]||t[8]?t[9].bandwidth()/2:0),E(o,"y",t[6]),E(o,"dx",""),E(o,"dy",""),E(o,"text-anchor",m=t[18](t[22])),E(o,"class","svelte-1eat80j"),E(l,"class",u="tick tick-"+t[22]+" svelte-1eat80j"),E(l,"transform",n="translate("+t[9](t[20])+","+Math.max(...t[11])+")"),this.first=l},m(s,d){D(s,l,d),i&&i.m(l,null),T(l,e),f&&f.m(l,null),T(l,o),T(o,c)},p(s,d){t=s,t[0]!==!1?i?i.p(t,d):(i=Qi(t),i.c(),i.m(l,e)):i&&(i.d(1),i=null),t[1]===!0?f?f.p(t,d):(f=Yi(t),f.c(),f.m(l,o)):f&&(f.d(1),f=null),d&1040&&a!==(a=t[4](t[20])+"")&&Ne(c,a),d&800&&g!==(g=t[5]||t[8]?t[9].bandwidth()/2:0)&&E(o,"x",g),d&64&&E(o,"y",t[6]),d&1024&&m!==(m=t[18](t[22]))&&E(o,"text-anchor",m),d&1024&&u!==(u="tick tick-"+t[22]+" svelte-1eat80j")&&E(l,"class",u),d&3584&&n!==(n="translate("+t[9](t[20])+","+Math.max(...t[11])+")")&&E(l,"transform",n)},d(s){s&&k(l),i&&i.d(),f&&f.d()}}}function Ji(r){let t,l,e;return{c(){t=ye("line"),this.h()},l(o){t=be(o,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0}),P(t).forEach(k),this.h()},h(){E(t,"class","baseline svelte-1eat80j"),E(t,"y1",l=r[12]+.5),E(t,"y2",e=r[12]+.5),E(t,"x1","0"),E(t,"x2",r[13])},m(o,a){D(o,t,a)},p(o,a){a&4096&&l!==(l=o[12]+.5)&&E(t,"y1",l),a&4096&&e!==(e=o[12]+.5)&&E(t,"y2",e),a&8192&&E(t,"x2",o[13])},d(o){o&&k(t)}}}function Vu(r){let t,l,e=[],o=new Map,a,c,g,m,u,n=r[10];const i=s=>s[20];for(let s=0;s<n.length;s+=1){let d=Ki(r,n,s),h=i(d);o.set(h,e[s]=Zi(h,d))}let f=r[2]===!0&&Ji(r);return{c(){t=H(`Test

`),l=ye("g");for(let s=0;s<e.length;s+=1)e[s].c();a=_e(),f&&f.c(),c=ye("text"),g=H(r[7]),this.h()},l(s){t=G(s,`Test

`),l=be(s,"g",{class:!0});var d=P(l);for(let v=0;v<e.length;v+=1)e[v].l(d);a=_e(),f&&f.l(d),c=be(d,"text",{class:!0,y:!0,x:!0});var h=P(c);g=G(h,r[7]),h.forEach(k),d.forEach(k),this.h()},h(){E(c,"class","axis-label svelte-1eat80j"),E(c,"y",m=r[12]+35),E(c,"x",u=r[13]/2),E(l,"class","axis x-axis svelte-1eat80j"),Ae(l,"snapTicks",r[3])},m(s,d){D(s,t,d),D(s,l,d);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(l,null);T(l,a),f&&f.m(l,null),T(l,c),T(c,g)},p(s,[d]){d&270195&&(n=s[10],e=Er(e,d,i,1,s,n,o,l,ul,Zi,a,Ki)),s[2]===!0?f?f.p(s,d):(f=Ji(s),f.c(),f.m(l,c)):f&&(f.d(1),f=null),d&128&&Ne(g,s[7]),d&4096&&m!==(m=s[12]+35)&&E(c,"y",m),d&8192&&u!==(u=s[13]/2)&&E(c,"x",u),d&8&&Ae(l,"snapTicks",s[3])},i:oe,o:oe,d(s){s&&k(t),s&&k(l);for(let d=0;d<e.length;d+=1)e[d].d();f&&f.d()}}}function Wu(r,t,l){let e,o,a,c,g,m;const{width:u,height:n,xScale:i,yRange:f}=tt("LayerCake");V(r,u,R=>l(13,m=R)),V(r,n,R=>l(12,g=R)),V(r,i,R=>l(9,a=R)),V(r,f,R=>l(11,c=R));let{gridlines:s=!0}=t,{tickMarks:d=!1}=t,{baseline:h=!1}=t,{snapTicks:v=!1}=t,{formatTick:y=R=>R}=t,{ticks:_=void 0}=t,{xTick:p=0}=t,{yTick:b=16}=t,{xAxisTitle:w=""}=t;function N(R){if(v===!0){if(R===0)return"start";if(R===o.length-1)return"end"}return"middle"}return r.$$set=R=>{"gridlines"in R&&l(0,s=R.gridlines),"tickMarks"in R&&l(1,d=R.tickMarks),"baseline"in R&&l(2,h=R.baseline),"snapTicks"in R&&l(3,v=R.snapTicks),"formatTick"in R&&l(4,y=R.formatTick),"ticks"in R&&l(19,_=R.ticks),"xTick"in R&&l(5,p=R.xTick),"yTick"in R&&l(6,b=R.yTick),"xAxisTitle"in R&&l(7,w=R.xAxisTitle)},r.$$.update=()=>{r.$$.dirty&512&&l(8,e=typeof a.bandwidth=="function"),r.$$.dirty&525056&&l(10,o=Array.isArray(_)?_:e?a.domain():typeof _=="function"?_(a.ticks()):a.ticks(_))},[s,d,h,v,y,p,b,w,e,a,o,c,g,m,u,n,i,f,N,_]}class El extends de{constructor(t){super(),me(this,t,Wu,Vu,ge,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:19,xTick:5,yTick:6,xAxisTitle:7})}}function Xi(r,t,l){const e=r.slice();return e[17]=t[l],e}function Mi(r){let t,l,e;return{c(){t=ye("line"),this.h()},l(o){t=be(o,"line",{class:!0,x2:!0,y1:!0,y2:!0}),P(t).forEach(k),this.h()},h(){E(t,"class","gridline svelte-qjm35e"),E(t,"x2","100%"),E(t,"y1",l=r[4]+(r[8]?r[9].bandwidth()/2:0)),E(t,"y2",e=r[4]+(r[8]?r[9].bandwidth()/2:0))},m(o,a){D(o,t,a)},p(o,a){a&784&&l!==(l=o[4]+(o[8]?o[9].bandwidth()/2:0))&&E(t,"y1",l),a&784&&e!==(e=o[4]+(o[8]?o[9].bandwidth()/2:0))&&E(t,"y2",e)},d(o){o&&k(t)}}}function $i(r){let t,l,e,o;return{c(){t=ye("line"),this.h()},l(a){t=be(a,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),P(t).forEach(k),this.h()},h(){E(t,"class","tick-mark svelte-qjm35e"),E(t,"x1","0"),E(t,"x2",l=r[8]?-6:6),E(t,"y1",e=r[4]+(r[8]?r[9].bandwidth()/2:0)),E(t,"y2",o=r[4]+(r[8]?r[9].bandwidth()/2:0))},m(a,c){D(a,t,c)},p(a,c){c&256&&l!==(l=a[8]?-6:6)&&E(t,"x2",l),c&784&&e!==(e=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(t,"y1",e),c&784&&o!==(o=a[4]+(a[8]?a[9].bandwidth()/2:0))&&E(t,"y2",o)},d(a){a&&k(t)}}}function Si(r,t){let l,e,o,a=t[2](t[17])+"",c,g,m,u,n,i,f=t[0]!==!1&&Mi(t),s=t[1]===!0&&$i(t);return{key:r,first:null,c(){l=ye("g"),f&&f.c(),e=_e(),s&&s.c(),o=ye("text"),c=H(a),this.h()},l(d){l=be(d,"g",{class:!0,transform:!0});var h=P(l);f&&f.l(h),e=_e(),s&&s.l(h),o=be(h,"text",{x:!0,y:!0,dx:!0,dy:!0,style:!0,class:!0});var v=P(o);c=G(v,a),v.forEach(k),h.forEach(k),this.h()},h(){E(o,"x",t[3]),E(o,"y",g=t[4]+(t[8]?t[9].bandwidth()/2:0)),E(o,"dx",m=t[8]?-9:t[5]),E(o,"dy",u=t[8]?4:t[6]),ie(o,"text-anchor",t[8]?"end":t[7]),E(o,"class","svelte-qjm35e"),E(l,"class",n="tick tick-"+t[17]+" svelte-qjm35e"),E(l,"transform",i="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")"),this.first=l},m(d,h){D(d,l,h),f&&f.m(l,null),T(l,e),s&&s.m(l,null),T(l,o),T(o,c)},p(d,h){t=d,t[0]!==!1?f?f.p(t,h):(f=Mi(t),f.c(),f.m(l,e)):f&&(f.d(1),f=null),t[1]===!0?s?s.p(t,h):(s=$i(t),s.c(),s.m(l,o)):s&&(s.d(1),s=null),h&1028&&a!==(a=t[2](t[17])+"")&&Ne(c,a),h&8&&E(o,"x",t[3]),h&784&&g!==(g=t[4]+(t[8]?t[9].bandwidth()/2:0))&&E(o,"y",g),h&288&&m!==(m=t[8]?-9:t[5])&&E(o,"dx",m),h&320&&u!==(u=t[8]?4:t[6])&&E(o,"dy",u),h&384&&ie(o,"text-anchor",t[8]?"end":t[7]),h&1024&&n!==(n="tick tick-"+t[17]+" svelte-qjm35e")&&E(l,"class",n),h&7936&&i!==(i="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&E(l,"transform",i)},d(d){d&&k(l),f&&f.d(),s&&s.d()}}}function Hu(r){let t,l=[],e=new Map,o,a=r[10];const c=g=>g[17];for(let g=0;g<a.length;g+=1){let m=Xi(r,a,g),u=c(m);e.set(u,l[g]=Si(u,m))}return{c(){t=ye("g");for(let g=0;g<l.length;g+=1)l[g].c();this.h()},l(g){t=be(g,"g",{class:!0,transform:!0});var m=P(t);for(let u=0;u<l.length;u+=1)l[u].l(m);m.forEach(k),this.h()},h(){E(t,"class","axis y-axis"),E(t,"transform",o="translate("+-r[11].left+", 0)")},m(g,m){D(g,t,m);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(t,null)},p(g,[m]){m&8191&&(a=g[10],l=Er(l,m,c,1,g,a,e,t,ul,Si,null,Xi)),m&2048&&o!==(o="translate("+-g[11].left+", 0)")&&E(t,"transform",o)},i:oe,o:oe,d(g){g&&k(t);for(let m=0;m<l.length;m+=1)l[m].d()}}}function Gu(r,t,l){let e,o,a,c,g;const{padding:m,xRange:u,yScale:n}=tt("LayerCake");V(r,m,b=>l(11,c=b)),V(r,u,b=>l(12,g=b)),V(r,n,b=>l(9,a=b));let{gridlines:i=!0}=t,{tickMarks:f=!1}=t,{formatTick:s=b=>b}=t,{ticks:d=4}=t,{xTick:h=0}=t,{yTick:v=0}=t,{dxTick:y=0}=t,{dyTick:_=-4}=t,{textAnchor:p="start"}=t;return r.$$set=b=>{"gridlines"in b&&l(0,i=b.gridlines),"tickMarks"in b&&l(1,f=b.tickMarks),"formatTick"in b&&l(2,s=b.formatTick),"ticks"in b&&l(16,d=b.ticks),"xTick"in b&&l(3,h=b.xTick),"yTick"in b&&l(4,v=b.yTick),"dxTick"in b&&l(5,y=b.dxTick),"dyTick"in b&&l(6,_=b.dyTick),"textAnchor"in b&&l(7,p=b.textAnchor)},r.$$.update=()=>{r.$$.dirty&512&&l(8,e=typeof a.bandwidth=="function"),r.$$.dirty&66304&&l(10,o=Array.isArray(d)?d:e?a.domain():typeof d=="function"?d(a.ticks()):a.ticks(d))},[i,f,s,h,v,y,_,p,e,a,o,c,g,m,u,n,d]}class xl extends de{constructor(t){super(),me(this,t,Gu,Hu,ge,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function ji(r,t,l){const e=r.slice();return e[15]=t[l],e}function el(r){let t,l,e,o;return{c(){t=ye("circle"),this.h()},l(a){t=be(a,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),P(t).forEach(k),this.h()},h(){E(t,"cx",l=r[4](r[15])+(r[5].bandwidth?r[5].bandwidth()/2:0)),E(t,"cy",e=r[6](r[15])+(r[7].bandwidth?r[7].bandwidth()/2:0)),E(t,"r",r[0]),E(t,"fill",o=r[8](r[15])),E(t,"stroke",r[1]),E(t,"stroke-width",r[2])},m(a,c){D(a,t,c)},p(a,c){c&56&&l!==(l=a[4](a[15])+(a[5].bandwidth?a[5].bandwidth()/2:0))&&E(t,"cx",l),c&200&&e!==(e=a[6](a[15])+(a[7].bandwidth?a[7].bandwidth()/2:0))&&E(t,"cy",e),c&1&&E(t,"r",a[0]),c&264&&o!==(o=a[8](a[15]))&&E(t,"fill",o),c&2&&E(t,"stroke",a[1]),c&4&&E(t,"stroke-width",a[2])},d(a){a&&k(t)}}}function Bu(r){let t,l=r[3],e=[];for(let o=0;o<l.length;o+=1)e[o]=el(ji(r,l,o));return{c(){t=ye("g");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){t=be(o,"g",{class:!0});var a=P(t);for(let c=0;c<e.length;c+=1)e[c].l(a);a.forEach(k),this.h()},h(){E(t,"class","scatter-group")},m(o,a){D(o,t,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null)},p(o,[a]){if(a&511){l=o[3];let c;for(c=0;c<l.length;c+=1){const g=ji(o,l,c);e[c]?e[c].p(g,a):(e[c]=el(g),e[c].c(),e[c].m(t,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=l.length}},i:oe,o:oe,d(o){o&&k(t),Pe(e,o)}}}function Uu(r,t,l){let e,o,a,c,g,m;const{data:u,xGet:n,yGet:i,zGet:f,xScale:s,yScale:d}=tt("LayerCake");V(r,u,_=>l(3,e=_)),V(r,n,_=>l(4,o=_)),V(r,i,_=>l(6,c=_)),V(r,f,_=>l(8,m=_)),V(r,s,_=>l(5,a=_)),V(r,d,_=>l(7,g=_));let{r:h=5}=t,{stroke:v="#000"}=t,{strokeWidth:y=0}=t;return r.$$set=_=>{"r"in _&&l(0,h=_.r),"stroke"in _&&l(1,v=_.stroke),"strokeWidth"in _&&l(2,y=_.strokeWidth)},[h,v,y,e,o,a,c,g,m,u,n,i,f,s,d]}class Nl extends de{constructor(t){super(),me(this,t,Uu,Bu,ge,{r:0,stroke:1,strokeWidth:2})}}function nl(r,t,l){const e=r.slice();return e[9]=t[l],e}function tl(r){let t,l,e,o,a,c=r[6](r[9])+"",g,m;return{c(){t=I("div"),l=I("div"),o=U(),a=I("div"),g=H(c),m=U(),this.h()},l(u){t=A(u,"DIV",{class:!0});var n=P(t);l=A(n,"DIV",{class:!0,style:!0}),P(l).forEach(k),o=F(n),a=A(n,"DIV",{class:!0});var i=P(a);g=G(i,c),i.forEach(k),m=F(n),n.forEach(k),this.h()},h(){E(l,"class",e="chip chip__"+r[0]+" svelte-1vzpanm"),ie(l,"background",r[0]==="line"?`linear-gradient(-45deg, #ffffff 40%, ${r[3](r[9])} 41%, ${r[3](r[9])} 59%, #ffffff 60%)`:r[3](r[9])),E(a,"class","name svelte-1vzpanm"),E(t,"class","key-item svelte-1vzpanm")},m(u,n){D(u,t,n),T(t,l),T(t,o),T(t,a),T(a,g),T(t,m)},p(u,n){n&1&&e!==(e="chip chip__"+u[0]+" svelte-1vzpanm")&&E(l,"class",e),n&13&&ie(l,"background",u[0]==="line"?`linear-gradient(-45deg, #ffffff 40%, ${u[3](u[9])} 41%, ${u[3](u[9])} 59%, #ffffff 60%)`:u[3](u[9])),n&4&&c!==(c=u[6](u[9])+"")&&Ne(g,c)},d(u){u&&k(t)}}}function Fu(r){let t,l=r[2],e=[];for(let o=0;o<l.length;o+=1)e[o]=tl(nl(r,l,o));return{c(){t=I("div");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){t=A(o,"DIV",{class:!0,style:!0});var a=P(t);for(let c=0;c<e.length;c+=1)e[c].l(a);a.forEach(k),this.h()},h(){E(t,"class","key grid-cols-1 svelte-1vzpanm"),ie(t,"justify-content",r[1]==="end"?"flex-end":r[1])},m(o,a){D(o,t,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null)},p(o,[a]){if(a&77){l=o[2];let c;for(c=0;c<l.length;c+=1){const g=nl(o,l,c);e[c]?e[c].p(g,a):(e[c]=tl(g),e[c].c(),e[c].m(t,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=l.length}a&2&&ie(t,"justify-content",o[1]==="end"?"flex-end":o[1])},i:oe,o:oe,d(o){o&&k(t),Pe(e,o)}}}function Ku(r){return String(r).replace(/^\w/,t=>t.toUpperCase())}function Qu(r,t,l){let e,o,{shape:a="square"}=t,{align:c="start"}=t,{lookup:g=void 0}=t,{capitalize:m=!0}=t;const{zDomain:u,zScale:n}=tt("LayerCake");V(r,u,f=>l(2,e=f)),V(r,n,f=>l(3,o=f));function i(f){return g?typeof g=="function"?g(f):g[f]||f:m===!0?Ku(f):f}return r.$$set=f=>{"shape"in f&&l(0,a=f.shape),"align"in f&&l(1,c=f.align),"lookup"in f&&l(7,g=f.lookup),"capitalize"in f&&l(8,m=f.capitalize)},[a,c,e,o,u,n,i,g,m]}class Yu extends de{constructor(t){super(),me(this,t,Qu,Fu,ge,{shape:0,align:1,lookup:7,capitalize:8})}}function Zu(r){let t,l,e;return l=new Lr({props:{x:r[3],y:Rl,z:Cr,yScale:hl(),yDomain:r[6],xScale:Dr(),xDomain:r[2],zScale:it(),zRange:r[8],data:r[0],$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){t=I("div"),M(l.$$.fragment),this.h()},l(o){t=A(o,"DIV",{class:!0,style:!0});var a=P(t);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){E(t,"class","chart-container col-span-6 svelte-b6xev8"),ie(t,"height",r[7]+"px")},m(o,a){D(o,t,a),S(l,t,null),e=!0},p(o,a){const c={};a&8&&(c.x=o[3]),a&64&&(c.yDomain=o[6]),a&4&&(c.xDomain=o[2]),a&1&&(c.data=o[0]),a&32786&&(c.$$scope={dirty:a,ctx:o}),l.$set(c),(!e||a&128)&&ie(t,"height",o[7]+"px")},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(t),j(l)}}}function Ju(r){let t,l,e;return l=new Lr({props:{x:r[3],y:Rl,z:Cr,yScale:hl(),yDomain:r[6],xScale:Dr(),xDomain:r[2],zScale:it(),zRange:r[8],data:r[0],$$slots:{default:[es]},$$scope:{ctx:r}}}),{c(){t=I("div"),M(l.$$.fragment),this.h()},l(o){t=A(o,"DIV",{class:!0,style:!0});var a=P(t);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){E(t,"class","chart-container col-span-5 svelte-b6xev8"),ie(t,"height",r[7]+"px")},m(o,a){D(o,t,a),S(l,t,null),e=!0},p(o,a){const c={};a&8&&(c.x=o[3]),a&64&&(c.yDomain=o[6]),a&4&&(c.xDomain=o[2]),a&1&&(c.data=o[0]),a&32786&&(c.$$scope={dirty:a,ctx:o}),l.$set(c),(!e||a&128)&&ie(t,"height",o[7]+"px")},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(t),j(l)}}}function Xu(r){let t,l,e,o;return t=new El({props:{ticks:r[1],formatTick:r[14],xAxisTitle:r[4]+"/L"}}),e=new xl({}),{c(){M(t.$$.fragment),l=U(),M(e.$$.fragment)},l(a){$(t.$$.fragment,a),l=F(a),$(e.$$.fragment,a)},m(a,c){S(t,a,c),D(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&2&&(g.ticks=a[1]),c&16&&(g.xAxisTitle=a[4]+"/L"),t.$set(g)},i(a){o||(C(t.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(t.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(t,a),a&&k(l),j(e,a)}}}function Mu(r){let t,l;return t=new Nl({props:{r:"6.5"}}),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function $u(r){let t,l,e,o;return t=new tr({props:{$$slots:{default:[Xu]},$$scope:{ctx:r}}}),e=new tr({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){M(t.$$.fragment),l=U(),M(e.$$.fragment)},l(a){$(t.$$.fragment,a),l=F(a),$(e.$$.fragment,a)},m(a,c){S(t,a,c),D(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&32786&&(g.$$scope={dirty:c,ctx:a}),t.$set(g);const m={};c&32768&&(m.$$scope={dirty:c,ctx:a}),e.$set(m)},i(a){o||(C(t.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(t.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(t,a),a&&k(l),j(e,a)}}}function Su(r){let t,l,e,o;return t=new El({props:{ticks:r[1],formatTick:r[13],xAxisTitle:r[4]+"/L"}}),e=new xl({}),{c(){M(t.$$.fragment),l=U(),M(e.$$.fragment)},l(a){$(t.$$.fragment,a),l=F(a),$(e.$$.fragment,a)},m(a,c){S(t,a,c),D(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&2&&(g.ticks=a[1]),c&16&&(g.xAxisTitle=a[4]+"/L"),t.$set(g)},i(a){o||(C(t.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(t.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(t,a),a&&k(l),j(e,a)}}}function ju(r){let t,l;return t=new Nl({props:{r:"6.5"}}),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function es(r){let t,l,e,o;return t=new tr({props:{$$slots:{default:[Su]},$$scope:{ctx:r}}}),e=new tr({props:{$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){M(t.$$.fragment),l=U(),M(e.$$.fragment)},l(a){$(t.$$.fragment,a),l=F(a),$(e.$$.fragment,a)},m(a,c){S(t,a,c),D(a,l,c),S(e,a,c),o=!0},p(a,c){const g={};c&32786&&(g.$$scope={dirty:c,ctx:a}),t.$set(g);const m={};c&32768&&(m.$$scope={dirty:c,ctx:a}),e.$set(m)},i(a){o||(C(t.$$.fragment,a),C(e.$$.fragment,a),o=!0)},o(a){W(t.$$.fragment,a),W(e.$$.fragment,a),o=!1},d(a){j(t,a),a&&k(l),j(e,a)}}}function rl(r){let t,l,e;return l=new Lr({props:{z:Cr,zScale:it(),zRange:r[8],data:r[0],$$slots:{default:[ns]},$$scope:{ctx:r}}}),{c(){t=I("div"),M(l.$$.fragment),this.h()},l(o){t=A(o,"DIV",{class:!0});var a=P(t);$(l.$$.fragment,a),a.forEach(k),this.h()},h(){E(t,"class","col-span-1")},m(o,a){D(o,t,a),S(l,t,null),e=!0},p(o,a){const c={};a&1&&(c.data=o[0]),a&32768&&(c.$$scope={dirty:a,ctx:o}),l.$set(c)},i(o){e||(C(l.$$.fragment,o),e=!0)},o(o){W(l.$$.fragment,o),e=!1},d(o){o&&k(t),j(l)}}}function ns(r){let t,l;return t=new Yu({props:{align:"center",shape:"circle"}}),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function ts(r){let t,l,e,o,a;const c=[Ju,Zu],g=[];function m(n,i){return n[5]?0:1}l=m(r),e=g[l]=c[l](r);let u=r[5]&&rl(r);return{c(){t=I("div"),e.c(),o=U(),u&&u.c(),this.h()},l(n){t=A(n,"DIV",{class:!0});var i=P(t);e.l(i),o=F(i),u&&u.l(i),i.forEach(k),this.h()},h(){E(t,"class","grid-container grid grid-cols-6")},m(n,i){D(n,t,i),g[l].m(t,null),T(t,o),u&&u.m(t,null),a=!0},p(n,[i]){let f=l;l=m(n),l===f?g[l].p(n,i):(Re(),W(g[f],1,1,()=>{g[f]=null}),Te(),e=g[l],e?e.p(n,i):(e=g[l]=c[l](n),e.c()),C(e,1),e.m(t,o)),n[5]?u?(u.p(n,i),i&32&&C(u,1)):(u=rl(n),u.c(),C(u,1),u.m(t,null)):u&&(Re(),W(u,1,1,()=>{u=null}),Te())},i(n){a||(C(e),C(u),a=!0)},o(n){W(e),W(u),a=!1},d(n){n&&k(t),g[l].d(),u&&u.d()}}}const Rl="sampleName",Cr="group";function rs(r,t,l){let e,o,{plotData:a}=t,{titerMethod:c}=t;const g=["#56B4E9","#E69F00","#009E73","#F0E442","#0072B2","#D55E00","#CC79A7","#000000"];let m,u,n,i,f,s,d,h;const v=_=>"1e"+Math.log10(_),y=_=>"1e"+Math.log10(_);return r.$$set=_=>{"plotData"in _&&l(0,a=_.plotData),"titerMethod"in _&&l(9,c=_.titerMethod)},r.$$.update=()=>{if(r.$$.dirty&7683){l(1,n=[]),l(3,f=c),l(11,u=0),l(10,m=1/0),l(12,d=[]),a.forEach(_=>{_[c]<m&&l(10,m=_[c]),_[c]>u&&l(11,u=_[c]),!d.includes(_.group)&_.group!=" "&&d.push(_.group)}),l(5,h=d.length>0),l(0,a=a.sort((_,p)=>_.group===p.group?_.sampleName.localeCompare(p.sampleName):_.group.localeCompare(p.group)));for(let _=String(m).split(".")[0].length-2;_<String(u).split(".")[0].length+1;_++)l(1,n=[10**_,...n]);l(1,n=n.reverse()),l(2,i=[n[0],n[n.length-1]]),l(4,s="TCID50"),c=="ms_titer_ul"&&l(4,s="SIN")}r.$$.dirty&1&&l(7,e=a.length*50+100),r.$$.dirty&1&&l(6,o=a.map(_=>_.sampleName))},[a,n,i,f,s,h,o,e,g,c,m,u,d,v,y]}class is extends de{constructor(t){super(),me(this,t,rs,ts,ge,{plotData:0,titerMethod:9})}}const ls=r=>({}),il=r=>({});function os(r){let t,l,e,o,a,c,g,m,u,n;const i=r[4].header,f=Ye(i,r,r[3],il),s=r[4].default,d=Ye(s,r,r[3],null);return{c(){t=I("div"),l=U(),e=I("div"),o=I("div"),a=H(""),c=U(),f&&f.c(),g=U(),d&&d.c(),this.h()},l(h){t=A(h,"DIV",{class:!0}),P(t).forEach(k),l=F(h),e=A(h,"DIV",{class:!0,role:!0,"aria-modal":!0});var v=P(e);o=A(v,"DIV",{class:!0,autofocus:!0});var y=P(o);a=G(y,""),y.forEach(k),c=F(v),f&&f.l(v),g=F(v),d&&d.l(v),v.forEach(k),this.h()},h(){E(t,"class","modal-background svelte-3wiyh3"),E(o,"class","xclose svelte-3wiyh3"),E(o,"autofocus",""),E(e,"class","modal svelte-3wiyh3"),E(e,"role","dialog"),E(e,"aria-modal","true")},m(h,v){D(h,t,v),D(h,l,v),D(h,e,v),T(e,o),T(o,a),T(e,c),f&&f.m(e,null),T(e,g),d&&d.m(e,null),r[5](e),m=!0,o.focus(),u||(n=[pe(window,"keydown",r[2]),pe(t,"click",r[1]),pe(o,"click",r[1])],u=!0)},p(h,[v]){f&&f.p&&(!m||v&8)&&Ze(f,i,h,h[3],m?Xe(i,h[3],v,ls):Je(h[3]),il),d&&d.p&&(!m||v&8)&&Ze(d,s,h,h[3],m?Xe(s,h[3],v,null):Je(h[3]),null)},i(h){m||(C(f,h),C(d,h),m=!0)},o(h){W(f,h),W(d,h),m=!1},d(h){h&&k(t),h&&k(l),h&&k(e),f&&f.d(h),d&&d.d(h),r[5](null),u=!1,rr(n)}}}function fs(r,t,l){let{$$slots:e={},$$scope:o}=t;const a=et(),c=()=>a("close");let g;const m=i=>{if(i.key==="Escape"){c();return}if(i.key==="Tab"){const f=g.querySelectorAll("*"),s=Array.from(f).filter(h=>h.tabIndex>=0);let d=s.indexOf(document.activeElement);d===-1&&i.shiftKey&&(d=0),d+=s.length+(i.shiftKey?-1:1),d%=s.length,s[d].focus(),i.preventDefault()}},u=typeof document<"u"&&document.activeElement;u&&Sl(()=>{u.focus()});function n(i){Xt[i?"unshift":"push"](()=>{g=i,l(0,g)})}return r.$$set=i=>{"$$scope"in i&&l(3,o=i.$$scope)},[g,c,m,o,e,n]}class us extends de{constructor(t){super(),me(this,t,fs,os,ge,{})}}function ll(r){let t,l;return t=new us({props:{$$slots:{default:[ss]},$$scope:{ctx:r}}}),t.$on("close",r[14]),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p(e,o){const a={};o&32768&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function ss(r){let t,l,e,o,a,c,g,m,u,n,i,f,s,d,h,v,y,_,p,b,w,N,R,z,O,L,q,K,B,Y,ne,te,Z,le,ee,se,ae,ce,fe,ke;return{c(){t=I("h1"),l=H("Titer Calculator Settings:"),e=H(`

			The following settings can be adjusted to match the experimental parameters.
			`),o=I("ul"),a=I("li"),c=H("Volume (L): Specify the infection volume in the first row (row A)."),g=U(),m=I("li"),u=H("Dilution: Specify the dilution factor between successive rows."),n=U(),i=I("li"),f=H("Method: Specify the method for computing the viral titers."),s=U(),d=I("br"),h=U(),v=I("h1"),y=H("Method references:"),_=U(),p=I("ul"),b=I("li"),w=I("strong"),N=H("Reed-Meunch"),R=H(": The Reed-Muench calculation is based off the Bloom Lab "),z=I("a"),O=H("implementation"),L=H(", originally described in "),q=I("a"),K=H("Reed and Meunch, 1938"),B=H("."),Y=U(),ne=I("li"),te=I("strong"),Z=H("MidSin"),le=H(": The MidSin calculation is based off the original "),ee=I("a"),se=H("implementation"),ae=H(", described in detail in "),ce=I("a"),fe=H("Cresta et al, 2021"),ke=H("."),this.h()},l(J){t=A(J,"H1",{class:!0});var he=P(t);l=G(he,"Titer Calculator Settings:"),he.forEach(k),e=G(J,`

			The following settings can be adjusted to match the experimental parameters.
			`),o=A(J,"UL",{class:!0});var we=P(o);a=A(we,"LI",{});var ot=P(a);c=G(ot,"Volume (L): Specify the infection volume in the first row (row A)."),ot.forEach(k),g=F(we),m=A(we,"LI",{});var Tn=P(m);u=G(Tn,"Dilution: Specify the dilution factor between successive rows."),Tn.forEach(k),n=F(we),i=A(we,"LI",{});var zn=P(i);f=G(zn,"Method: Specify the method for computing the viral titers."),zn.forEach(k),we.forEach(k),s=F(J),d=A(J,"BR",{}),h=F(J),v=A(J,"H1",{class:!0});var qn=P(v);y=G(qn,"Method references:"),qn.forEach(k),_=F(J),p=A(J,"UL",{class:!0});var Me=P(p);b=A(Me,"LI",{});var ze=P(b);w=A(ze,"STRONG",{});var rn=P(w);N=G(rn,"Reed-Meunch"),rn.forEach(k),R=G(ze,": The Reed-Muench calculation is based off the Bloom Lab "),z=A(ze,"A",{href:!0,class:!0});var ln=P(z);O=G(ln,"implementation"),ln.forEach(k),L=G(ze,", originally described in "),q=A(ze,"A",{href:!0,class:!0});var Ve=P(q);K=G(Ve,"Reed and Meunch, 1938"),Ve.forEach(k),B=G(ze,"."),ze.forEach(k),Y=F(Me),ne=A(Me,"LI",{});var Ee=P(ne);te=A(Ee,"STRONG",{});var $e=P(te);Z=G($e,"MidSin"),$e.forEach(k),le=G(Ee,": The MidSin calculation is based off the original "),ee=A(Ee,"A",{href:!0,class:!0});var We=P(ee);se=G(We,"implementation"),We.forEach(k),ae=G(Ee,", described in detail in "),ce=A(Ee,"A",{href:!0,class:!0});var He=P(ce);fe=G(He,"Cresta et al, 2021"),He.forEach(k),ke=G(Ee,"."),Ee.forEach(k),Me.forEach(k),this.h()},h(){E(t,"class","svelte-1d76pqs"),E(o,"class","list-disc svelte-1d76pqs"),E(v,"class","svelte-1d76pqs"),E(z,"href","https://github.com/jbloomlab/reedmuenchcalculator"),E(z,"class","svelte-1d76pqs"),E(q,"href","https://doi.org/10.1093/oxfordjournals.aje.a118408"),E(q,"class","svelte-1d76pqs"),E(ee,"href","https://github.com/cbeauc/midSIN"),E(ee,"class","svelte-1d76pqs"),E(ce,"href","https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1009480"),E(ce,"class","svelte-1d76pqs"),E(p,"class","list-disc svelte-1d76pqs")},m(J,he){D(J,t,he),T(t,l),D(J,e,he),D(J,o,he),T(o,a),T(a,c),T(o,g),T(o,m),T(m,u),T(o,n),T(o,i),T(i,f),D(J,s,he),D(J,d,he),D(J,h,he),D(J,v,he),T(v,y),D(J,_,he),D(J,p,he),T(p,b),T(b,w),T(w,N),T(b,R),T(b,z),T(z,O),T(b,L),T(b,q),T(q,K),T(b,B),T(p,Y),T(p,ne),T(ne,te),T(te,Z),T(ne,le),T(ne,ee),T(ee,se),T(ne,ae),T(ne,ce),T(ce,fe),T(ne,ke)},p:oe,d(J){J&&k(t),J&&k(e),J&&k(o),J&&k(s),J&&k(d),J&&k(h),J&&k(v),J&&k(_),J&&k(p)}}}function ol(r){let t,l,e,o,a,c;t=new is({props:{plotData:r[6],titerMethod:r[5]}}),e=new So({props:{data:r[0]}});let g=r[1].length>0&&fl(r);return{c(){M(t.$$.fragment),l=U(),M(e.$$.fragment),o=U(),g&&g.c(),a=_e()},l(m){$(t.$$.fragment,m),l=F(m),$(e.$$.fragment,m),o=F(m),g&&g.l(m),a=_e()},m(m,u){S(t,m,u),D(m,l,u),S(e,m,u),D(m,o,u),g&&g.m(m,u),D(m,a,u),c=!0},p(m,u){const n={};u&64&&(n.plotData=m[6]),u&32&&(n.titerMethod=m[5]),t.$set(n);const i={};u&1&&(i.data=m[0]),e.$set(i),m[1].length>0?g?g.p(m,u):(g=fl(m),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(m){c||(C(t.$$.fragment,m),C(e.$$.fragment,m),c=!0)},o(m){W(t.$$.fragment,m),W(e.$$.fragment,m),c=!1},d(m){j(t,m),m&&k(l),j(e,m),m&&k(o),g&&g.d(m),m&&k(a)}}}function fl(r){let t,l,e,o,a;return{c(){t=I("h3"),l=H("Warnings"),e=H(`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=H(r[7]),a=H("."),this.h()},l(c){t=A(c,"H3",{class:!0});var g=P(t);l=G(g,"Warnings"),g.forEach(k),e=G(c,`
			The following samples had fewer than 2 replicates and are not displayed in the table or plot: `),o=G(c,r[7]),a=G(c,"."),this.h()},h(){E(t,"class","warning svelte-1d76pqs")},m(c,g){D(c,t,g),T(t,l),D(c,e,g),D(c,o,g),D(c,a,g)},p(c,g){g&128&&Ne(o,c[7])},d(c){c&&k(t),c&&k(e),c&&k(o),c&&k(a)}}}function as(r){let t,l,e,o,a,c,g,m,u,n,i,f,s,d,h,v,y,_,p,b,w,N,R,z,O,L=r[8]&&ll(r),q=r[2]!=null&&ol(r);return{c(){t=I("div"),l=I("div"),e=I("div"),o=H(`Volume (L):
			`),a=I("input"),c=U(),g=I("div"),m=H(`Dilution:
			`),u=I("input"),n=U(),i=I("div"),f=H(`Method:
			`),s=I("select"),d=I("option"),h=H("Reed-Meunch"),v=I("option"),y=H("MidSin"),_=U(),p=I("div"),b=H(""),w=U(),L&&L.c(),N=U(),q&&q.c(),this.h()},l(K){t=A(K,"DIV",{class:!0});var B=P(t);l=A(B,"DIV",{class:!0});var Y=P(l);e=A(Y,"DIV",{class:!0});var ne=P(e);o=G(ne,`Volume (L):
			`),a=A(ne,"INPUT",{class:!0,type:!0,id:!0,min:!0}),ne.forEach(k),c=F(Y),g=A(Y,"DIV",{class:!0});var te=P(g);m=G(te,`Dilution:
			`),u=A(te,"INPUT",{class:!0,type:!0,id:!0,min:!0}),te.forEach(k),n=F(Y),i=A(Y,"DIV",{class:!0});var Z=P(i);f=G(Z,`Method:
			`),s=A(Z,"SELECT",{class:!0,name:!0,id:!0});var le=P(s);d=A(le,"OPTION",{});var ee=P(d);h=G(ee,"Reed-Meunch"),ee.forEach(k),v=A(le,"OPTION",{});var se=P(v);y=G(se,"MidSin"),se.forEach(k),le.forEach(k),_=F(Z),p=A(Z,"DIV",{class:!0});var ae=P(p);b=G(ae,""),ae.forEach(k),Z.forEach(k),Y.forEach(k),w=F(B),L&&L.l(B),N=F(B),q&&q.l(B),B.forEach(k),this.h()},h(){E(a,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),E(a,"type","number"),E(a,"id","volume"),E(a,"min","1"),E(e,"class","CalcOpts"),E(u,"class","appearance-none bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white svelte-1d76pqs"),E(u,"type","number"),E(u,"id","dilution"),E(u,"min","1"),E(g,"class","CalcOpts"),d.__value="rm_titer",d.value=d.__value,v.__value="ms_titer_ul",v.value=v.__value,E(s,"class","bg-gray-200 text-gray-700 border rounded py-1 px-2 leading-tight focus:outline-none focus:bg-white"),E(s,"name","method"),E(s,"id","method"),r[5]===void 0&&nt(()=>r[12].call(s)),E(p,"class","info svelte-1d76pqs"),E(i,"class","CalcOpts"),E(l,"class","calcmenu grid 1opt:grid-cols-1 2opt:grid-cols-2 3opt:grid-cols-3 gap-2 svelte-1d76pqs"),E(t,"class","container svelte-1d76pqs")},m(K,B){D(K,t,B),T(t,l),T(l,e),T(e,o),T(e,a),De(a,r[4]),T(l,c),T(l,g),T(g,m),T(g,u),De(u,r[3]),T(l,n),T(l,i),T(i,f),T(i,s),T(s,d),T(d,h),T(s,v),T(v,y),xn(s,r[5]),T(i,_),T(i,p),T(p,b),T(t,w),L&&L.m(t,null),T(t,N),q&&q.m(t,null),R=!0,z||(O=[pe(a,"input",r[10]),pe(u,"input",r[11]),pe(s,"change",r[12]),pe(p,"click",r[13])],z=!0)},p(K,[B]){B&16&&Mt(a.value)!==K[4]&&De(a,K[4]),B&8&&Mt(u.value)!==K[3]&&De(u,K[3]),B&32&&xn(s,K[5]),K[8]?L?(L.p(K,B),B&256&&C(L,1)):(L=ll(K),L.c(),C(L,1),L.m(t,N)):L&&(Re(),W(L,1,1,()=>{L=null}),Te()),K[2]!=null?q?(q.p(K,B),B&4&&C(q,1)):(q=ol(K),q.c(),C(q,1),q.m(t,null)):q&&(Re(),W(q,1,1,()=>{q=null}),Te())},i(K){R||(C(L),C(q),R=!0)},o(K){W(L),W(q),R=!1},d(K){K&&k(t),L&&L.d(),q&&q.d(),z=!1,rr(O)}}}function cs(r,t,l){let e,o,a,c;V(r,Qr,_=>l(3,o=_)),V(r,Kr,_=>l(4,a=_)),V(r,Oe,_=>l(9,c=_));let g="rm_titer",m,u,n,i,f=!1;function s(){a=Mt(this.value),Kr.set(a)}function d(){o=Mt(this.value),Qr.set(o)}function h(){g=xr(this),l(5,g)}const v=()=>l(8,f=!0),y=()=>l(8,f=!1);return r.$$.update=()=>{r.$$.dirty&536&&l(2,e=Jo(c,a,o)),r.$$.dirty&7&&e!=null&&(l(0,m=e.filter(_=>_.nrep>1)),l(1,u=e.filter(_=>_.nrep<2)),l(6,n=m.filter(_=>_.rm_titer>0)),l(7,i=u.map(_=>_.sample).join(", ")),e.forEach(_=>{let p=_.sample.split("-");p.length>1?(_.group=p[0],_.sampleName=p[1]):(_.group=" ",_.sampleName=_.sample)}))},[m,u,e,o,a,g,n,i,f,c,s,d,h,v,y]}class ds extends de{constructor(t){super(),me(this,t,cs,as,ge,{})}}const ms=""+new URL("../assets/github-mark.7a0dd11e.svg",import.meta.url).href;function gs(r){let t,l;return t=new ds({}),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function hs(r){let t,l;return t=new Wo({}),t.$on("add",r[3]),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function vs(r){let t,l;return t=new Ao({}),t.$on("add",r[3]),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function _s(r){let t,l;return t=new Eo({}),t.$on("edit",r[4]),{c(){M(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){S(t,e,o),l=!0},p:oe,i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){W(t.$$.fragment,e),l=!1},d(e){j(t,e)}}}function ps(r){let t,l,e,o,a,c,g,m,u,n;c=new Ro({props:{activeItem:r[0],items:r[1]}}),c.$on("tabChange",r[2]);const i=[_s,vs,hs,gs],f=[];function s(d,h){return d[0]==="All Plates"?0:d[0]==="Add New Plate"?1:d[0]==="Edit Plate"?2:d[0]==="Results"?3:-1}return~(m=s(r))&&(u=f[m]=i[m](r)),{c(){t=I("main"),l=I("a"),e=I("img"),a=U(),M(c.$$.fragment),g=U(),u&&u.c(),this.h()},l(d){t=A(d,"MAIN",{class:!0});var h=P(t);l=A(h,"A",{href:!0});var v=P(l);e=A(v,"IMG",{class:!0,src:!0}),v.forEach(k),a=F(h),$(c.$$.fragment,h),g=F(h),u&&u.l(h),h.forEach(k),this.h()},h(){E(e,"class","github svelte-y2284r"),jl(e.src,o=ms)||E(e,"src",o),E(l,"href","https://github.com/andrewwbutler/titercalculator/"),E(t,"class","svelte-y2284r")},m(d,h){D(d,t,h),T(t,l),T(l,e),T(t,a),S(c,t,null),T(t,g),~m&&f[m].m(t,null),n=!0},p(d,[h]){const v={};h&1&&(v.activeItem=d[0]),c.$set(v);let y=m;m=s(d),m===y?~m&&f[m].p(d,h):(u&&(Re(),W(f[y],1,1,()=>{f[y]=null}),Te()),~m?(u=f[m],u?u.p(d,h):(u=f[m]=i[m](d),u.c()),C(u,1),u.m(t,null)):u=null)},i(d){n||(C(c.$$.fragment,d),C(u),n=!0)},o(d){W(c.$$.fragment,d),W(u),n=!1},d(d){d&&k(t),j(c),~m&&f[m].d()}}}function ys(r,t,l){let e,o;V(r,Oe,n=>l(5,e=n)),V(r,en,n=>l(6,o=n));let a=["All Plates","Add New Plate","Edit Plate","Results"],c="All Plates";return[c,a,n=>{if(n.detail.currentTab=="Edit Plate"&n.detail.newTab!="EditPlate"&&o!=-1){let i=e.find(f=>f.id==o);i.added=!0,en.set(-1)}n.detail.newTab=="Results"&e.length<2||n.detail.newTab=="Edit Plate"&e.length<2?l(0,c=n.detail.currentTab):l(0,c=n.detail.newTab)},n=>{l(0,c="All Plates")},n=>{l(0,c="Edit Plate"),en.set(n.detail.plate.id)}]}class ks extends de{constructor(t){super(),me(this,t,ys,ps,ge,{})}}export{ks as default};
